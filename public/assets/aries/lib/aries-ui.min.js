define(function(require,exports,modules){"require:nomunge,exports:nomunge,modules:nomunge";require("ui-core"),require("ui-widget"),require("ui-mouse"),require("ui-position"),require("ui-resizable"),require("ui-draggable"),require("ui-droppable"),require("ui-sortable"),require("ui-dialog"),require("ui-messagebox"),require("ui-calendar"),require("ui-checkbox"),require("ui-combo"),require("ui-textpopup"),require("ui-radio"),require("ui-search"),require("ui-flip"),require("ui-textarea"),require("ui-textfield"),require("ui-panel"),require("ui-menu"),require("ui-tabs"),require("ui-breadcrumb"),require("ui-validate"),require("ui-form"),require("ui-progressbar"),require("ui-tree"),require("ui-grid"),require("ui-popup"),require("ui-tips"),require("ui-pageflow"),require("ui-tpl"),require("ui-slider"),require("ui-offCanvas"),require("ui-irguide"),require("ui-guide"),require("ui-menutree"),require("ui-advcombo"),require("ui-toggle"),require("ui-include")}),define("ui-core",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,element.href&&mapName&&"map"===map.nodeName.toLowerCase()?(img=$("img[usemap='#"+mapName+"']")[0],!!img&&visible(img)):!1):(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}$.ae=$.ae||{},$.ae.version||($.extend($.ae,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},lang:{}}),$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent="absolute"===position,overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);return excludeStaticParent&&"static"===parent.css("position")?!1:overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return"fixed"!==position&&scrollParent.length?scrollParent:$(this[0].ownerDocument||document)},uniqueId:function(){var uuid=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&$(this).removeAttr("id")})}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return void 0===size?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=function(removeData){return function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)}}($.fn.removeData)),$.ae.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.fn.extend({focus:function(orig){return function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):orig.apply(this,arguments)}}($.fn.focus),disableSelection:function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(zIndex){if(void 0!==zIndex)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0}}),$.ae.plugin={add:function(module,option,set){var i,proto=$.ae[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(set&&(allowDisconnected||instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType))for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}})}),define("ui-widget",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;null!=(elem=elems[i]);i++)try{events=$._data(elem,"events"),events&&events.remove&&$(elem).triggerHandler("remove")}catch(e){}orig(elems)}}($.cleanData),$.aeWidget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];return name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.AEWidget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.aeWidget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.aeWidget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.aeWidget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.aeWidget.bridge(name,constructor),constructor},$.aeWidget.extend=function(target){for(var key,value,input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&void 0!==value&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.aeWidget.extend({},target[key],value):$.aeWidget.extend({},value):target[key]=value);return target},$.aeWidget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=widget_slice.call(arguments,1),returnValue=this;return isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);if("instance"===options)return returnValue=instance,!1;if(!instance)if($(this).attr("aeType")===name){$.data(this,fullName,new object(options,this));var instance=$.data(this,fullName);instance&&(instance.options._initial=!0)}else alert("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'");return $.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&void 0!==methodValue?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance")}):(args.length&&(options=$.aeWidget.extend.apply(null,[options].concat(args))),this.each(function(){var instance=$.data(this,fullName);instance?(instance.option(options||{}),instance._init&&"ae-aeDialog"===fullName&&instance._init()):$.data(this,fullName,new object(options,this))})),returnValue}},$.AEWidget=function(){},$.AEWidget._childConstructors=[],$.AEWidget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=widget_uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.aeWidget.extend({},this.options,this._getCreateOptions(),options),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.aeWidget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.aeWidget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return void 0===curOption[key]?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return void 0===this.options[key]?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!value),value&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName),this.bindings=$(this.bindings.not(element).get()),this.focusable=$(this.focusable.not(element).get()),this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event){var callback=this.options[type];if(event=$.Event(event),event.type=type,event.originalEvent)for(var prop,i=$.event.props.length;i;)prop=$.event.props[--i],event[prop]=event.originalEvent[prop];for(var newArgs=[],argLength=arguments.length,i=2;argLength>i;i++)newArgs[i-2]=arguments[i];return argLength>1&&(newArgs[argLength-2]=arguments[1]),!($.isFunction(callback)&&callback.apply(this.element,newArgs)===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.AEWidget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}});$.aeWidget}),define("ui-mouse",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";var mouseHandled=!1;$(document).mouseup(function(){mouseHandled=!1});$.aeWidget("ae.aeMouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){return!0===$.data(event.target,that.widgetName+".preventClickEvent")?($.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel="string"==typeof this.options.cancel&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;return btnIsLeft&&!elIsCancel&&this._mouseCapture(event)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(event)!==!1,!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0)):!0}},_mouseMove:function(event){if(this._mouseMoved){if($.ae.ie&&(!document.documentMode||document.documentMode<9)&&!event.button)return this._mouseUp(event);if(!event.which)return this._mouseUp(event)}return(event.which||event.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted)},_mouseUp:function(event){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),mouseHandled=!1,!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),define("ui-resizable",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeResizable",$.ae.aeMouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(value){return parseInt(value,10)||0},_isNumber:function(value){return!isNaN(parseInt(value,10))},_hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0?!0:(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;if(this.element.addClass("ui-resizable"),$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||($(".popup-resizable-handle",this.element).length?{n:".popup-resizable-n",e:".popup-resizable-e",s:".popup-resizable-s",w:".popup-resizable-w",se:".popup-resizable-se",sw:".popup-resizable-sw",ne:".popup-resizable-ne",nw:".popup-resizable-nw"}:"e,s,se"),this._handles=$(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)handle=$.trim(n[i]),hname="popup-resizable-"+handle,axis=$("<div class='popup-resizable-handle "+hname+"'></div>"),axis.css({zIndex:o.zIndex}),"se"===handle&&axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[handle]=".popup-resizable-"+handle,this.element.append(axis);this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=$(this.handles[i]),this._on(this.handles[i],{mousedown:that._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(axis=$(this.handles[i],this.element),padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth(),padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),target.css(padPos,padWrapper),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".popup-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){that.resizing||(this.className&&(axis=this.className.match(/popup-resizable-(se|sw|ne|nw|n|e|s|w)/i)),that.axis=axis&&axis[1]?axis[1]:"se")}),o.autoHide&&(this._handles.hide(),$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||($(this).removeClass("ui-resizable-autohide"),that._handles.show())}).mouseleave(function(){o.disabled||that.resizing||($(this).addClass("ui-resizable-autohide"),that._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(_destroy(this.element),wrapper=this.element,this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper),wrapper.remove()),this.originalElement.css("resize",this.originalResizeStyle),_destroy(this.originalElement),this},_mouseCapture:function(event){var i,handle,capture=!1;for(i in this.handles)handle=$(this.handles[i])[0],(handle===event.target||$.contains(handle,event.target))&&(capture=!0);return!this.options.disabled&&capture},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,el=this.element;return this.resizing=!0,this._renderProxy(),curleft=this._num(this.helper.css("left")),curtop=this._num(this.helper.css("top")),o.containment&&(curleft+=$(o.containment).scrollLeft()||0,curtop+=$(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:curleft,top:curtop},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()},this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()},this.originalPosition={left:curleft,top:curtop},this.originalMousePosition={left:event.pageX,top:event.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,cursor=$(".popup-resizable-"+this.axis).css("cursor"),$("body").css("cursor","auto"===cursor?this.axis+"-resize":cursor),el.addClass("ui-resizable-resizing"),this._propagate("start",event),!0},_mouseDrag:function(event){var data,props,smp=this.originalMousePosition,a=this.axis,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];return this._updatePrevProperties(),trigger?(data=trigger.apply(this,[event,dx,dy]),this._updateVirtualBoundaries(event.shiftKey),(this._aspectRatio||event.shiftKey)&&(data=this._updateRatio(data,event)),data=this._respectSize(data,event),this._updateCache(data),this._propagate("resize",event),props=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),$.isEmptyObject(props)||(this._updatePrevProperties(),this._trigger("resize",event,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(event){this.resizing=!1;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;return this._helper&&(pr=this._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&this._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null,o.animate||this.element.css($.extend(s,{top:top,left:left})),that.helper.height(that.size.height),that.helper.width(that.size.width),this._helper&&!o.animate&&this._proportionallyResize()),$("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",event),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var props={};return this.position.top!==this.prevPosition.top&&(props.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(props.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(props.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(props.height=this.size.height+"px"),this.helper.css(props),props},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||forceAspectRatio)&&(pMinWidth=b.minHeight*this.aspectRatio,pMinHeight=b.minWidth/this.aspectRatio,pMaxWidth=b.maxHeight*this.aspectRatio,pMaxHeight=b.maxWidth/this.aspectRatio,pMinWidth>b.minWidth&&(b.minWidth=pMinWidth),pMinHeight>b.minHeight&&(b.minHeight=pMinHeight),pMaxWidth<b.maxWidth&&(b.maxWidth=pMaxWidth),pMaxHeight<b.maxHeight&&(b.maxHeight=pMaxHeight)),this._vBoundaries=b},_updateCache:function(data){this.offset=this.helper.offset(),this._isNumber(data.left)&&(this.position.left=data.left),this._isNumber(data.top)&&(this.position.top=data.top),this._isNumber(data.height)&&(this.size.height=data.height),this._isNumber(data.width)&&(this.size.width=data.width)},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;return this._isNumber(data.height)?data.width=data.height*this.aspectRatio:this._isNumber(data.width)&&(data.height=data.width/this.aspectRatio),"sw"===a&&(data.left=cpos.left+(csize.width-data.width),data.top=null),"nw"===a&&(data.top=cpos.top+(csize.height-data.height),data.left=cpos.left+(csize.width-data.width)),data},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=this._isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=this._isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=this._isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=this._isNumber(data.height)&&o.minHeight&&o.minHeight>data.height,dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);return isminw&&(data.width=o.minWidth),isminh&&(data.height=o.minHeight),ismaxw&&(data.width=o.maxWidth),ismaxh&&(data.height=o.maxHeight),isminw&&cw&&(data.left=dw-o.minWidth),ismaxw&&cw&&(data.left=dw-o.maxWidth),isminh&&ch&&(data.top=dh-o.minHeight),ismaxh&&ch&&(data.top=dh-o.maxHeight),data.width||data.height||data.left||!data.top?data.width||data.height||data.top||!data.left||(data.left=null):data.top=null,data},_getPaddingPlusBorderDimensions:function(element){for(var i=0,widths=[],borders=[element.css("borderTopWidth"),element.css("borderRightWidth"),element.css("borderBottomWidth"),element.css("borderLeftWidth")],paddings=[element.css("paddingTop"),element.css("paddingRight"),element.css("paddingBottom"),element.css("paddingLeft")];4>i;i++)widths[i]=parseInt(borders[i],10)||0,widths[i]+=parseInt(paddings[i],10)||0;return{height:widths[0]+widths[2],width:widths[1]+widths[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var prel,i=0,element=this.helper||this.element;i<this._proportionallyResizeElements.length;i++)prel=this._proportionallyResizeElements[i],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(prel)),prel.css({height:element.height()-this.outerDimensions.height||0,width:element.width()-this.outerDimensions.width||0})},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset(),this._helper?(this.helper=this.helper||$("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(event,dx){return{width:this.originalSize.width+dx}},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ae.plugin.call(this,n,[event,this.ui()]),"resize"!==n&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,
position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),$.ae.plugin.add("aeResizable","animate",{stop:function(event){var that=$(this).aeResizable("instance"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&that._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};pr&&pr.length&&$(pr[0]).css({width:data.width,height:data.height}),that._updateCache(data),that._propagate("resize",event)}})}}),$.ae.plugin.add("aeResizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).aeResizable("instance"),o=that.options,el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;ce&&(that.containerElement=$(ce),/document/.test(oc)||oc===document?(that.containerOffset={left:0,top:0},that.containerPosition={left:0,top:0},that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}):(element=$(ce),p=[],$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=that._num(element.css("padding"+name))}),that.containerOffset=element.offset(),that.containerPosition=element.position(),that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]},co=that.containerOffset,ch=that.containerSize.height,cw=that.containerSize.width,width=that._hasScroll(ce,"left")?ce.scrollWidth:cw,height=that._hasScroll(ce)?ce.scrollHeight:ch,that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}))},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).aeResizable("instance"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement,continueResize=!0;ce[0]!==document&&/static/.test(ce.css("position"))&&(cop=co),cp.left<(that._helper?co.left:0)&&(that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left),pRatio&&(that.size.height=that.size.width/that.aspectRatio,continueResize=!1),that.position.left=o.helper?co.left:0),cp.top<(that._helper?co.top:0)&&(that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top),pRatio&&(that.size.width=that.size.height*that.aspectRatio,continueResize=!1),that.position.top=that._helper?co.top:0),isParent=that.containerElement.get(0)===that.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position")),isParent&&isOffsetRelative?(that.offset.left=that.parentData.left+that.position.left,that.offset.top=that.parentData.top+that.position.top):(that.offset.left=that.element.offset().left,that.offset.top=that.element.offset().top),woset=Math.abs(that.sizeDiff.width+(that._helper?that.offset.left-cop.left:that.offset.left-co.left)),hoset=Math.abs(that.sizeDiff.height+(that._helper?that.offset.top-cop.top:that.offset.top-co.top)),woset+that.size.width>=that.parentData.width&&(that.size.width=that.parentData.width-woset,pRatio&&(that.size.height=that.size.width/that.aspectRatio,continueResize=!1)),hoset+that.size.height>=that.parentData.height&&(that.size.height=that.parentData.height-hoset,pRatio&&(that.size.width=that.size.height*that.aspectRatio,continueResize=!1)),continueResize||(that.position.left=that.prevPosition.left,that.position.top=that.prevPosition.top,that.size.width=that.prevSize.width,that.size.height=that.prevSize.height)},stop:function(){var that=$(this).aeResizable("instance"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;that._helper&&!o.animate&&/relative/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h}),that._helper&&!o.animate&&/static/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}}),$.ae.plugin.add("aeResizable","alsoResize",{start:function(){var that=$(this).aeResizable("instance"),o=that.options;$(o.alsoResize).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})},resize:function(event,ui){var that=$(this).aeResizable("instance"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0};$(o.alsoResize).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);sum&&sum>=0&&(style[prop]=sum||null)}),el.css(style)})},stop:function(){$(this).removeData("resizable-alsoresize")}}),$.ae.plugin.add("aeResizable","ghost",{start:function(){var that=$(this).aeResizable("instance"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone(),that.ghost.css({opacity:.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof o.ghost?o.ghost:""),that.ghost.appendTo(that.helper)},resize:function(){var that=$(this).aeResizable("instance");that.ghost&&that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(){var that=$(this).aeResizable("instance");that.ghost&&that.helper&&that.helper.get(0).removeChild(that.ghost.get(0))}}),$.ae.plugin.add("aeResizable","grid",{resize:function(){var outerDimensions,that=$(this).aeResizable("instance"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid="number"==typeof o.grid?[o.grid,o.grid]:o.grid,gridX=grid[0]||1,gridY=grid[1]||1,ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&o.maxWidth<newWidth,isMaxHeight=o.maxHeight&&o.maxHeight<newHeight,isMinWidth=o.minWidth&&o.minWidth>newWidth,isMinHeight=o.minHeight&&o.minHeight>newHeight;o.grid=grid,isMinWidth&&(newWidth+=gridX),isMinHeight&&(newHeight+=gridY),isMaxWidth&&(newWidth-=gridX),isMaxHeight&&(newHeight-=gridY),/^(se|s|e)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight):/^(ne)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.top=op.top-oy):/^(sw)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.left=op.left-ox):((0>=newHeight-gridY||0>=newWidth-gridX)&&(outerDimensions=that._getPaddingPlusBorderDimensions(this)),newHeight-gridY>0?(that.size.height=newHeight,that.position.top=op.top-oy):(newHeight=gridY-outerDimensions.height,that.size.height=newHeight,that.position.top=op.top+os.height-newHeight),newWidth-gridX>0?(that.size.width=newWidth,that.position.left=op.left-ox):(newWidth=gridX-outerDimensions.width,that.size.width=newWidth,that.position.left=op.left+os.width-newWidth))}});$.ae.aeResizable}),define("ui-position",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}function getDimensions(elem){var raw=elem[0];return 9===raw.nodeType?{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}:$.isWindow(raw)?{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}:raw.preventDefault?{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}:{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}$.ae=$.ae||{};var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;$.aePosition={scrollbarWidth:function(){if(void 0!==cachedScrollbarWidth)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];return $("body").append(div),w1=innerDiv.offsetWidth,div.css("overflow","scroll"),w2=innerDiv.offsetWidth,w1===w2&&(w2=div[0].clientWidth),div.remove(),cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX="scroll"===overflowX||"auto"===overflowX&&within.width<within.element[0].scrollWidth,hasOverflowY="scroll"===overflowY||"auto"===overflowY&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.aePosition.scrollbarWidth():0,height:hasOverflowX?$.aePosition.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&9===withinElement[0].nodeType;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow||isDocument?withinElement.width():withinElement.outerWidth(),height:isWindow||isDocument?withinElement.height():withinElement.outerHeight()}}},$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.aePosition.getWithinInfo(options.within),scrollInfo=$.aePosition.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};return dimensions=getDimensions(target),target[0].preventDefault&&(options.at="left top"),targetWidth=dimensions.width,targetHeight=dimensions.height,targetOffset=dimensions.offset,basePosition=$.extend({},targetOffset),$.each(["my","at"],function(){var horizontalOffset,verticalOffset,pos=(options[this]||"").split(" ");1===pos.length&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]),pos[0]=rhorizontal.test(pos[0])?pos[0]:"center",pos[1]=rvertical.test(pos[1])?pos[1]:"center",horizontalOffset=roffset.exec(pos[0]),verticalOffset=roffset.exec(pos[1]),offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0],options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]}),1===collision.length&&(collision[1]=collision[0]),"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());"right"===options.my[0]?position.left-=elemWidth:"center"===options.my[0]&&(position.left-=elemWidth/2),"bottom"===options.my[1]?position.top-=elemHeight:"center"===options.my[1]&&(position.top-=elemHeight/2),position.left+=myOffset[0],position.top+=myOffset[1],supportsOffsetFractions||(position.left=round(position.left),position.top=round(position.top)),collisionPosition={marginLeft:marginLeft,marginTop:marginTop},$.each(["left","top"],function(i,dir){$.ae.aePosition[collision[i]]&&$.ae.aePosition[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}),options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:0>right?"left":left>0?"right":"center",vertical:0>bottom?"top":top>0?"bottom":"middle"};elemWidth>targetWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center"),elemHeight>targetHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle"),max(abs(left),abs(right))>max(abs(top),abs(bottom))?feedback.important="horizontal":feedback.important="vertical",options.using.call(this,props,feedback)}),elem.offset($.extend(position,{using:using}))})},$.ae.aePosition={fit:{left:function(position,data){var newOverRight,within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;data.collisionWidth>outerWidth?overLeft>0&&0>=overRight?(newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset,position.left+=overLeft-newOverRight):overRight>0&&0>=overLeft?position.left=withinOffset:overLeft>overRight?position.left=withinOffset+outerWidth-data.collisionWidth:position.left=withinOffset:overLeft>0?position.left+=overLeft:overRight>0?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var newOverBottom,within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;data.collisionHeight>outerHeight?overTop>0&&0>=overBottom?(newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset,position.top+=overTop-newOverBottom):overBottom>0&&0>=overTop?position.top=withinOffset:overTop>overBottom?position.top=withinOffset+outerHeight-data.collisionHeight:position.top=withinOffset:overTop>0?position.top+=overTop:overBottom>0?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var newOverRight,newOverLeft,within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];0>overLeft?(newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset,(0>newOverRight||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset)):overRight>0&&(newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft,(newOverLeft>0||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset))},top:function(position,data){var newOverTop,newOverBottom,within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top="top"===data.my[1],myOffset=top?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,offset=-2*data.offset[1];0>overTop?(newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset,(0>newOverBottom||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset)):overBottom>0&&(newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop,(newOverTop>0||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset))}},flipfit:{left:function(){$.ae.aePosition.flip.left.apply(this,arguments),$.ae.aePosition.fit.left.apply(this,arguments)},top:function(){$.ae.aePosition.flip.top.apply(this,arguments),$.ae.aePosition.fit.top.apply(this,arguments)}}},function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div),testElementParent=body||document.documentElement,testElementParent.insertBefore(testElement,testElementParent.firstChild),div.style.cssText="position: absolute; left: 10.7432222px;",offsetLeft=$(div).offset().left,supportsOffsetFractions=offsetLeft>10&&11>offsetLeft,testElement.innerHTML="",testElementParent.removeChild(testElement)}();$.ae.aePosition}),define("ui-draggable",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeDraggable",$.ae.aeMouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(key,value){this._super(key,value),"handle"===key&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},destroy:function(){this._destroy()},_mouseCapture:function(event){var o=this.options;return this._blurActiveElement(event),this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(event),this.handle?(this._blockFrames(o.iframeFix===!0?"iframe":o.iframeFix),!0):!1)},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(event){var document=this.document[0];if(this.handleElement.is(event.target))try{document.activeElement&&"body"!==document.activeElement.nodeName.toLowerCase()&&$(document.activeElement).blur()}catch(error){}},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ae.ddmanager&&($.ae.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===$(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(event),this.originalPosition=this.position=this._generatePosition(event,!1),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ae.ddmanager&&!o.dropBehaviour&&$.ae.ddmanager.prepareOffsets(this,event),this._normalizeRightBottom(),this._mouseDrag(event,!0),$.ae.ddmanager&&$.ae.ddmanager.dragStart(this,event),!0)},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top}},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(event,!0),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp({}),!1;this.position=ui.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",$.ae.ddmanager&&$.ae.ddmanager.drag(this,event),!1},_mouseStop:function(event){var that=this,dropped=!1;return $.ae.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ae.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!dropped||"valid"===this.options.revert&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){that._trigger("stop",event)!==!1&&that._clear()}):this._trigger("stop",event)!==!1&&this._clear(),!1},_mouseUp:function(event){return this._unblockFrames(),$.ae.ddmanager&&$.ae.ddmanager.dragStop(this,event),this.handleElement.is(event.target)&&this.element.focus(),$.ae.aeMouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),helperIsFunction&&helper[0]===this.element[0]&&this._setPositionRelative(),helper[0]===this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_isRootNode:function(element){return/(html|body)/i.test(element.tagName)||element===this.document[0]},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(scrollIsRootNode?0:this.scrollParent.scrollTop()),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(scrollIsRootNode?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),c=$(o.containment),ce=c[0],void(ce&&(isUserScrollable=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top)*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)*mod}},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;return scrollIsRootNode&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),constrainPosition&&(this.containment&&(this.relativeContainer?(co=this.relativeContainer.offset(),containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]):containment=this.containment,event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)),o.grid&&(top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left),"y"===o.axis&&(pageX=this.originalPageX),"x"===o.axis&&(pageY=this.originalPageY)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ae.plugin.call(this,type,[event,ui,this],!0),/^(drag|start|stop)/.test(type)&&(this.positionAbs=this._convertPositionTo("absolute"),ui.offset=this.positionAbs),$.AEWidget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ae.plugin.add("aeDraggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[],$(draggable.options.connectToSortable).each(function(){var sortable=$(this).aeSortable("instance");sortable&&!sortable.options.disabled&&(draggable.sortables.push(sortable),
sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=!1,$.each(draggable.sortables,function(){var sortable=this;sortable.isOver?(sortable.isOver=0,draggable.cancelHelperRemoval=!0,sortable.cancelHelperRemoval=!1,sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")},sortable._mouseStop(event),sortable.options.helper=sortable.options._helper):(sortable.cancelHelperRemoval=!0,sortable._trigger("deactivate",event,uiSortable))})},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=!1,sortable=this;sortable.positionAbs=draggable.positionAbs,sortable.helperProportions=draggable.helperProportions,sortable.offset.click=draggable.offset.click,sortable._intersectsWith(sortable.containerCache)&&(innermostIntersecting=!0,$.each(draggable.sortables,function(){return this.positionAbs=draggable.positionAbs,this.helperProportions=draggable.helperProportions,this.offset.click=draggable.offset.click,this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])&&(innermostIntersecting=!1),innermostIntersecting})),innermostIntersecting?(sortable.isOver||(sortable.isOver=1,draggable._parent=ui.helper.parent(),sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",!0),sortable.options._helper=sortable.options.helper,sortable.options.helper=function(){return ui.helper[0]},event.target=sortable.currentItem[0],sortable._mouseCapture(event,!0),sortable._mouseStart(event,!0,!0),sortable.offset.click.top=draggable.offset.click.top,sortable.offset.click.left=draggable.offset.click.left,sortable.offset.parent.left-=draggable.offset.parent.left-sortable.offset.parent.left,sortable.offset.parent.top-=draggable.offset.parent.top-sortable.offset.parent.top,draggable._trigger("toSortable",event),draggable.dropped=sortable.element,$.each(draggable.sortables,function(){this.refreshPositions()}),draggable.currentItem=draggable.element,sortable.fromOutside=draggable),sortable.currentItem&&(sortable._mouseDrag(event),ui.position=sortable.position)):sortable.isOver&&(sortable.isOver=0,sortable.cancelHelperRemoval=!0,sortable.options._revert=sortable.options.revert,sortable.options.revert=!1,sortable._trigger("out",event,sortable._uiHash(sortable)),sortable._mouseStop(event,!0),sortable.options.revert=sortable.options._revert,sortable.options.helper=sortable.options._helper,sortable.placeholder&&sortable.placeholder.remove(),ui.helper.appendTo(draggable._parent),draggable._refreshOffsets(event),ui.position=draggable._generatePosition(event,!0),draggable._trigger("fromSortable",event),draggable.dropped=!1,$.each(draggable.sortables,function(){this.refreshPositions()}))})}}),$.ae.plugin.add("aeDraggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(event,ui,instance){var o=instance.options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ae.plugin.add("aeDraggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui,instance){var o=instance.options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ae.plugin.add("aeDraggable","scroll",{start:function(event,ui,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(event,ui,i){var o=i.options,scrolled=!1,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];scrollParent!==document&&"HTML"!==scrollParent.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+scrollParent.offsetHeight-event.pageY<o.scrollSensitivity?scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+scrollParent.offsetWidth-event.pageX<o.scrollSensitivity?scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),scrolled!==!1&&$.ae.ddmanager&&!o.dropBehaviour&&$.ae.ddmanager.prepareOffsets(i,event)}}),$.ae.plugin.add("aeDraggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[],$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--)l=inst.snapElements[i].left-inst.margins.left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top-inst.margins.top,b=t+inst.snapElements[i].height,l-d>x2||x1>r+d||t-d>y2||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)?(inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1):("inner"!==o.snapMode&&(ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left)),first=ts||bs||ls||rs,"outer"!==o.snapMode&&(ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left)),!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first)}}),$.ae.plugin.add("aeDraggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});group.length&&(min=parseInt($(group[0]).css("zIndex"),10)||0,$(group).each(function(i){$(this).css("zIndex",min+i)}),this.css("zIndex",min+group.length))}}),$.ae.plugin.add("aeDraggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui,instance){var o=instance.options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}});$.ae.aeDraggable}),define("ui-droppable",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeDroppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=!1,this.isout=!0,this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)},this.proportions=function(){return arguments.length?void(proportions=arguments[0]):proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(o.scope),o.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(scope){$.ae.ddmanager.droppables[scope]=$.ae.ddmanager.droppables[scope]||[],$.ae.ddmanager.droppables[scope].push(this)},_splice:function(drop){for(var i=0;i<drop.length;i++)drop[i]===this&&drop.splice(i,1)},_destroy:function(){var drop=$.ae.ddmanager.droppables[this.options.scope];this._splice(drop),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(key,value){if("accept"===key)this.accept=$.isFunction(value)?value:function(d){return d.is(value)};else if("scope"===key){var drop=$.ae.ddmanager.droppables[this.options.scope];this._splice(drop),this._addToManager(value)}this._super(key,value)},_activate:function(event){var draggable=$.ae.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ae.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),draggable&&this._trigger("deactivate",event,this.ui(draggable))},_over:function(event){var draggable=$.ae.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",event,this.ui(draggable)))},_out:function(event){var draggable=$.ae.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",event,this.ui(draggable)))},_drop:function(event,custom){var draggable=custom||$.ae.ddmanager.current,childrenIntersection=!1;return draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$(this).droppable("instance");return inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&$.ae.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance,event)?(childrenIntersection=!0,!1):void 0}),childrenIntersection?!1:this.accept.call(this.element[0],draggable.currentItem||draggable.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",event,this.ui(draggable)),this.element):!1):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}}),$.ae.intersect=function(){function isOverAxis(x,reference,size){return x>=reference&&reference+size>x}return function(draggable,droppable,toleranceMode,event){if(!droppable.offset)return!1;var x1=(draggable.positionAbs||draggable.position.absolute).left+draggable.margins.left,y1=(draggable.positionAbs||draggable.position.absolute).top+draggable.margins.top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return x1>=l&&r>=x2&&y1>=t&&b>=y2;case"intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;case"pointer":return isOverAxis(event.pageY,t,droppable.proportions().height)&&isOverAxis(event.pageX,l,droppable.proportions().width);case"touch":return(y1>=t&&b>=y1||y2>=t&&b>=y2||t>y1&&y2>b)&&(x1>=l&&r>=x1||x2>=l&&r>=x2||l>x1&&x2>r);default:return!1}}}(),$.ae.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ae.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++)if(!(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))){for(j=0;j<list.length;j++)if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop}m[i].visible="none"!==m[i].element.css("display"),m[i].visible&&("mousedown"===type&&m[i]._activate.call(m[i],event),m[i].offset=m[i].element.offset(),m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight}))}},drop:function(draggable,event){var dropped=!1;return $.each(($.ae.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&$.ae.intersect(draggable,this,this.options.tolerance,event)&&(dropped=this._drop.call(this,event)||dropped),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,event)))}),dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){draggable.options.refreshPositions||$.ae.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){draggable.options.refreshPositions&&$.ae.ddmanager.prepareOffsets(draggable,event),$.each($.ae.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var parentInstance,scope,parent,intersects=$.ae.intersect(draggable,this,this.options.tolerance,event),c=!intersects&&this.isover?"isout":intersects&&!this.isover?"isover":null;c&&(this.options.greedy&&(scope=this.options.scope,parent=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===scope}),parent.length&&(parentInstance=$(parent[0]).droppable("instance"),parentInstance.greedyChild="isover"===c)),parentInstance&&"isover"===c&&(parentInstance.isover=!1,parentInstance.isout=!0,parentInstance._out.call(parentInstance,event)),this[c]=!0,this["isout"===c?"isover":"isout"]=!1,this["isover"===c?"_over":"_out"].call(this,event),parentInstance&&"isout"===c&&(parentInstance.isout=!1,parentInstance.isover=!0,parentInstance._over.call(parentInstance,event)))}})},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable"),draggable.options.refreshPositions||$.ae.ddmanager.prepareOffsets(draggable,event)}};$.ae.aeDroppable}),define("ui-sortable",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeSortable",$.ae.aeMouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return x>=reference&&reference+size>x},_isFloating:function(item){return/left|right/.test(item.css("float"))||/inline|table-cell/.test(item.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(key,value){this._super(key,value),"handle"===key&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),$.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},destroy:function(){this.destroy()},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=!1,that=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(event),$(event.target).parents().each(function(){return $.data(this,that.widgetName+"-item")===that?(currentItem=$(this),!1):void 0}),$.data(event.target,that.widgetName+"-item")===that&&(currentItem=$(event.target)),currentItem&&(!this.options.handle||overrideHandle||($(this.options.handle,currentItem).find("*").addBack().each(function(){this===event.target&&(validHandle=!0)}),validHandle))?(this.currentItem=currentItem,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(event),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(body=this.document.find("body"),this.storedCursor=body.css("cursor"),body.css("cursor",o.cursor),this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",event,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));return $.ae.ddmanager&&($.ae.ddmanager.current=this),$.ae.ddmanager&&!o.dropBehaviour&&$.ae.ddmanager.prepareOffsets(this,event),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(event),!0},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=!1;for(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(event.pageY-this.document.scrollTop()<o.scrollSensitivity?scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity&&(scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),event.pageX-this.document.scrollLeft()<o.scrollSensitivity?scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(event.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),scrolled!==!1&&$.ae.ddmanager&&!o.dropBehaviour&&$.ae.ddmanager.prepareOffsets(this,event)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item),intersection&&item.instance===this.currentContainer&&itemElement!==this.currentItem[0]&&this.placeholder[1===intersection?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&("semi-dynamic"===this.options.type?!$.contains(this.element[0],itemElement):!0)){if(this.direction=1===intersection?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}return this._contactContainers(event),$.ae.ddmanager&&$.ae.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(event,noPropagation){if(event){if($.ae.ddmanager&&!this.options.dropBehaviour&&$.ae.ddmanager.drop(this,event),this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};axis&&"x"!==axis||(animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),axis&&"y"!==axis||(animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,this._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,this._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];return o=o||{},$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);res&&str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))}),!str.length&&o.key&&str.push(o.key+"="),str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];return o=o||{},items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")}),ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight="x"===this.options.axis||y1+dyClick>t&&b>y1+dyClick,isOverElementWidth="y"===this.options.axis||x1+dxClick>l&&r>x1+dxClick,isOverElement=isOverElementHeight&&isOverElementWidth;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]?isOverElement:l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return isOverElement?this.floating?horizontalDirection&&"right"===horizontalDirection||"down"===verticalDirection?2:1:verticalDirection&&("down"===verticalDirection?2:1):!1},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return this.floating&&horizontalDirection?"right"===horizontalDirection&&isOverRightHalf||"left"===horizontalDirection&&!isOverRightHalf:verticalDirection&&("down"===verticalDirection&&isOverBottomHalf||"up"===verticalDirection&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return 0!==delta&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return 0!==delta&&(delta>0?"right":"left")},refresh:function(event){return this._refreshItems(event),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){function addItems(){items.push(this)}var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i],this.document[0]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);for(queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=queries.length-1;i>=0;i--)queries[i][0].each(addItems);return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return!1;return!0})},_refreshItems:function(event){this.items=[],this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i],this.document[0]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&(queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]),this.containers.push(inst));for(i=queries.length-1;i>=0;i--)for(targetData=queries[i][1],_queries=queries[i][0],j=0,queriesLength=_queries.length;queriesLength>j;j++)item=$(_queries[j]),item.data(this.widgetName+"-item",targetData),items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})},refreshPositions:function(fast){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,item,t,p;for(i=this.items.length-1;i>=0;i--)item=this.items[i],item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]||(t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item,fast||(item.width=t.outerWidth(),item.height=t.outerHeight()),p=t.offset(),item.left=p.left,item.top=p.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)p=this.containers[i].element.offset(),this.containers[i].containerCache.left=p.left,this.containers[i].containerCache.top=p.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(that){that=that||this;var className,o=that.options;o.placeholder&&o.placeholder.constructor!==String||(className=o.placeholder,o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===nodeName?that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("<tr>",that.document[0]).appendTo(element)):"tr"===nodeName?that._createTrPlaceholder(that.currentItem,element):"img"===nodeName&&element.attr("src",that.currentItem.attr("src")),className||element.css("visibility","hidden"),element},update:function(container,p){(!className||o.forcePlaceholderSize)&&(p.height()||p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10)))}}),that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem)),that.currentItem.after(that.placeholder),o.placeholder.update(that,that.placeholder)},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr);
})},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--)if(!$.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i],innermostIndex=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",event,this._uiHash(this)),this.containers[i].containerCache.over=0);if(innermostContainer)if(1===this.containers.length)this.containers[innermostIndex].containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1);else{for(dist=1e4,itemWithLeastDistance=null,floating=innermostContainer.floating||this._isFloating(this.currentItem),posProperty=floating?"left":"top",sizeProperty=floating?"width":"height",axis=floating?"clientX":"clientY",j=this.items.length-1;j>=0;j--)$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])&&this.items[j].item[0]!==this.currentItem[0]&&(cur=this.items[j].item.offset()[posProperty],nearBottom=!1,event[axis]-cur>this.items[j][sizeProperty]/2&&(nearBottom=!0),Math.abs(event[axis]-cur)<dist&&(dist=Math.abs(event[axis]-cur),itemWithLeastDistance=this.items[j],this.direction=nearBottom?"up":"down"));if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[innermostIndex])return void(this.currentContainer.containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash()),this.currentContainer.containerCache.over=1));itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,!0):this._rearrange(event,null,this.containers[innermostIndex].element,!0),this._trigger("change",event,this._uiHash()),this.containers[innermostIndex]._trigger("change",event,this._uiHash(this)),this.currentContainer=this.containers[innermostIndex],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return helper.parents("body").length||$("parent"!==o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]),helper[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!helper[0].style.width||o.forceHelperSize)&&helper.width(this.currentItem.width()),(!helper[0].style.height||o.forceHelperSize)&&helper.height(this.currentItem.height()),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ae.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var ce,co,over,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(ce=$(o.containment)[0],co=$(o.containment).offset(),over="hidden"!==$(ce).css("overflow"),this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(event.pageX-this.offset.click.left<this.containment[0]&&(pageX=this.containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<this.containment[1]&&(pageY=this.containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>this.containment[2]&&(pageX=this.containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>this.containment[3]&&(pageY=this.containment[3]+this.offset.click.top)),o.grid&&(top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1],pageY=this.containment?top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0],pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){counter===this.counter&&this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance))}}this.reverting=!1;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!noPropagation&&delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||noPropagation||delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())}),this!==this.currentContainer&&(noPropagation||(delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())}),delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer)),delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)noPropagation||delayedTriggers.push(delayEvent("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(delayedTriggers.push(delayEvent("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,noPropagation||this._trigger("beforeStop",event,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!noPropagation){for(i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){$.AEWidget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}})}),define("ui-dialog",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeDialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:90,minWidth:150,modal:!1,position:{my:"top",at:"top",of:window,collision:"flipfit",using:function(pos){$(this).css(pos),$(this).css("top","30px")}},resizable:!0,show:null,title:"",width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null,afterInit:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){var id=this.element.attr("id"),$el=$(document.body).find("[aria-describedby='"+id+"']");id&&this.element.attr("aeId",id),$el.length>0&&($el.remove(),$("#"+id).remove()),this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title,this._createWrapper(),this.element.show().removeAttr("title").addClass("modal-body").appendTo(this.modalContent),"message"!==this.options.componentType&&this._createTitlebar(),this._createButton(),this.options.draggable&&$.fn.aeDraggable&&this._makeDraggable(),this.options.resizable&&$.fn.aeResizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&(this.element.prev(".modal-header").children("h4.modal-title").text(this.options.title),this.open())},_appendTo:function(){var element=this.options.appendTo;return element&&(element.jquery||element.nodeType)?$(element):this.document.find(element||"body").eq(0)},_destroy:function(){var next,originalPosition=this.originalPosition;this.options.draggable&&$.fn.aeDraggable&&this.modalContent.aeDraggable("destroy"),this.options.resizable&&$.fn.aeResizable&&this.modalContent.aeResizable("destroy"),$("#"+this.options.elementId).getNiceScroll().remove(),this._untrackInstance(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),next=originalPosition.parent.children().eq(originalPosition.index),next.length&&next[0]!==this.element[0]?next.before(this.element):originalPosition.parent.append(this.element)},widget:function(){return this.uiDialog},disable:$.noop,enable:$.noop,close:function(event){var activeElement,that=this;if(this._isOpen&&this._trigger("beforeClose",event)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{activeElement=this.document[0].activeElement,activeElement&&"body"!==activeElement.nodeName.toLowerCase()&&$(activeElement).blur()}catch(error){}this.uiDialog.removeClass("in");var hdTimer=null;null!=hdTimer&&(clearTimeout(hdTimer),hdTimer=null),hdTimer=setTimeout(function(){that._hide(that.uiDialog,that.options.hide,function(){that._trigger("close",event)}),"div"!==that.options.popupType&&that.element.remove()},150),$(document.body).css("overflow",""),this._resetScrollbar()}},_checkScrollbar:function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this._measureScrollbar()},_setScrollbar:function(){var bodyPad=parseInt($(document.body).css("padding-right")||0,10);this.bodyIsOverflowing&&$(document.body).css("padding-right",bodyPad+this.scrollbarWidth)},_resetScrollbar:function(){$(document.body).css("padding-right","")},_measureScrollbar:function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure",$(document.body).append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;return $(document.body)[0].removeChild(scrollDiv),scrollbarWidth},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(event,silent){var moved=!1,zIndices=this.uiDialog.siblings(".ui-front:visible").map(function(){return+$(this).css("z-index")}).get(),zIndexMax=Math.max.apply(null,zIndices);return zIndexMax>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",zIndexMax+1),moved=!0),moved&&!silent&&this._trigger("focus",event),moved},open:function(){var that=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=$(this.document[0].activeElement),this._size(),this._position(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){that._trigger("focus")}),this._makeFocusTarget(),this.options.modal&&this.modalBackdrop.css("height",this.uiDialog[0].scrollHeight),that.uiDialog.addClass("in"),$(document.body).css("overflow","hidden"),$(".modal").scrollTop(0),this._trigger("open"),this._trigger("afterInit",null),this._checkScrollbar(),void this._setScrollbar())},_focusTabbable:function(){var hasFocus=this._focusedElement;hasFocus||(hasFocus=this.element.find("[autofocus]")),hasFocus.length||(hasFocus=this.element.find(":tabbable")),hasFocus.length||(hasFocus=this.uiDialog),hasFocus.eq(0).focus()},_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);isActive||this._focusTabbable()}event.preventDefault(),checkFocus.call(this),this._delay(checkFocus)},_createWrapper:function(){if(this.uiDialog=$("<div>").addClass("modal fade").hide().attr({"aria-hidden":!1,tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this.options.modal&&(this.modalBackdrop=$("<div>").addClass("modal-backdrop fade in").prependTo(this.uiDialog)),this.modalDialog=$("<div>").addClass("modal-dialog").css("width","auto").appendTo(this.uiDialog),this.modalContent=$("<div>").addClass("modal-content").appendTo(this.modalDialog),"message"===this.options.componentType){var modalDialog=this.modalDialog,messageType=this.options.messageType;modalDialog.addClass("popup-notic-default").removeClass("popup-notic-warning popup-notic-error popup-notic-success"),"alert"===messageType&&modalDialog.addClass("popup-notic-warning"),"success"===messageType&&modalDialog.addClass("popup-notic-success"),"error"===messageType&&modalDialog.addClass("popup-notic-error")}this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ae.keyCode.ESCAPE)return event.preventDefault(),void this.close(event);if(event.keyCode===$.ae.keyCode.TAB&&!event.isDefaultPrevented()){var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");event.target!==last[0]&&event.target!==this.uiDialog[0]||event.shiftKey?event.target!==first[0]&&event.target!==this.uiDialog[0]||!event.shiftKey||(this._delay(function(){last.focus()}),event.preventDefault()):(this._delay(function(){first.focus()}),event.preventDefault())}},mousedown:function(event){this._moveToTop(event)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){this.uiDialogTitlebar=$("<div>").addClass("modal-header").prependTo(this.modalContent),this._on(this.uiDialogTitlebar,{mousedown:function(event){$(event.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=$("<button type='button'>  </button>").addClass("close").attr({"aria-hidden":!0}).appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault(),this.close(event)}}),$('<h4 class="modal-title">'+this.options.title+"</h4>").appendTo(this.uiDialogTitlebar),this.options.showClose||this.uiDialogTitlebarClose.hide()},_createButton:function(){var self=this;if(this.modalFooter=$("<div>").addClass("modal-footer").appendTo(this.modalContent),this.modalConfirm=$('<button class="btn btn-primary" type="button">Confirm</button>').appendTo(this.modalFooter),this.modalCancel=$('<button class="btn btn-default" type="button">Cancel</button>').appendTo(this.modalFooter),"message"===this.options.componentType){var messageType=this.options.messageType;this.modalConfirm.text("Ok"),("alert"===messageType||"success"===messageType)&&this.modalCancel.hide(),"error"===messageType&&this.modalConfirm.hide()}this._on(this.modalConfirm,{click:function(event){if("div"!==self.options.popupType){var array=$.aries.page.data._privateArray;if($.isArray(array)&&array.length>0){var popupConfirmEvent=array[array.length-1];popupConfirmEvent(event)}}else self._trigger("confirm",event)}}),this._on(this.modalCancel,{click:function(event){event.preventDefault(),this.close(event)}}),this.options.showButton||this.modalFooter.hide()},_title:function(title){this.options.title||title.html("&#160;"),title.text(this.options.title)},_makeDraggable:function(){function filteredUi(ui){return{position:ui.position,offset:ui.offset}}var that=this;this.options;this.modalContent.aeDraggable({cancel:".modal-body, .close",handle:".modal-header",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging"),that._blockFrames(),that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){that._trigger("dragStop",event,filteredUi(ui))}})},_makeResizable:function(){function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}var that=this,options=this.options,handles=options.resizable,position=this.modalContent.css("position"),resizeHandles="string"==typeof handles?handles:"n,e,s,w,se,sw,ne,nw";this.modalContent.aeResizable({alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing"),that._blockFrames(),that._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){var offset=that.uiDialog.offset(),left=offset.left-that.document.scrollLeft(),top=offset.top-that.document.scrollTop();options.height=that.uiDialog.height(),options.width=that.uiDialog.width(),options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" top"+(top>=0?"+":"")+top,of:that.window},$(this).removeClass("ui-dialog-resizing"),that._unblockFrames(),that._trigger("resizeStop",event,filteredUi(ui))}}).css("position",position)},_trackFocus:function(){this._on(this.widget(),{focusin:function(event){this._makeFocusTarget(),this._focusedElement=$(event.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var instances=this._trackingInstances(),exists=$.inArray(this,instances);-1!==exists&&instances.splice(exists,1)},_trackingInstances:function(){var instances=this.document.data("ui-dialog-instances");return instances||(instances=[],this.document.data("ui-dialog-instances",instances)),instances},_minHeight:function(){var options=this.options;return"auto"===options.height?options.minHeight:Math.min(options.minHeight,options.height)},_position:function(){var isVisible=this.uiDialog.is(":visible");isVisible||this.uiDialog.show(),this.modalContent.position(this.options.position),isVisible||this.uiDialog.hide()},_setOptions:function(options){var that=this,resize=!1,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value),key in that.sizeRelatedOptions&&(resize=!0),key in that.resizableRelatedOptions&&(resizableOptions[key]=value)}),resize&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",resizableOptions)},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;"dialogClass"===key&&uiDialog.removeClass(this.options.dialogClass).addClass(value),"disabled"!==key&&(this._super(key,value),"appendTo"===key&&this.uiDialog.appendTo(this._appendTo()),"draggable"===key&&(isDraggable=uiDialog.is(":data(ui-draggable)"),isDraggable&&!value&&uiDialog.draggable("destroy"),!isDraggable&&value&&this._makeDraggable()),"position"===key&&this._position(),"resizable"===key&&(isResizable=uiDialog.is(":data(ui-resizable)"),isResizable&&!value&&uiDialog.resizable("destroy"),isResizable&&"string"==typeof value&&uiDialog.resizable("option","handles",value),isResizable||value===!1||this._makeResizable()))},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),options.minWidth>options.width&&(options.width=options.minWidth),nonContentHeight=this.modalContent.css({height:"auto",width:options.width}).outerHeight(),minContentHeight=Math.max(0,options.minHeight-nonContentHeight),maxContentHeight="number"==typeof options.maxHeight?Math.max(0,options.maxHeight-nonContentHeight):"none","auto"===options.height?this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"}):this.element.height(Math.max(0,options.height-nonContentHeight)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight()),this.element.hasClass("scorll-bar-box")||(this.element.addClass("scorll-bar-box"),$("#"+this.options.elementId).niceScroll())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("<div>").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(event){return $(event.target).closest(".ui-dialog").length?!0:!!$(event.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var isOpening=!0;this._delay(function(){isOpening=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(event){isOpening||this._allowInteraction(event)||(event.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var overlays=this.document.data("ui-dialog-overlays")-1;overlays?this.document.data("ui-dialog-overlays",overlays):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}})}),define("ui-calendar",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeCalendar",{options:{enable:!0,visible:!0,dateFormat:!1,showTime:!1,weekStart:0,showClear:!1,_minViewMode:0,_viewMode:0,_flag:!1,initType:"html"},setValue:function(d){var self=this;if("undefined"==typeof d||""===d||null===d)$(this.element).val("");else{var date=self._parseDate(d);date&&(this.options._date=date,self._fillDate(),self._fillTime(),self._set(date))}},getValue:function(){return this.element.val()||""},clear:function(){this.element.val(""),this.options.showClear&&this.element.next().hide()},visible:function(value){(void 0===value||""===value)&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&($ele.closest("div.input-group").removeClass("hidden"),this.options.visible=!0),(value===!1||"false"===value)&&($ele.closest("div.input-group").addClass("hidden"),this.options.visible=!1)},enable:function(value){var self=this;void 0===value&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&(this.options.enable=!0,$ele.prop({readonly:!0,disabled:!1}).addClass("form-readonly"),$ele.closest("div.input-group").find(".btn-default").prop("disabled",!1),self._attachDatePickerEvents(),this.options.showClear&&(""!==$ele.val()&&"undefined"!=typeof $ele.val()&&$ele.next().show(),$ele.next().click(function(){$ele.val(""),$(this).hide(),self._trigger("onClear")}))),(value===!1||"false"===value)&&(this.options.enable=!1,$ele.prop({readonly:!1,disabled:!0}).removeClass("form-readonly").off(),$ele.closest("div.input-group").find(".btn-default").prop("disabled",!0),"block"===$ele.next().css("display")&&$ele.next().hide())},_create:function(){var $self=this.element,opts=this.options;"html"==opts.initType&&this._buildOptions(opts,$self);var obj=$("<input></input>");obj.attr({aeType:$self.attr("aeType"),aeId:$self.attr("id"),aeInit:"false",dataField:$self.attr("dataField"),aeValidate:$self.attr("aeValidate"),rules:$self.attr("rules")}),this.element=obj,$self.after(obj),$self.empty().hide(),this.element.addClass("form-control").wrap('<div class="input-group"></div>'),this.element.after('<span class="input-group-btn"><button class="btn btn-default"><i class="icon-calendar1"></i></button></span>')},_init:function(){var ss,self=this,opts=this.options,$ele=this.element,defaultFormat="";opts.visible||$ele.closest("div.input-group").addClass("hidden"),opts.width&&$ele.closest("div.input-group").css("width",opts.width),opts.showClear&&($ele.wrap('<div class="input-icon right"></div>'),$('<i class="icon-error2"></i>').insertAfter($ele).hide()),opts.dateFormat||(defaultFormat=opts.showTime?"yyyy-MM-dd hh:mm:ss":"yyyy-MM-dd"),this.format=opts.dateFormat||defaultFormat,self._compileFormat();var obj=document.body,popupArray=$.aries.page.data._getHidedData("ae_popup_Id");$.isArray(popupArray)&&(1===popupArray.length&&(ss=popupArray[0],obj=ss&&"div"!==ss.popupType?$("#"+ss.elementId):document.body),2===popupArray.length&&(ss=popupArray[1],obj=ss&&"div"!==ss.popupType?$("#"+ss.elementId):document.body)),this.widget=$(self._buildTemplate()).appendTo(obj),self._fillDow(),self._fillMonths(),self._fillHours(),self._fillMinutes(),self._fillSeconds(),self._update(),self._showMode(),self.enable(!!opts.enable),opts.emptyText&&(this.element.focus(function(){self._refeshEmptyText(opts.emptyText)}).blur(function(){self._refeshEmptyText(opts.emptyText)}),self._refeshEmptyText(opts.emptyText))},_buildOptions:function(options,inputEl){options.visible="false"==inputEl.attr("visible")?!1:options.visible,options.enable="false"==inputEl.attr("enable")?!1:options.enable,options.dateFormat=inputEl.attr("dateFormat")||options.dateFormat,options.showTime="true"==inputEl.attr("showTime")?!0:options.showTime,options.weekStart=inputEl.attr("weekStart")?parseInt(inputEl.attr("weekStart")):options.weekStart,options.startDate=inputEl.attr("startDate"),options.endDate=inputEl.attr("endDate"),options.emptyText=inputEl.attr("emptyText"),options.width=inputEl.attr("width"),options.showClear="true"==inputEl.attr("showClear")?!0:options.showClear;var onValueChange=inputEl.attr("onValueChange");options.onValueChange=onValueChange?function(target){if($.isString(onValueChange)){var i=onValueChange.indexOf("("),actName=i>0?onValueChange.substring(0,i):onValueChange,func="return window."+actName+"?"+actName+".call(window,t):false;";return new Function("t",func)(target)}}:"";var onClear=inputEl.attr("onClear");options.onClear=onClear?function(){if($.isString(onClear)){var i=onClear.indexOf("("),actName=i>0?onClear.substring(0,i):onClear,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}}:""},_refeshEmptyText:function(emptyText){var el=this.element;emptyText&&(""===el.prop("placeholder")?el.prop("placeholder",emptyText):el.prop("placeholder")===emptyText&&el.prop("placeholder",""))},_show:function(e){var popupArray=$.aries.page.data._getHidedData("ae_popup_Id"),ss="";
$.isArray(popupArray)&&(1===popupArray.length&&(ss=popupArray[0]),2===popupArray.length&&(ss=popupArray[1]));var widgetTop,widgetLeft,offset=this.element.offset();if(ss&&"div"!==ss.popupType){var popup=$("#"+ss.elementId).offset();widgetTop=offset.top+this.element.outerHeight()+5-popup.top,widgetLeft=offset.left-popup.left}else widgetTop=offset.top+this.element.outerHeight()+5,widgetLeft=offset.left;var wh=$(window).height(),ws=$(window).scrollTop(),woh=this.widget.outerHeight(),eoh=this.element.outerHeight();offset.top+eoh+woh>ws+wh&&(widgetTop=offset.top-woh-5),this.widget.show().css({position:"absolute",top:widgetTop,left:widgetLeft,right:"auto"}),this.element.trigger({type:"show.aries",date:this.options._date}),this._attachDatePickerGlobalEvents(),e&&(e.stopPropagation(),e.preventDefault())},_hide:function(){var self=this;this.widget.hide(),this.options._viewMode=0,self._showMode(),this.element.trigger({type:"hide.aries",date:this.options._date}),self._detachDatePickerGlobalEvents()},_detachDatePickerGlobalEvents:function(){$(document).off("mousedown.aeCalendar")},_showMode:function(dir){dir&&(this.options._viewMode=Math.max(this.options._minViewMode,Math.min(2,this.options._viewMode+dir))),this.widget.find(".datepicker > div").hide().filter(".datepicker-"+$.aeCalendar.modes[this.options._viewMode].clsName).show(),this.options.showTime&&0===this.options._viewMode&&this.widget.find(".datepicker > div.datepicker-time").show(),0!==this.options._viewMode?this.widget.find(".btn_box").hide():this.widget.find(".btn_box").show()},_attachDatePickerGlobalEvents:function(){$(document).on("mousedown.aeCalendar",$.proxy(this._hide,this))},_stopEvent:function(e){e.stopPropagation(),e.preventDefault()},_attachDatePickerEvents:function(){var self=this;this.widget.on("click",".datepicker *",$.proxy(self._click,this)),this.widget.on("mousedown.aeCalendar",$.proxy(self._stopEvent,this)),this.element.on("click",$.proxy(self._show,this)).closest("div.input-group").find("span.input-group-btn").off().on("click",function(){self.element.trigger("click")}),this.widget.find("div.btn_box >button.btn-default").on("click",function(){var tmp=new Date;self.options._date=self._UTCDate(tmp.getFullYear(),tmp.getMonth(),tmp.getDate(),tmp.getHours(),tmp.getMinutes(),tmp.getSeconds(),tmp.getMilliseconds()),self._fillDate(),self._fillTime(),self._set(self.options._date),self._notifyChange(),self._hide()}),this.widget.find(".datepicker-time > ul").on("mousedown.aeCalendar",$.proxy(self._stopEvent,this)),this.widget.on("mousedown.aeCalendar",this.globalEvent=function(){self.widget.find(".datepicker-time > ul").hide()})},_set:function(value){var formatted="";this._unset||(formatted=this._formatDate(value));var input=this.element,oldValue=input.val(),valueChange=!0;input.val(formatted),this._resetMaskPos(input),this.element.data("date",formatted),formatted==oldValue&&(valueChange=!1),this.options.onValueChange&&valueChange&&this._trigger("onValueChange",null,input),this.options.showClear&&this.element.next().show()},_resetMaskPos:function(input){for(var val=input.val(),i=0;i<this._mask.length;i++){if(this._mask[i].end>val.length){this._maskPos=i;break}if(this._mask[i].end===val.length){this._maskPos=i+1;break}}},_formatDate:function(d){var self=this;return this.format.replace($.aeCalendar.formatReplacer(),function(match){var methodName,property,rv,len=match.length;if("ms"===match&&(len=1),property=$.aeCalendar.dateFormatComponents[match].property,"Hours12"===property)rv=d.getUTCHours(),0===rv?rv=12:12!==rv&&(rv%=12);else{if("Period12"===property)return d.getUTCHours()>=12?"PM":"AM";"UTCYear"===property?(rv=d.getUTCFullYear(),rv=rv.toString().substr(2)):(methodName="get"+property,rv=d[methodName]())}return"getUTCMonth"===methodName&&(rv+=1),self._padLeft(rv.toString(),len,"0")})},_padLeft:function(s,l,c){return l<s.length?s:Array(l-s.length+1).join(c||" ")+s},_click:function(e){var target,month,day,year,self=this;if(e.stopPropagation(),e.preventDefault(),this._unset=!1,target=$(e.target).closest("span, td, th"),1===target.length&&!target.is(".disabled"))switch(target[0].nodeName.toLowerCase()){case"th":switch(target[0].className){case"switch":(2===target[0].colSpan||5===target[0].colSpan)&&this._showMode(1),3===target[0].colSpan&&(this._showMode(2),this.options._flag=!0);break;case"prev":case"next":var vd=this.options._viewDate,navFnc=$.aeCalendar.modes[this.options._viewMode].navFnc,step=$.aeCalendar.modes[this.options._viewMode].navStep;"prev"===target[0].className&&(step=-1*step),vd["set"+navFnc](vd["get"+navFnc]()+step),this._fillDate()}break;case"span":if(target.is(".month")&&(month=target.parent().find("span").index(target),this.options._viewDate.setUTCMonth(month)),target.is(".year")&&(year=parseInt(target.text(),10)||0,this.options._viewDate.setUTCFullYear(year)),target.is(".input-group-btn")){var offset=target.prev().offset(),obj=this.widget.find(".datepicker-time > ul").hide(),ul=obj.filter("[data-time-component="+target.attr("data-time-component")+"]");ul.show().css({top:offset.top-this.widget.offset().top-162,left:offset.left-this.widget.offset().left-1,right:"auto"}).find("a").mousedown(function(){self._backfill(this)});var nowValue=target.prev().val();return ul.find("li").removeClass("current").find(">i.fa-check").remove(),void(void 0!==nowValue&&""!==nowValue&&ul.find("a").each(function(){$(this).text()===nowValue&&$(this).parent().addClass("current").prepend('<i class="fa fa-check"></i>')}))}0!==this.options._viewMode&&(this.options._date=this._UTCDate(this.options._viewDate.getUTCFullYear(),this.options._viewDate.getUTCMonth(),this.options._viewDate.getUTCDate(),this.options._date.getUTCHours(),this.options._date.getUTCMinutes(),this.options._date.getUTCSeconds(),this.options._date.getUTCMilliseconds()),this._notifyChange()),this.options._flag?(this._showMode(-2),this.options._flag=!1):this._showMode(-1),this._fillDate();break;case"td":target.is(".day")&&(day=parseInt(target.text(),10)||1,month=this.options._viewDate.getUTCMonth(),year=this.options._viewDate.getUTCFullYear(),target.is(".old")?0===month?(month=11,year-=1):month-=1:target.is(".new")&&(11==month?(month=0,year+=1):month+=1),this.options._date=this._UTCDate(year,month,day,this.options._date.getUTCHours(),this.options._date.getUTCMinutes(),this.options._date.getUTCSeconds(),this.options._date.getUTCMilliseconds()),this.options._viewDate=this._UTCDate(year,month,Math.min(28,day),0,0,0,0),this._fillDate(),this._set(this.options._date),this._notifyChange(),this.options.showTime||this._hide())}},_backfill:function(source){if(0!==source.length){var obj=this.widget.find(".datepicker-time > ul").filter(function(){return"block"==$(this).css("display")?$(this):void 0});obj.find("a").parent().removeClass("current").find(">i.fa-check").remove(),$(source).parent().addClass("current").prepend('<i class="fa fa-check"></i>');var target=obj.find("li[class*=current] >a"),value=parseInt(target.text(),10);obj.hide(),"hours"===obj.attr("data-time-component")&&this.options._date.setUTCHours(value),"minutes"===obj.attr("data-time-component")&&this.options._date.setUTCMinutes(value),"seconds"===obj.attr("data-time-component")&&this.options._date.setUTCSeconds(value),this._set(this.options._date),this._fillTime(),this._notifyChange()}},_notifyChange:function(){this.element.trigger({type:"changeDate",date:this._getDate(),localDate:this._getLocalDate()})},_getLocalDate:function(){if(this._unset)return null;var d=this.options._date;return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())},_getDate:function(){return this._unset?null:new Date(this.options._date.valueOf())},_update:function(newDate){var dateStr=newDate,self=this,$el=this.element,opts=this.options;if(!dateStr&&(dateStr=$el.val(),dateStr&&(opts._date=self._parseDate(dateStr)),!opts._date)){var tmp=new Date;opts._date=self._UTCDate(tmp.getFullYear(),tmp.getMonth(),tmp.getDate(),tmp.getHours(),tmp.getMinutes(),tmp.getSeconds(),tmp.getMilliseconds())}opts._viewDate=self._UTCDate(opts._date.getUTCFullYear(),opts._date.getUTCMonth(),1,0,0,0,0),self._fillDate(),self._fillTime()},_fillDow:function(){for(var dowCnt=this.options.weekStart,html=$("<tr>");dowCnt<this.options.weekStart+7;)html.append('<th class="dow">'+$.aeCalendar.daysMin[dowCnt++%7]+"</th>");this.widget.find(".datepicker-days thead").append(html)},_fillMonths:function(){for(var html="",i=0;12>i;)html+='<span class="month">'+$.aeCalendar.monthsShort[i++]+"</span>";this.widget.find(".datepicker-months td").append(html)},_fillDate:function(){var i,self=this,opts=this.options,_date=opts._date,year=opts._viewDate.getUTCFullYear(),month=opts._viewDate.getUTCMonth(),tmp=new Date,currentDate=self._UTCDate(_date.getUTCFullYear(),_date.getUTCMonth(),_date.getUTCDate(),0,0,0,0),systemDate=self._UTCDate(tmp.getUTCFullYear(),tmp.getUTCMonth(),tmp.getUTCDate(),0,0,0,0);"string"==typeof opts.startDate&&(opts.startDate=self._parseDate(opts.startDate)),"string"==typeof opts.endDate&&(opts.endDate=self._parseDate(opts.endDate));var startYear="object"==typeof opts.startDate?opts.startDate.getUTCFullYear():-(1/0),startMonth="object"==typeof opts.startDate?opts.startDate.getUTCMonth():-1,endYear="object"==typeof opts.endDate?opts.endDate.getUTCFullYear():1/0,endMonth="object"==typeof opts.endDate?opts.endDate.getUTCMonth():12;this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled");var datepickerDays=this.widget.find(".datepicker-days th:eq(1)");datepickerDays.text($.aeCalendar.months[month]),datepickerDays.next().text(year);var prevMonth=self._UTCDate(year,month-1,28,0,0,0,0),day=$.aeCalendar.getDaysInMonth(prevMonth.getUTCFullYear(),prevMonth.getUTCMonth());prevMonth.setUTCDate(day),prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-opts.weekStart+7)%7),(year==startYear&&startMonth>=month||startYear>year)&&this.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(year==endYear&&month>=endMonth||year>endYear)&&this.widget.find(".datepicker-days th:eq(3)").addClass("disabled");var nextMonth=new Date(prevMonth.valueOf());nextMonth.setUTCDate(nextMonth.getUTCDate()+42),nextMonth=nextMonth.valueOf();for(var row,clsName,html=[];prevMonth.valueOf()<nextMonth;)prevMonth.getUTCDay()===opts.weekStart&&(row=$("<tr>"),html.push(row)),clsName="",prevMonth.getUTCFullYear()<year||prevMonth.getUTCFullYear()==year&&prevMonth.getUTCMonth()<month?clsName+=" old":(prevMonth.getUTCFullYear()>year||prevMonth.getUTCFullYear()==year&&prevMonth.getUTCMonth()>month)&&(clsName+=" new"),prevMonth.valueOf()===currentDate.valueOf()&&(clsName+=" active"),prevMonth.valueOf()===systemDate.valueOf()&&" active"!==clsName&&(clsName+=" today"),prevMonth.valueOf()+864e5<=opts.startDate&&(clsName+=" disabled"),prevMonth.valueOf()>opts.endDate&&(clsName+=" disabled"),row.append('<td class="day'+clsName+'">'+prevMonth.getUTCDate()+"</td>"),prevMonth.setUTCDate(prevMonth.getUTCDate()+1);this.widget.find(".datepicker-days tbody").empty().append(html);var currentYear=_date.getUTCFullYear(),months=this.widget.find(".datepicker-months").find("th:eq(1)").text(year).end().find("span").removeClass("active");for(currentYear===year&&months.eq(_date.getUTCMonth()).addClass("active"),startYear>currentYear-1&&this.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),currentYear+1>endYear&&this.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),i=0;12>i;i++)year==startYear&&startMonth>i||startYear>year?$(months[i]).addClass("disabled"):(year==endYear&&i>endMonth||year>endYear)&&$(months[i]).addClass("disabled");html="",year=10*parseInt(year/10,10);var yearCont=this.widget.find(".datepicker-years").find("th:eq(1)").text(year+"-"+(year+9)).end().find("td");for(this.widget.find(".datepicker-years").find("th").removeClass("disabled"),startYear>year&&this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),year+9>endYear&&this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),year-=1,i=-1;11>i;i++)html+='<span class="year'+(-1===i||10===i?" old":"")+(currentYear===year?" active":"")+(startYear>year||year>endYear?" disabled":"")+'">'+year+"</span>",year+=1;yearCont.html(html)},_fillTime:function(){var _date=this.options._date;if(_date){var timeComponents=this.widget.find(".datepicker-time input[data-time-component]"),hour=this._padLeft(_date.getUTCHours().toString(),2,"0"),minute=this._padLeft(_date.getUTCMinutes().toString(),2,"0"),second=this._padLeft(_date.getUTCSeconds().toString(),2,"0");timeComponents.filter("[data-time-component=hours]").val(hour),timeComponents.filter("[data-time-component=minutes]").val(minute),timeComponents.filter("[data-time-component=seconds]").val(second)}},_fillHours:function(){var i,timeComponents=this.widget.find(".datepicker-time div.input-group"),html='<ul class="dropdown-menu thin-scroll" id="'+this.element.attr("aeId")+'_hours" data-time-component="hours" style="height:160px;width:64px;overflow-y:auto">',current=0;for(i=0;24>i;i+=1){var c=current.toString();html+='<li><a href="#">'+this._padLeft(c,2,"0")+"</a></li>",current++}html+="</ul>",$(timeComponents[0]).next().after(html),$("#"+this.element.attr("aeId")+"_hours").niceScroll()},_fillMinutes:function(){var i,timeComponents=this.widget.find(".datepicker-time div.input-group"),html='<ul class="dropdown-menu thin-scroll" id="'+this.element.attr("aeId")+'_minutes" data-time-component="minutes" style="height:160px;width:64px;overflow-y:auto">',current=0;for(i=0;60>i;i+=1){var c=current.toString();html+='<li><a href="#">'+this._padLeft(c,2,"0")+"</a></li>",current++}html+="</ul>",$(timeComponents[1]).next().after(html),$("#"+this.element.attr("aeId")+"_minutes").niceScroll()},_fillSeconds:function(){var i,c,timeComponents=this.widget.find(".datepicker-time div.input-group"),html='<ul class="dropdown-menu thin-scroll" id="'+this.element.attr("aeId")+'_seconds" data-time-component="seconds" style="height:160px;width:64px;overflow-y:auto">',current=0;for(i=0;60>i;i+=1)c=current.toString(),html+='<li><a href="#">'+this._padLeft(c,2,"0")+"</a></li>",current++;html+="</ul>",$(timeComponents[2]).after(html),$("#"+this.element.attr("aeId")+"_seconds").niceScroll()},_buildTemplate:function(){return'<div class="datetimepicker-widget dropdown-menu"><li class="collapse in"><div class="datepicker">'+$.aeCalendar.template()+'</div><div class="btn_box"><button class="btn btn-default btn-sm">Today</button></div></li></div>'},_compileFormat:function(){for(var match,component,self=this,components=[],mask=[],str=self.format,propertiesByIndex={},i=0,pos=0,formatComponent=$.aeCalendar.formatComponent(),dateFormatComponents=$.aeCalendar.dateFormatComponents;match=formatComponent.exec(str);)component=match[0],component in dateFormatComponents?(i++,propertiesByIndex[i]=dateFormatComponents[component].property,components.push("\\s*"+dateFormatComponents[component].getPattern(this)+"\\s*"),mask.push({pattern:new RegExp(dateFormatComponents[component].getPattern(this)),property:dateFormatComponents[component].property,start:pos,end:pos+=component.length})):(components.push(self._escapeRegExp(component)),mask.push({pattern:new RegExp(self._escapeRegExp(component)),character:component,start:pos,end:++pos})),str=str.slice(component.length);this._mask=mask,this._maskPos=0,this._formatPattern=new RegExp("^\\s*"+components.join("")+"\\s*$"),this._propertiesByIndex=propertiesByIndex},_escapeRegExp:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},_parseDate:function(str){var match,i,property,value,parsed={};if(!(match=this._formatPattern.exec(str)))return null;for(i=1;i<match.length;i++)property=this._propertiesByIndex[i],property&&(value=match[i],/^\d+$/.test(value)&&(value=parseInt(value,10)),parsed[property]=value);return this._finishParsingDate(parsed)},_finishParsingDate:function(parsed){var year,month,date,hours,minutes,seconds,milliseconds;return year=parsed.UTCFullYear,parsed.UTCYear&&(year=2e3+parsed.UTCYear),year||(year=1970),month=parsed.UTCMonth?parsed.UTCMonth-1:0,date=parsed.UTCDate||1,hours=parsed.UTCHours||0,minutes=parsed.UTCMinutes||0,seconds=parsed.UTCSeconds||0,milliseconds=parsed.UTCMilliseconds||0,parsed.Hours12&&(hours=parsed.Hours12),parsed.Period12&&(/pm/i.test(parsed.Period12)?12!=hours&&(hours=(hours+12)%24):hours%=12),this._UTCDate(year,month,date,hours,minutes,seconds,milliseconds)},_UTCDate:function(){return new Date(Date.UTC.apply(Date,arguments))}}),$.aeCalendar=$.aeCalendar||{},$.extend($.aeCalendar,{dateFormatComponents:{dd:{property:"UTCDate",getPattern:function(){return"(0?[1-9]|[1-2][0-9]|3[0-1])\\b"}},MM:{property:"UTCMonth",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},yy:{property:"UTCYear",getPattern:function(){return"(\\d{2})\\b"}},yyyy:{property:"UTCFullYear",getPattern:function(){return"(\\d{4})\\b"}},hh:{property:"UTCHours",getPattern:function(){return"(0?[0-9]|1[0-9]|2[0-3])\\b"}},mm:{property:"UTCMinutes",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ss:{property:"UTCSeconds",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ms:{property:"UTCMilliseconds",getPattern:function(){return"([0-9]{1,3})\\b"}},HH:{property:"Hours12",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},PP:{property:"Period12",getPattern:function(){return"(AM|PM|am|pm|Am|aM|Pm|pM)\\b"}}},formatComponent:function(){var keys=[];for(var k in $.aeCalendar.dateFormatComponents)keys.push(k);return keys[keys.length-1]+="\\b",keys.push("."),new RegExp(keys.join("\\b|"))},formatReplacer:function(){var keys=[];for(var k in $.aeCalendar.dateFormatComponents)keys.push(k);return keys[keys.length-1]+="\\b",keys.push("."),keys.pop(),new RegExp(keys.join("\\b|"),"g")},isLeapYear:function(year){return year%4===0&&year%100!==0||year%400===0},getDaysInMonth:function(year,month){return[31,$.aeCalendar.isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]},getHeadTemplate:function(){return'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>'},getContTemplate:function(){return'<tbody><tr><td colspan="7"></td></tr></tbody>'},template:function(){return'<div class="datepicker-days"><table class="table-condensed"><thead><tr><th class="prev">&lsaquo;</th><th colspan="2" class="switch"></th><th colspan="3" class="switch"></th><th class="next">&rsaquo;</th></tr></thead><tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+$.aeCalendar.getHeadTemplate()+$.aeCalendar.getContTemplate()+'</table></div><div class="datepicker-years"><table class="table-condensed">'+$.aeCalendar.getHeadTemplate()+$.aeCalendar.getContTemplate()+'</table></div><div class="datepicker-time"><div class="input-group"><input type="text" class="form-control" maxlength="3" data-time-component="hours"><span class="input-group-btn" data-time-component="hours"><button type="button" class="btn btn-default btn-sm"><i class="fa fa-sort"></i></button></span></div><span></span><div class="input-group"><input type="text" class="form-control" maxlength="3" data-time-component="minutes"><span class="input-group-btn" data-time-component="minutes"><button type="button" class="btn btn-default btn-sm"><i class="fa fa-sort"></i></button></span></div><span></span><div class="input-group"><input type="text" class="form-control" maxlength="3" data-time-component="seconds"><span class="input-group-btn" data-time-component="seconds"><button type="button" class="btn btn-default btn-sm"><i class="fa fa-sort"></i></button></span></div></div>'},modes:[{clsName:"days",navFnc:"UTCMonth",navStep:1},{clsName:"months",navFnc:"UTCFullYear",navStep:1},{clsName:"years",navFnc:"UTCFullYear",navStep:10}],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})}),define("ui-checkbox",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeCheckbox",{options:{isHorizontal:!0,multiSeparator:",",enable:!0,visible:!0,labelField:"text",valueField:"value",initType:"html"},_create:function(){var options=this.options,inputEl=this.element,id=inputEl.attr("id");"html"==options.initType&&this._buildOptions(options,inputEl),id&&inputEl.attr("aeId",id),inputEl.hide()},_init:function(){var self=this,options=self.options,source=options.dataSource,inputEl=self.element;options.aeType?inputEl.attr("aeType",options.aeType):inputEl.attr("aeType","aeCheckbox"),source&&"string"==typeof source&&(source=$.parseJSON(source),self.reload(source))},_buildOptions:function(options,inputEl){options.isHorizontal="false"==inputEl.attr("isHorizontal")?!1:options.isHorizontal,options.multiSeparator=inputEl.attr("multiSeparator")||options.multiSeparator,options.enable="false"==inputEl.attr("enable")?!1:options.enable,options.visible="false"==inputEl.attr("visible")?!1:options.visible,options.aeType=inputEl.attr("aeType"),options.labelField=inputEl.attr("labelField")||options.labelField,options.valueField=inputEl.attr("valueField")||options.valueField,options.dataSource=inputEl.attr("dataSource");var onSelect=inputEl.attr("onSelect");options.onSelect=onSelect?function(event){if($.isString(onSelect)){var i=onSelect.indexOf("("),actName=i>0?onSelect.substring(0,i):onSelect,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}}:options.onSelect},_bindEvent:function(){var self=this,onSelect=self.options.onSelect,label=self._getAllOptions();label.off("click.aeCheckbox").on("click.aeCheckbox",function(event){event.preventDefault(),event.stopPropagation(),event.cancelBubble=!0,$(this).hasClass("checked")?$(this).removeClass("checked"):$(this).addClass("checked"),onSelect&&onSelect&&self._trigger("onSelect",null,event)})},getValue:function(){var options=this.options,input=this._getAllOptions(),values=[];return input.each(function(){$(this).hasClass("checked")&&values.push(""+$(this).prev().val())}),values.join(options.multiSeparator)},setValue:function(value){if("undefined"!=typeof value&&""!==value&&null!=value){var self=this,valueEl=self.element,options=self.options,values=[],allValues=$.data(valueEl,"allValues"),input=self._getAllOptions();input.removeClass("checked"),values=value.split(options.multiSeparator);for(var i=0;i<values.length;i++){var index=allValues?allValues.indexOf(values[i]):-1;index>-1&&($(input[index]).hasClass("disabled")||$(input[index]).addClass("checked"))}}},getDisplayText:function(){var options=this.options,input=this._getAllOptions(),textValues=[];return input.each(function(){$(this).hasClass("checked")&&textValues.push(""+$(this).text())}),textValues.join(options.multiSeparator)},clear:function(){this._getAllOptions().removeClass("checked")},reload:function(data){this._loadData(data),this.options.visible||this.element.nextAll(".ckbox").addClass("hidden"),this.options.enable?this.enable(!0):this.enable(!1)},enable:function(value){void 0===value&&(value=!0);var self=this,opts=self.options,enable=opts.enable,input=self._getAllOptions();(value===!0||"true"===value)&&(input.removeClass("disabled"),enable=!0,this._bindEvent()),(value===!1||"false"===value)&&(input.addClass("disabled").off("click.aeCheckbox"),enable=!1)},visible:function(value){void 0===value&&(value=!0);var $ele=this.element,visible=this.options.visible;(value===!0||"true"===value)&&($ele.nextAll(".ckbox").removeClass("hidden"),visible=!0),(value===!1||"false"===value)&&($ele.nextAll(".ckbox").addClass("hidden"),visible=!1)},_loadData:function(records){var self=this,valueEl=self.element,innerHtml="",allValues=[];valueEl.nextAll(".ckbox").length>0&&valueEl.nextAll(".ckbox").remove(),$(records).each(function(index,item){innerHtml+=self._wrapText(item),allValues.push(""+item[self.options.valueField])}),$(innerHtml).insertAfter(valueEl),$.data(valueEl,"allValues",allValues)},_getAllOptions:function(){return this.element.nextAll(".ckbox").find(">label")},_wrapText:function(item){return'<div class="ckbox ckbox-default '+(this.options.isHorizontal?"ckbox_horizontal":"")+'"><input type="checkbox" id="'+item[this.options.valueField]+'" value="'+item[this.options.valueField]+'"/><label for="'+item[this.options.valueField]+'" class="'+(item.checked?"checked":"")+" "+(item.disabled?"disabled":"")+'">'+item[this.options.labelField]+"</label></div>"}})}),define("ui-combo",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeCombo",{options:{optionField:"text",valueField:"value",enable:!0,visible:!0,listMaxHeight:300,multi:!1,multiSeparator:",",showClear:!1,_flag:!1,initType:"html",onValueChange:function(target,newValue,oldValue,event){}},reload:function(data){var self=this,inputEl=self.textInput,valueEl=self.element;self.options.value="",valueEl.val(""),inputEl.val(""),self._loadData(data)},getValue:function(){var value=this.element.val();return value?value:""},setValue:function(v){return this._setValue(v+""),this},setDefault:function(v){return this.options._flag=!0,this._setValue(v+""),this.options._flag=!1,this},getDisplayText:function(){var value=this.textInput.val();return value?value:""},clear:function(){var self=this,inputEl=self.textInput,valueEl=self.element;self.options.value="",self.options.multi&&(valueEl.parent().find(">span").remove(),self.options.emptyText&&$('<em class="label-tip">'+self.options.emptyText+"</em>").prependTo(valueEl.parent()).width(valueEl.parent().width()-12)),valueEl.val(""),inputEl.val(""),!self.options.multi&&self.options.showClear&&valueEl.prevAll().is(".icon-error2")&&valueEl.prevAll(".icon-error2").hide()},visible:function(value){void 0===value&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&($ele.closest("div.input-icon").removeClass("hidden"),this.options.visible=!0),(value===!1||"false"===value)&&($ele.closest("div.input-icon").addClass("hidden"),this.options.visible=!1)},enable:function(value){var self=this;void 0===value&&(value=!0);var textInput=this.textInput,val=this.element.val(),valueEl=this.element;if(value===!0||"true"===value)if(this.options.enable=!0,self.options.multi){textInput.prop("disabled",!1);var labelInfo=valueEl.parent().find(">span.label-info");labelInfo.length>0&&labelInfo.find(">i.icon-error2").on("click",function(){var val=[],objVal="";$(this).parent().remove(),valueEl.parent().find(">span.label-info").each(function(){val.push($(this).attr("value"))}),objVal=val.join(self.options.multiSeparator),valueEl.val(objVal),self.options.value=objVal})}else textInput.prop({readonly:!0,disabled:!1}).addClass("form-readonly"),self.options.showClear&&this.element.prevAll().is(".icon-error2")&&""!==val&&"undefined"!=typeof val&&this.element.prevAll(".icon-error2").show();if(value===!1||"false"===value)if(this.options.enable=!1,self.options.multi){textInput.prop("disabled",!0);var labelInfo=valueEl.parent().find(">span.label-info");labelInfo.length>0&&labelInfo.find(">i.icon-error2").off()}else textInput.prop({readonly:!1,disabled:!0}).removeClass("form-readonly"),self.options.showClear&&this.element.prevAll().is(".icon-error2")&&""!==val&&"undefined"!=typeof val&&this.element.prevAll(".icon-error2").hide()},_init:function(){var options=this.options,inputEl=this.textInput,source=options.dataSource,valueEl=this.element;if(options.labelField||(options.labelField=options.optionField),options.visible||valueEl.closest("div.input-icon").addClass("hidden"),options.enable?this.enable(!0):this.enable(!1),options.width&&valueEl.parents(".input-icon").css("width",options.width),this._refeshEmptyText(options.emptyText),options.multi&&options.emptyText&&$('<em class="label-tip">'+options.emptyText+"</em>").prependTo(valueEl.parent()).width(valueEl.parent().width()-12),options.showClear&&!options.multi){var div=valueEl.closest("div.input-icon");div.addClass("comboxclear"),$('<i class="icon-error2"></i>').prependTo(div).on("click",function(){options.value="",inputEl.val(""),valueEl.val(""),$(this).hide()}).hide()}source&&"string"==typeof source&&(source=$.parseJSON(source),this.reload(source)),this._bindEvent(),valueEl.attr("value")&&(this.setValue(valueEl.attr("value")),this.options._flag=!0)},_create:function(){var obj,ss,valueEl=this.element,options=this.options;this.element.parents(".modal-content");"html"==options.initType&&this._buildOptions(options,valueEl),obj=$("<input></input>"),obj.attr({aeType:valueEl.attr("aeType"),aeId:valueEl.attr("id"),aeInit:!1,dataField:valueEl.attr("dataField"),aeValidate:valueEl.attr("aeValidate"),rules:valueEl.attr("rules"),value:valueEl.attr("value")}),this.element=obj,valueEl.after(obj),valueEl.empty().hide(),this.element.wrap('<div class="input-icon right"></div>'),$('<i class="icon-arrowlup-down"></i>').insertBefore(this.element),options.multi&&this.element.wrap('<div class="form-control"></div>'),this.textInput=this.element.clone().attr({id:"COMBO_INPUT_TEXT_"+this.element.attr("aeId"),aeInit:!1}).removeAttr("dataField").insertAfter(this.element),obj=document.body;var popupArray=$.aries.page.data._getHidedData("ae_popup_Id");$.isArray(popupArray)&&(1===popupArray.length&&(ss=popupArray[0],obj=ss&&"div"!==ss.popupType?$("#"+ss.elementId):document.body),2===popupArray.length&&(ss=popupArray[1],obj=ss&&"div"!==ss.popupType?$("#"+ss.elementId):document.body)),this.dropList=$('<ul class="dropdown-menu dropdown-menu-hover" role="menu" id="'+this.element.attr("aeId")+'_scrollbar">').appendTo(obj).hide(),options.multi||this.textInput.addClass("form-control"),this.element.hide()},_buildOptions:function(options,valueEl){options.enable="false"==valueEl.attr("enable")?!1:options.enable,options.visible="false"==valueEl.attr("visible")?!1:options.visible,options.emptyText=valueEl.attr("emptyText"),options.listMaxHeight=parseInt(valueEl.attr("listMaxHeight"))||options.listMaxHeight,options.multi="true"==valueEl.attr("multi")?!0:options.multi,options.multiSeparator=valueEl.attr("multiSeparator")||options.multiSeparator,options.labelField=valueEl.attr("labelField"),options.optionField=valueEl.attr("optionField")||options.optionField,options.valueField=valueEl.attr("valueField")||options.valueField,options.showClear="true"==valueEl.attr("showClear")?!0:options.showClear,options.dataSource=valueEl.attr("dataSource"),options.aeType=valueEl.attr("aeType"),options.width=valueEl.attr("width"),options.value=valueEl.attr("value"),this._buildOptionsEvent(options,valueEl)},_buildOptionsEvent:function(options,valueEl){var onValueChange=valueEl.attr("onValueChange")||options.onValueChange,onClick=valueEl.attr("onClick")||"";this._buildCommonEvent(options,"labelField",options.labelField),this._buildCommonEvent(options,"optionField",options.optionField),this._buildCommonEvent(options,"valueField",options.valueField),options.onValueChange=onValueChange?function(target,newValue,oldValue,event){if($.isString(onValueChange)){var i=onValueChange.indexOf("("),actName=i>0?onValueChange.substring(0,i):onValueChange,func="return window."+actName+"?"+actName+".call(window, t ,n,o,e):false;";return new Function("t","n","o","e",func)(target,newValue,oldValue,event)}}:"",options.onClick=onClick?function(){if($.isString(onClick)){var i=onClick.indexOf("("),actName=i>0?onClick.substring(0,i):onClick,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}}:""},_buildCommonEvent:function(ops,evtName,evtValue){ops[evtName]=evtValue&&evtValue.indexOf("(")>0?function(param1,param2){if($.isString(evtValue)){var i=evtValue.indexOf("("),actName=i>0?evtValue.substring(0,i):evtValue,func="return window."+actName+"?"+actName+".call(window,p1,p2):false;";return new Function("p1","p2",func)(param1,param2)}}:ops[evtName];
},_bindEvent:function(){var self=this,options=self.options,valueEl=self.element,dropList=self.dropList,emptyText=options.emptyText;input=self.textInput,input.focus(function(){if(self._refeshEmptyText(emptyText),self.options.multi&&options.emptyText){var em=self.element.parent().find(">em");em.length>0&&em.remove()}options.onClick&&self._trigger("onClick"),self._showDropList()}).blur(function(){if(self._refeshEmptyText(emptyText),self.options.multi&&options.emptyText){var span=self.element.parent().find(">span");span.length<=0&&$('<em class="label-tip">'+self.options.emptyText+"</em>").prependTo(self.element.parent()).width(self.element.parent().width()-12)}}),dropList.mousedown(function(e){e.stopPropagation()}),valueEl.parents(".input-icon").find(">i.icon-arrowlup-down").click(function(){self.textInput.focus()}),options.multi&&valueEl.parent().click(function(){self.textInput.focus()}),$(document).on("mousedown.aeCombo",this.globalEvent=function(){dropList.hide()})},_showDropList:function(){var valuedItem,self=this,options=self.options,valueInput=(self.textInput,self.element),dropList=self.dropList,nowValue=valueInput.val(),$listRows=dropList.find("li"),allItems=self._getAllOptionsBeforeFiltered();if(!(allItems.size()<=0)){if($listRows.removeClass("current").find(">i.fa-check").remove(),void 0!==nowValue&&""!==nowValue){var allValues=$.data(valueInput,"allValues");if(options.multi){for(var selectedValues=nowValue.split(options.multiSeparator),i=0;i<selectedValues.length;i++){var index=allValues.indexOf(selectedValues[i]);index>-1&&$(dropList.find("li").get(index)).addClass("current").prepend('<i class="fa fa-check"></i>')}valueItem=selectedValues[0]}else{var index=allValues?allValues.indexOf(nowValue):-1;index>-1&&(valuedItem=$(dropList.find("li").get(index)).addClass("current").prepend('<i class="fa fa-check"></i>'))}}var span=valueInput.parent(),inputPos=span.offset(),popupArray=$.aries.page.data._getHidedData("ae_popup_Id"),ss="";$.isArray(popupArray)&&(1===popupArray.length&&(ss=popupArray[0]),2===popupArray.length&&(ss=popupArray[1]));var widgetTop,widgetLeft;if(ss&&"div"!==ss.popupType){var popup=$("#"+ss.elementId).offset();widgetTop=inputPos.top+span.outerHeight()-popup.top,widgetLeft=inputPos.left-popup.left}else widgetTop=inputPos.top+span.outerHeight(),widgetLeft=inputPos.left;var epos=inputPos,wh=$(window).height(),ws=$(window).scrollTop(),woh=dropList.outerHeight(),eoh=this.element.outerHeight();epos.top+eoh+woh>ws+wh&&(widgetTop=epos.top-woh-10),dropList.css({position:"absolute",left:widgetLeft,top:widgetTop,width:span.outerWidth()}),dropList.show()}},_loadData:function(records){var options=this.options,valueEl=this.element;options.dataSource=records;var labelField=options.labelField,allInputText=[];"string"==typeof labelField?$(records).each(function(){allInputText.push(this[labelField])}):$(records).each(function(index){allInputText.push(labelField(this,index))}),$.data(valueEl,"allInputText",allInputText);var valueField=options.valueField,allValues=[];"string"==typeof valueField?$(records).each(function(){allValues.push(""+this[valueField])}):$(records).each(function(index){allValues.push(""+valueField(this,index))}),$.data(valueEl,"allValues",allValues);var dropList=this.dropList.empty(),optionField=options.optionField,innerHtml="",self=this;"string"==typeof optionField?$(records).each(function(index){innerHtml+=self._wrapText(this[optionField])}):$(records).each(function(index){innerHtml+=self._wrapText(options.optionField(this,index))}),innerHtml&&($(innerHtml).appendTo(dropList),dropList.show().css("height","auto"),dropList.hide()),dropList.height()>options.listMaxHeight&&(dropList.hasClass("scorll-bar-box")||(dropList.addClass("scorll-bar-box").height(options.listMaxHeight),$("#"+this.element.attr("aeId")+"_scrollbar").niceScroll())),options.value&&this._setValue(""+options.value),this._bindEventsToList()},_wrapText:function(text){return"string"==typeof this.options.optionField?'<li><a title="'+text+'">'+text+"</a></li>":"<li><a>"+text+"</a></li>"},_getAllOptionsBeforeFiltered:function(){return this.dropList.find("a")},_bindEventsToList:function(){var self=this,items=self._getAllOptionsBeforeFiltered();items.mousedown(function(){self._backfill(this)})},_backfill:function(source){if(0!==source.length){var self=this,valueEl=self.element,dropList=self.dropList,options=self.options,enableMulti=options.multi;if(enableMulti){var obj=$(source).parent();obj.toggleClass("current"),obj.find(">i.fa-check").length>0?obj.find(">i.fa-check").remove():obj.prepend('<i class="fa fa-check"></i>')}else this._getAllOptionsBeforeFiltered().parent().removeClass("current").find(">i.fa-check").remove(),$(source).parent().addClass("current").prepend('<i class="fa fa-check"></i>');if("none"!=dropList.css("display")){for(var value=[],selectedIndexs=dropList.find("li[class*=current]"),i=0;i<selectedIndexs.length;i++){var nowIndex=this._getAllOptionsBeforeFiltered().parent().index(selectedIndexs[i]);nowIndex>-1&&value.push($.data(valueEl,"allValues")[nowIndex])}this._setValue(value.join(enableMulti?options.multiSeparator:"")),enableMulti||dropList.hide()}}},_setValue:function(value){var input=this.textInput,valueEl=this.element,dropList=this.dropList,valueChange=!0,oldValue=valueEl.val(),options=this.options;value==oldValue&&(valueChange=!1);var allValues=$.data(valueEl,"allValues"),inputText=[],values=[];options.multi?values=value.split(options.multiSeparator):values.push(value);for(var i=0;i<values.length;i++){var index=allValues?allValues.indexOf(values[i]):-1;index>-1?inputText.push($.data(valueEl,"allInputText")[index]):(valueEl.val(""),value="")}if(valueEl.val(value),options.multi){valueEl.parent().find(">span.label-info").length>0&&valueEl.parent().find(">span.label-info").remove();for(var innerHtml="",j=0;j<inputText.length;j++)innerHtml+='<span class="label label-info label-as-badge" value="'+values[j]+'">'+inputText[j]+'<i class="icon-error2"></i></span>';if($(innerHtml).insertBefore(valueEl),valueEl.parent().find(">span.label-info").each(function(){var ulWidth=dropList.width()-60;$(this).width()>ulWidth&&$(this).width(ulWidth).prop("title",$(this).text())}).find(">i.icon-error2").on("click",function(){var val=[],objVal="";$(this).parent().remove(),valueEl.parent().find(">span.label-info").each(function(){val.push($(this).attr("value"))}),objVal=val.join(options.multiSeparator),valueEl.val(objVal),options.value=objVal}),options.emptyText){var em=valueEl.parent().find(">em");em.length>0&&em.remove()}input.val(inputText.join(options.multiSeparator))}else input.val(inputText.join("")),options.showClear&&options.enable&&""!==valueEl.val()&&"undefined"!=typeof valueEl.val()&&valueEl.prevAll(".icon-error2").show();options.value=value,options._flag||options.onValueChange&&valueChange&&this._trigger("onValueChange",null,input,value,oldValue);var span=valueEl.parent(),inputPos=span.offset(),epos=inputPos,widgetTop=inputPos.top+span.outerHeight(),wh=$(window).height(),ws=$(window).scrollTop(),woh=dropList.outerHeight(),eoh=span.outerHeight();epos.top+eoh+woh>ws+wh&&(widgetTop=epos.top-woh-10),dropList.css({position:"absolute",left:inputPos.left,top:widgetTop,width:span.outerWidth()})},_refeshEmptyText:function(emptyText){var inputEl=this.textInput;this.element;emptyText&&(this.options.multi||(""===inputEl.prop("placeholder")?inputEl.prop("placeholder",emptyText):inputEl.prop("placeholder")===emptyText&&inputEl.prop("placeholder","")))}})}),define("ui-radio",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeRadio",{options:{isHorizontal:!0,enable:!0,visible:!0,labelField:"text",valueField:"value",initType:"html"},_create:function(){var options=this.options,inputEl=this.element,id=inputEl.attr("id");"html"==options.initType&&this._buildOptions(options,inputEl),id&&inputEl.attr("aeId",id),inputEl.hide()},_init:function(){var self=this,options=self.options,source=options.dataSource,inputEl=self.element;inputEl.attr("aeType",options.aeType||"aeRadio"),source&&"string"==typeof source&&(source=$.parseJSON(source),self.reload(source))},_buildOptions:function(options,inputEl){options.isHorizontal="false"==inputEl.attr("isHorizontal")?!1:options.isHorizontal,options.enable="false"==inputEl.attr("enable")?!1:options.enable,options.visible="false"==inputEl.attr("visible")?!1:options.visible,options.aeType=inputEl.attr("aeType"),options.labelField=inputEl.attr("labelField")||options.labelField,options.valueField=inputEl.attr("valueField")||options.valueField,options.dataSource=inputEl.attr("dataSource");var onSelect=inputEl.attr("onSelect");options.onSelect=onSelect?function(event){if($.isString(onSelect)){var i=onSelect.indexOf("("),actName=i>0?onSelect.substring(0,i):onSelect,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}}:options.onSelect},_buildEvent:function(){var self=this,input=self._getAllOptions(),onSelect=self.options.onSelect;input.bind("click.aeRadio",function(e){onSelect&&onSelect(e)})},getValue:function(){var input=this._getAllOptions(),values=[];return input.each(function(index,item){$.prop(item,"checked")&&values.push(""+$(item).val())}),values.join("")},setValue:function(v){if("undefined"!=typeof v&&""!==v&&null!==v){var input=this._getAllOptions();input.each(function(idx,item){$(item).val()!==v||$.attr(item,"disabled")||$.prop(item,"checked",!0)})}},getDisplayText:function(){var input=this._getAllOptions(),textValues=[];return input.each(function(index,item){$.prop(item,"checked")&&textValues.push(""+$(item).next().text())}),textValues.join("")},clear:function(){this._getAllOptions().prop("checked",!1)},reload:function(data){this._loadData(data),this.options.visible||this.element.nextAll(".rdio").addClass("hidden"),this.enable(!!this.options.enable)},enable:function(value){void 0===value&&(value=!0);var self=this,opts=self.options,enable=opts.enable,input=self._getAllOptions();(value===!0||"true"===value)&&(input.prop("disabled",!1),enable=!0),(value===!1||"false"===value)&&(input.prop("disabled",!0),enable=!1)},visible:function(value){void 0===value&&(value=!0);var $ele=this.element,visible=this.options.visible;(value===!0||"true"===value)&&($ele.nextAll(".rdio").removeClass("hidden"),visible=!0),(value===!1||"false"===value)&&($ele.nextAll(".rdio").addClass("hidden"),visible=!1)},_loadData:function(records){var self=this,$ele=this.element,innerHtml="";$ele.nextAll(".rdio").length>0&&$ele.nextAll(".rdio").remove(),$(records).each(function(index,item){innerHtml+=self._wrapText(item)}),$(innerHtml).insertAfter($ele),self._buildEvent()},_getAllOptions:function(){return this.element.nextAll(".rdio").find('input[type="radio"]')},_wrapText:function(item){var random=parseInt(1e3*Math.random());return'<div class="rdio '+(this.options.isHorizontal?"rdio_horizontal":"")+'"><input type="radio" '+(item.checked?"checked":"")+" "+(item.disabled?"disabled":"")+' id="ae_radio_'+random+'" name="'+item.name+'" value="'+item[this.options.valueField]+'"/><label for="ae_radio_'+random+'">'+item[this.options.labelField]+"</label></div>"}})}),define("ui-search",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeSearch",{options:{enable:!0,onlyRead:!1,minChars:1,delay:500,cacheSize:10,method:"POST",listMaxHeight:300,queryName:"key",crossDomain:!1,preProcess:function(text,data){return data},onBeforeSuggest:function(text,event){},onSuggesting:function(text,event){},onSuccess:function(data,textStatus,event){},onError:function(code,info,error,event){},onSelect:function(rowData,text,index,event){},initType:"html"},_create:function(){var valueEl=this.element,options=this.options,id=valueEl.attr("id");"html"==options.initType&&this._buildOptions(options,valueEl),id&&valueEl.attr("aeId",id),valueEl.wrap('<span class="e_elements"><span class="e_input e_input-left"><span></span></span></span>'),this.dropList=$($('<div class="c_combox"><div class="c_comboxContent"></div></div>').css({position:"absolute",zIndex:2e3}).appendTo(document.body).children().first()).hide()},_buildOptions:function(options,valueEl){valueEl.attr("cacheSize")&&(options.cacheSize=parseInt(valueEl.attr("cacheSize"))),options.delay=parseInt(valueEl.attr("delay"))||options.delay,options.enable="false"==valueEl.attr("enable")?!1:options.enable,options.onlyRead="true"==valueEl.attr("onlyRead")?!0:options.onlyRead,options.listMaxHeight=parseInt(valueEl.attr("listMaxHeight"))||options.listMaxHeight,options.listWidth=parseInt(valueEl.attr("listWidth")),options.minChars=parseInt(valueEl.attr("minChars"))||options.minChars,options.queryName=valueEl.attr("queryName")||options.queryName,options.dataSource=valueEl.attr("dataSource");var clientFormatter=valueEl.attr("clientFormatter"),preProcess=valueEl.attr("preProcess"),onBeforeSuggest=valueEl.attr("onBeforeSuggest"),onSuggesting=valueEl.attr("onSuggesting"),onSelect=valueEl.attr("onSelect"),onSuccess=valueEl.attr("onSuccess"),onError=valueEl.attr("onError");this._buildOptionsEvent(options,"clientFormatter",clientFormatter),this._buildOptionsEvent(options,"preProcess",preProcess),this._buildOptionsEvent(options,"onBeforeSuggest",onBeforeSuggest),this._buildOptionsEvent(options,"onSuggesting",onSuggesting),options.onSelect=onSelect?function(text,rowData,index,event){if($.isString(onSelect)){var i=onSelect.indexOf("("),actName=i>0?onSelect.substring(0,i):onSelect,func="return window."+actName+"?"+actName+".call(window, t ,r , i , e):false;";return new Function("t","r","i","e",func)(text,rowData,index,event)}}:options.onSelect,options.onSuccess=onSuccess?function(data,textStatus,event){if($.isString(onSuccess)){var i=onSuccess.indexOf("("),actName=i>0?onSuccess.substring(0,i):onSuccess,func="return window."+actName+"?"+actName+".call(window, d ,t ,e):false;";return new Function("d","t","e",func)(data,textStatus,event)}}:options.onSuccess,options.onError=onError?function(code,info,error,event){if($.isString(onError)){var i=onError.indexOf("("),actName=i>0?onError.substring(0,i):onError,func="return window."+actName+"?"+actName+".call(window, c ,i ,er ,e):false;";return new Function("c","i","er","e",func)(code,info,error,event)}}:options.onError},_buildOptionsEvent:function(ops,evtName,evtValue){ops[evtName]=evtValue?function(param1,param2){if($.isString(evtValue)){var i=evtValue.indexOf("("),actName=i>0?evtValue.substring(0,i):evtValue,func="return window."+actName+"?"+actName+".call(window,p1,p2):false;";return new Function("p1","p2",func)(param1,param2)}}:ops[evtName]},_init:function(){var self=this,options=this.options,inputEl=this.element,dropList=this.dropList;options.minChars<0&&(options.minChars=0),options.cacheSize<0&&(options.cacheSize=0),options.delay<0&&(options.delay=0),options.enable?self.enable():self.disable(),options.onlyRead?inputEl.attr("readonly","readonly"):inputEl.removeAttr("readonly"),inputEl.focus(function(){$(".c_comboxContent").hide(),$(".c_option").css("visibility","hidden")}).blur(function(){}).keydown(function(e){e.keyCode==$.ae.keyCode.TAB&&dropList.hide()}).keyup(function(e){var key=e.keyCode,keyEnum=$.ae.keyCode;switch(key){case keyEnum.DOWN:"none"!==dropList.css("display")?self._selectNext():dropList.find("a").size()>0&&dropList.show();break;case keyEnum.UP:"none"!==dropList.css("display")?self._selectPrev():dropList.find("a").size()>0&&dropList.show();break;case keyEnum.ENTER:if("none"===dropList.css("display"))return;return dropList.hide(),self._triggerOnSelect(e),!1;case keyEnum.ESCAPE:dropList.hide();break;case keyEnum.TAB:break;default:if(!options.enable||options.onlyRead)return!1;if(options.delay>0){var delayTimer=$.data(inputEl,"delayTimer");delayTimer&&clearTimeout(delayTimer),delayTimer=setTimeout(function(){self._suggest()},options.delay),$.data(inputEl,"delayTimer",delayTimer)}else self._suggest()}}).mousedown(function(e){e.stopPropagation()}),dropList.mousedown(function(e){e.stopPropagation()}),$(document).bind("mousedown.aeSearch",this.globalEvent=function(){dropList.hide()})},clearCache:function(){$.removeData(this.element,"cache")},showMessage:function(message){var inputEl=this.element,dropList=this.dropList.empty().css("height","auto");$("<div>"+message+"<div>").appendTo(dropList),dropList.parent().css("left",inputEl.parent().offset().left).css("top",inputEl.offset().top+inputEl.outerHeight());var listWidth=this.options.listWidth;listWidth?"auto"!==listWidth&&dropList.parent().width(listWidth):dropList.parent().width(inputEl.parent().outerWidth()),dropList.show();var listMaxHeight=this.options.listMaxHeight;return"auto"!==listMaxHeight&&dropList.height()>listMaxHeight&&dropList.height(listMaxHeight).css("overflow","auto"),this},disable:function(){this.options.enable=!1,this.element.attr("disabled","disabled").parent().parent().addClass("e_dis")},enable:function(){this.options.enable=!0,this.element.removeAttr("disabled").parent().parent().removeClass("e_dis")},reload:function(dataSource){var options=this.options;dataSource&&(options.dataSource=dataSource),options.cacheSize>0&&this.clearCache()},getData:function(){var returnValue=$.data(this.element,"records");return returnValue||null},getDropList:function(){return this.dropList},destroy:function(){$(document).unbind("mousedown.aeSearch",this.globalEvent),this.dropList.parent().remove()},_clear:function(){return this.element.val(""),this.dropList.find("li").removeClass("on")},_selectNext:function(){var dropList=this.dropList,index=dropList.find(".on").index(),all=this._clear();index+=1,index>=all.size()&&(index=0),this._scrollToAndSelect(all,index,dropList)},_selectPrev:function(){var dropList=this.dropList,index=dropList.find(".on").index(),all=this._clear();index-=1,0>index&&(index=all.size()-1),this._scrollToAndSelect(all,index,dropList)},_scrollToAndSelect:function(all,index,dropList){if(!(all.size()<1)){var target=$(all.get(index)).addClass("on"),targetTop=target.position().top;if(0>=targetTop)dropList.scrollTop(dropList.scrollTop()+targetTop);else{var offset=targetTop+target.outerHeight()-dropList.height();offset>0&&dropList.scrollTop(dropList.scrollTop()+offset)}this._select(index)}},_select:function(index){var rowData,text,inputEl=this.element,records=$.data(inputEl,"records");records.valueField?(rowData=records.data[index],text=rowData[records.valueField]):(rowData=records[index],text=rowData),inputEl.val(text),$.data(inputEl,"lastStr",text)},_suggest:function(){var inputEl=this.element,text=inputEl.val(),last=$.data(inputEl,"lastStr");if(!last||last!==text){$.data(inputEl,"lastStr",text);var options=this.options,cache=$.data(inputEl,"cache");if(text.length>0&&text.length>=options.minChars){if(cache){var data=cache[text];if(data)return $.data(inputEl,"records",data),void this._buildDropList(data,text)}if(options.onBeforeSuggest&&this._trigger("onBeforeSuggest",null,text)===!1)return void this.dropList.empty().hide();var self=this,params='{"'+options.queryName+'":"'+text+'"}';$.aries.ajax.post(options.dataSource,params,function(data,textStatus){var onSuccess=options.onSuccess;if(!onSuccess||self._trigger("onSuccess",null,data,textStatus)!==!1){var preProcess=options.preProcess;if(preProcess&&(data=preProcess(text,data)),$.isEmptyObject(data)&&(data=[]),options.cacheSize>0){var cache=$.data(inputEl,"cache")||{___keys:[]},keys=cache.___keys;if(keys.length==options.cacheSize){var k=keys[0];cache.___keys=keys.slice(1),cache[k]=void 0}cache[text]=data,cache.___keys.push(text),$.data(inputEl,"cache",cache)}$.data(inputEl,"records",data);var delay=$.data(inputEl,"delay");delay&&clearTimeout(delay),delay=setTimeout(function(){self._buildDropList(data,text)},100),$.data(inputEl,"delay",delay)}},function(code,info,error){var onError=options.onError;onError&&self._trigger("onError",null,code,info,error)},$.extend({},{type:options.method,dataType:options.crossDomain?"jsonp":"json"}));var onSuggesting=options.onSuggesting;onSuggesting&&self._trigger("onSuggesting",null,text)}else this.dropList.empty().hide()}},_buildDropList:function(records,text){var inputEl=this.element,dropList=this.dropList.empty().css("height","auto"),isSimple=records.valueField?!1:!0,clientFormatter=this.options.clientFormatter,self=this,innerHtml='<div class="c_list c_list-table c_list-col-1"><ul>';isSimple?clientFormatter?$(records).each(function(index){innerHtml+=self._addRow(clientFormatter(this,index))}):$(records).each(function(index){innerHtml+=self._addRow(this)}):clientFormatter&&$(records.data).each(function(index){innerHtml+=self._addRow(clientFormatter(this,index))}),innerHtml+="</ul></div>",innerHtml&&$(innerHtml).appendTo(dropList);var all=dropList.find("a"),$listRows=dropList.find("li");if(all.size()>0){dropList.parent().css("left",parseInt(inputEl.parent().offset().left)).css("top",inputEl.offset().top+inputEl.outerHeight());var listWidth=this.options.listWidth;listWidth?"auto"!==listWidth&&dropList.parent().width(listWidth):dropList.parent().width(inputEl.parents(".e_input").outerWidth()),$listRows.mouseover(function(){$listRows.removeClass("on"),$(this).addClass("on")}).mousedown(function(event){var index=dropList.find(".on").index();self._select(index),dropList.hide(),self._triggerOnSelect(event)}),dropList.show();var listMaxHeight=this.options.listMaxHeight;"auto"!==listMaxHeight&&dropList.height()>listMaxHeight&&dropList.height(listMaxHeight).css("overflow","auto"),dropList.scrollTop(0)}},_addRow:function(html){return'<li><a class="text"><span>'+html+"</span></a></li>"},_triggerOnSelect:function(event){var onSelect=this.options.onSelect;if(onSelect){var index=this.dropList.find(".on").index();if(0>index)return;var rowData,text,records=$.data(this.element,"records");records.valueField?(rowData=records.data[index],text=rowData[records.valueField]):(rowData=records[index],text=rowData),this._trigger("onSelect",event,rowData,text,index)}}})}),define("ui-textarea",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeTextarea",{options:{enable:!0,editable:!0,visible:!0,isValidate:!1,initType:"html"},_create:function(){var options=this.options,inputEl=this.element;"html"==options.initType&&this._buildOptions(options,inputEl);var obj=$("<textarea></textarea>");obj.attr({aeType:inputEl.attr("aeType"),aeId:inputEl.attr("id"),aeInit:"false",dataField:inputEl.attr("dataField"),aeValidate:inputEl.attr("aeValidate"),rules:inputEl.attr("rules"),onAddRules:inputEl.attr("onAddRules")}),this.element=obj,inputEl.after(obj),inputEl.empty().hide(),this.element.addClass("form-control").wrap('<div class="input-icon right"></div>')},_init:function(){var self=this,options=this.options,inputEl=this.element;options.visible||inputEl.addClass("hidden"),options.row&&inputEl.attr("rows",options.row),options.width&&inputEl.css("width",options.width),self.enable(!!options.enable),options.editable?inputEl.removeAttr("readonly"):inputEl.attr("readonly","readOnly"),inputEl.attr("aeType",options.aeType||"aeTextarea"),options.isValidate&&inputEl.blur(function(){inputEl.validate()}),options.value&&self.setValue(options.value)},_buildOptions:function(options,inputEl){options.visible="false"==inputEl.attr("visible")?!1:options.visible,options.enable="false"==inputEl.attr("enable")?!1:options.enable,options.editable="false"==inputEl.attr("editable")?!1:options.editable,options.isValidate="true"==inputEl.attr("isValidate")?!0:options.isValidate,options.aeType=inputEl.attr("aeType"),options.row=parseInt(inputEl.attr("row")),options.width=inputEl.attr("width"),options.value=inputEl.attr("value")},enable:function(value){(void 0===value||""===value)&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&($ele.removeAttr("disabled"),this.options.enable=!0),(value===!1||"false"===value)&&($ele.attr("disabled",!0),this.options.enable=!1)},editable:function(value){(void 0===value||""===value)&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&($ele.removeAttr("readonly"),this.options.editable=!0),(value===!1||"false"===value)&&($ele.attr("readonly","readOnly"),this.options.editable=!1)},visible:function(value){(void 0===value||""===value)&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&($ele.removeClass("hidden"),this.options.visible=!0),(value===!1||"false"===value)&&($ele.addClass("hidden"),this.options.visible=!1)},getValue:function(){var value=this.element.val();return value?value:""},setValue:function(v){"undefined"==typeof v||""===v||null===v?this.element.val(""):this.element.val(v)},clear:function(){this.element.val("").focus()}})}),define("ui-textfield",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeTextfield",{options:{enable:!0,editable:!0,visible:!0,showClear:!1,password:!1,isValidate:!1,initType:"html"},_create:function(){var options=this.options,inputEl=this.element;"html"==options.initType&&this._buildOptions(options,inputEl);var obj=$("<input></input>");obj.attr({aeType:inputEl.attr("aeType"),aeId:inputEl.attr("id"),aeInit:"false",dataField:inputEl.attr("dataField"),aeValidate:inputEl.attr("aeValidate"),rules:inputEl.attr("rules"),onAddRules:inputEl.attr("onAddRules")}),this.element=obj,inputEl.after(obj),inputEl.empty().hide(),this.element.addClass("form-control").wrap('<div class="input-icon"></div>')},_init:function(){var self=this,options=this.options,inputEl=this.element,onValueChange=options.onValueChange;if(options.visible||inputEl.addClass("hidden"),options.password&&inputEl.prop("type","password"),options.width&&inputEl.parent().css("width",options.width),self.enable(!!options.enable),options.editable?inputEl.removeAttr("readonly"):inputEl.attr("readonly","readOnly"),options.aeType?inputEl.attr("aeType",options.aeType):inputEl.attr("aeType","aeTextfield"),options.showClear&&options.visible){this.element.parent().addClass("right");var inputClear=$('<i class="icon-error2"></i>').insertAfter(this.element).hide();inputEl.bind("input propertychange",function(e){""!==inputEl.val()&&"undefined"!=typeof inputEl.val()?inputClear.show():inputClear.hide()}),inputClear.click(function(e){inputEl.val(""),inputClear.hide(),inputEl.focus(),self._trigger("onValueChange",null,e)})}options.height&&(inputEl.css("height",options.height),options.showClear&&inputEl.next().css("line-height",options.height+"px")),inputEl.bind("input propertychange",function(e){onValueChange&&self._trigger("onValueChange",null,e)}),options.emptyText&&(inputEl.focus(function(){self._refeshEmptyText(options.emptyText)}).blur(function(){self._refeshEmptyText(options.emptyText)}),self._refeshEmptyText(options.emptyText)),options.isValidate&&inputEl.blur(function(){inputEl.validate()}),options.value&&self.setValue(options.value)},_buildOptions:function(options,inputEl){options.visible="false"==inputEl.attr("visible")?!1:options.visible,options.enable="false"==inputEl.attr("enable")?!1:options.enable,options.editable="false"==inputEl.attr("editable")?!1:options.editable,options.showClear="true"==inputEl.attr("showClear")?!0:options.showClear,options.password="true"==inputEl.attr("password")?!0:options.password,options.isValidate="true"==inputEl.attr("isValidate")?!0:options.isValidate,options.emptyText=inputEl.attr("emptyText"),options.width=inputEl.attr("width"),options.height=parseInt(inputEl.attr("height")),options.aeType=inputEl.attr("aeType"),options.value=inputEl.attr("value");var onValueChange=inputEl.attr("onValueChange");options.onValueChange=onValueChange?function(event){if($.isString(onValueChange)){var i=onValueChange.indexOf("("),actName=i>0?onValueChange.substring(0,i):onValueChange,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}}:""},_refeshEmptyText:function(emptyText){var el=this.element;emptyText&&(""===el.prop("placeholder")?el.prop("placeholder",emptyText):el.prop("placeholder")===emptyText&&el.prop("placeholder",""))},enable:function(value){(void 0===value||""===value)&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&($ele.removeAttr("disabled"),this.options.enable=!0,this.options.showClear&&""!==$ele.val()&&"undefined"!=typeof $ele.val()&&$ele.next().show()),(value===!1||"false"===value)&&($ele.attr("disabled",!0),this.options.enable=!1,"block"===$ele.next().css("display")&&$ele.next().hide())},editable:function(value){(void 0===value||""===value)&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&($ele.removeAttr("readonly"),this.options.editable=!0,this.options.showClear&&""!==$ele.val()&&"undefined"!=typeof $ele.val()&&$ele.next().show()),(value===!1||"false"===value)&&($ele.attr("readonly","readOnly"),this.options.editable=!1,"block"===$ele.next().css("display")&&$ele.next().hide())},visible:function(value){(void 0===value||""===value)&&(value=!0);var $ele=this.element;if(value===!0||"true"===value){$ele.removeClass("hidden"),this.options.visible=!0;var inputClear=$('<i class="icon-error2"></i>').insertAfter($ele).hide();$ele.bind("input propertychange",function(e){""!==$ele.val()&&"undefined"!=typeof $ele.val()&&inputClear.show()}),inputClear.click(function(){$ele.val(""),inputClear.hide()})}(value===!1||"false"===value)&&($ele.addClass("hidden"),this.options.visible=!1,$ele.next().is(".icon-error2")&&$ele.next().remove())},getValue:function(){var value=this.element.val();return value?value:""},setValue:function(v){"undefined"==typeof v||""===v||null===v?this.element.val(""):(this.element.val(v),this.options.showClear&&this.options.editable&&this.element.next().show())},clear:function(){this.element.val("").focus(),this.options.showClear&&this.element.next().hide()}})}),define("ui-textpopup",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeTextpopup",{options:{enable:!0,visible:!0,draggable:!1,resizable:!1,popupWidth:"600",popupHeight:"auto",showClose:!0,showButton:!0,modal:!0,showClear:!1,initType:"html"},enable:function(value){var self=this;void 0===value&&(value=!0);var $ele=this.element,opts=this.options,enable=opts.enable;(value===!0||"true"===value)&&(enable=!0,$ele.prop({readonly:!0,disabled:!1}).addClass("form-readonly"),$ele.closest("div.input-group").find(".btn-default").prop("disabled",!1),opts.emptyText&&($ele.focus(function(){self._refeshEmptyText(opts.emptyText)}).blur(function(){self._refeshEmptyText(opts.emptyText)}),self._refeshEmptyText(opts.emptyText)),self._bindEvent()),(value===!1||"false"===value)&&(enable=!1,$ele.prop({readonly:!1,disabled:!0}).removeClass("form-readonly").off("click.aeTextpopup"),$ele.closest("div.input-group").find(".btn-default").prop("disabled",!0))},visible:function(value){void 0===value&&(value=!0);var $ele=this.element,visible=this.options.visible;(value===!0||"true"===value)&&($ele.closest("div.input-group").removeClass("hidden"),visible=!0),(value===!1||"false"===value)&&($ele.closest("div.input-group").addClass("hidden"),visible=!1)},clear:function(){this.element.val("").focus(),this.element.removeAttr("valueField"),this.options.showClear&&this.element.next().hide()},getDisplayText:function(){var value=this.element.val();return value?value:""},getValue:function(){var value=this.element.attr("valueField");return value?value:""},setValue:function(v){("undefined"!=typeof v||""!==v)&&this.element.attr("valueField",v)},setDisplayText:function(v){"undefined"==typeof v||""===v?this.element.val(""):(this.element.val(v),this.options.showClear&&this.element.next().show())},_create:function(){var $self=this.element,opts=this.options;"html"==opts.initType&&this._buildOptions(opts,$self);var obj=$("<input></input>");obj.attr({aeType:$self.attr("aeType"),aeId:$self.attr("id"),aeInit:"false",afterAction:$self.attr("afterAction"),dataField:$self.attr("dataField"),aeValidate:$self.attr("aeValidate"),rules:$self.attr("rules")}),this.element=obj,$self.after(obj),$self.empty().hide(),this.element.addClass("form-control").wrap('<div class="input-group"></div>'),this.element.after('<span class="input-group-btn"><button class="btn btn-default"><i class="fa fa-search"></i></button></span>');
},_init:function(){var self=this,$ele=this.element,opts=this.options;opts.visible||$ele.closest("div.input-group").addClass("hidden"),opts.showClear&&($ele.wrap('<div class="input-icon right"></div>'),$('<i class="icon-error2"></i>').insertAfter($ele).hide(),$ele.next().click(function(){self.clear()})),opts.width&&$ele.closest("div.input-group").css("width",opts.width),self.enable(!!opts.enable),opts.aeType?$ele.attr("aeType",opts.aeType):$ele.attr("aeType","aeTextpopup")},_buildOptions:function(options,element){options.enable="false"==element.attr("enable")?!1:options.enable,options.visible="false"==element.attr("visible")?!1:options.visible,options.draggable="true"==element.attr("draggable")?!0:options.draggable,options.resizable="true"==element.attr("resizable")?!0:options.resizable,options.popupWidth=parseInt(element.attr("popupWidth"))||options.popupWidth,options.popupHeight=parseInt(element.attr("popupHeight"))||options.popupHeight,options.showClose="false"==element.attr("showClose")?!1:options.showClose,options.showButton="false"==element.attr("showButton")?!1:options.showButton,options.popupTitle=$.evalI18nString(element.attr("popupTitle")),options.popupSource=element.attr("popupSource"),options.popupType=element.attr("popupType"),options.modal="false"==element.attr("modal")?!1:options.modal,options.showClear="true"==element.attr("showClear")?!0:options.showClear,options.emptyText=element.attr("emptyText"),options.aeType=element.attr("aeType"),options.width=element.attr("width");var initAfterAction=element.attr("initAfterAction");options.initAfterAction=initAfterAction?function(){if($.isString(initAfterAction)){var i=initAfterAction.indexOf("("),actName=i>0?initAfterAction.substring(0,i):initAfterAction,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}}:"";var setParam=element.attr("setParam");options.setParam=setParam?function(){if($.isString(setParam)){var i=setParam.indexOf("("),actName=i>0?setParam.substring(0,i):setParam,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}}:"";var onConfirm=element.attr("onConfirm");options.onConfirm=onConfirm?function(event){if($.isString(onConfirm)){var i=onConfirm.indexOf("("),actName=i>0?onConfirm.substring(0,i):onConfirm,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}}:""},_bindEvent:function(){var self=this,opts=self.options,initAfterAction=opts.initAfterAction;this.element.off("click.aeTextpopup").on("click.aeTextpopup",function(){var cfg={autoOpen:!0,modal:opts.modal,draggable:opts.draggable,resizable:opts.resizable,showClose:opts.showClose,showButton:opts.showButton,width:opts.popupWidth,height:opts.popupHeight,title:opts.popupTitle,popupType:opts.popupType,close:function(){var array=$.aries.page.data._paramArray;if(array.length>0?array.pop():$.aries.page.data._removeHidedData("ae_popup_Id"),$.aries.page.data._removeHidedData("ae_popup_param"),"page"===opts.popupType){var _privateArray=$.aries.page.data._privateArray;$.isArray(_privateArray)&&_privateArray.length>0&&_privateArray.pop()}},confirm:opts.onConfirm};if(opts.popupSource){if("page"===opts.popupType){if(opts.setParam){var popupParam=opts.setParam();popupParam&&$.aries.page.data._setHidedData("ae_popup_param",popupParam)}$.ajax(opts.popupSource,{cache:!1,success:function(data,textStatus,jqXHR){$(document.body).find('div[id="ae_popup_div_'+self.element.attr("aeId")+'"]').length<=0&&$('<div id="ae_popup_div_'+self.element.attr("aeId")+'"></div>').appendTo("body");var obj=$.extend(!0,{},$.extend({elementId:"ae_popup_div_"+self.element.attr("aeId")},cfg));if($("#ae_popup_div_"+self.element.attr("aeId")).aeDialog(obj),$.aries.page.data._paramArray.push(obj),$.aries.page.data._setHidedData("ae_popup_Id",$.aries.page.data._paramArray),$("#ae_popup_div_"+self.element.attr("aeId")).html(data),"function"==typeof $.popupConfirmEvent){var array=$.aries.page.data._privateArray;array.push($.popupConfirmEvent)}$.aries.common.globalInit("ae_popup_div_"+self.element.attr("aeId"))},error:function(jqXHR,textStatus,errorThrown){}})}if("div"===opts.popupType){initAfterAction&&self._trigger("initAfterAction");var obj=$.extend(!0,{},$.extend({elementId:opts.popupSource},cfg));$.aries.page.data._paramArray.push(obj),$.aries.page.data._setHidedData("ae_popup_Id",$.aries.page.data._paramArray),$("#"+opts.popupSource).attr("elementId",self.element.attr("aeId")),$("#"+opts.popupSource).aeDialog(obj)}}}).closest("div.input-group").find("span.input-group-btn").off("click.aeTextpopup").click(function(){self.element.trigger("click")})},_refeshEmptyText:function(emptyText){var el=this.element;emptyText&&(""===el.prop("placeholder")?el.prop("placeholder",emptyText):el.prop("placeholder")===emptyText&&el.prop("placeholder",""))}}),$.extend($.ae.aeTextpopup,{closePopup:function(json,textField,valueField){var afterAction,object,prevValue,paramArray=$.aries.page.data._getHidedData("ae_popup_Id");if($.isArray(paramArray)&&!(paramArray.length<0)){var obj=paramArray[paramArray.length-1],divId=obj.elementId;if(divId.indexOf("ae_popup_div_")>-1){$("#"+divId).aeDialog("close");var id=divId.substring("ae_popup_div_".length);object=$("input[aeId="+id+"]"),afterAction=object.attr("afterAction")}else{$("#"+divId).aeDialog("close");var elementId=$("#"+divId).attr("elementId");elementId&&(object=$("input[aeId="+elementId+"]"),afterAction=object.attr("afterAction"))}if(json){if(afterAction){var i=afterAction.indexOf("("),actName=i>0?afterAction.substring(0,i):afterAction,func="return window."+actName+"?"+actName+".call(window,j):false;";new Function("j",func)(json)}else textField&&object&&(prevValue=object.val(),object.val(json[textField])),valueField&&object?object.attr("valueField",json[valueField]):prevValue!==object.val()&&object.removeAttr("valueField");object&&object.next().is(".icon-error2")&&""!==object.val()&&"undefined"!=typeof object.val()&&object.next().show()}}},getParam:function(){return $.aries.page.data._getHidedData("ae_popup_param")||""}}),$.closeTextPopup=$.ae.aeTextpopup.closePopup,$.getTextPopupParam=$.ae.aeTextpopup.getParam}),define("ui-flip",function(require,exports,modules){"require:nomunge,exports:nomunge,modules:nomunge";function setCursorPosition(el,pos){var range;void 0!==el.selectionStart?el.selectionStart=pos:(range=el.createTextRange(),range.move("character",pos),range.select())}function getClipboardData(clipboardEvent){var data;return data=void 0!==window.clipboardData?window.clipboardData.getData("Text"):clipboardEvent.originalEvent.clipboardData.getData("text/plain")}var flipTime=100,delayTime=1e3,IN_THE_RANGE=0,LESS_THAN_MIN=-1,MORE_THAN_MAX=-2;$.aeWidget("ae.aeFlip",{options:{enable:!0,editable:!0,visible:!0,value:0,degree:1,initType:"html",onValueChange:null},_fireChangeEvent:function(){var hdValueChange=this.options.onValueChange;"function"==typeof hdValueChange&&hdValueChange.apply(this,[this.element])},_hdTimer:null,_fireChangeEventDelay:function(){null!==this._hdTimer&&(clearTimeout(this._hdTimer),this._hdTimer=null),this._hdTimer=setTimeout($.proxy(this._fireChangeEvent,this),500)},editable:function(value){(void 0===value||""===value)&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&($ele.removeAttr("readonly"),this.options.editable=!0),(value===!1||"false"===value)&&($ele.attr("readonly","readOnly"),this.options.editable=!1)},visible:function(value){(void 0===value||""===value)&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&($ele.closest("div.input-group").removeClass("hidden"),this.options.visible=!0),(value===!1||"false"===value)&&($ele.closest("div.input-group").addClass("hidden"),this.options.visible=!1)},enable:function(value){void 0===value&&(value=!0);var $ele=this.element;(value===!0||"true"===value)&&(this.options.enable=!0,$ele.prop("disabled",!1),$ele.closest("div.input-group").find(".btn-default").prop("disabled",!1)),(value===!1||"false"===value)&&(this.options.enable=!1,$ele.prop("disabled",!0),$ele.closest("div.input-group").find(".btn-default").prop("disabled",!0))},getValue:function(){return this.element.val()||""},setValue:function(v){"undefined"==typeof v||""===v||null==v?this.element.val(this.options.value):$.isNumeric(v)&&(this.element.val(v),this._fireChangeEvent())},reset:function(){this.element.val(this.options.value),this._fireChangeEvent()},_create:function(){var obj,$self=this.element,opts=this.options;"html"==opts.initType&&this._buildOptions(opts,$self),obj=$("<input></input>"),obj.attr({aeType:$self.attr("aeType"),aeId:$self.attr("id"),aeInit:"false",dataField:$self.attr("dataField"),aeValidate:$self.attr("aeValidate"),rules:$self.attr("rules")}),this.element=obj,$self.after(obj),$self.empty().hide(),this.element.addClass("form-control").wrap('<div class="input-group"></div>'),this.element.after('<div class="input-group-btn-vertical"><button type="button" class="btn btn-default" data-flip="up"><i class="fa fa-caret-up"></i></button><button type="button" class="btn btn-default" data-flip="down"><i class="fa fa-caret-down"></i></button></div>')},_init:function(){var self=this,el=self.element,options=self.options;options.width&&el.closest("div.input-group").css("width",options.width),options.visible||el.closest("div.input-group").addClass("hidden"),options.editable?el.removeAttr("readonly"):el.attr("readonly","readOnly"),self.enable(!!options.enable),self._buildInitEvent(),options.previousValue=self._getInitValue(),el.val(this.options.previousValue)},_buildOptions:function(options,inputEl){options.visible="false"==inputEl.attr("visible")?!1:options.visible,options.enable="false"==inputEl.attr("enable")?!1:options.enable,options.editable="false"==inputEl.attr("editable")?!1:options.editable,options.value=inputEl.attr("value")||options.value,options.degree=inputEl.attr("degree")||options.degree,options.minData=inputEl.attr("minData")||options.minData||null,options.maxData=inputEl.attr("maxData")||options.maxData||null,options.width=inputEl.attr("width")},_hdProcValue:function(event){var curVal,hitmap,check,$el=this.element,which=(this.options.previousValue,event.which);if(38===which)$el.closest("div.input-group").find("[data-flip='up']").trigger("click");else if(40===which)$el.closest("div.input-group").find("[data-flip='down']").trigger("click");else{if(hitmap={8:1,17:1,18:1,19:1,32:1,37:1,39:1,46:1,127:1},curVal=$el.val(),(this.options.degree+"").indexOf(".")>=0&&(hitmap[190]=1),check=which>=48&&57>=which||which in hitmap,check!==!0)return event.stopPropagation(),!1;if("0"===curVal&&48!=which)$el.val("");else if("0"===curVal&&48===which)return event.stopPropagation(),!1;this._fireChangeEventDelay()}},_buildInitEvent:function(){var $el=this.element;$el.on("keydown",$.proxy(this._hdProcValue,this)),$el.on("keyup",$.proxy(function(event){var inRange,$this=this.element,curVal=$this.val();event.which;inRange=this._checkNumbericRange(curVal),inRange===LESS_THAN_MIN?(curVal=this.options.minData,$this.val(curVal)):inRange===MORE_THAN_MAX&&(curVal=this.options.maxData,$this.val(curVal)),setCursorPosition($this[0],curVal.length)},this)),$el.on("blur",$.proxy(function(event){var inRange,$this=this.element,v=$this.val();"0"!==v&&(v=v.replace(/^[0]*/g,"")),""===v?$this.val(this.options.minData||this.options.previousValue):(inRange=this._checkNumbericRange(v),inRange===LESS_THAN_MIN?(v=this.options.minData,$this.val(v)):inRange===MORE_THAN_MAX&&(v=this.options.maxData,$this.val(v)),$this.val(v))},this)),$el.on("paste",$.proxy(function(event){var v,inRange,$this=this.element,ss=getClipboardData(event);return $.isNumeric(ss)===!1?(event.stopPropagation(),!1):(inRange=this._checkNumbericRange(ss),inRange===LESS_THAN_MIN?(v=this.options.minData,$this.val(v),event.stopPropagation(),!1):inRange===MORE_THAN_MAX?(v=this.options.maxData,$this.val(v),event.stopPropagation(),!1):void 0)},this)),$el.closest("div.input-group").on("click","[data-flip='up'],[data-flip='down']",$.proxy(this._flip,this)).on("mousedown","[data-flip='up']",$.proxy(this._continuedIncrease,this)).on("mousedown","[data-flip='down']",$.proxy(this._continuedDecrease,this)).on("mouseup","[data-flip='down'],[data-flip='up']",$.proxy(this._resetTimer,this))},_hdFlipTimer:null,_hdDelayTimer:null,_resetTimer:function(){null!==this._hdDelayTimer&&clearTimeout(this._hdDelayTimer),null!==this._hdFlipTimer&&clearInterval(this._hdFlipTimer)},_continuedIncrease:function(){this._resetTimer(),this._hdDelayTimer=setTimeout($.proxy(function(){this._hdFlipTimer=setInterval($.proxy(this._increase,this),flipTime)},this),delayTime)},_continuedDecrease:function(){this._resetTimer(),this._hdDelayTimer=setTimeout($.proxy(function(){this._hdFlipTimer=setInterval($.proxy(this._decrease,this),flipTime)},this),delayTime)},_flip:function(e){var dir=$(e.currentTarget).data("flip");"up"===dir&&this._increase(),"down"===dir&&this._decrease()},_verifyNumeric:function(checkVal){var previousIsNumberic,self=this,el=this.element,opts=this.options,previousValue=opts.previousValue,isNumeric=self._checkNumeric(checkVal);return isNumeric?(isNumeric=self._checkNumbericRange(checkVal),isNumeric!==IN_THE_RANGE?($.message.alert("","The value is beyond the range of data set!"),previousIsNumberic=self._checkNumeric(previousValue),void el.val(previousIsNumberic?previousValue:self._getInitValue())):void(opts.previousValue=checkVal)):($.message.alert("","The value is not a number!"),previousIsNumberic=self._checkNumeric(previousValue),void el.val(previousIsNumberic?previousValue:self._getInitValue()))},_valueChanged:function(){var self=this,el=this.element,opts=this.options,previousValue=opts.previousValue,checkVal=el.val();checkVal!=previousValue&&checkVal&&(checkVal.lastIndexOf(".")==checkVal.length-1&&(checkVal=checkVal.substring(0,checkVal.length-1)),self._verifyNumeric(checkVal))},_increase:function(){var self=this,el=this.element,opts=this.options,degree=opts.degree,previousValue=opts.previousValue,objValue=el.val(),isNumeric=self._checkNumeric(objValue);if(!isNumeric)return previousIsNumberic=self._checkNumeric(previousValue),el.val(previousIsNumberic?previousValue:self._getInitValue()),void this._fireChangeEvent();var objIndex=objValue.indexOf("."),degreeIndex=(degree+"").indexOf("."),objLength=objValue.length,degreeLength=(degree+"").length,isFloat=objIndex>-1||degreeIndex>-1;objValue=isFloat?parseFloat(objValue,10)+parseFloat(degree,10):parseInt(objValue,10)+parseInt(degree,10);var decreaseVerify=self._checkNumbericRange(objValue);if(decreaseVerify!==IN_THE_RANGE&&(objValue=isFloat?parseFloat(objValue,10)-parseFloat(degree,10):parseInt(objValue,10)-parseInt(degree,10)),isFloat){-1==objIndex&&(objIndex=objLength),-1==degreeIndex&&(degreeIndex=degreeLength);var objFix=objLength-objIndex,degreeFix=degreeLength-degreeIndex;objFix>degreeFix&&(degreeFix=objFix);var degreeFormat="0.";degreeFix-=1;for(var i=0;degreeFix>i;i++)degreeFormat+="0";objValue=$.format.number(objValue,degreeFormat)}opts.previousValue=objValue,el.val(objValue),this._fireChangeEvent()},_decrease:function(){var previousIsNumberic,self=this,el=this.element,opts=this.options,degree=opts.degree,previousValue=opts.previousValue,objValue=el.val(),isNumeric=self._checkNumeric(objValue);if(!isNumeric)return previousIsNumberic=self._checkNumeric(previousValue),el.val(previousIsNumberic?previousValue:self._getInitValue()),void this._fireChangeEvent();var objIndex=objValue.indexOf("."),degreeIndex=(degree+"").indexOf("."),objLength=objValue.length,degreeLength=(degree+"").length,isFloat=objIndex>-1||degreeIndex>-1;objValue=isFloat?parseFloat(objValue,10)-parseFloat(degree,10):parseInt(objValue,10)-parseInt(degree,10);var decreaseVerify=self._checkNumbericRange(objValue);if(decreaseVerify!==IN_THE_RANGE&&(objValue=isFloat?parseFloat(objValue,10)+parseFloat(degree,10):parseInt(objValue,10)+parseInt(degree,10)),isFloat){-1==objIndex&&(objIndex=objLength),-1==degreeIndex&&(degreeIndex=degreeLength);var objFix=objLength-objIndex,degreeFix=degreeLength-degreeIndex;objFix>degreeFix&&(degreeFix=objFix);var degreeFormat="0.";degreeFix-=1;for(var i=0;degreeFix>i;i++)degreeFormat+="0";objValue=$.format.number(objValue,degreeFormat)}opts.previousValue=objValue,el.val(objValue),this._fireChangeEvent()},_getInitValue:function(){var self=this,verifyValue=this.options.value,isNumeric=self._checkNumeric(verifyValue);return isNumeric?(isNumeric=self._checkNumbericRange(verifyValue),isNumeric!==IN_THE_RANGE&&(this.options.previousValue=verifyValue=this.options.minData||"0")):verifyValue="",verifyValue},_checkNumeric:function(val,format){if(""!==val&&!/^(-|\+)?\d+(\.\d+)?$/.test(val))return!1;if(""!==val&&format&&$.isString(format)&&-1!=format.indexOf(".")&&val){var fval=parseFloat(val);if(0>fval&&(fval=-fval),fval=fval.toString(),-1!=fval.indexOf(".")&&format.length-format.indexOf(".")<fval.length-fval.indexOf("."))return!1}return!0},_checkNumbericRange:function(val){var num,min=this.options.minData,max=this.options.maxData;if($.isNumeric(val)){if(num=parseFloat(val),$.isNumeric(min)&&num<parseFloat(min))return LESS_THAN_MIN;if($.isNumeric(max)&&num>parseFloat(max))return MORE_THAN_MAX}return IN_THE_RANGE}})}),define("ui-advcombo",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeAdvcombo",{options:{_initial:!1,multi:!1,width:"auto",height:"auto",inputHeight:60,_maxHeight:300,initData:void 0,_dataMap:"",_niceScroll:!1,onSetValue:function(){},onBodyInit:function($body,event){},initType:"html"},_create:function(){var _self=this,options=this.options,$ele=this.element;if(options._initial!==!0){if("html"===options.initType&&_self._buildOptions(options,$ele),$ele.css("width",options.width).addClass("dropdown group_dropdown"),options._id=$ele.attr("id"),this.element.attr("aeId",options._id),$ele.children().length>1)$ele.children().wrap('<div bodyId="'+options._id+'"></div>');else if(0===$ele.children.length){var str=$.trim($ele.html());str?$ele.empty().prepend('<div bodyId="'+options._id+'">'+str+"</div>"):$ele.empty().prepend('<div bodyId="'+idoptions._id+'"></div>')}else $ele.children().attr("bodyId",options._id);$('[bodyId="'+options._id+'"]').parent().is("body")||$ele.children('[bodyId="'+options._id+'"]').appendTo(document.body),$ele.empty(),options.renderer?$ele.prepend('<div class="input-icon right"><div class="form-control fx-input" style="height:'+options.inputHeight+'px;"></div><i class="icon-arrowlup-down" style="line-height:'+options.inputHeight+'px;"></i></div>'):options.multi?$ele.prepend('<div class="input-icon right"><i class="icon-arrowlup-down"></i><div class="form-control"><input value="Select please"></div></div>'):$ele.prepend('<div class="input-icon right"><i class="icon-arrowlup-down"></i><input class="form-control"></div>');var body=$('[bodyId="'+options._id+'"]');body.addClass("dropdown-menu"),_self._trigger("onBodyInit",null,body),_self._heightRenderer(),options._initial=!0}},_heightRenderer:function(){var options=this.options,$body=$('[bodyId="'+options._id+'"]'),bodyOuterH=$body.outerHeight(!0);options._height="auto"===options.height?bodyOuterH:options.height,options._height=Math.min(options._height,options._maxHeight),bodyOuterH>options._height&&($body.css({height:options._height}),options._niceScroll=!0)},_buildOptions:function(options,element){options.multi="true"==element.attr("multi")?!0:options.multi,options.multi&&(options._dataMap=[]),options.width=parseInt(element.attr("width"),10)||options.width,options.height=parseInt(element.attr("height"),10)||options.height,options.inputHeight=parseInt(element.attr("inputHeight"),10)||options.inputHeight;var initData=$.trim(element.attr("initData"));if(initData&&0===initData.indexOf("{")){options.initData={};for(var result=initData.substring(1,initData.length-1).split(","),i=0;i<result.length;i++){result[i]=$.trim(result[i]);var data=result[i].split(":");options.initData[data[0]]=data[1]}}else options.initData=initData||void 0;var onBodyInit=element.attr("onBodyInit");options.onBodyInit=onBodyInit?function(body,event){if($.isString(onBodyInit)){var i=onBodyInit.indexOf("("),actName=i>0?onBodyInit.substring(0,i):onBodyInit,func="return window."+actName+"?"+actName+".call(window, b ,e):false;";return new Function("b","e",func)(body,event)}}:void 0;var renderer=element.attr("renderer");options.renderer=renderer?function(){if($.isString(renderer)){var i=renderer.indexOf("("),actName=i>0?renderer.substring(0,i):renderer,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}}:void 0,options.renderer?options._template=Handlebars.compile(options.renderer()):null;var onSetValue=element.attr("onSetValue");options.onSetValue=onSetValue?function(data){if($.isString(onSetValue)){var i=onSetValue.indexOf("("),actName=i>0?onSetValue.substring(0,i):onSetValue,func="return window."+actName+"?"+actName+".call(window, d):false;";return new Function("d",func)(data)}}:void 0},_init:function(){var _self=this,options=this.options,$ele=this.element,$header=$ele.children(":eq(0)"),$body=$('[bodyId="'+options._id+'"]');$header.bind("click.header",function(e){$body.is(":hidden")&&($body.css({position:"absolute",left:$header.offset().left,top:$header.offset().top+$header.outerHeight(),width:$header.outerWidth()}),$body.show(),options._niceScroll&&!$body.hasClass("scorll-bar-box")&&($body.addClass("scorll-bar-box"),$body.niceScroll()))}),options.initData?_self.setValue(options.initData):null},setValue:function(data){var _self=this,options=this.options,$ele=this.element,$header=$ele.children(":eq(0)"),_data=data;if(options.onSetValue&&(data=options.onSetValue(data)),options.renderer){var $input=$header.children(".fx-input:first");options.multi?($input.html($.trim(options._template(data))),options._dataMap.push(_data)):($input.empty().html($.trim(options._template(data))),options._dataMap=_data)}else{var $input=$header.find("input");options.multi?($input.val(""),-1===$.inArray(_data,options._dataMap)?($input.before('<span class="label label-info label-as-badge">'+data+'<i class="icon-error2"></i></span>'),_self._bindCloseEvent($input.prev()),options._dataMap.push(_data)):($header.find(">div.form-control").children("span").each(function(index,item){$(item).text()==data&&$(item).remove()}),options._dataMap.splice($.inArray(_data,options._dataMap),1))):($input.val(data),options._dataMap=_data)}},getValue:function(){return this.options._dataMap},getBody:function(){return $('[bodyId="'+this.options._id+'"]')},_bindCloseEvent:function(span){span.find("i.icon-error2").bind("click.close",function(){span.remove()})},refresh:function(){$('[bodyId="'+this.options._id+'"]').height("auto"),this._heightRenderer()}})}),define("ui-panel",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aePanel",{options:{_initial:!1,header:!0,theme:0,level:3,title:void 0,iconTitle:void 0,width:"auto",height:"auto",iconClose:!1,iconFold:!1,folding:!1,initClosed:!1,initFolded:!1,loading:!1,rightRenderer:void 0,leftRenderer:void 0,initType:"html"},_create:function(event){var _self=this,options=this.options,$body=this.element,id=$body.attr("id");if(options._initial!==!0){id&&$body.attr("aeId",id),"html"===options.initType&&_self._buildOptions(options,$body);var panelClass;switch(options.theme){case 0:panelClass="panel panel-primary panel-noborder";break;case 1:panelClass="panel panel-primary panel-noborder panel-blue";break;case 2:panelClass="panel panel-primary";break;case 3:panelClass="panel panel-primary panel-blue";break;default:panelClass="panel panel-primary panel-noborder"}$body.addClass("panel-body").wrap('<div class="'+panelClass+'"></div>');var $panel=$body.parent();if($panel.css("width",options.width),options.header&&_self._rendererHeader(),options._initial=!0,options.onInit&&_self._trigger("onInit",event),"auto"===options.height)$body.css("height",options.height);else{var bodyH,bodyOuterH=$body.outerHeight(!0);if(options.header){var headerH=$panel.find(">div.panel-heading").outerHeight(!0);bodyH=options.height-headerH}bodyH=bodyH||options.height,$body.css("height",bodyH),bodyOuterH>bodyH&&($body.addClass("scorll-bar-box"),$body.niceScroll())}}},_rendererHeader:function(){var _self=this,options=this.options,$body=this.element,$panel=$body.parent();$panel.prepend('<div class="panel-heading"></div>');var $header=$panel.find(">div.panel-heading");$header.prepend('<div class="pull-left"></div>');var $title=$header.children("div.pull-left:first");switch(options.level){case 1:$title.prepend('<h1 class="panel-title"></h1>');break;case 2:$title.prepend('<h2 class="panel-title"></h2>');break;case 3:$title.prepend('<h3 class="panel-title"></h3>');break;case 4:$title.prepend('<h4 class="panel-title"></h4>');break;case 5:$title.prepend('<h5 class="panel-title"></h5>');break;case 6:$title.prepend('<h6 class="panel-title"></h6>');break;default:$title.prepend('<h3 class="panel-title"></h3>')}options.title&&$title.children(".panel-title").html(options.title),options.iconTitle&&$title.children(".panel-title").prepend('<i class="'+options.iconTitle+'"></i>'),options.leftRenderer&&$title.append(options.leftRenderer()),$header.append('<div class="panel-btn"></div>');var $icons=$header.find(">div.panel-btn");if(options.iconClose&&($icons.prepend('<a class="aePaneliconclose"><i class="icon-error2"></i></a>'),$icons.find(">a.aePaneliconclose").bind("mouseover.headericons",function(){$(this).css("cursor","pointer")}).bind("click.herdericons",function(event){_self.close(event),event.stopPropagation()})),options.iconFold){$icons.prepend('<a class="aePaneliconfold"><i class="icon-arrowlup-down"></i></a>');var $fold=$icons.find(">a.aePaneliconfold");$fold.bind("mouseover.headericons",function(){$(this).css("cursor","pointer")}).bind("click.herdericons",function(event){options._folded?_self.unfold(event):_self.fold(event),event.stopPropagation()})}options.rightRenderer&&$icons.prepend(options.rightRenderer()),options.folding&&$header.find(".panel-title").bind("click.folding",function(event){options._folded?_self.unfold(event):_self.fold(event)})},_buildOptions:function(options,element){options.header="false"==element.attr("header")?!1:options.header,options.loading="true"==element.attr("loading")?!0:options.loading,element.attr("aeTitle")?options.title=$.trim(element.attr("aeTitle"))||options.title:element.attr("title")&&(options.title=$.trim(element.attr("title"))||options.title,element.removeAttr("title")),options.iconTitle=$.trim(element.attr("iconTitle"))||options.iconTitle,options.theme=parseInt(element.attr("theme"),10)||options.theme,options.level=parseInt(element.attr("level"),10)||options.level,options.width=parseInt(element.attr("width"),10)||options.width,options.height=parseInt(element.attr("height"),10)||options.height,options.folding="true"==element.attr("folding")?!0:options.folding,options.initFolded="true"==element.attr("initFolded")?!0:options.initFolded,options.initClosed="true"==element.attr("initClosed")?!0:options.initClosed,options.iconClose="true"==element.attr("iconClose")?!0:options.iconClose,options.iconFold="true"==element.attr("iconFold")?!0:options.iconFold;var leftRenderer=element.attr("leftRenderer");options.leftRenderer=leftRenderer?function(){if($.isString(leftRenderer)){var i=leftRenderer.indexOf("("),actName=i>0?leftRenderer.substring(0,i):leftRenderer,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}}:void 0;var rightRenderer=element.attr("rightRenderer");options.rightRenderer=rightRenderer?function(){if($.isString(rightRenderer)){var i=rightRenderer.indexOf("("),actName=i>0?rightRenderer.substring(0,i):rightRenderer,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}}:void 0,this._buildOptionEvent(options,"onBeforeOpen",element.attr("onBeforeOpen")),this._buildOptionEvent(options,"onOpen",element.attr("onOpen")),this._buildOptionEvent(options,"onBeforeClose",element.attr("onBeforeClose")),this._buildOptionEvent(options,"onClose",element.attr("onClose")),this._buildOptionEvent(options,"onBeforeFold",element.attr("onBeforeFold")),this._buildOptionEvent(options,"onFold",element.attr("onFold")),this._buildOptionEvent(options,"onBeforeUnfold",element.attr("onBeforeUnfold")),this._buildOptionEvent(options,"onUnfold",element.attr("onUnfold")),this._buildOptionEvent(options,"onInit",element.attr("onInit")),this._buildOptionEvent(options,"onReload",element.attr("onReload"))},_buildOptionEvent:function(ops,evtName,evtValue){ops[evtName]=evtValue?function(event){if($.isString(evtValue)){var i=evtValue.indexOf("("),actName=i>0?evtValue.substring(0,i):evtValue,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}}:ops[evtName]},_init:function(event){var _self=this,options=this.options;options._closed=!1,options._folded=!1,options.initClosed?_self.close(event):_self.open(event),options.initFolded?_self.fold(event):_self.unfold(event)},reload:function(url,event){var _self=this,options=this.options,$body=this.element;url&&(_self._init(),options.loading&&$body.empty().html('<div class="loading"><span>Loading...</span></div>'),$.includeHtml($body,url,function(event){options.onReload&&_self._trigger("onReload",event)}))},fold:function(event){var _self=this,options=this.options,$body=this.element,$panel=$body.parent(),anim=!0,speed="slow";if(!(options._folded||options.onBeforeFold&&_self._trigger("onBeforeFold",event)===!1)){if($panel.stop(!0,!0),options.header&&options.iconFold){var $iconFold=$body.prev("div.panel-heading").find(">div.panel-btn >a.aePaneliconfold");$iconFold.children("i").removeClass("icon-arrowlup-down").addClass("icon-arrowlup-little")}$panel.animate({height:"-="+$body.outerHeight()},anim?speed||"normal":0,function(){$body.hide(),"auto"===options.height&&$panel.css("height",""),options._folded=!0,options.onFold&&_self._trigger("onFold",event)})}},unfold:function(event){var _self=this,options=this.options,$body=this.element,$panel=$body.parent(),anim=!0,speed="slow";if(options._folded&&(!options.onBeforeUnfold||_self._trigger("onBeforeUnfold",event)!==!1)){if($panel.stop(!0,!0),options.header&&options.iconFold){var $iconFold=$body.prev("div.panel-heading").find(">div.panel-btn >a.aePaneliconfold");$iconFold.children("i").removeClass("icon-arrowlup-little").addClass("icon-arrowlup-down")}"auto"===options.height&&$panel.height($body.prev("div.panel-heading").outerHeight()||"1px"),$body.show(),$panel.animate({height:"+="+$body.outerHeight(!0)},anim?speed||"normal":0,function(){"auto"===options.height&&$panel.css("height",""),options._folded=!1,options.onUnfold&&_self._trigger("onUnfold",event)})}},open:function(event){var $panel=this.element.parent(),options=this.options;options._closed&&(options.onBeforeOpen&&this._trigger("onBeforeOpen",event)===!1||($panel.show(),options._closed=!1,options.onOpen&&this._trigger("onOpen",event)))},close:function(event){var $panel=this.element.parent(),options=this.options;options._closed||options.onBeforeClose&&this._trigger("onBeforeClose",event)===!1||($panel.hide(),options._closed=!0,options.onClose&&this._trigger("onClose",event))},destroy:function(){this.element.parent().remove()},setTitle:function(title){var options=this.options;if(options.header){var $header=this.element.prev("div.panel-heading");$header.find(">div.pull-left >h"+options.level).empty().html(title)}},setRenderer:function(right,left){var options=this.options;if(options.header){var $header=this.element.prev("div.panel-heading");right&&"string"==typeof right&&($header.find(">div.panel-btn").children().length&&$header.find(">div.panel-btn").children().each(function(index,item){$(item).is(".aePaneliconfold")||$(item).is(".aePaneliconclose")||$(item).remove()}),$header.find(">div.panel-btn").prepend(right)),left&&"string"==typeof left&&($header.find(">div.pull-left >h"+options.level).nextAll().remove(),$header.find(">div.pull-left").append(left));
}}})}),define("ui-tabs",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";var activatedCls="active",scrollDisabled="tab-disable";$.aeWidget("ae.aeTabs",{options:{_initial:!1,theme:0,leaveRefresh:!1,width:"auto",height:"auto",_scrollable:!0,closable:!1,position:"top",switchMode:"click",active:0,tabMenu:!1,_activateType:["first","last","prev","next"],onBeforeActivate:function(n,event){},onActivate:function(n,event){},onBeforeClose:function(n,event){},onClose:function(n,event){},onBeforeCloseAll:function(event){},onCloseAll:function(){},onAdd:function(config){},onBeforeAdd:function(config){},onReload:function(config){},initType:"html"},_create:function(){var _self=this,options=this.options,$ele=this.element,id=$ele.attr("id");if(options._initial!==!0){id&&$ele.attr("aeId",id),options.random=(65536*(1+Math.random())|0).toString(16).substring(1),options.id=0,"html"===options.initType&&_self._buildOptions(options,$ele);var themeClass,ulClass;switch(options.theme){case 0:themeClass="panel panel-default tab-nowrap",ulClass="nav nav-tabs";break;case 1:themeClass="panel panel-default tab-nowrap tab-simple",ulClass="nav nav-tabs";break;case 2:themeClass="panel panel-default tab-nowrap tab-justi",ulClass="nav nav-tabs";break;case 3:themeClass="panel panel-default tab-nowrap tab-simple",ulClass="nav nav-tabs nav-justified",options._scrollable=!1;break;case 4:themeClass="panel panel-default tab-less",ulClass="nav nav-tabs",options._scrollable=!1,options.tool=$ele.attr("tool"),_self._tool(options.tool);break;case 5:themeClass="panel panel-default tab-less",ulClass="nav nav-tabs pull-right",options._scrollable=!1,options.tool=$ele.attr("tool"),_self._tool(options.tool);break;default:themeClass="panel panel-default tab-nowrap",ulClass="nav nav-tabs"}$ele.addClass(themeClass).children("ul:first").addClass(ulClass).wrapAll('<div class="panel-heading"></div>').wrapAll('<div class="tab-listbox"></div>'),options._toolFn&&$ele.find(">div.panel-heading").append(options._toolFn),$ele.children(":not(div.panel-heading)").length?$ele.children(":not(div.panel-heading)").wrapAll('<div class="tab-content"></div>'):$ele.find(">div.panel-heading").after('<div class="tab-content"></div>'),$ele.find(">div.tab-content").children().addClass("tab-pane").hide(),options.active<0?options.active=0:options.active>_self._getLength()-1&&(options.active=_self._getLength()-1),"fit"===options.width?$ele.outerWidth($ele.parent().width()):"auto"!==options.width&&$ele.css("width",options.width),"fit"===options.height?$ele.outerHeight($ele.parent().height()):"auto"!==options.height&&$ele.css("height",options.height),_self._history=[],_self._makeSketch(),options._initial=!0}},_makeSketch:function(){var _self=this,options=this.options,$ele=this.element,$content=$ele.find(">div.tab-content");$ele.find(">div.panel-heading >div.tab-listbox >ul li").each(function(index,item){var tabId="tabId-"+options.random+"-"+options.id++,src=$(item).attr("src");if($(item).children("a").attr("tabId",tabId),"page"===_self._srcType(src))$(item).children("a").attr("href","#"+tabId),$content.append('<div id="'+tabId+'"></div>'),options.active===index&&_self._includeHtml(tabId,src);else if("div"===_self._srcType(src)){if($(item).children("a").attr("href",src),!$content.find(">"+src).length){var outerHTML=$(src).prop("outerHTML")||'<div id="'+src.split("#")[1]+'"></div>';$(src).remove(),$content.append(outerHTML)}}else $(item).children("a").attr("href","#"+tabId),$content.append('<div id="'+tabId+'"></div>');var $a=$(item).find("a");(options.closable===!0||$.isArray(options.closable)&&-1!==$.inArray(index,options.closable))&&$('<i class="icon-error2"></i>').insertAfter($a)});var $avtiveLi=$ele.find(">div.panel-heading >div.tab-listbox >ul li:eq("+options.active+")");$avtiveLi.addClass(activatedCls).siblings("li").removeClass(activatedCls),options.activeTabId=_self._getAlter(options.active),$.inArray(options.activeTabId,_self._history)||_self._history.push(options.activeTabId),$content.children(_self._tabIndex(options.active,!1,!0)).addClass("active").show().siblings().hide();var $ul=$ele.find(">div.panel-heading >div.tab-listbox >ul"),$a=$ul.find("li a[tabId="+_self._getAlter(options.active)+"]");if(_self._checkScroller()){$ul.stop(!0,!0),$ele.clearQueue();var $iconRight=$ele.find(">div.panel-heading >div.fn"),lBorder=$a.parent().offset().left,rBorder=lBorder+$a.parent().outerWidth(!0),lDiff=4-lBorder,rDiff=$iconRight.offset().left-rBorder;lDiff>=0?_self._scroll(lDiff,_self._scrollCbFn()):0>=rDiff?_self._scroll(rDiff,_self._scrollCbFn()):_self._scrollCbFn()()}if(_self._checkScroller()&&_self._enableScroller(),"auto"!==options.height){var tabsHeight=$ele.innerHeight(),headersHeight=$ele.find(">div.panel-heading").outerHeight();$ele.find(">div.tab-content").css("height",tabsHeight-headersHeight)}$ele.children().each(function(){$(this).is("div.panel-heading, div.tab-content")||$(this).remove()}),$ele.css("height",$ele.height()),$ele.css("height",options.height)},_buildOptions:function(options,element){options.theme=parseInt(element.attr("theme"),10)||options.theme,options.active=parseInt(element.attr("active"),10)||options.active,options.width=parseInt(element.attr("width"),10)||options.width,options.height=parseInt(element.attr("height"),10)||options.height,options.leaveRefresh="true"==element.attr("leaveRefresh")?!0:options.leaveRefresh,element.attr("switchMode")&&-1!==element.attr("switchMode").indexOf("mouseover")&&(options.switchMode="mouseover");var closable=element.attr("closable");if(closable&&"true"==closable)options.closable=!0;else if(closable&&0===closable.indexOf("[")){closable=[];for(var result=element.attr("closable").substring(1,element.attr("closable").length-1).split(","),i=0;i<result.length;i++)closable.push(parseInt(result[i],10));options.closable=closable}else options.closable=!1;this._buildOptionEvent(options,"onBeforeActivate",element.attr("onBeforeActivate")),this._buildOptionEvent(options,"onActivate",element.attr("onActivate")),this._buildOptionEvent(options,"onBeforeAdd",element.attr("onBeforeAdd")),this._buildOptionEvent(options,"onAdd",element.attr("onAdd")),this._buildOptionEvent(options,"onBeforeClose",element.attr("onBeforeClose")),this._buildOptionEvent(options,"onClose",element.attr("onClose")),this._buildOptionEvent(options,"onReload",element.attr("onReload"));var onBeforeCloseAll=element.attr("onBeforeCloseAll");options.onBeforeCloseAll=onBeforeCloseAll?function(event){if($.isString(onBeforeCloseAll)){var i=onBeforeCloseAll.indexOf("("),actName=i>0?onBeforeCloseAll.substring(0,i):onBeforeCloseAll,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}}:"";var onCloseAll=element.attr("onCloseAll");options.onCloseAll=onCloseAll?function(event){if($.isString(onCloseAll)){var i=onCloseAll.indexOf("("),actName=i>0?onCloseAll.substring(0,i):onCloseAll,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}}:""},_buildOptionEvent:function(options,evtName,evtValue){options[evtName]=evtValue?function(param,event){if($.isString(evtValue)){var i=evtValue.indexOf("("),actName=i>0?evtValue.substring(0,i):evtValue,func="return window."+actName+"?"+actName+".call(window,p,e):false;";return new Function("p","e",func)(param,event)}}:options[evtName]},_tool:function(tool){var options=this.options;4===options.theme?(options.tool=function(){if($.isString(tool)){var i=tool.indexOf("("),actName=i>0?tool.substring(0,i):tool,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}},options._toolFn='<div class="fn">'+options.tool()+"</div>"||'<div class="fn"><i class="icon-settings"></i></div>'):5===options.theme&&(options.tool=function(){if($.isString(tool)){var i=tool.indexOf("("),actName=i>0?tool.substring(0,i):tool,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}},options._toolFn=options.tool()||"<h4>Title can be there</h4>")},_init:function(){this._buildEvent()},_renderTabMenu:function(){this.element,this.options},_buildEvent:function(){var _self=this,$ele=this.element,options=this.options,$iconClose=$ele.find(">div.panel-heading >div.tab-listbox >ul i.icon-error2");$iconClose.unbind("click.aetabs").bind("mouseover.aetabs",function(){$(this).css("cursor","pointer")}).bind("click.aetabs",function(e){return _self._close($(this).parent("li:first").index()),!1});var $tabLi=$ele.find(">div.panel-heading >div.tab-listbox >ul li");"mouseover"===options.switchMode?$tabLi.bind("mouseover.aetabs",function(e){var $li=$(this),timer=$.data($ele[0],"activateTimer");"undefined"!=typeof timer&&clearTimeout(timer),timer=setTimeout(function(){return _self._activate($li.index(),e),!1},200),$.data($ele[0],"activateTimer",timer)}):"click"===options.switchMode&&$tabLi.bind("click.aetabs",function(e){return _self._activate($(this).index(),e),!1}),$tabLi.bind("click.aetabs",function(){return!1}),$ele.find(">div.panel-heading >div.fn span").bind("click.aetabs",function(e){if($(this).hasClass(scrollDisabled))return!1;var dist=$(this).parent("div.fn").siblings("div.tab-listbox").find(">ul li:last").outerWidth(!0);return $(this).children("i").hasClass("icon-arrowleft-little")&&_self._scroll(dist,_self._scrollCbFn()),$(this).children("i").hasClass("icon-arrowright-little")&&_self._scroll(-dist,_self._scrollCbFn()),$(this).children("i").hasClass("icon-arrowlup-down")&&($ele.find(">div.panel-heading >ul").is(":hidden")?$ele.find(">div.panel-heading >ul").slideDown():$ele.find(">div.panel-heading >ul").slideUp()),!1})},_purgeEvent:function(){var $ele=this.element,$headers=(this.options,$ele.find(">div.panel-heading"));$headers.children().unbind(".aetabs"),$headers.find(">div.tab-listbox >ul >li >a").unbind(".aetabs")},_activate:function(n,event){var _self=this,$ele=this.element,options=this.options,$ul=$ele.find(">div.panel-heading >div.tab-listbox >ul"),tabId=_self._getAlter(n),src=_self._tabIndex(n,!0);if(options.active===n)return!1;if(options.onBeforeActivate&&this._trigger("onBeforeActivate",event,n)===!1)return!1;var $a=$ul.find("li a[tabId="+tabId+"]"),href=$a.attr("href");if($a.parent().addClass(activatedCls).siblings().removeClass(activatedCls),_self._checkScroller()){$ul.stop(!0,!0),$ele.clearQueue();var $iconRight=$ele.find(">div.panel-heading >div.fn"),lBorder=$a.parent().offset().left,rBorder=lBorder+$a.parent().outerWidth(!0),lDiff=4-lBorder,rDiff=$iconRight.offset().left-rBorder;lDiff>=0?_self._scroll(lDiff,_self._scrollCbFn()):0>=rDiff?_self._scroll(rDiff,_self._scrollCbFn()):_self._scrollCbFn()()}"page"!==_self._srcType(src)||options.leaveRefresh!==!0&&""!==$("#"+tabId).html()?_self._activateThen(n,tabId,href,event):_self._includeHtml(tabId,src,function(){_self._activateThen(n,tabId,href,event)})},_activateThen:function(n,tabId,href,event){var $ele=this.element,options=this.options;$ele.find(">div.tab-content >"+href).addClass("active").show().siblings().removeClass("active").hide(),options.activeTabId=tabId,options.active=n;var _history=this._history,index=$.inArray(tabId,_history);-1===index?_history.push(tabId):_history.push(_history.splice(index,1)[0]),options.onActivate&&this._trigger("onActivate",event,n)},_close:function(n){var $ele=this.element,options=this.options;n=void 0===n?options.active:n;var $headers=$ele.find(">div.panel-heading"),$content=$ele.find(">div.tab-content"),tabId=this._getAlter(n),tabsHeight=$ele.height();if(options.onBeforeClose&&this._trigger("onBeforeClose",null,n)===!1)return!1;$headers.find("li").eq(n).remove(),$content.children().eq(n).empty().remove(),0===$content.children().length&&$content.css({height:tabsHeight-$headers.outerHeight()});for(var i=this._history.length-1;i>=0;i--)if(tabId===this._history[i]){this._history.splice(i,1);break}if(options.onClose&&this._trigger("onClose",null,n),0===this._getLength())return options.active=-1,void(options.activeTabId=null);if(n===options.active)n===this._getLength()?(options.active=-1,this._activate(0)):(options.active=-1,this._activate(n)),this._buildDropDown();else{n<options.active&&options.active--;var $ul=$headers.find(">div.tab-listbox >ul");if(this._checkScroller()){$ul.stop(!0,!0),$ele.clearQueue();var $lastLi=$ul.children(":last"),$firstLi=$ul.children(":first"),$iconRight=$ele.find(">div.panel-heading >div.fn"),lBorder=$lastLi.offset().left,rBorder=lBorder+$lastLi.outerWidth(!0),lDiff=4-$firstLi.offset().left,rDiff=$iconRight.offset().left-rBorder;rDiff>0?this._scroll(rDiff,this._scrollCbFn()):this._scroll(lDiff,this._scrollCbFn())}}},add:function(config){var _self=this,$ele=this.element,options=this.options;if(options.onBeforeAdd&&_self._trigger("onBeforeAdd",null,config)===!1)return!1;config=config||{};var _config={title:config.title||"tabId-"+options.random+"-"+options.id++,tabId:"tabId-"+options.random+"-"+options.id++,icon:config.icon||!1,closable:!!config.closable,activate:!!config.activate,index:config.index||"last",content:config.src||void 0};"next"===_config.index?_config.index=options.active:"first"===_config.index?(_config.index=-1,options.active++):(_config.index=_self._tabIndex(_config.index),_config.index<options.active?options.active++:_config.index===_self._getLength()&&(_config.index=-1,options.active++)),$ele.find(">div.tab-content").append('<div id="'+_config.tabId+'"></div>'),$ele.find("#"+_config.tabId).hide(),_config.href="#"+_config.tabId;var $ul=$ele.find(">div.panel-heading >div.tab-listbox >ul");-1===_config.index?$('<li><a tabId="'+_config.tabId+'" href="'+_config.href+'">'+_config.title+"</a></li>").insertBefore($ul.children("li:eq(0)")):$('<li><a tabId="'+_config.tabId+'" href="'+_config.href+'">'+_config.title+"</a></li>").insertAfter($ul.children("li:eq("+_config.index+")"));var $newLi=$ul.children("li:eq("+(_config.index+1)+")");_config.icon&&$newLi.children("a").prepend('<i class="'+_config.icon+'"></i>'),_config.closable&&$('<i class="icon-error2"></i>').insertAfter($newLi.children("a")),$ul.innerWidth()-$newLi.position().left<500&&$ul.width($ul.width()+500),_self._checkScroller()&&_self._enableScroller(),"page"===_self._srcType(_config.content)?(_config.src=_config.content,$newLi.attr("src",_config.src),_self._includeHtml(_config.tabId,_config.src,function(){_config.activate&&(_self._purgeEvent(),_self._buildEvent(),_self._trigger("onAdd",null,config),_self._activate(_config.index+1))})):(_config.src="#"+_config.tabId,$newLi.attr("src",_config.src),_config.content&&$.isFunction(_config.content)&&($ele.find("#"+_config.tabId).html(_config.content()),$.globalInit($ele.find("#"+_config.tabId))),_self._purgeEvent(),_self._buildEvent(),_self._trigger("onAdd",null,config),_config.activate&&_self._activate(_config.index+1))},reload:function(config){if(config&&config.src){var _config={},index=void 0===config.index?this.options.active:config.index;_config.index=this._tabIndex(index),_config.index<0?_config.index=0:_config.index>this._getLength()-1&&(_config.index=this._getLength()-1);var type=this._srcType(config.src);"div"===type?_config.content=$(config.src).prop("outerHTML"):"page"===type?_config.url=config.src:$.isFunction(config.src)&&(_config.content=config.src()),_config.activate="true"===config.activate||config.activate===!0?!0:!1,this._reload(_config)}},_reload:function(_config){var href=this._tabIndex(_config.index,!1,!0);_config.url?this._includeHtml(href,_config.url,function(){$.globalInit(href.split("#")[1]),_config.activate&&this._activate(_config.index),this.options.onReload&&this._trigger("onReload",null,_config.index)}):_config.content?($(href).html(_config.content),$.globalInit(href.split("#")[1]),_config.activate&&this._activate(_config.index),this.options.onReload&&this._trigger("onReload",null,_config.index)):($(href).empty(),_config.activate&&this._activate(_config.index),this.options.onReload&&this._trigger("onReload",null,_config.index))},_scrollCbFn:function(){var _self=this;return function(){_self._enableScroller(),_self._buildDropDown()}},_scroll:function(distance,fn){var _self=this,$ele=this.element,options=this.options,$ul=$ele.find(">div.panel-heading >div.tab-listbox >ul"),$lastLi=$ul.children(":last"),$firstLi=$ul.children(":first"),$leftFn=$ele.find(">div.panel-heading >div.fn >span:first"),$rightFn=$ele.find(">div.panel-heading >div.fn >span:eq(1)");if(0!==distance&&options._scrollable){var offsetFn=$leftFn.parent().offset(),queuedFn=function(next){if(0>distance&&$rightFn.hasClass(scrollDisabled)||distance>0&&$leftFn.hasClass(scrollDisabled))return $ul.stop(!0,!0),void $ele.clearQueue();distance=distance>0?"+="+Math.min(Math.abs($firstLi.offset().left)+4,distance):"-="+Math.min($lastLi.offset().left+$lastLi.outerWidth(!0)-offsetFn.left,Math.abs(distance)),_self.isScrolling=!0,$ul.animate({left:distance+"px"},"normal","swing",function(){"function"==typeof fn&&fn(),_self.isScrolling=!1,next()})};$ele.queue(queuedFn),1!=$ele.queue().length||_self.isScrolling||$ele.dequeue()}},_checkScroller:function(){var $ele=this.element,options=this.options;if(!options._scrollable)return!1;var $ul=$ele.find(">div.panel-heading >div.tab-listbox >ul"),$div=$ele.find(">div.panel-heading >div.tab-listbox"),totalWidth=4;if($ul.children().each(function(){totalWidth+=$(this).outerWidth(!0)}),totalWidth>$ul.parent().parent().innerWidth()){if(0===$div.siblings().length){var $divFn=$("<div></div>").insertAfter($div).addClass("fn");$('<span><i class="icon-arrowleft-little"></i></span>').appendTo($divFn),$('<span><i class="icon-arrowright-little"></i></span>').appendTo($divFn),$('<span><i class="icon-arrowlup-down"></i></span>').appendTo($divFn),$("<ul></ul>").addClass("dropdown-menu").css("display","none").insertAfter($divFn),options.tools=!0,options._dropDown=[]}return!0}return $div.siblings().remove(),options.tools=!1,!1},_enableScroller:function(){var $headers=this.element.find(">div.panel-heading"),$ul=$headers.find(">div.tab-listbox >ul");if(0===$headers.length||0===$ul.length)return!1;var $iconLeft=$headers.find(">div.fn >span").eq(0),$iconRight=$headers.find(">div.fn >span").eq(1),$liLast=$ul.children(":last"),lBorder=$headers.offset().left,rBorder=$iconLeft.offset().left,ulLeft=$ul.offset().left,ulRight=$liLast.offset().left+$liLast.outerWidth(!0);$iconLeft.toggleClass(scrollDisabled,ulLeft>=lBorder),$iconRight.toggleClass(scrollDisabled,rBorder>=ulRight)},_buildDropDown:function(){var _self=this,options=this.options,$ele=this.element;if(options.tools){var $Lis=$ele.find(">div.panel-heading >div.tab-listbox >ul li"),$divFn=$ele.find(">div.panel-heading >div.fn");$Lis.each(function(index,item){var tabId=_self._getAlter(index);if($(item).offset().left+$(item).outerWidth(!0)>$divFn.offset().left||$(item).offset().left<0)-1===$.inArray(tabId,options._dropDown)&&(options._dropDown.push(tabId),$divFn.next("ul").append('<li><a tabId="'+tabId+'">'+$(item).children("a").html()+"</a></li>"));else if(-1!==$.inArray(tabId,options._dropDown)){options._dropDown.splice($.inArray(tabId,options._dropDown),1);var $li=$divFn.next("ul").find("li a[tabId="+tabId+"]");$li.parent("li").empty().remove()}}),$ele.find(">div.panel-heading >ul li").unbind("click.aetabs").bind("click.aetabs",function(e){$ele.find(">div.panel-heading >ul").slideUp();var tabId=$(e.target).attr("tabId");$(e.target).parent("li").empty().remove();var index=$.inArray(tabId,options._dropDown);options._dropDown.splice(index,1),_self._activate(_self._getAlter(tabId))})}},_includeHtml:function(tabId,src,callback){this.options,this.element;$.ajax(src,{async:!1,cache:!1,success:function(data,textStatus,jqXHR){$("#"+tabId).html(data),$.globalInit(tabId),callback&&$.isFunction(callback)&&callback(data,textStatus,jqXHR)},error:function(jqXHR,textStatus,errorThrown){$.message.error("","","tabs reloading error.")}})},_srcType:function(src){return src&&"string"==typeof src?0===src.indexOf("#")?"div":0!==src.indexOf("#")&&src.indexOf(".html")===src.length-5?"page":void 0:!1},_tabIndex:function(tabId,src,href){var n,_self=this,$ele=this.element,options=this.options,numRegExp=/\D/g;if(numRegExp.test(tabId)){if(-1===$.inArray(tabId,options._activateType))n=$ele.find(">div.panel-heading >div.tab-listbox >ul a[tabId="+n+"]").parents("li:first").index();else if(-1!==$.inArray(tabId,options._activateType))switch(tabId){case"first":n=0;break;case"last":n=$ele.find(">div.panel-heading >div.tab-listbox >ul li:last").index();break;case"prev":n=options.active-1>=0?options.active-1:_self._getLength();break;case"next":n=options.active+1<=_self._getLength()?options.active+1:0}}else n=parseInt(tabId,10);return src?src=$ele.find(">div.panel-heading >div.tab-listbox >ul li").eq(n).attr("src"):href?href=$ele.find(">div.panel-heading >div.tab-listbox >ul li").eq(n).children("a").attr("href"):n},_getAlter:function(id){var rt,$ele=this.element;this.options;return"number"==typeof id?rt=$ele.find(">div.panel-heading >div.tab-listbox >ul li:eq("+id+") a").attr("tabId"):"string"==typeof id&&$ele.find(">div.panel-heading >div.tab-listbox >ul li a").each(function(i){return $(this).attr("tabId")==id?(rt=i,!1):void 0}),void 0===rt?null:rt},_getLength:function(){return this.element.find(">div.panel-heading >div.tab-listbox >ul").children().length},_doLayout:function(){this._checkScroller()&&this._enableScroller()},doLayout:function(){this._doLayout()},close:function(n){n=void 0===n?this.options.active:n,n=this._tabIndex(n),0>n?n=0:n>this._getLength()-1&&(n=this._getLength()-1),this._close(n)},closeAll:function(){var $ele=this.element,options=this.options,$headers=$ele.find(">div.panel-heading"),$content=$ele.find(">div.tab-content"),omtabsHeight=$ele.height();return options.onBeforeCloseAll&&this._trigger("onBeforeCloseAll",null)===!1?!1:($headers.find(">div.tab-listbox >ul li").remove(),$headers.find(">div.tab-listbox").siblings().remove(),$content.empty(),$content.css({height:omtabsHeight-$headers.outerHeight()}),options.active=-1,options.activeTabId=null,this._history=[],options._dropDown=[],this._doLayout(),void(options.onCloseAll&&this._trigger("onCloseAll",null)))},activate:function(n){n&&(n=this._tabIndex(n),0>n?n=0:n>this._getLength()-1&&(n=this._getLength()-1),this._activate(n))},getAlter:function(id){return this._getAlter(id)},getActivated:function(){return this.options.activeTabId},getLength:function(){return this._getLength()},getTabHeader:function(n){void 0===n?n=this.options.active:(n=this._tabIndex(n),0>n?n=0:n>this._getLength()-1&&(n=this._getLength()-1));var obj=this.element.find(">div.panel-heading ul.nav >li").eq(n);return obj}})}),define("ui-offCanvas",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeOffCanvas",{options:{initial:!1,mouseMode:"click",location:"left",width:"15%",height:"15%",sideMargin:0,animSpeed:0,button:!0,pushpin:!1,bgColor:"#fff",opacity:1,initialMode:"close",initType:"html"},_create:function(){var self=this,options=self.options,$ele=self.element,id=$ele.attr("id");if(!options.initial){id&&$ele.attr("aeId",id),"html"==options.initType&&this._buildOptions(options,$ele),$ele.attr("aeType",options.aeType||"aeOffCanvas"),$ele.attr("uiid",options.uiid?options.uiid:$ele.attr("id"));var $side=$ele.find("[name='offCanvas_side']");0===$side.length&&($side=$ele.children(":first"),$side.attr("name","offCanvas_side"));var sideData=options.sideData={};sideData.width=options.width,sideData.height=options.height,sideData.cssTop=$side.css("top"),sideData.cssBottom=$side.css("bottom"),sideData.cssLeft=$side.css("left"),sideData.cssRight=$side.css("right"),options.bodyWidth=$(document.body).outerWidth(!0),options.bodyHeight=$(document.body).outerHeight(!0),$side.width(options.width),$side.height(options.height),$ele.addClass("offCanvas_content"),$side.addClass("offCanvas_side"),$ele.children().css({background:options.bgColor,opacity:options.opacity}),options.initial=!0}},_init:function(){var self=this,options=self.options,$ele=self.element,$side=$ele.find("[name='offCanvas_side']");"close"==options.initialMode?options.side=!1:options.side=!0;var obj=self._getSideLocation(!options.side);$side.css(obj),options.button&&self._offCanvasButton()},_buildOptions:function(options,element){options.aeType=element.attr("aeType"),options.uiid=element.attr("uiid"),options.mouseMode=element.attr("mouseMode")||options.mouseMode,options.location=element.attr("location")||options.location,options.animSpeed=parseInt(element.attr("animSpeed"))||options.animSpeed,options.width=element.attr("width")||options.width,options.height=element.attr("height")||options.height,options.sideMargin=element.attr("sideMargin")||options.sideMargin,options.bgColor=element.attr("bgColor")||options.bgColor,options.opacity=element.attr("opacity")||options.opacity,options.initialMode=element.attr("initialMode")||options.initialMode,options.button="false"==element.attr("button")?!1:options.button;var onBeforeOpen=element.attr("onBeforeOpen");options.onBeforeOpen=onBeforeOpen?function(event){if($.isString(onBeforeOpen)){var i=onBeforeOpen.indexOf("("),actName=i>0?onBeforeOpen.substring(0,i):onBeforeOpen,func="return window."+actName+"?"+actName+".call(window, e):false;";return new Function("e",func)(event)}}:"";var onAfterOpen=element.attr("onAfterOpen");options.onAfterOpen=onAfterOpen?function(event){if($.isString(onAfterOpen)){var i=onAfterOpen.indexOf("("),actName=i>0?onAfterOpen.substring(0,i):onAfterOpen,func="return window."+actName+"?"+actName+".call(window, e):false;";return new Function("e",func)(event)}}:"";var onBeforeClose=element.attr("onBeforeClose");options.onBeforeClose=onBeforeClose?function(event){if($.isString(onBeforeClose)){var i=onBeforeClose.indexOf("("),actName=i>0?onBeforeClose.substring(0,i):onBeforeClose,func="return window."+actName+"?"+actName+".call(window, e):false;";return new Function("e",func)(event)}}:"";var onAfterClose=element.attr("onAfterClose");options.onAfterClose=onAfterClose?function(event){if($.isString(onAfterClose)){var i=onAfterClose.indexOf("("),actName=i>0?onAfterClose.substring(0,i):onAfterClose,func="return window."+actName+"?"+actName+".call(window, e):false;";return new Function("e",func)(event)}}:""},_open:function(){var self=this,options=self.options,$ele=self.element,$side=$ele.find("[name='offCanvas_side']");if(!options.side){if(options.onBeforeOpen&&self._trigger("onBeforeOpen",null)===!1)return!1;var obj=self._getSideLocation(!!options.side);$side.animate(obj,options.animSpeed),options.button&&self._btnOpen(),options.onAfterOpen&&self._trigger("onAfterOpen",null),options.side=!0}},_close:function(){var self=this,options=self.options,$ele=self.element,$side=$ele.find("[name='offCanvas_side']");if(options.side){if(options.onBeforeClose&&self._trigger("onBeforeClose",null)===!1)return!1;var $ext;if(options.button){var $btn=$ele.find("[name='offCanvasBtn']");$ext=$btn.siblings(":not([name='offCanvas_side'])")}else $ext=$side.siblings();$ext.length>0&&$ext.hide();var obj=self._getSideLocation(!!options.side);$side.animate(obj,options.animSpeed),options.button&&self._btnClose(),options.onAfterClose&&self._trigger("onAfterClose",null),options.side=!1}},_getSideLocation:function(open){var obj,sideMargin,self=this,options=self.options,sideData=(self.element,options.sideData);return void 0===open&&(open=options.side),"top"==options.location?(sideMargin=self._calculator(options.sideMargin,2,sideData.height),sideData.leftOpen=sideData.leftClose=0,sideData.topOpen=sideData.topClose=0,sideData.topClose=sideMargin,obj=open===!1?{top:sideData.topOpen}:{top:sideData.topClose}):"bottom"==options.location?(sideMargin=self._calculator(options.sideMargin,2,sideData.height),sideData.leftOpen=sideData.leftClose=0,sideData.bottomOpen=sideData.bottomClose=0,sideData.bottomClose=sideMargin,obj=open===!1?{bottom:sideData.bottomOpen}:{bottom:sideData.bottomClose}):"right"==options.location?(sideMargin=self._calculator(options.sideMargin,2,sideData.width),sideData.topOpen=sideData.topClose=0,sideData.rightOpen=sideData.rightClose=0,sideData.rightClose=sideMargin,obj=open===!1?{right:sideData.rightOpen}:{right:sideData.rightClose}):(sideMargin=self._calculator(options.sideMargin,2,sideData.width),sideData.topOpen=sideData.topClose=0,sideData.leftOpen=sideData.leftClose=options.sideMargin,sideData.leftClose=sideMargin,obj=open===!1?{left:sideData.leftOpen}:{left:sideData.leftClose}),obj},_btnOpen:function(){var self=this,options=self.options,$ele=self.element,$btn=$ele.find("[name='offCanvasBtn']"),obj=self._getBtnLocation(!!options.side);$btn.animate(obj,options.animSpeed),$btn.removeClass("offCanvas_close_btn_"+options.location).addClass("offCanvas_open_btn_"+options.location)},_btnClose:function(){var self=this,options=self.options,$ele=self.element,$btn=$ele.find("[name='offCanvasBtn']"),obj=self._getBtnLocation(!!options.side);$btn.animate(obj,options.animSpeed),$btn.removeClass("offCanvas_open_btn_"+options.location).addClass("offCanvas_close_btn_"+options.location)},_offCanvasButton:function(){var obj,btnClass,self=this,options=self.options,$ele=self.element,btnData=options.btnData={};options.sideData;btnClass="offCanvas_close_btn_"+options.location,options.side&&(btnClass="offCanvas_open_btn_"+options.location);var btnHtml='<div name="offCanvasBtn">&nbsp;</div>';$ele.prepend(btnHtml);var $btn=$ele.find("[name='offCanvasBtn']");$btn.addClass(btnClass),btnData.width=$btn.width(),btnData.height=$btn.height(),obj=self._getBtnLocation(!options.side),$btn.css(obj),"mouseover"==options.mouseMode?$btn.mouseover(function(){options.side?self._close():self._open()}):$btn.click(function(){options.side?self._close():self._open()})},_getBtnLocation:function(open){var obj,half,margin,btnMargin,self=this,options=self.options,sideData=(self.element,options.sideData),btnData=options.btnData;return void 0===open&&(open=options.side),"top"==options.location?(half=self._calculator(sideData.width,4,2),half=self._calculator(half,2,btnData.width/2),"auto"!==sideData.cssLeft?(margin=self._calculator(sideData.cssLeft,1,half),btnData.leftOpen=btnData.leftClose=margin):"auto"!==sideData.cssRight?(margin=self._calculator(sideData.cssRight,1,half),btnData.rightOpen=btnData.rightClose=margin):btnData.leftOpen=btnData.leftClose=half,btnMargin=self._calculator(options.sideMargin,1,sideData.height),btnData.topOpen=btnMargin,btnData.topClose=options.sideMargin,obj=open===!1?{top:btnData.topOpen,left:btnData.leftOpen,right:btnData.rightOpen}:{top:btnData.topClose,left:btnData.leftClose,right:btnData.rightClose}):"bottom"==options.location?(half=self._calculator(sideData.width,4,2),half=self._calculator(half,2,btnData.width/2),"auto"!==sideData.cssLeft?(margin=self._calculator(sideData.cssLeft,1,half),btnData.leftOpen=btnData.leftClose=margin):"auto"!==sideData.cssRight?(margin=self._calculator(sideData.cssRight,1,half),btnData.rightOpen=btnData.rightClose=margin):btnData.leftOpen=btnData.leftClose=half,btnMargin=self._calculator(options.sideMargin,1,sideData.height),btnData.leftOpen=btnData.leftClose=half,btnData.bottomOpen=btnMargin,btnData.bottomClose=options.sideMargin,obj=open===!1?{bottom:btnData.bottomOpen,left:btnData.leftOpen,right:btnData.rightOpen}:{bottom:btnData.bottomClose,left:btnData.leftClose,right:btnData.rightClose}):"right"==options.location?(half=self._calculator(sideData.height,4,2),half=self._calculator(half,2,btnData.height/2),"auto"!==sideData.cssTop?(margin=self._calculator(sideData.cssTop,1,half),btnData.TopOpen=btnData.TopClose=margin):"auto"!==sideData.cssBottom?(margin=self._calculator(sideData.cssBottom,1,half),btnData.rightOpen=btnData.rightClose=margin):btnData.bottomOpen=btnData.bottomClose=half,btnMargin=self._calculator(options.sideMargin,1,sideData.width),btnData.topOpen=btnData.topClose=half,btnData.rightOpen=btnMargin,btnData.rightClose=options.sideMargin,obj=open===!1?{top:btnData.topOpen,right:btnData.rightOpen,bottom:btnData.bottomOpen}:{top:btnData.topClose,right:btnData.rightClose,bottom:btnData.bottomClose}):(half=self._calculator(sideData.height,4,2),
half=self._calculator(half,2,btnData.height/2),"auto"!==sideData.cssTop?(margin=self._calculator(sideData.cssTop,1,half),btnData.TopOpen=btnData.TopClose=margin):"auto"!==sideData.cssBottom?(margin=self._calculator(sideData.cssBottom,1,half),btnData.rightOpen=btnData.rightClose=margin):btnData.bottomOpen=btnData.bottomClose=half,btnMargin=self._calculator(options.sideMargin,1,sideData.width),btnData.topOpen=btnData.topClose=half,btnData.leftOpen=btnMargin,btnData.leftClose=options.sideMargin,obj=open===!1?{top:btnData.topOpen,left:btnData.leftOpen,bottom:btnData.bottomOpen}:{top:btnData.topClose,left:btnData.leftClose,bottom:btnData.bottomClose}),obj},_calculator:function(data,operator,num){var newData,unit1,unit2;switch("string"==typeof data&&(-1!=data.indexOf("%")?unit1="%":-1!=data.indexOf("px")&&(unit1="px"),data=parseInt(data)),"string"==typeof num&&(-1!=num.indexOf("%")?unit2="%":-1!=num.indexOf("px")&&(unit2="px"),num=parseInt(num)),operator){case 1:newData=data+num;break;case 2:newData=data-num;break;case 3:newData=data*num;break;case 4:newData=data/num;break;case 5:newData=data%num;break;default:return!1}return(void 0!==unit1||void 0!==unit2)&&(unit1==unit2?newData+=unit1:(unit1=unit2||unit1,newData+=unit1)),newData},open:function(){this._open()},close:function(){this._close()},reload:function(url){return}})}),define("ui-irguide",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeIrguide",{options:{_initial:!1,path:[],title:"",width:"auto",height:"auto",button:!1,buttonRenderer:void 0,initType:"html"},_create:function(){var _self=this,options=this.options,$ele=this.element,id=$ele.attr("id");if(options._initial!==!0){if(id&&$ele.attr("aeId",id),"html"===options.initType&&_self._buildOptions(options,$ele),$ele.addClass("modal-body"),$ele.find(">ul:first").addClass("nav nav-justified nav-pills nav-wizard"),$ele.children(":not(ul.nav)").length?$ele.children(":not(ul.nav)").wrapAll('<div class="tab-content"></div>'):$ele.find(">ul.nav").after('<div class="tab-content"></div>'),$ele.find(">div.tab-content").children().hide(),options.buttonRenderer)$ele.append(options.buttonRenderer());else if(options.button){var button='<div class="aeIrguidebutton" style="float:right"><button type="button" class="btn btn-primary">Confirm</button>&nbsp;<button type="button" class="btn btn-default">Cancel</button></div>';$ele.append(button),_self._bindButtonEvent()}var $content=$ele.find(">div.tab-content");$ele.find(">ul.nav li").each(function(index,item){if(void 0===options.path){if(!$(item).attr("stepId")){var pre=(65536*(1+Math.random())|0).toString(16).substring(1),i=index.toString();$(item).attr("stepId","stepid"+i+pre)}options._path.push($(item).attr("stepId"))}var stepId=$(item).attr("stepId"),src=$(item).attr("src");if(options._src[stepId]=src,"page"===_self._srcType(src))$content.append('<div stepId="'+stepId+'" style="display:none;"></div>');else if("div"===_self._srcType(src)){if(!$content.find(">"+src).length){var outerHTML=$(src).prop("outerHTML")||'<div id="'+src.split("#")[1]+'"></div>';$(src).remove(),$content.append(outerHTML)}$(src).attr("stepId",stepId).hide()}$(item).children("a").hide(),options._liObject[stepId]=$(item).prop("outerHTML")}),options.path=options.path||options._path,_self._structuringPath(options.path),options._initial=!0}},_init:function(){this.element.find(">ul.nav").empty(),this.options._history=[],this.options._active=void 0,this.options._activePath=[],this.options._activeLiArray=[]},_buildOptions:function(options,element){options._liObject=[],options._src=[],options.id=element.attr("id"),options.title=element.attr("title")||void 0,options.button="true"==element.attr("button")?!0:options.button,options.width=parseInt(element.attr("width"),10)||options.width,options.height=parseInt(element.attr("height"),10)||options.height;var path=element.attr("path");path&&-1!==path.indexOf("[")?(path=$.trim(path),options.path=$.parseJSON(path)):(options.path=void 0,options._path=[]);var buttonRenderer=element.attr("buttonRenderer");options.buttonRenderer=buttonRenderer?function(){if($.isString(buttonRenderer)){var i=buttonRenderer.indexOf("("),actName=i>0?buttonRenderer.substring(0,i):buttonRenderer,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}}:void 0,options.button=options.buttonRenderer?!1:options.button,this._buildSimpleEvent(options,"onBeforeStart",element.attr("onBeforeStart")),this._buildSimpleEvent(options,"onStart",element.attr("onStart")),this._buildSimpleEvent(options,"onBeforeClose",element.attr("onBeforeClose")),this._buildSimpleEvent(options,"onClose",element.attr("onClose")),this._buildOptionEvent(options,"onBeforeNext",element.attr("onBeforeNext")),this._buildOptionEvent(options,"onNext",element.attr("onNext")),this._buildOptionEvent(options,"onBeforePrev",element.attr("onBeforePrev")),this._buildOptionEvent(options,"onPrev",element.attr("onPrev")),options.button&&(this._buildOptionEvent(options,"onConfirm",element.attr("onConfirm")),this._buildOptionEvent(options,"onCancel",element.attr("onCancel")))},_buildSimpleEvent:function(options,evtName,evtValue){options[evtName]=evtValue?function(event){if($.isString(evtValue)){var i=evtValue.indexOf("("),actName=i>0?evtValue.substring(0,i):evtValue,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}}:void 0},_buildOptionEvent:function(options,evtName,evtValue){options[evtName]=evtValue?function(active,data,event){if($.isString(evtValue)){var i=evtValue.indexOf("("),actName=i>0?evtValue.substring(0,i):evtValue,func="return window."+actName+"?"+actName+".call(window,a,d,e):false;";return new Function("a","d","e",func)(active,data,event)}}:void 0},_bindButtonEvent:function(){var _self=this,options=this.options,$ele=this.element;$ele.find(">div.aeIrguidebutton >button:first").bind("click.aeIrguidebutton",function(event){options.onConfirm&&_self._trigger("onConfirm",event,options._active,options._data),_self.prev()}),$ele.find(">div.aeIrguidebutton >button:last").bind("click.aeIrguidebutton",function(event){options.onCancel&&_self._trigger("onCancel",event,options._active,options._data),_self.prev(!0)})},start:function(stepId){var _self=this,options=this.options,$ele=this.element;if(_self._init(),$.setPublicData("irGuide",$ele.attr("id")),options._data={},void 0===stepId&&options.path&&(stepId="object"==typeof options.path[0]?options.path[0][0]:options.path[0]),_self._getActivePath(stepId)&&_self._getActiveLiArray(),!options.onBeforeStart||!1!==_self._trigger("onBeforeStart",null)){$ele.find(">ul.nav").append(options._activeLis);var _config=$.extend(!0,{},$.extend({title:options.title,width:options.width,height:options.height,showButton:options.button,modal:!0,draggable:!0,resizable:!0,showClose:!0,popupType:"div",onBeforeClose:options.onBeforeClose,onClose:options.onClose}));if(options._dialogConfig=_self._buildDialogConfig(_config),"page"===_self._srcType(options._src[stepId])){var $content=$ele.find(">div.tab-content").children("[stepId="+stepId+"]");$.includeHtml($content,options._src[stepId],function(){_self._startThen(stepId)})}else _self._startThen(stepId)}},_startThen:function(stepId){var _self=this,options=this.options,$ele=this.element;_self._stepsInit(stepId),$ele.aeDialog(options._dialogConfig),_self._stepsShow(stepId,"start"),options._history.push(stepId),options._active=stepId,options.onStart&&_self._trigger("onStart",null)},_buildDialogConfig:function(ss){var _self=this;return{autoOpen:!0,modal:ss.modal,width:ss.width||"auto",height:ss.height||"auto",title:ss.title||"",popupType:ss.popupType||"",draggable:ss.draggable,resizable:ss.resizable,showFlush:ss.showFlush,showClose:ss.showClose,showMinMax:ss.showMinMax,partId:ss.partId,beforeClose:function(){return ss.onBeforeClose&&!1===_self._trigger("onBeforeClose",null)?!1:void 0},close:function(){ss.onClose&&_self._trigger("onClose",null),_self.options._data=void 0,$.removePublicData("irGuide")}}},next:function(stepId){var _self=this,options=this.options,$ele=this.element,active=options._active;if(void 0===stepId){if(active===options._activePath[options._activePath.length-1])return;stepId=options._activePath[$.inArray(active,options._activePath)+1]}if((!options.onBeforeNext||!1!==_self._trigger("onBeforeNext",null,options._active,options._data))&&_self._getActivePath(stepId)!==!1)if(_self._getActivePath(stepId)===!0&&_self._getActiveLiArray(),"page"===_self._srcType(options._src[stepId])){var $content=$ele.find(">div.tab-content").children("[stepId="+stepId+"]");$.includeHtml($content,options._src[stepId],function(){_self._nextThen(stepId)})}else _self._nextThen(stepId)},_nextThen:function(stepId){var _self=this,options=this.options;_self._stepsInit(stepId),_self._stepsShow(stepId,"next"),options._history.push(stepId),options._active=stepId,options.onNext&&_self._trigger("onNext",null,options._active,options._data)},prev:function(cancel){var _self=this,options=this.options;return cancel===!0||"true"===cancel?void _self._prevThen(cancel):void(options.onBeforePrev&&!1===_self._trigger("onBeforePrev",null,options._active,options._data)||_self._prevThen())},_prevThen:function(cancel){var _self=this,options=this.options,$ele=this.element,active=options._active;if(active===options._history[0])return!cancel&&options.onPrev&&_self._trigger("onPrev",null,options._active,options._data),void $ele.aeDialog("close");var stepId=options._history[$.inArray(active,options._history)-1];_self._stepsShow(stepId,"prev"),options._history.pop(),options._active=stepId,options.onPrev&&_self._trigger("onPrev",null,options._active,options._data)},_stepsInit:function(stepId){var $ele=(this.options,this.element),$content=$ele.find(">div.tab-content:first").children('[stepId="'+stepId+'"]');$.globalInit($content)},_stepsShow:function(stepId,type){var $ele=(this.options,this.element),$content=$ele.find(">div.tab-content:first").children('[stepId="'+stepId+'"]'),$li=$ele.find(">ul.nav").children('li[stepId="'+stepId+'"]');"start"===type?($li.addClass("active").children("a").show(),$content.show().siblings().hide()):"next"===type?($li.prevAll("li").addClass("done").removeClass("active").children("a").show(),$li.addClass("active").children("a").show(),$content.show().siblings().hide()):"prev"===type&&($li.nextAll("li").removeClass("active").children("a").hide(),$li.addClass("active").removeClass("done"),$content.show().siblings().hide())},_structuringPath:function(path){var i,j,pathMap=[];for(i=0;i<path.length;i++)if("string"==typeof path[i])pathMap[path[i]]=path[i+1];else if("object"==typeof path[i])for(j=0;j<path[i].length;j++)pathMap[path[i][j]]=path[i][j+1];this.options._pathMap=pathMap},_getActivePath:function(stepId){var i,key,_activePath,temp,options=this.options,path=options.path;options._pathMap;if(!options._activePath.length){if(-1!==$.inArray(stepId,path))for(i=0;i<path.length;i++)(path[i]===stepId||0===$.inArray(stepId,options._activePath))&&options._activePath.push(path[i]);return!0}if(key=options._history[options._history.length-1],!("string"==typeof options._pathMap[key]&&stepId===options._pathMap[key]||"object"==typeof options._pathMap[key]&&-1!==$.inArray(stepId,options._pathMap[key])))return $.message.error("","",""),!1;if(-1===$.inArray(stepId,options._activePath)||-1!==$.inArray(stepId,options._activePath)&&$.inArray(stepId,options._activePath)-$.inArray(key,options._activePath)!==1){for(_activePath=[],i=0;i<options._activePath.length;i++){if(options._activePath[i]===key){_avtivePath.push(options._activePath[i]);break}_avtivePath.push(options._activePath[i])}for(_activePath.push(stepId),temp=stepId;options._pathMap[temp];)_activePath.push(options._pathMap[stepId][0]),temp=options._pathMap[stepId][0];return options._activePath=_activePath,!0}},_getActiveLiArray:function(){var options=this.options;options._activeLiArray=[],options._activeLis="";for(var i=0;i<options._activePath.length;i++)options._activeLiArray.push(options._liObject[options._activePath[i]]),options._activeLis+=options._liObject[options._activePath[i]]},_srcType:function(src){return src&&"string"==typeof src?0===src.indexOf("#")?"div":0!==src.indexOf("#")&&src.indexOf(".html")===src.length-5?"page":void 0:!1},getContent:function(stepId){},getActive:function(){return this.options._active},setData:function(data,stepId){var options=this.options;void 0!==data&&void 0!==options._data&&(stepId=stepId||options._active,options._data[stepId]=data)},getData:function(){return this.options._data}})}),define("ui-guide",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeGuide",{options:{_initial:!1,theme:0,_icon:["fa fa-user","fa fa-picture-o","fa fa-edit","fa fa-calendar","fa fa-book","fa fa-home","fa fa-folder","fa fa-save"],title:"",width:"auto",height:"auto",button:!1,initType:"html"},_create:function(){var _self=this,options=this.options,$ele=this.element,id=$ele.attr("id");if(options._initial!==!0){id&&$ele.attr("aeId",id),"html"===options.initType&&_self._buildOptions(options,$ele);var ulClass;switch(options.theme){case 0:ulClass="nav nav-justified nav-pills nav-wizard-circle",options.icon=[];break;case 1:ulClass="nav nav-justified nav-pills nav-wizard-icon",options.icon=options.icon||options._icon;break;default:ulClass="nav nav-justified nav-pills nav-wizard-circle",optinos.icon=[]}$ele.addClass("modal-body"),$ele.find(">ul:first").addClass(ulClass),options._total=$ele.find(">ul.nav").children("li").length,$ele.children(":not(ul.nav)").length?$ele.children(":not(ul.nav)").wrapAll('<div class="tab-content"></div>'):$ele.find(">ul.nav").after('<div class="tab-content"></div>'),$ele.find(">div.tab-content").children().hide();var $content=$ele.find(">div.tab-content");$ele.find(">ul.nav li").each(function(index,item){var text=$(item).text();1===options.theme?index<options.icon.length?$(item).children("a").html('<strong><i class="'+options.icon[index]+'"></i></strong><p>'+text+"<p>"):$(item).children("a").html('<strong><i class="'+options.icon[index%options.icon.length]+'"></i></strong><p>'+text+"<p>"):($(item).children("a").html("<strong>"+(index+1)+"</strong><p>"+text+"<p>"),options.icon.push("fa fa-check"));var pre=(65536*(1+Math.random())|0).toString(16).substring(1),i=index.toString();$(item).attr("stepId","stepid"+i+pre);var stepId=$(item).attr("stepId"),src=$(item).attr("src");if(options._data.push([stepId,src]),"page"===_self._srcType(src))$content.append('<div stepId="'+stepId+'" style="display:none;"></div>');else if("div"===_self._srcType(src)){if(!$content.find(">"+src).length){var outerHTML=$(src).prop("outerHTML")||'<div id="'+src.split("#")[1]+'"></div>';$(src).remove(),$content.append(outerHTML)}$(src).attr("stepId",stepId).hide()}}),options._initial=!0}},_init:function(){this.element.find(">ul.nav li").removeClass().addClass("disabled"),this.element.find(">div.tab-content").children().hide(),this.options._history=[],this.options._active=void 0,this.options._activeStep=void 0,this.element.unbind(".aeguidelis")},_buildOptions:function(options,element){options._data=[],options.id=element.attr("id"),options.theme=parseInt(element.attr("theme"),10)||options.theme,options.title=element.attr("title")||void 0,options.button="true"==element.attr("button")?!0:options.button,options.width=parseInt(element.attr("width"),10)||options.width,options.height=parseInt(element.attr("height"),10)||options.height;var icon=element.attr("icon");if(icon&&-1!==icon.indexOf("[")){icon=$.trim(icon),options.icon=[];for(var result=icon.substring(1,icon.length-1).split(","),i=0;i<result.length;i++)result[i]=$.trim(result[i]),options.icon.push(result[i])}this._buildOptionEvent(options,"onBeforeStart",element.attr("onBeforeStart")),this._buildOptionEvent(options,"onStart",element.attr("onStart")),this._buildOptionEvent(options,"onBeforeNext",element.attr("onBeforeNext")),this._buildOptionEvent(options,"onNext",element.attr("onNext")),this._buildOptionEvent(options,"onBeforePrev",element.attr("onBeforePrev")),this._buildOptionEvent(options,"onPrev",element.attr("onPrev")),this._buildOptionEvent(options,"onBeforeClose",element.attr("onBeforeClose")),this._buildOptionEvent(options,"onClose",element.attr("onClose"))},_buildOptionEvent:function(options,evtName,evtValue){options[evtName]=evtValue?function(param1,param2){if($.isString(evtValue)){var i=evtValue.indexOf("("),actName=i>0?evtValue.substring(0,i):evtValue,func="return window."+actName+"?"+actName+".call(window,p1,p2):false;";return new Function("p1","p2",func)(param1,param2)}}:options[evtName]},start:function(){var _self=this,options=this.options,$ele=this.element;if(_self._init(),$.setPublicData("guide",$ele.attr("id")),!options.onBeforeStart||!1!==_self._trigger("onBeforeStart")){var _config=$.extend(!0,{},$.extend({title:options.title,width:options.width,height:options.height,showButton:options.button,modal:!0,draggable:!1,resizable:!1,showFlush:!1,showClose:!0,showMinMax:!1,popupType:"div",onBeforeClose:options.onBeforeClose,onClose:options.onClose}));if(options._dialogConfig=_self._buildDialogConfig(_config),"page"===_self._srcType(options._data[0][1])){var $content=$ele.find(">div.tab-content").children("[stepId="+options._data[0][0]+"]");$.includeHtml($content,options._data[0][1],function(){_self._startThen()})}else _self._startThen()}},_startThen:function(){var _self=this,options=this.options,$ele=this.element;_self._stepsInit(options._data[0][0]),$ele.aeDialog(options._dialogConfig),_self._stepsShow(0,"start"),options._history.push(0),options._active=0,options._activeStep=options._data[0][0],_self._bindEvent(),options.onStart&&_self._trigger("onStart")},_bindEvent:function(){for(var _self=this,$ele=this.element,lis=$ele.find(">ul.nav li"),i=0;i<lis.length;i++)$(lis[i]).hasClass("done")&&_self._bindLiEvent(lis[i])},_bindLiEvent:function(li){var _self=this;$(li).bind("mouseover.aeguidelis",function(){$(this).css("cursor","pointer")}).bind("click.aeguidelis",function(){_self._jump($(this).index())})},_buildDialogConfig:function(ss){var _self=this;return{autoOpen:!0,modal:ss.modal,width:ss.width||"auto",height:ss.height||"auto",title:ss.title||"",popupType:ss.popupType||"",draggable:ss.draggable,resizable:ss.resizable,showFlush:ss.showFlush,showClose:ss.showClose,showMinMax:ss.showMinMax,partId:ss.partId,onBeforeClose:function(){return ss.onBeforeClose&&!1===_self._trigger("onBeforeClose")?!1:void 0},onClose:function(){this.options.onPrev&&_self._trigger("onPrev",event,this.options._active),ss.onClose&&_self._trigger("onClose"),$.removePublicData("guide")}}},next:function(){var _self=this,options=this.options,$ele=this.element,active=options._active;if(active!==options._total-1&&(!options.onBeforeNext||!1!==_self._trigger("onBeforeNext",event,options._active))){var stepId=options._data[active+1][0];if("page"===_self._srcType(options._data[active+1][1])){var $content=$ele.find(">div.tab-content").children("[stepId="+stepId+"]");$.includeHtml($content,options._data[active+1][1],function(){_self._nextThen(stepId,active+1)})}else _self._nextThen(stepId,active+1)}},_nextThen:function(stepId,index){var _self=this,options=this.options;_self._stepsInit(stepId),_self._stepsShow(index,"next"),options._active=index,options._activeStep=stepId,options._history.push(index),_self._bindEvent(),options.onNext&&_self._trigger("onNext",event,options._active)},_jump:function(index){var _self=this,options=this.options;if(index<options._active)if(index===options._active-1)_self.prev();else{if(options.onBeforePrev&&!1===_self._trigger("onBeforePrev",event,options._active))return;for(_self._stepsShow(index,"jump"),options._active=index,options._activeStep=options._data[index][0],i=options._history.length-1;i>0&&options._history[i]!==options._active;i--)options._history.pop();_self._bindEvent(),options.onPrev&&_self._trigger("onPrev",event,options._active)}},getActive:function(){var index=this.options._active;return index},prev:function(cancel){var _self=this,options=this.options;return cancel===!0||"true"===cancel?void _self._prevThen():void(options.onBeforePrev&&!1===_self._trigger("onBeforePrev",event,options._active)||(_self._prevThen(),options.onPrev&&_self._trigger("onPrev",event,options._active)))},_prevThen:function(){var _self=this,options=this.options,$ele=this.element,active=options._active;if(0===active)return void $ele.aeDialog("close");var stepId=options._data[active-1][0];_self._stepsShow(active-1,"prev"),options._active--,options._activeStep=stepId,options._history.pop(),_self._bindEvent()},_stepsInit:function(stepId){var aeInit,i,actName,func,$ele=(this.options,this.element),$content=$ele.find(">div.tab-content:first").children('[stepId="'+stepId+'"]'),initFunction=$content.attr("initFunction");initFunction?(aeInit=$content.find("[aeInit=false]"),aeInit&&($(aeInit).each(function(index,item){$(item).attr("aeInit","true")}),$.globalInit($content),i=initFunction.indexOf("("),actName=i>0?initFunction.substring(0,i):initFunction,func="return window."+actName+"?"+actName+".call(window):false;",new Function(func)())):(aeInit=$content.find('[aeInit="false"]'),aeInit&&aeInit.length&&($(aeInit).each(function(index,item){$(item).attr("aeInit","true")}),$.globalInit($content)))},_stepsShow:function(index,type){var options=this.options,$ele=this.element,stepId=options._data[index][0],$content=$ele.find(">div.tab-content:first").children('[stepId="'+stepId+'"]'),$li=$ele.find(">ul.nav li").eq(index);"start"===type?$li.addClass("active").removeClass("disabled"):"next"===type?(0===options.theme&&$li.prev("li").find(">a >strong").empty().html('<i class="fa fa-check"></i>'),$li.prev("li").addClass("done").removeClass("active"),$li.addClass("active").removeClass("disabled")):"prev"===type?(0===options.theme&&$li.find(">a >strong").empty().text(index+1),$li.addClass("active").removeClass("done"),$li.next("li").addClass("disabled").removeClass("active")):"jump"===type&&(0===options.theme&&($li.find(">a >strong").empty().text(index+1),$li.nextAll("li").each(function(n,item){$(item).find(">a >strong").empty().text(index+n+2)})),$li.addClass("active").removeClass("done"),$li.nextAll("li").addClass("disabled").removeClass("active").removeClass("done")),$content.show().siblings().hide()},_srcType:function(src){return src&&"string"==typeof src?0===src.indexOf("#")?"div":0!==src.indexOf("#")&&src.indexOf(".html")===src.length-5?"page":void 0:!1}})}),define("ui-menu",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeMenu",{options:{_initial:!1,mId:"id",mPid:"pid",mLabel:"label",theme:0,contextMenu:!1,location:"top",renderAll:!0,showMode:"mouseover",animate:"",speed:1e3,onSelect:function(item,event){},initType:"html"},_create:function(){var _self=this,options=this.options,$ele=this.element,id=$ele.attr("id");if(options._initial!==!0){id&&$ele.attr("aeId",id),"html"===options.initType&&_self._buildOptions(options,$ele);var themeClass;switch(options.theme){case 0:themeClass="menu-box-horiz";break;case 1:themeClass="menu-box-horiz menu-primary";break;default:themeClass="menu-box-horiz"}$ele.addClass(themeClass),options._initial=!0}},_init:function(){var source=this.options.dataSource;source&&"string"==typeof source&&(source=$.parseJSON(source),this.reload(source))},_buildOptions:function(options,element){options.theme=parseInt(element.attr("theme"),10)||options.theme,options.mLabel=element.attr("mLabel")||options.mLabel,options.mId=element.attr("mId")||options.mId,options.mPid=element.attr("mPid")||options.mPid,options.renderAll="false"==element.attr("renderAll")?!1:options.renderAll,options._menuIterationMap=[],element.attr("showMode")&&-1!==element.attr("showMode").indexOf("click")&&(options.showMode="click");var onSelect=element.attr("onSelect");options.onSelect=onSelect?function(item,event){if($.isString(onSelect)){var i=onSelect.indexOf("("),actName=i>0?onSelect.substring(0,i):onSelect,func="return window."+actName+"?"+actName+".call(window, i ,e):false;";return new Function("i","e",func)(item,event)}}:"",options.dataSource=element.attr("dataSource")},reload:function(data,topId){var _self=this,options=this.options,$ele=this.element;topId&&(data=_self._findChildrenData(data,topId)),options.renderAll?(data=_self._transformToNodes(data),$ele.empty(),$ele.append(_self._appendNodes.apply(_self,[data]))):_self._renderHeader(data),_self._bindHeaderEvent(),_self._bindEvent()},_bindHeaderEvent:function(){var options=this.options,$ele=this.element;$ele.find(">ul:first >li").bind(options.showMode+".showFirstLevel",function(e){$(this).addClass("active").siblings("li").removeClass("active"),$(this).children("ul").show(),$(this).siblings("li").children("ul").hide()})},_renderHeader:function(data){var _self=this,options=this.options,$ele=this.element;$ele.children().each(function(){$(this).is("ul")||$(this).remove()}),$ele.find(">ul:first").addClass("nav nav-pills"),$ele.find(">ul:first >li").each(function(index,item){var mId=$(item).attr("mId");options._menuIterationMap=[];var mData=_self._findChildrenData(data,mId);mData&&mData.length&&($(item).find(">a:first").append('<i class="icon-arrowlup-down"></i>'),mData=_self._transformToNodes(mData),$(item).append(_self._appendNodes.call(_self,mData,1)))})},_calculateOffset:function(){},_findChildrenData:function(data,topId){for(var _self=this,options=this.options,id=options.mId,pid=options.mPid,i=0;i<data.length;i++)data[i][pid]==topId&&(options._menuIterationMap.push(data[i]),_self._findChildrenData(data,data[i][id]));return options._menuIterationMap},_transformToNodes:function(data){var i,options=this.options,id=options.mId,pid=options.mPid,treeData=[],tmpMap=[];for(i=0;i<data.length;i++)tmpMap[data[i][id]]=data[i];for(i=0;i<data.length;i++)if(tmpMap[data[i][pid]]){var tpid=data[i][pid];tmpMap[tpid]._children||(tmpMap[tpid]._children=[]),data[i]._hierarchy=tmpMap[tpid]._hierarchy+1,tmpMap[tpid]._children.push(data[i]),options._hierarchy=tmpMap[tpid]._hierarchy+1}else data[i]._hierarchy=0,treeData.push(data[i]);return treeData},_appendNodes:function(source,_hierarchy){var _self=this,options=this.options,menuHtml=[],id=options.mId,label=(options.mPid,options.mLabel),ulClass=void 0===_hierarchy?"nav nav-pills":"menu-list",display=void 0===_hierarchy?"block":"none",iClass=void 0===_hierarchy?"icon-arrowlup-down":"icon-arrowright-little";menuHtml.push('<ul class="'+ulClass+'" style="display:'+display+';">');var childrenHtml=[];return $(source).each(function(index,item){item._children?(childrenHtml.push('<li mid="'+item[id]+'">'),childrenHtml.push('<a href="javascript:void(0)" >'),childrenHtml.push("<span>"),childrenHtml.push(item[label]),childrenHtml.push("</span>"),childrenHtml.push('<i class="'+iClass+'"></i>'),childrenHtml.push("</a>"),childrenHtml.push(_self._appendNodes(item._children,item._hierarchy+1)),childrenHtml.push("</li>")):(childrenHtml.push('<li mid="'+item[id]+'">'),childrenHtml.push('<a href="javascript:void(0)">'),childrenHtml.push("<span>"),childrenHtml.push(item[label]),childrenHtml.push("</span>"),childrenHtml.push("</a>"),childrenHtml.push("</li>"));var li=_self.element.attr("id")+"_"+item[id];_self.element.data(li,item)}),menuHtml.push(childrenHtml.join("")),menuHtml.push("</ul>"),menuHtml.join("")},_bindEvent:function(){var _self=this,$ele=this.element,uls=(this.options,$ele.find("ul:not(:first)")),lis=uls.find("li");$ele.bind("mouseleave",function(){_self._hide(),$ele.find(">ul:first >li.active").each(function(index,item){$(item).removeClass("active")})});for(var i=0;i<lis.length;i++)_self._bindLiEvent(lis[i]);for(var j=0;j<uls.length;j++)$(uls[j]).bind("mouseleave.menuContainer",function(){$(this).hide()})},_bindLiEvent:function(li){var _self=this,$ele=this.element,options=this.options;$(li).bind("mouseenter.menuItem",function(){var self_li=$(this);self_li.addClass("active"),self_li.children("ul").length&&setTimeout(function(){_self._showChildren(self_li)},200)}).bind("mouseleave.menuItem",function(){var self_li=$(this);self_li.removeClass("active"),setTimeout(function(){self_li.children("ul").hide()},200)}).bind("mousedown.menuItem",function(event){var item=$ele.data($ele.attr("id")+"_"+$(this).attr("mid"));options.onSelect&&(_self._trigger("onSelect",event,item),event.stopPropagation())})},_showChildren:function(li){this.options;if(li&&li.length>0){var $child=li.children("ul").eq(0);$child.css({top:0});var left=li.width();2*left+li.offset().left>document.documentElement.clientWidth&&(left=-$child.width()),$child.css("left",left),$child.show();var span=li.find(">a >span:first");270===span.outerWidth()&&span.attr("title",span.text()),$child.children().each(function(index,item){var span=$(item).find(">a >span:first");270===span.outerWidth()&&span.attr("title",span.text())})}},_isEnoughShowChildren:function(li){var liTop=li.offset().top,$liChildUl=li.children("ul").eq(0),ulTop=li.position().top,ulHeight=$liChildUl.height();if($(document).height()-liTop>=ulHeight)return!0;if(liTop+li.height()>=ulHeight){var top=ulHeight-ulTop-li.height();return top}var top=liTop-li.height();return top},disableItem:function(itemId){},enableItem:function(itemId){},_hide:function(){var self=this,$ele=self.element,$uls=(self.options,$ele.find("ul:not(:first)"));$uls.hide(),$uls.find("li.active").each(function(index,item){$(item).removeClass("active")})},show:function(triggerEle){var top,left,$triggerEle=$(triggerEle),self=this,options=self.options,$ele=self.element,offSet=$triggerEle.offset();options.contextMenu?(top=triggerEle.pageY,left=triggerEle.pageX,triggerEle.preventDefault(),triggerEle.stopPropagation(),triggerEle.cancelBubble=!0):"right"==options.menuLocation?(top=offSet.top,left=offSet.left+$triggerEle.width()):(options.menuLocation="down",top=offSet.top+$triggerEle.height(),left=offSet.left);for(var parent=$ele.parent();"static"==parent.css("position")&&"BODY"!=parent[0].nodeName;)parent=parent.parent(),top-=parent.offset().top,left-=parent.offset().left;left+$ele.outerWidth()>document.documentElement.clientWidth&&(left=left-$ele.outerWidth()-20),$($ele).css({top:top,left:left});var $ul=$($ele).children("ul."+pre+"menu");"slide"==options.menuShow?($($ele).show(),$ul.slideDown(options.speed)):"fade"==options.menuShow?($($ele).fadeIn(options.speed),$ul.fadeIn(options.speed)):(options.menuShow="basic",$($ele).show(),$ul.show());.7*$($ele).width();$($ele).children("ul."+pre+"menu").children().each(function(index,li){$(li).find("span:first").hasClass(pre+"menu-item-sep")&&$(li).find("span:first").width("98%")})}})}),define("ui-menutree",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeMenutree",{options:{_initial:!1,mId:"id",mPid:"pid",mLabel:"label",search:!1,onSelect:function(item,event){},initType:"html"},_create:function(){var _self=this,options=this.options,$ele=this.element,id=$ele.attr("id");options._initial!==!0&&(id&&$ele.attr("aeId",id),"html"===options.initType&&_self._buildOptions(options,$ele),$ele.addClass("menu-box").empty(),options.search&&$ele.prepend('<div class="input-icon right"><i class="icon-search"></i><input type="text" class="form-control" value="keywords" /></div>'),options._initial=!0)},_buildOptions:function(options,element){options.search="true"==element.attr("search")?!0:options.search,options.mLabel=element.attr("mLabel")||options.mLabel,options.mId=element.attr("mId")||options.mId,options.mPid=element.attr("mPid")||options.mPid,options._menuIterationMap=[];var onSelect=element.attr("onSelect");options.onSelect=onSelect?function(item,event){if($.isString(onSelect)){var i=onSelect.indexOf("("),actName=i>0?onSelect.substring(0,i):onSelect,func="return window."+actName+"?"+actName+".call(window, i ,e):false;";return new Function("i","e",func)(item,event)}}:""},_init:function(){},reload:function(data,topId){var _self=this,$ele=this.element;this.options;if(data){topId&&(data=_self._findChildrenData(data,topId)),data=_self._transformToNodes(data),
$ele.append(_self._appendNodes.apply(_self,[data]));for(var lis=$ele.find(">ul li"),i=0;i<lis.length;i++)_self._bindLiEvent(lis[i])}},_bindLiEvent:function(li){var _self=this,options=this.options;$(li).bind("click.menuItem",function(event){var self_li=$(this);self_li.addClass("active").siblings("li").removeClass("active"),self_li.children("ul").length&&(self_li.find(">a >i:last").addClass("icon-arrowlup-down").removeClass("icon-chevron-right"),self_li.children("ul").slideDown(),self_li.siblings("li").has(">ul").find(">a >i:last").addClass("icon-chevron-right").removeClass("icon-arrowlup-down"),self_li.siblings("li").has(">ul").children("ul").slideUp());var item=_self.element.data(_self.element.attr("id")+"_"+self_li.attr("mid"));options.onSelect&&(_self._trigger("onSelect",event,item),event.stopPropagation())})},_findChildrenData:function(data,topId){for(var _self=this,options=this.options,id=options.mId,pid=options.mPid,i=0;i<data.length;i++)data[i][pid]==topId&&(options._menuIterationMap.push(data[i]),_self._findChildrenData(data,data[i][id]));return options._menuIterationMap},_transformToNodes:function(data){var i,options=this.options,id=options.mId,pid=options.mPid,treeData=[],tmpMap=[];for(i=0;i<data.length;i++)tmpMap[data[i][id]]=data[i];for(i=0;i<data.length;i++)if(tmpMap[data[i][pid]]){var tpid=data[i][pid];tmpMap[tpid]._children||(tmpMap[tpid]._children=[]),tmpMap[tpid]._hierarchy<=2&&(data[i]._hierarchy=tmpMap[tpid]._hierarchy+1,tmpMap[tpid]._children.push(data[i]),options._hierarchy=tmpMap[tpid]._hierarchy+1)}else data[i]._hierarchy=0,treeData.push(data[i]);return treeData},_appendNodes:function(source,_hierarchy,unfold){var ulClass,_self=this,options=this.options,menuHtml=[],id=options.mId,label=(options.mPid,options.mLabel);switch(_hierarchy){case 1:ulClass="menu-list";break;case 2:ulClass="menu-list menu-list-next";break;case 3:ulClass="menu-list menu-list-next-2";break;default:ulClass="nav nav-pills nav-stacked"}var display=void 0===_hierarchy?"block":"none";display=unfold?"block":display,menuHtml.push('<ul class="'+ulClass+'" style="display:'+display+';">');var childrenHtml=[];return $(source).each(function(index,item){if(item._children){var unfold=!item.unfold||item.unfold!==!0&&"true"!==item.unfold?!1:!0;unfold?childrenHtml.push('<li mid="'+item[id]+'" class="active">'):childrenHtml.push('<li mid="'+item[id]+'">'),childrenHtml.push('<a href="javascript:void(0)" >'),item.icon?childrenHtml.push('<i class="'+item.icon+'"></i>'):null,childrenHtml.push(item[label]),unfold?childrenHtml.push('<i class="icon-arrowlup-down pull-right"></i>'):childrenHtml.push('<i class="icon-chevron-right pull-right"></i>'),childrenHtml.push("</a>"),childrenHtml.push(_self._appendNodes(item._children,item._hierarchy+1,unfold)),childrenHtml.push("</li>")}else childrenHtml.push('<li mid="'+item[id]+'">'),childrenHtml.push('<a href="javascript:void(0)">'),item.icon?childrenHtml.push('<i class="'+item.icon+'"></i>'):null,childrenHtml.push(item[label]),childrenHtml.push("</a>"),childrenHtml.push("</li>");var li=_self.element.attr("id")+"_"+item[id];_self.element.data(li,item)}),menuHtml.push(childrenHtml.join("")),menuHtml.push("</ul>"),menuHtml.join("")},_bindSearchEvent:function(){}})}),define("ui-validate",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.extend($.fn,{validate:function(options){if(!this.length)return void(options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"));var validator=$.data(this,"validator");return validator||(validator=new $.validator(options,this),$.data(this,"validator",validator)),validator.form()?!0:(validator.focusInvalid(),!1)},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,"validator").settings,staticRules=settings.rules,existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument)),staticRules[element.name]=existingRules,argument.messages&&(settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages));break;case"remove":if(!argument)return delete staticRules[element.name],existingRules;var filtered={};return $.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method],delete existingRules[method]}),filtered}}var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element)),element);if(data.required){var param=data.required;delete data.required,data=$.extend({required:param},data)}return data}}),$.validator=function(options,form){this.settings=$.extend(!0,{},$.validator.defaults,options),this.currentForm=form.find('input[aeValidate="true"],textarea[aeValidate="true"]'),form.is('input[aeValidate="true"],textarea[aeValidate="true"]')&&(this.currentForm=form);for(var k=0,elements=this.currentForm;elements[k];k++){var onAddRules=$(elements[k]).attr("onAddRules");if(onAddRules){var i=onAddRules.indexOf("("),actName=i>0?onAddRules.substring(0,i):onAddRules,func="return window."+actName+"?"+actName+".call(window):false;";new Function(func)()}}this.init()},$.validator.format=function(source,params){return 1==arguments.length?function(){var args=$.makeArray(arguments);return args.unshift(source),$.validator.format.apply(this,args)}:(arguments.length>2&&params.constructor!=Array&&(params=$.makeArray(arguments).slice(1)),params.constructor!=Array&&(params=[params]),$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n)}),source)},$.extend($.validator,{defaults:{messages:{},rules:{},focusInvalid:!0,onfocusin:function(element){this.lastActive=element;var toolTip=$(document.body).find("div.tooltip");if(this.checkable(element)||!(element.attr("id")in this.submitted)&&this.optional(element))toolTip.length>0&&toolTip.remove();else{element=this.clean(element),this.lastElement=element,this.prepareElement(element),this.currentElements=$(element);var result=this.check(element);if(result?delete this.invalid[$(element).attr("id")]:this.invalid[$(element).attr("id")]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.errorList.length>0){toolTip.show().find("div.tooltip-inner").html(this.errorList[0].message);var span=$(element).parent(),inputPos=span.offset();toolTip.css({left:inputPos.left,top:inputPos.top+span.outerHeight()})}}},onfocusout:function(element){this.settings.validateOnEmpty?(!this.checkable(element)||element.name in this.submitted)&&this.element(element):this.checkable(element)||!(element.attr("id")in this.submitted)&&this.optional(element)||this.element(element),$(document.body).find("div.tooltip").length>0&&$(document.body).find("div.tooltip").hide()},onkeyup:function(element){(element.attr("id")in this.submitted||this.clean(element)==this.lastElement)&&this.element(element)}},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},prototype:{init:function(){function delegate(event){var eventType="on"+event.type.replace(/^validate/,"");self.settings[eventType]&&self.settings[eventType].call(self,this)}this.submitted={},this.invalid={};var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)});var self=this;this.currentForm.validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",delegate).validateDelegate(":radio, :checkbox, select, option","click",delegate)},form:function(){return this.checkForm(),$.extend(this.submitted,this.errorMap),this.invalid=$.extend({},this.errorMap),this.showErrors(),this.valid()},element:function(element){element=this.clean(element),this.lastElement=element,this.prepareElement(element),this.currentElements=$(element);var result=this.check(element);return result?delete this.invalid[element.name]:this.invalid[element.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors),this.errorList=[];for(var name in errors)this.errorList.push({message:errors[name],element:this.findByName(name)[0]});this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}if(this.errorList&&this.errorList.length>0)this.defaultShowErrors(),$.each(this.errorList,function(index,obj){var item=$(obj.element),parent=item.parents(".input-icon");parent.addClass("has-error has-feedback")});else{var item=$(this.currentElements);$.each(item,function(index,obj){var parent=$(obj).parents(".input-icon");parent.removeClass("has-error has-feedback");var toolTip=$(document.body).find("div.tooltip");toolTip.length>0&&toolTip.remove()})}},defaultShowErrors:function(){var content=[];content.push('<div class="tooltip fade bottom in">'),content.push('  <div class="tooltip-arrow"></div>'),content.push('  <div class="tooltip-inner"></div>'),content.push("</div>"),$(document.body).find("div.tooltip").length<=0&&$(content.join("")).appendTo($(document.body)).hide()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++)this.check(elements[i]);return this.valid()},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).filter(function(){return!this.id&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.id in rulesCache||!validator.objectLength($(this).rules())?!1:(rulesCache[this.id]=!0,!0)})},clean:function(selector){return $(selector)[0]},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=$([]),this.toHide=$([]),this.currentElements=$([])},prepareForm:function(){this.reset()},prepareElement:function(element){this.reset()},check:function(element){var rules=$(element).rules(),dependencyMismatch=!1;for(var method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if("dependency-mismatch"==result){dependencyMismatch=!0;continue}if(dependencyMismatch=!1,"pending"==result)return void(this.toHide=this.toHide.not(this.errorsFor(element)));if(!result)return this.formatAndAdd(element,rule),!1}catch(e){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id+", check the '"+rule.method+"' method",e),e}}return dependencyMismatch?void 0:(this.objectLength(rules)&&this.successList.push(element),!0)},customMetaMessage:function(element,method){if($.metadata){var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method]}},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i]},defaultMessage:function(element,method){return this.findDefined(this.customMessage($(element).attr("id"),method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||void 0,$.validator.messages[method],"<strong>Warning: No message defined for "+$(element).attr("id")+"</strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;"function"==typeof message?message=message.call(this,rule.parameters,element):theregex.test(message)&&(message=jQuery.format(message.replace(theregex,"{$1}"),rule.parameters)),this.errorList.push({message:message,element:element}),this.errorMap[$(element).attr("id")]=message,this.submitted[$(element).attr("id")]=message},checkable:function(element){return/radio|checkbox/i.test(element.type)},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element))return this.findByName(element.name).filter(":checked").length}return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):!0},dependTypes:{"boolean":function(param,element){return param},string:function(param,element){return!!$(param,element.form).length},"function":function(param,element){return param(element)}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch"},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var count=0;for(var i in obj)count++;return count},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");var toolTip=$(document.body).find("div.tooltip");toolTip.show().find("div.tooltip-inner").html(this.errorList[0].message);var span=$(this.errorList[0].element).parent(),inputPos=span.offset();toolTip.css({left:inputPos.left,top:inputPos.top+span.outerHeight()})}catch(e){}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&1==$.grep(this.errorList,function(n){return n.element.name==lastActive.name}).length&&lastActive}},normalizeRule:function(data){if("string"==typeof data){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=!0}),data=transformed}return data},normalizeRules:function(rules,element){return $.each(rules,function(prop,val){if(val===!1)return void delete rules[prop];if(val.param||val.depends){var keepRule=!0;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element)}keepRule?rules[prop]=void 0!==val.param?val.param:!0:delete rules[prop]}}),$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter}),$.each(["minlength","maxlength","min","max"],function(){rules[this]&&(rules[this]=Number(rules[this]))}),$.each(["rangelength","range"],function(){rules[this]&&(rules[this]=[Number(rules[this][0]),Number(rules[this][1])])}),$.validator.autoCreateRanges&&(rules.min&&rules.max&&(rules.range=[rules.min,rules.max],delete rules.min,delete rules.max),rules.minlength&&rules.maxlength&&(rules.rangelength=[rules.minlength,rules.maxlength],delete rules.minlength,delete rules.maxlength)),rules.messages&&delete rules.messages,rules},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className)},metadataRules:function(element){return $.metadata?$(element).metadata({type:"attr",name:"rules"}):{}},addMethod:function(name,method,message){$.validator.methods[name]=method,$.validator.messages[name]=void 0!=message?message:$.validator.messages[name],method.length<3&&$.validator.addClassRules(name,$.validator.normalizeRule(name))},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";switch(element.nodeName){case"SELECT":var val=$(element).val();return val&&val.length>0;case"INPUT":if(this.checkable(element))return this.getLength(value,element)>0;default:return $.trim(value).length>0}},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element);if(this.settings.messages[element.name]||(this.settings.messages[element.name]={}),previous.originalMessage=this.settings.messages[element.name].remote,this.settings.messages[element.name].remote=previous.message,param="string"==typeof param&&{url:param}||param,this.pending[element.name])return"pending";if(previous.old===value)return previous.valid;previous.old=value;var validator=this;this.startRequest(element);var data={};return data[element.name]=value,$.ajax($.extend(!0,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===!0;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element),validator.formSubmitted=submitted,validator.successList.push(element),validator.showErrors()}else{var errors={},message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message,validator.showErrors(errors)}previous.valid=valid,validator.stopRequest(element,valid)}},param)),"pending"},minlength:function(value,element,param){return this.getLength($.trim(value),element)>=param},maxlength:function(value,element,param){return this.getLength($.trim(value),element)<=param},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return length>=param[0]&&length<=param[1]},min:function(value,element,param){return value>=param},max:function(value,element,param){return param>=value},range:function(value,element,param){return value>=param[0]&&value<=param[1]},email:function(value,element){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value)},url:function(value,element){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},date:function(value,element){return!/Invalid|NaN/.test(new Date(Date.parse(value.replace(/-/g,"/"))))},number:function(value,element){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value)},digits:function(value,element){return/^\d+$/.test(value)},accept:function(value,element,param){return param="string"==typeof param?param.replace(/,/g,"|"):"png|jpe?g|gif",value.match(new RegExp(".("+param+")$","i"))},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid()});return value==target.val()}}})}),function($){$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);return target.is(delegate)?handler.apply(target,arguments):void 0})}})}(jQuery),define("ui-form",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeForm",{options:{initType:"html"},_create:function(){var self=this,options=self.options,el=self.element,id=el.attr("id");id&&el.attr("aeId",id),"html"==options.initType&&self._buildOptions(options,el)},_init:function(){},_buildOptions:function(options,el){options.dataField=el.attr("dataField"),options.aeType=el.attr("aeType")},setEditSts:function(value){var el=this.element;return el.each(function(){$("input[datafield],textarea[datafield],span[datafield]",this).enable(value)})},setColEditSts:function(dataField,value){var areaId=this.element.attr("id"),els=$("#"+areaId+" input[dataField='"+dataField+"'],#"+areaId+" textarea[dataField='"+dataField+"']");els.enable(value)},setColVisibleSts:function(dataField,value){var areaId=this.element.attr("id"),els=$("#"+areaId+" input[dataField='"+dataField+"'],#"+areaId+" textarea[dataField='"+dataField+"']");els.visible(value)},clear:function(dataField){var els,i,dataFields,el=this.element;if("undefined"==typeof dataField||""===dataField)return el.each(function(){$("input[dataField],textarea[dataField],span[dataField]",this).clearFields()});var areaId=el.attr("id");if(dataField.indexOf(",")>=0){dataFields=dataField.split(",");for(i in dataFields)els=$("#"+areaId+" input[dataField='"+dataFields[i]+"'],#"+areaId+" textarea[dataField='"+dataFields[i]+"'],#"+areaId+" span[dataField='"+dataField+"']"),els.clearFields()}else els=$("#"+areaId+" input[dataField='"+dataField+"'],#"+areaId+" textarea[dataField='"+dataField+"'],#"+areaId+" span[dataField='"+dataField+"']"),els.clearFields()},setValueByField:function(dataField,value){var areaId=this.element.attr("id"),els=$("#"+areaId+" input[dataField='"+dataField+"'],#"+areaId+" textarea[dataField='"+dataField+"']");els.setField(value,this.element)},getValueByField:function(dataField){var areaId=this.element.attr("id"),els=$("#"+areaId+" input[dataField='"+dataField+"'],#"+areaId+" textarea[dataField='"+dataField+"']");return els.getValue()},getDisplayTextByField:function(dataField){var areaId=this.element.attr("id"),els=$("#"+areaId+" input[dataField='"+dataField+"'],#"+areaId+" textarea[dataField='"+dataField+"']");return els.getDisplayText()},reload:function(data){var self=this,el=this.element,opts=self.options;return data?(data=$.aries.common.getDataByDatafield(data,opts.dataField),el.each(function(){$("input[dataField],textarea[dataField],span[dataField]",this).setField(data,el)})):void 0},getData:function(needTrans){var obj={},returnData={},dataField=this.options.dataField;return this.element.find("input[dataField],textarea[dataField],span[dataField],div[dataField]").each(function(index,item){var dataField=$(item).attr("dataField"),id=$(item).attr("id"),type=$(item).attr("aeType"),val="";dataField&&(val="aeCheckbox"===type?$("#"+id).aeCheckbox("getValue"):"aeRadio"===type?$("#"+id).aeRadio("getValue"):"aeTextpopup"===type?$("#"+id).aeTextpopup("getValue"):"aeAdvcombo"===type?$("#"+id).aeAdvcombo("getValue"):$(item).val(),obj=$.aries.common.buildUiidData(obj,dataField,val))}),returnData=dataField?$.aries.common.buildUiidData(returnData,dataField,obj):obj,!needTrans||"true"!==needTrans&&needTrans!==!0||(returnData=JSON.stringify(returnData)),returnData}}),$.fn.clearFields=function(){return this.each(function(){var aeType=$.attr(this,"aeType"),id=$.attr(this,"aeId");eval('$("#'+id+'").'+aeType+"('clear');")})},$.fn.enable=function(b){return void 0===b&&(b=!0),this.each(function(){var aeType=$.attr(this,"aeType"),id=$.attr(this,"aeId"),enable=b?'$("#'+id+'").'+aeType+"('enable',true);":'$("#'+id+'").'+aeType+"('enable',false);";eval(enable)})},$.fn.visible=function(b){return void 0===b&&(b=!0),this.each(function(){var aeType=$.attr(this,"aeType"),id=$.attr(this,"aeId"),enable=b?'$("#'+id+'").'+aeType+"('visible',true);":'$("#'+id+'").'+aeType+"('visible',false);";eval(enable)})},$.fn.setField=function(v,el){return this.each(function(){var value="",objValue=v,id=$.attr(this,"aeId"),type=$.attr(this,"aeType");if(v&&"object"==typeof v){$.isArray(v)&&(objValue=v[0]);var dataField=$.attr(this,"dataField");dataField&&(value=$.aries.common.getDataByDatafield(objValue,dataField))}else value=v;switch(type){case"aeCombo":el.find("span[id="+id+"]").aeCombo("setValue",value);break;case"aeCalendar":el.find("span[id="+id+"]").aeCalendar("setValue",value);break;case"aeCheckbox":el.find("span[id="+id+"]").aeCheckbox("setValue",value);break;case"aeRadio":el.find("span[id="+id+"]").aeRadio("setValue",value);break;case"aeTextfield":el.find("span[id="+id+"]").aeTextfield("setValue",value);break;case"aeTextpopup":el.find("span[id="+id+"]").aeTextpopup("setValue",value);break;default:"undefined"==typeof value||""===value?$(this).val(""):$(this).val(value)}})},$.fn.getValue=function(){var value="";return this.each(function(){var id=$.attr(this,"aeId"),type=$.attr(this,"aeType");switch(type){case"aeCombo":value=$("#"+id).aeCombo("getValue");break;case"aeCheckbox":value=$("#"+id).aeCheckbox("getValue");break;case"aeRadio":value=$("#"+id).aeRadio("getValue");break;case"aeTextpopup":value=$("#"+id).aeTextpopup("getValue");break;default:value=$(this).val()}}),value},$.fn.getDisplayText=function(){var value="";return this.each(function(){var id=$.attr(this,"aeId"),type=$.attr(this,"aeType");switch(type){case"aeCombo":value=$("#"+id).aeCombo("getDisplayText");break;case"aeCheckbox":value=$("#"+id).aeCheckbox("getValue");break;case"aeRadio":value=$("#"+id).aeRadio("getValue");break;default:value=$(this).val()}}),value}}),define("ui-progressbar",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeProgressbar",{options:{value:0,text:"{value}%",width:"auto",max:100,large:!1,initType:"html"},min:0,_create:function(){var $ele=this.element,$ops=this.options,id=$ele.attr("id");id&&$ele.attr("aeId",id),"html"==$ops.initType&&this._buildOptions($ops,$ele),$ele.attr("aeType",$ops.aeType||"aeProgressbar"),$ops.uiid?$ele.attr("uiid",$ops.uiid):$ele.attr("uiid",$ele.attr("id")),$ele.addClass("e_progress"),this.valueDiv=$('<span class="e_progressBar"></span>').appendTo($ele),this.textDiv=$('<span class="e_progressValue"></span>').appendTo($ele)},_init:function(){var $ele=this.element,options=this.options,width=$ele.width();"number"==typeof options.width&&(width=options.width,$ele.width(width)),options.large&&$ele.addClass("e_progress-big"),this.oldValue=this._value(),this._refreshValue()},_buildOptions:function(options,valueEl){options.value=parseInt(valueEl.attr("value"))||options.value,options.width=parseInt(valueEl.attr("width"))||options.width,options.large="true"==valueEl.attr("large")?!0:options.large,options.aeType=valueEl.attr("aeType"),options.uiid=valueEl.attr("uiid");var text=valueEl.attr("text")||options.text;options.text=text&&text.indexOf("(")>0?function(value){if($.isString(text)){var i=text.indexOf("("),actName=i>0?text.substring(0,i):text,func="return window."+actName+"?"+actName+".call(window,v):false;";return new Function("v",func)(value)}}:text;var onChange=valueEl.attr("onChange");options.onChange=onChange?function(newValue,oldValue,event){if($.isString(onChange)){var i=onChange.indexOf("("),actName=i>0?onChange.substring(0,i):onChange,func="return window."+actName+"?"+actName+".call(window, n ,o , e):false;";return new Function("n","o","e",func)(newValue,oldValue,event)}}:options.onChange},setValue:function(newValue){this.options.value=newValue,this._refreshValue()},getValue:function(){return this._value()},_value:function(){var val=this.options.value;return"number"!=typeof val&&(val=0),Math.min(this.options.max,Math.max(this.min,val))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var self=this,value=self.getValue(),onChange=self.options.onChange,percentage=self._percentage(),text=self.options.text,label="";self.valueDiv.toggle(value>=self.min).width(percentage.toFixed(0)+"%"),"function"==typeof text?label=text.call(value,value):"string"==typeof text&&(label=text.replace("{value}",value)),self.textDiv.html(label),self.oldValue!==value&&(onChange&&self._trigger("onChange",null,value,self.oldValue),self.oldValue=value)}})}),define("ui-tree",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";var CLASSES={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea",faFolder:"icon-folder",faFolderOpen:"icon-folder-open",iconPage:"icon-page2"};$.aeWidget("ae.aeTree",{_swapClass:function(target,c1,c2){var c1Elements=target.filter("."+c1);target.filter("."+c2).removeClass(c2).addClass(c1),c1Elements.removeClass(c1).addClass(c2)},_getParentNode:function(target){if(target){var $pnode=$(target).parent().parent();if($pnode&&$pnode.hasClass("tree-folder"))return $pnode}return null},_setParentCheckbox:function(node,checked){var pnode=this._getParentNode(node);if(pnode){var checkbox=pnode.find(">div.tree-folder-content").find(">div.tree-folder >div.tree-folder-header >div.ckbox >label"),allChild=checkbox.length,full_len=checkbox.filter(".checked").length,part_len=checkbox.filter(".checked_notall").length,pnode_checkbox=pnode.find(">div.tree-folder-header >div.ckbox >label");pnode_checkbox.removeClass("checked_notall checked"),full_len==allChild?pnode_checkbox.addClass("checked"):(full_len>0||part_len>0)&&pnode_checkbox.addClass("checked_notall"),this._setParentCheckbox(pnode,checked)}},_setChildCheckbox:function(node,checked){var childck=node.find(">div.tree-folder-content").find(".ckbox");childck.find(">label").removeClass("checked checked_notall"),checked&&childck.find(">label").addClass("checked")},_applyEvents:function(target){var self=this,options=self.options,onClick=options.onClick,onRightClick=options.onRightClick,isAsync=(options.onDrag,options.onSelect,options.onDrop,options.isAsync);options.dataSource;target.find("div.tree-folder-header").off(".aeTree").on("click.aeTree",function(e){var nDom=$(this).closest(".tree-folder"),node=self.element.data("nodes")[nDom.attr("id")];self.selectNode(node.aeNodeId);var isRootNode="undefined"==typeof node.aeNodePId;if(nDom.hasClass("hasChildren")){var folder=nDom.find(">div.tree-folder-header >i");self._swapClass(folder,CLASSES.faFolder,CLASSES.faFolderOpen)}if(nDom.find(">div.tree-folder-content").length>0&&$(e.target,this)&&self.toggler(nDom),isAsync&&!isRootNode){var cache=$.data(self.element,"cache");cache?cache[node.nid]||onClick&&self._trigger("onClick",e,node):onClick&&self._trigger("onClick",e,node)}else onClick&&self._trigger("onClick",e,node)}).bind("contextmenu.aeTree",function(e){var node=self.element.data("nodes")[$(this).parent().attr("id")];onRightClick&&self._trigger("onRightClick",e,node)}),target.find("div.ckbox").on("click.aeTree",function(event){
event.preventDefault(),event.stopPropagation(),event.cancelBubble=!0;var node=$(this).closest(".tree-folder"),nodedata=$(this).find(">label").hasClass("checked");self._toggleCheck(node,nodedata)}),self.options.draggable,target.bind("mousedown",function(e){e.stopPropagation()})},options:{initExpandLevel:0,lineHover:!1,showIcon:!0,showLine:!1,showCheckbox:!1,cascadeCheck:!0,draggable:!1,filter:null,nodeCount:0,isAsync:!1,initType:"html"},_create:function(){var el=this.element,options=this.options,id=el.attr("id");id&&el.attr("aeId",id),"html"==options.initType&&this._buildOptions(options,el),el.data("nodes",[]).data("selected","").data("init_dataSource",[]).addClass("tree tree-no-line"),options.showLine&&el.removeClass("tree-no-line")},_buildOptions:function(options,element){options.cascadeCheck="false"==element.attr("cascadeCheck")?!1:options.cascadeCheck,options.draggable="true"==element.attr("draggable")?!0:options.draggable,options.showCheckbox="true"==element.attr("showCheckbox")?!0:options.showCheckbox,options.showIcon="false"==element.attr("showIcon")?!1:options.showIcon,options.showLine="true"==element.attr("showLine")?!0:options.showLine,options.isAsync="true"==element.attr("isAsync")?!0:options.isAsync,options.idField=element.attr("idField"),options.pIdField=element.attr("pIdField"),options.labelField=element.attr("labelField"),options.valueField=element.attr("valueField"),options.sortField=element.attr("sortField"),options.rootId=element.attr("rootId"),this._buildOptionEvent(options,"onBeforeCollapse",element.attr("onBeforeCollapse"),!0),this._buildOptionEvent(options,"onBeforeExpand",element.attr("onBeforeExpand"),!0),this._buildOptionEvent(options,"onBeforeSelect",element.attr("onBeforeSelect"),!0),this._buildOptionEvent(options,"onCheck",element.attr("onCheck"),!0),this._buildOptionEvent(options,"onCollapse",element.attr("onCollapse"),!0),this._buildOptionEvent(options,"onExpand",element.attr("onExpand"),!0),this._buildOptionEvent(options,"onSelect",element.attr("onSelect"),!0),this._buildOptionEvent(options,"onClick",element.attr("onClick"),!1)},_buildOptionEvent:function(ops,evtName,evtValue,flag){flag?ops[evtName]=evtValue?function(nodeData){if($.isString(evtValue)){var i=evtValue.indexOf("("),actName=i>0?evtValue.substring(0,i):evtValue,func="return window."+actName+"?"+actName+".call(window,n):false;";return new Function("n",func)(nodeData)}}:ops[evtName]:ops[evtName]=evtValue?function(nodeData,event){if($.isString(evtValue)){var i=evtValue.indexOf("("),actName=i>0?evtValue.substring(0,i):evtValue,func="return window."+actName+"?"+actName+".call(window,n,e):false;";return new Function("n","e",func)(nodeData,event)}}:ops[evtName]},updateNode:function(target){var branches=target.find("div.tree-folder");this._applyEvents(branches)},toggler:function(target){var self=this,options=self.options,nid=target.attr("id"),node=self.findByNId(nid),hidden=target.hasClass(CLASSES.expandable);if(hidden){var onBeforeExpand=options.onBeforeExpand;if(onBeforeExpand&&!1===self._trigger("onBeforeExpand",null,node))return self}else{var onBeforeCollapse=options.onBeforeCollapse;if(onBeforeCollapse&&!1===self._trigger("onBeforeCollapse",null,node))return self}self._swapClass(target,CLASSES.collapsable,CLASSES.expandable),self._swapClass(target,CLASSES.lastCollapsable,CLASSES.lastExpandable),target.find(">div.tree-folder-content").each(function(){if(hidden){$(this).show();var onExpand=options.onExpand;onExpand&&self._trigger("onExpand",null,node)}else{$(this).hide();var onCollapse=options.onCollapse;onCollapse&&self._trigger("onCollapse",null,node)}})},_init:function(){this.element.empty()},reload:function(data,condition){if(data){var self=this,options=this.options,target=self.element,isAsync=options.isAsync;if(data=$.aries.common.buildTreeData(data,options),isAsync){if(condition){var cache=$.data(target,"cache")||{___keys:[]};cache[condition]=data,cache.___keys.push(condition),$.data(target,"cache",cache);var pNode=self.findByNId(condition);self._appendNodesToAsync.apply(self,[pNode.nid,data,pNode]);var folder=$("#"+pNode.nid).find(">div.tree-folder-header >i");$("#"+pNode.nid).hasClass("hasChildren")?self._swapClass(folder,CLASSES.faFolder,CLASSES.faFolderOpen):self._swapClass(folder,CLASSES.faFolder,CLASSES.iconPage)}else self._appendNodesToAsync.apply(self,[target,data]);self._initDataSource()}else target.empty(),target.data("init_dataSource",data),self._appendNodes.apply(self,[target,data]);self.updateNode(target)}},_initDataSource:function(){var target=this.element,cache=target.data("nodes"),obj=[];if(null!=cache)for(key in cache)key.indexOf("aeNodePId")<0&&(cache[key].aeChildren&&(cache[key].aeChildren=null),obj.push(cache[key]));var tempData=$.aries.common.buildTreeData(obj,this.options);target.data("init_dataSource",tempData)},checkNode:function(id){var target=this.findNodeById(id);target&&this._toggleCheck($("#"+target.nid),!1)},uncheck:function(id){var target=this.findNodeById(id);target&&this._toggleCheck($("#"+target.nid),!0)},_toggleCheck:function(target,checked){var checkbox_item=target.find(">div.tree-folder-header >div.ckbox >label"),self=this,options=self.options,onCheck=options.onCheck;checked?checkbox_item.removeClass("checked checked_notall"):checkbox_item.removeClass("checked_notall").addClass("checked"),self.options.cascadeCheck&&(self._setChildCheckbox(target,!checked),self._setParentCheckbox(target,!checked)),onCheck&&self._trigger("onCheck",null,self.findByNId(target.attr("id")))},checkAll:function(checked){checked?this.element.find("div.tree-folder-header >div.ckbox >label").removeClass("checked_notall").addClass("checked"):this.element.find("div.tree-folder-header >div.ckbox >label").removeClass("checked checked_notall")},isCheckNode:function(id){var target=this.findNodeById(id);return target?$("#"+target.nid).find(">div.tree-folder-header >div.ckbox >label").hasClass("checked"):void 0},getChecked:function(checked){var self=this,nodes=[],filter_config=checked?".checked":":not(.checked)";return this.element.find("div.tree-folder-header >div.ckbox >label").filter(filter_config).each(function(i,name){nodes.push(self.element.data("nodes")[$(this).closest(".tree-folder").attr("id")])}),nodes},selectNode:function(id){var self=this,options=this.options,onBeforeSelect=options.onBeforeSelect,onSelect=options.onSelect,target=self.findNodeById(id);if(target){if(onBeforeSelect&&!1===self._trigger("onBeforeSelect",null,target))return self;var node=$("#"+target.nid);$(" >div.tree-folder-header",node).addClass("tree-selected");var oldSelected=self.element.data("selected"),curSelected=node.attr("id");""!=oldSelected&&oldSelected!=curSelected&&$("#"+oldSelected+" >div.tree-folder-header").removeClass("tree-selected"),self.element.data("selected",curSelected),onSelect&&self._trigger("onSelect",null,target)}},unselect:function(id){var self=this,target=self.findNodeById(id);if(target){var node=$("#"+target.nid);$(" >span",node).removeClass("selected");var oldSelected=self.element.data("selected"),curSelected=node.attr("id");oldSelected==curSelected&&self.element.data("selected","")}},getSelected:function(){var selected=this.element.data("selected");return selected?this.element.data("nodes")[selected]:null},findNodesByAttr:function(key,value,pNode,deep){var len,result=[],data=pNode?pNode.aeChildren:this.element.data("init_dataSource");if(deep=0!=deep?!0:deep,data&&(len=data.length)>0)for(var i=0;len>i;i++)result=this._searchNode.apply(data[i],[key,value,this._searchNode,result,!1,deep]);return result.length>0?result:null},findNodeByAttr:function(key,value,pNode,deep){var res,len,data=pNode?pNode.aeChildren:this.element.data("init_dataSource");if(deep=0!=deep?!0:deep,data&&(len=data.length)>0)for(var i=0;len>i;i++)if(res=this._searchNode.apply(data[i],[key,value,this._searchNode,[],!0,deep]),null!=res)return res;return null},findNodeById:function(id){var res,len,data=this.element.data("init_dataSource");if(data&&(len=data.length)>0)for(var i=0;len>i;i++)if(res=this._searchNode.apply(data[i],["aeNodeId",id,this._searchNode,[],!0,!0]),null!=res)return res;return null},findByNId:function(nid){return this.element.data("nodes")[nid]||null},findNodesByFn:function(fn,pNode,deep){var res,data=pNode?pNode.aeChildren:this.element.data("init_dataSource");deep=0!=deep?!0:deep;var result=[];if(data&&(len=data.length)>0)for(var i=0;i<len;i++)fn.call(data[i],data[i])===!0&&result.push(data[i]),deep&&data[i].aeChildren&&(res=this.findNodesByFn(fn,data[i],deep),res&&(result=result.concat(res)));return result.length>0?result:null},findNodeByFn:function(fn,pNode,deep){var res,data=pNode?pNode.aeChildren:this.element.data("init_dataSource");if(deep=0!=deep?!0:deep,data&&(len=data.length)>0)for(var i=0,len=data.length;len>i;i++){if(fn.call(data[i],data[i])===!0)return data[i];if(deep&&(res=this.findNodeByFn(fn,data[i],deep),null!=res))return res}return null},findNodesByText:function(value,pNode,deep){var len,result=[],data=pNode?pNode.aeChildren:this.element.data("init_dataSource");if(deep=0!=deep?!0:deep,data&&(len=data.length)>0)for(var i=0;len>i;i++)result=this._searchNode.apply(data[i],["aeNodeLabel",value,this._searchNode,result,!1,deep]);return result.length>0?result:null},_searchNode:function(key,value,_searchNode,result,isSingle,deep){if(!isSingle)return this[key]==value&&result.push(this),this.aeChildren&&this.aeChildren.length&&deep&&$.each(this.aeChildren,_searchNode,[key,value,_searchNode,result,!1,deep]),result;if(this[key]==value)return this;if(this.aeChildren&&this.aeChildren.length&&deep)for(var i in this.aeChildren){var temp=_searchNode.apply(this.aeChildren[i],[key,value,_searchNode,[],!0,deep]);if(temp)return temp}},getParent:function(id){var target=this.findNodeById(id);if(target){var pid=this.element.data("nodes")["aeNodePId"+target.nid];return pid?this.findByNId(pid):null}},getChildren:function(id){var target=this.findNodeById(id);return target?target.aeChildren:void 0},setData:function(data){this.options.dataSource=data},expandNode:function(id){var self=this,target=this.findNodeById(id);if(target&&target.nid){var filter=CLASSES.expandable,node=$("#"+target.nid),targetNodes=node.parentsUntil(this.element).andSelf().filter(function(){return $(this).filter("div.tree-folder").hasClass(filter)});targetNodes.each(function(index){if($(this).hasClass("hasChildren")){var folder=$(this).find(">div.tree-folder-header >i");self._swapClass(folder,CLASSES.faFolder,CLASSES.faFolderOpen)}self.toggler($(this))})}},collapseNode:function(id){var target=this.findNodeById(id);target&&target.nid&&this._collapseHandler(CLASSES.collapsable,$("#"+target.nid))},expandAll:function(){this._collapseHandler(CLASSES.expandable,this.element,!0)},collapseAll:function(){this._collapseHandler(CLASSES.collapsable,this.element,!0)},_collapseHandler:function(filter,target,allPosterity){var self=this,condition=(allPosterity?"":">")+"div.tree-folder-header",obj=$(condition,target).filter(function(){return filter?$(this).parent("."+filter).length:!0}).parent();obj.each(function(index,item){if($(item).hasClass("hasChildren")){var folder=$(item).find(">div.tree-folder-header >i");self._swapClass(folder,CLASSES.faFolder,CLASSES.faFolderOpen)}self.toggler($(item))})},refresh:function(data,id){var self=this,tree=self.element;tree.empty(),self.reload(data),id&&self.expandNode(id)},_appendNodes:function(target,nodes,bNode,isDrop){var self=this,ht=[],checkable=self.options.showCheckbox,treeid=self.element.attr("id")?self.element.attr("id"):"treeId"+parseInt(1e3*Math.random());self.element.attr("id",treeid);for(var i=0,l=nodes.length;l>i;i++){var node=nodes[i],isLastNode=i==nodes.length-1,nodeClass="tree-folder "+(node.aeChildren?"hasChildren ":""),nid=treeid+"_"+ ++self.options.nodeCount;node.nid=nid;var caches=self.element.data("nodes");caches[node.nid]=node,"string"==typeof target?(caches["aeNodePId"+node.nid]=target,isLastNode&&(target=null)):caches["aeNodePId"+node.nid]=target.parent("li").attr("id");var childHtml=[];node.aeChildren&&node.aeChildren.length>0&&childHtml.push(self._appendNodes(node.nid,node.aeChildren).join(""));var len=0;node.aeChildren&&(len=node.aeChildren.length)>0||node.hasChildren?nodeClass=!node.expanded||"true"!==node.expanded&&1!=node.expanded?nodeClass+CLASSES.expandable+" "+(isLastNode?CLASSES.lastExpandable:""):nodeClass+"open "+CLASSES.collapsable+" "+(isLastNode?CLASSES.lastCollapsable:""):nodeClass+=isLastNode?CLASSES.last:"",ht.push("<div id='",node.nid,"' class='",nodeClass,"'>"),ht.push("<div class='tree-folder-header'>"),checkable&&(ht.push("<div class='ckbox ckbox-default ckbox_horizontal'>"),ht.push("   <input type='checkbox' id='",node.nid,"_checkbox'/>"),ht.push("   <label for='",node.nid,"_checkbox'></label>"),ht.push("</div>")),self.options.showIcon&&(node.aeChildren&&node.aeChildren.length>0?!node.expanded||"true"!==node.expanded&&1!=node.expanded?ht.push("<i class='icon-folder'></i>"):ht.push("<i class='icon-folder-open'></i>"):ht.push("<i class='icon-page2'></i>")),ht.push("<div class='tree-folder-name'><span title='",node.aeNodeLabel,"'>",node.aeNodeLabel,"</span></div>"),ht.push("</div>"),(node.hasChildren||len>0)&&(ht.push("<div class='tree-folder-content'"," style='display:",!node.expanded||"true"!==node.expanded&&1!=node.expanded?"none":"block","'>"),ht.push(childHtml.join("")),ht.push("</div>")),ht.push("</div>")}return bNode?isDrop?$("#"+bNode.nid).after(ht.join("")):$("#"+bNode.nid).before(ht.join("")):target&&target.append(ht.join("")),ht},_appendNodesToAsync:function(target,nodes,pNode){var self=this,ht=[],checkable=self.options.showCheckbox,treeid=(self.options.showLine,self.element.attr("id")?self.element.attr("id"):"treeId"+parseInt(1e3*Math.random()));self.element.attr("id",treeid);for(var i=0,l=nodes.length;l>i;i++){var node=nodes[i],isLastNode=i==nodes.length-1,nodeClass="tree-folder "+(node.aeChildren?"hasChildren ":""),nid=treeid+"_"+ ++self.options.nodeCount;node.nid=nid;var caches=self.element.data("nodes");caches[node.nid]=node,"string"==typeof target?(caches["aeNodePId"+node.nid]=target,isLastNode&&(target=null)):caches["aeNodePId"+node.nid]=target.parent("li").attr("id");var childHtml=[];node.aeChildren&&node.aeChildren.length>0&&childHtml.push(self._appendNodesToAsync(node.nid,node.aeChildren).join(""));var len=0;node.aeChildren&&(len=node.aeChildren.length)>0||node.hasChildren?nodeClass=node.expanded?nodeClass+"open "+CLASSES.collapsable+" "+(isLastNode?CLASSES.lastCollapsable:""):nodeClass+CLASSES.expandable+" "+(isLastNode?CLASSES.lastExpandable:""):nodeClass+=isLastNode?CLASSES.last:"",ht.push("<div id='",node.nid,"' class='",nodeClass,"'>"),ht.push("<div class='tree-folder-header'>"),checkable&&(ht.push("<div class='ckbox ckbox-default ckbox_horizontal'>"),ht.push("   <input type='checkbox' id='",node.nid,"_checkbox'/>"),ht.push("   <label for='",node.nid,"_checkbox'></label>"),ht.push("</div>")),self.options.showIcon&&(!node.expanded||"true"!==node.expanded&&1!=node.expanded?ht.push("<i class='icon-folder'></i>"):ht.push("<i class='icon-folder-open'></i>")),ht.push("<div class='tree-folder-name'><span title='",node.aeNodeLabel,"'>",node.aeNodeLabel,"</span></div>"),ht.push("</div>"),(node.hasChildren||len>0)&&(ht.push("<div class='tree-folder-content'"," style='display:",!node.expanded||"true"!==node.expanded&&1!=node.expanded?"none":"block","'>"),ht.push(childHtml.join("")),ht.push("</div>")),ht.push("</div>")}if(nodes.length>0&&pNode){var obj=$("#"+pNode.nid),str=[];obj.find("div.tree-folder-content").remove(),str.push("<div class='tree-folder-content' style='display:block;'>"),str.push(ht.join("")),str.push("</div>"),obj.append(str.join(""));var folder=obj.find(">div.tree-folder-header >i.fa-file");folder.length>0&&folder.removeClass("fa-file").addClass("icon-folder-open"),obj.addClass(CLASSES.collapsable+" hasChildren")}else $.isObject(target)&&target.append(ht.join(""));return ht},remove:function(target,pNode){var flag,self=this,data=pNode?pNode.aeChildren:self.element.data("init_dataSource");for(var i in data){if(data[i]==target){var ids=[];ids=self._findChildrenId(target,ids),ids.push(target.nid);for(var n=0,len=ids.length;len>n;n++)delete self.element.data("nodes")[ids[n]],delete self.element.data("nodes")["aeNodePId"+ids[n]];target.nid==self.element.data("selected")&&this.element.data("selected",null);var pre=$("#"+target.nid).prev();return $("#"+target.nid).next().length<1&&pre.length>0&&(pre.hasClass(CLASSES.collapsable)?(pre.addClass(CLASSES.lastCollapsable),pre.find("div.hitarea").first().addClass(CLASSES.lastCollapsableHitarea)):pre.hasClass(CLASSES.expandable)?(pre.addClass(CLASSES.lastExpandable),pre.find("div.hitarea").first().addClass(CLASSES.lastExpandableHitarea)):pre.addClass(CLASSES.last)),$("#"+target.nid).remove(),data.splice(i,1),pNode&&pNode.nid&&data.length<1&&self._changeToFolderOrFile(pNode,!1),!0}if(data[i].aeChildren&&(flag=self.remove(target,data[i])))return!0}return!1},_findChildrenId:function(target,ids){if(target.children)for(var i=0,children=target.aeChildren,len=children.length;len>i;i++)ids.push(children[i].nid),children[i].aeChildren&&this._findChildrenId(children[i],ids);return ids},insert:function(target,pNode,bNode,isDrop){if(target){var parent,otherChildren,self=this,nodes=[],flag=$.isArray(target);flag?nodes=target:nodes.push(target),bNode&&(pNode=pNode||self.findByNId(self.element.data("nodes")["aeNodePId"+bNode.nid]));var index,data=pNode?pNode.aeChildren:self.element.data("init_dataSource");pNode&&(!pNode.aeChildren||pNode.aeChildren.length<1)&&(pNode.hasChildren||(self._changeToFolderOrFile(pNode,!0),self._bindHitEvent($("#"+pNode.nid))),data=pNode.aeChildren=[]),parent=pNode?$("#"+pNode.nid).children("ul").first():self.element,otherChildren=parent.find("li"),bNode&&(index=$.inArray(bNode,data))>=0?(self._appendNodes(parent,nodes,bNode,isDrop),data.splice(index,0,target)):(self._appendNodes(parent,nodes,bNode,isDrop),flag?$.merge(data,target):data.push(target));var m=parent.find("li").filter("."+CLASSES.last+",."+CLASSES.lastCollapsable+",."+CLASSES.lastExpandable).not(parent.find("li").filter(":last-child:not(ul)"));m.removeClass(CLASSES.last+" "+CLASSES.lastCollapsable+" "+CLASSES.lastExpandable),m.find(" >div").removeClass(CLASSES.lastCollapsableHitarea+" "+CLASSES.lastExpandableHitarea);var tdom=parent.find("li").not(otherChildren);self._applyEvents(tdom)}},_changeToFolderOrFile:function(node,isToFolder){var nDom=$("#"+node.nid),self=this;if(isToFolder){$("<ul/>").css("display","block").appendTo(nDom);nDom.addClass("open "+CLASSES.collapsable),self._swapClass(nDom,CLASSES.last,CLASSES.lastCollapsable),node.aeChildren=[]}else nDom.find("ul").remove(),nDom.find("div."+CLASSES.hitarea).remove(),nDom.filter("."+CLASSES.lastCollapsable+",."+CLASSES.lastExpandable).removeClass(CLASSES.lastCollapsable+" "+CLASSES.lastExpandable).addClass(CLASSES.last),nDom.removeClass("open "+CLASSES.collapsable+" "+CLASSES.expandable);self.options.showIcon&&self._swapClass(nDom.children("span"),"file","folder");var hitarea=nDom.filter(":has(>ul)").prepend('<div class="'+CLASSES.hitarea+'"/>').find("div."+CLASSES.hitarea);hitarea.each(function(){var classes="";$.each($(this).parent().attr("class").split(" "),function(){classes+=this+"-hitarea "}),$(this).addClass(classes)})},modify:function(target,newNode,pNode){if(target&&newNode){var bNode,self=this,nextNode=$("#"+target.nid).next();pNode=pNode||this.findByNId(self.element.data("nodes")["aeNodePId"+target.nid]),(nextNode.is("ul")||nextNode.is("li"))&&(bNode=self.findByNId(nextNode.attr("id"))),self.remove(target,pNode),self.insert(newNode,pNode,bNode)}}})}),define("ui-breadcrumb",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeBreadcrumb",{options:{_initial:!1,iconHome:void 0,home:{},_history:[],_jumpType:"jump",_jumpData:null,_backData:null,_active:{},onJump:function(){},initType:"html"},_create:function(){var options=this.options,$ele=this.element,id=$ele.attr("id");options._initial!==!0&&(id&&$ele.attr("aeId",id),"html"===options.initType&&this._buildOptions(options,$ele),$ele.addClass("breadcrumb"),$ele.append('<li homeid="home" class="active"><a>'+options.home.label+"</a></li>"),options.iconHome&&$ele.children("li:last").prepend('<i class="'+options.iconHome+'"></i>'),options._history.push(options.home),options._active=options.home,options._disable=!1,options._initial=!0)},_init:function(){},_buildOptions:function(options,element){options.iconHome=element.attr("iconHome");var home=$.trim(element.attr("home"));if(home&&0===home.indexOf("{"))for(var result=home.substring(1,home.length-1).split(","),i=0;i<result.length;i++){result[i]=$.trim(result[i]);var data=result[i].split(":");options.home[data[0]]=data[1]}else options.home.label="Home",options.home.href=window.location.pathname;var onJump=element.attr("onJump");options.onJump=onJump?function(data,event){if($.isString(onJump)){var i=onJump.indexOf("("),actName=i>0?onJump.substring(0,i):onJump,func="return window."+actName+"?"+actName+".call(window, d, e):false;";return new Function("d","e",func)(data,event)}}:void 0},jump:function(config,data){this.options._jumpType="jump",this.options._jumpData=void 0===data?null:data,this._jump(config)},_jump:function(config){var options=this.options;this.element;options._active!==config&&(options._tempData=config,this._trigger("onJump",null,config))},jumpSucceed:function(){var _self=this,options=this.options,$ele=this.element,data=options._tempData;if(-1===$.inArray(data,options._history))$ele.children("li:last").removeClass("active"),_self._bindLiEvent($ele.children("li:last"),options._history[options._history.length-1]),$ele.append('<li class="active"><a>'+data.label+"</a></li>"),options._history.push(data);else{var $li=_self._getLi($.inArray(data,options._history));for($li.addClass("active").unbind("breadli").nextAll().remove(),i=options._history.length-1;i>0&&options._history[i]!==data;i--)options._history.pop()}options._active=data},_bindLiEvent:function(li,data){var _self=this;li.bind("click.breadli",function(){_self.options._disable||(_self.options._jumpType="href",_self._jump(data))})},_getLi:function(index){var $ele=(this.options,this.element),$home=$ele.children('li[homeid="home"]');if(0===index)return $home;var num=$home.index();return $ele.children().eq(num+index)},disable:function(flag){flag===!1||"false"===flag?this.options._disable=!1:(void 0===flag||flag===!0||"true"===flag)&&(this.options._disable=!0)},back:function(data){this.options._jumpType="back",this.options._backData=void 0===data?null:data,this._jump(this.options._history[this.options._history.length-2])},getData:function(type){var data,options=this.options;return data="back"===type?options._backData:options._jumpData}})}),define("ui-grid",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.ae.lang.aeGrid={loadingMsg:"Loading...",emptyMsg:"No Result",errorMsg:"Load Error",pageText:"Page {index}, Total Page {totalPage}",pageStat:"Total {total} DataFrom {from} To {to}"},$.aeWidget("ae.aeGrid",{options:{height:void 0,width:"100%",columns:!1,autoFit:!0,showIndex:!0,dataSource:!1,extraData:{},method:"POST",loadingMsg:$.ae.lang.aeGrid.loadingMsg,emptyMsg:$.ae.lang.aeGrid.emptyMsg,errorMsg:$.ae.lang.aeGrid.errorMsg,preProcess:!1,pagingSize:10,rowClasses:["oddRow","evenRow"],singleSelect:!0,onRowSelect:function(rowIndex,rowData,inst,event){},onRowDeselect:function(rowIndex,rowData,inst,event){},onRowClick:function(rowIndex,rowData,inst,event){},onRowDblClick:function(rowIndex,rowData,event){},onPageChange:function(type,newPage,inst,event){},onSuccess:function(data){},onError:function(code,data){},onRefresh:function(nowPage,pageRecords,event){},_onRefreshCallbacks:[],_onResizableCallbacks:[],_onResizeCallbacks:[],initType:"html",pagingAlign:"right",pagingType:"",striped:!0,_defaultThHeight:34,_params:"",_header:"",_clickTimer:null,dataField:"",isPaging:!1,showMsg:!0,startField:"start",endField:"end",_selectIndex:-1,changedData:{add:[],edit:[],del:[]},_initial:!1,treeIcons:{fold:"fa fa-folder",unfold:"fa fa-folder-open",file:"fa fa-bar-chart-o"},editable:!1,_editOption:{_triggered:!1,_editRowId:"-1"},doSelectEvent:!1,stateField:"checkboxCol",showHeader:!0,showFooter:!1,showPaginationSwitch:!0,showRefresh:!0,showToggle:!0,buttonsAlign:"right",minimumCountColumns:1,icons:{paginationSwitchDown:"glyphicon-collapse-down icon-chevron-down",paginationSwitchUp:"glyphicon-collapse-up icon-chevron-up",refresh:"glyphicon-refresh icon-refresh",toggle:"glyphicon-list-alt icon-list-alt",columns:"glyphicon-th icon-th"},sidePagination:"client",totalRows:0,pageNumber:1,pageList:[2,4,5,8],paginationHAlign:"right",paginationVAlign:"bottom",paginationDetailHAlign:"left",rowStyle:function(row,index){return{}},rowAttributes:function(row,index){return{}},onAll:function(name,args){return!1},onClickRow:function(item,$element){return!1},onDblClickRow:function(item,$element){return!1},onSort:function(name,order){return!1},onCheck:function(row){return!1},onUncheck:function(row){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onLoadSuccess:function(data){return!1},onLoadError:function(status){return!1},onColumnSwitch:function(field,checked){return!1},onColumnSearch:function(field,text){return!1},onSearch:function(text){return!1},onPreBody:function(data){return!1},onPostBody:function(){return!1},onPostHeader:function(){return!1}},_create:function(){var ops=this.options,el=this.element,id=el.attr("id");if(!ops._initial){if(ops._initial=!0,id&&el.attr("aeId",id),"html"==ops.initType?this._buildOptions(ops,el):this._buildOptionsEvents(ops),ops.DEFINE={cellPadding:16,colDefWidth:150,indexWidth:60,checkboxWidth:36},ops.COLUMN_DEFAULTS={checkbox:!1,checkboxEnabled:!0,field:void 0,title:void 0,"class":void 0,align:void 0,headAlign:"center",falign:void 0,valign:"middle",width:void 0,sortable:!1,order:"asc",visible:!0,switchable:!0,clickToSelect:!0,formatter:void 0,footerFormatter:void 0,events:void 0,sorter:void 0,cellStyle:void 0,searchable:!0,filterControl:void 0},ops.EVENTS={"all.bs.table":"onAll","click-row.bs.table":"onClickRow","dbl-click-row.bs.table":"onDblClickRow","sort.bs.table":"onSort","check.bs.table":"onCheck","uncheck.bs.table":"onUncheck","check-all.bs.table":"onCheckAll","uncheck-all.bs.table":"onUncheckAll","load-success.bs.table":"onLoadSuccess","load-error.bs.table":"onLoadError","column-switch.bs.table":"onColumnSwitch","column-search.bs.table":"onColumnSearch","page-change.bs.table":"onPageChange","search.bs.table":"onSearch","pre-body.bs.table":"onPreBody","post-body.bs.table":"onPostBody","post-header.bs.table":"onPostHeader"},el.wrap('<div class="bootstrap-table '+ops.theme+'"></div>'),this.$grid=el.parent(),ops.titleRenderer&&$.isFunction(ops.titleRenderer)){var tRenderer=ops.titleRenderer();tRenderer&&this.$grid.append('<div class="gray_border_tool clearfix">'+tRenderer+"</div>")}this.$grid.append(['<div class="fixed-table-container">','<div class="fixed-table-header"><table></table></div>','<div class="fixed-table-body">','<div class="fixed-table-loading">',$.ae.lang.aeGrid.loadingMsg,"</div>","</div>",'<div class="fixed-table-footer"><table><tr></tr></table></div>',"bottom"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?'<div class="fixed-table-pagination clearfix"></div>':"","</div>","</div>"].join("")),this.$el=$('<table class="table table-hover '+(ops.showBorder?"table-bordered ":"")+'"><thead><tr></tr></thead><tbody></tbody></table>'),this.timeoutId_=0,this.timeoutFooter_=0,this.$el_=this.$el.clone(),this.$grid.find(".fixed-table-body").append(this.$el),this.$loading=this.$grid.find(".fixed-table-loading"),this.$el.addClass(this.options.classes),this.options.striped&&this.$el.addClass("table-striped"),this.element.empty(),this.element.css("border-width",0).hide()}},_init:function(){this._initTable(),this._initHeader(),this._initData(),this._initFooter(),this._initToolbar(),this._initPagination(),this._initBody(),this._resetWidth()},_initTable:function(){var self=this;this.$header=this.$el.find("thead"),$.each(this.options.columns,function(i,column){self.options.columns[i]=$.extend({},self.options.COLUMN_DEFAULTS,{field:i},column)})},_initHeader:function(){var self=this,ops=this.options,visibleColumns=[],html=[];this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],cellStyles:[],clickToSelects:[],searchables:[]};var header=this.header;ops.singleSelect||(header.fields.push("checkboxCol"),header.styles.push("width:"+ops.DEFINE.checkboxWidth+"px;vertical-align:middle;"),html.push('<th field="checkboxCol" style="width:'+ops.DEFINE.checkboxWidth+'px;"><div class="th-inner"><div class="ckbox ckbox-default"><input id="'+ops.id+'_btSelectAll" name="btSelectAll" type="checkbox"></input><label for="'+ops.id+'_btSelectAll"></label></div></div></th>')),ops.showIndex&&(header.fields.push("indexCol"),header.styles.push("width:"+ops.DEFINE.indexWidth+"px;vertical-align:middle;text-align:center;"),html.push('<th field="indexCol" style="text-align:center;width:'+ops.DEFINE.indexWidth+'px;"><div class="th-inner"></div></th>')),$.each(ops.columns,function(i,column){var text="",halign="",align="",style="",class_=sprintf(' class="%s"',column["class"]);self.options.sortOrder||column.order;column.visible&&(halign=sprintf("text-align: %s; ",column.headAlign?column.headAlign:column.align),align=sprintf("text-align: %s; ",column.align),style=sprintf("vertical-align: %s; ",column.valign),visibleColumns.push(column),header.fields.push(column.field),header.styles.push(align+style),header.classes.push(class_),header.formatters.push(column.formatter),header.events.push(column.events),header.sorters.push(column.sorter),header.cellStyles.push(column.cellStyle),header.clickToSelects.push(column.clickToSelect),header.searchables.push(column.searchable),html.push("<th",' field="'+column.field+'"',class_,sprintf(' style="%s"',halign+style),">"),html.push(sprintf('<div class="th-inner %s">',self.options.sortable&&column.sortable?"sortable":"")),text=column.title,self.options.sortName===column.field&&self.options.sortable&&column.sortable&&(text+=self.getCaretHtml()),html.push(text),html.push('<span class="td_drog"></span></div>'),html.push("</th>"))}),this.$header.find("tr").html(html.join("")),this.$grid.off("click",".th-inner").on("click",".th-inner",function(event){self.options.sortable&&$(this).parent().data().sortable&&self.onSort(event)}),!this.options.showHeader||this.options.cardView?(this.$header.hide(),this.$grid.find(".fixed-table-header").hide(),this.$loading.css("top",0)):(this.$header.show(),this.$grid.find(".fixed-table-header").show());var $selectAll=$("th[field=checkboxCol] label",this.$header);$selectAll.length>0&&$selectAll.on("click",function(){var i,thCheckbox=$(this),trSize=self._getTrs().size();if("true"==thCheckbox.attr("isChecked"))for(thCheckbox.removeClass(),thCheckbox.attr("isChecked","false"),i=0;trSize>i;i++)self._rowDeSelect(i);else for(thCheckbox.addClass("checked"),thCheckbox.attr("isChecked","true"),i=0;trSize>i;i++)self._rowSelect(i)})},_initData:function(data,type){"append"===type?this.data=this.data.concat(data):"prepend"===type?this.data=[].concat(data).concat(this.data):this.data=data,"server"===this.options.sidePagination},_initFooter:function(){this.$footer=this.$grid.find(".fixed-table-footer"),this.options.showFooter?this.$footer.show():this.$footer.hide()},_initPagination:function(){if(this.$pagination=this.$grid.find(".fixed-table-pagination"),!this.options.isPaging)return void this.$pagination.hide();this.$pagination.show();var i,from,to,$pageList,$first,$pre,$next,$last,$number,self=this,html=[],$allSelected=!1,data=this.getData(),totalRows=this.options.totalRows;if(totalRows=data.length>totalRows?data.length:totalRows,this.options.totalPages=0,totalRows){if("All"===this.options.pagingSize)this.options.pagingSize=totalRows,$allSelected=!0;else if(this.options.pagingSize===totalRows){
var pageLst="string"==typeof this.options.pageList?this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.pageList;pageLst.indexOf("All".toLowerCase())>-1&&($allSelected=!0)}this.options.totalPages=~~((totalRows-1)/this.options.pagingSize)+1}this.options.totalPages>0&&this.options.pageNumber>this.options.totalPages&&(this.options.pageNumber=this.options.totalPages),this.pageFrom=this.getStart(),this.pageTo=this.getEnd(),this.pageTo>totalRows&&(this.pageTo=totalRows);var endPage=this.pageTo;endPage>totalRows&&(endPage=totalRows),html.push('<div class="pull-'+this.options.paginationDetailHAlign+' pagination-detail">','<span class="pagination-info">',this._formatShowingRows(this.pageFrom,endPage,totalRows),"</span>"),html.push('<span class="page-list">');var pageNumber=[sprintf('<span class="btn-group %s">',"top"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?"dropdown":"dropup"),'<button type="button" class="btn btn-default '+(void 0===this.options.iconSize?"":" btn-"+this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">','<span class="page-size">',$allSelected?this.options.formatAllRows():this.options.pagingSize,"</span>",' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'],pageList=this.options.pageList;if("string"==typeof this.options.pageList){var list=this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").split(",");pageList=[],$.each(list,function(i,value){pageList.push(value.toUpperCase()===self.options.formatAllRows().toUpperCase()?self.options.formatAllRows():+value)})}for($.each(pageList,function(i,page){if(!self.options.smartDisplay||0===i||pageList[i-1]<=totalRows){var active;active=$allSelected?page===self.options.formatAllRows()?' class="active"':"":page===self.options.pagingSize?' class="active"':"",pageNumber.push(sprintf("<li%s><a>%s</a></li>",active,page))}}),pageNumber.push("</ul></span>"),html.push("</span>"),html.push("</div>",'<div class="pull-'+this.options.paginationHAlign+'">','<ul class="pagination'+(void 0===this.options.iconSize?"":" pagination-"+this.options.iconSize)+'">','<li class="page-first"><a>&lt;&lt;</a></li>','<li class="page-pre"><a>&lt;</a></li>'),this.options.totalPages<5?(from=1,to=this.options.totalPages):(from=this.options.pageNumber-2,to=from+4,1>from&&(from=1,to=5),to>this.options.totalPages&&(to=this.options.totalPages,from=to-4)),i=from;to>=i;i++)html.push('<li class="page-number'+(i===this.options.pageNumber?" active":"")+'">',"<a>",i,"</a>","</li>");html.push('<li class="page-next"><a>&gt;</a></li>','<li class="page-last"><a>&gt;&gt;</a></li>',"</ul>","</div>"),this.$pagination.html(html.join("")),$pageList=this.$pagination.find(".page-list a"),$first=this.$pagination.find(".page-first"),$pre=this.$pagination.find(".page-pre"),$next=this.$pagination.find(".page-next"),$last=this.$pagination.find(".page-last"),$number=this.$pagination.find(".page-number"),this.options.pageNumber<=1&&($first.addClass("disabled"),$pre.addClass("disabled")),this.options.pageNumber>=this.options.totalPages&&($next.addClass("disabled"),$last.addClass("disabled")),this.options.smartDisplay&&(this.options.totalPages<=1&&this.$pagination.find("div.pagination").hide(),(pageList.length<2||totalRows<=pageList[0])&&this.$pagination.find("span.page-list").hide(),this.$pagination[this.getData().length?"show":"hide"]()),$allSelected&&(this.options.pagingSize=this.options.formatAllRows()),$pageList.off("click").on("click",$.proxy(this._onPageListChange,this)),$first.off("click").on("click",$.proxy(this._onPageFirst,this)),$pre.off("click").on("click",$.proxy(this._onPagePre,this)),$next.off("click").on("click",$.proxy(this._onPageNext,this)),$last.off("click").on("click",$.proxy(this._onPageLast,this)),$number.off("click").on("click",$.proxy(this._onPageNumber,this))},_updatePagination:function(event,ctype){event&&$(event.currentTarget).hasClass("disabled")||(!this.options.maintainSelected,this.options.onPageChange&&this._trigger("onPageChange",null,ctype,this.options.pageNumber,this)===!1||(this._initPagination(),"server"===this.options.sidePagination?this._initServer():this._initBody()))},_onPageListChange:function(event){var $this=$(event.currentTarget);$this.parent().addClass("active").siblings().removeClass("active"),this.options.pagingSize=$this.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+$this.text(),this.$toolbar.find(".page-size").text(this.options.pagingSize),this._updatePagination(event,"page")},_onPageFirst:function(event){this.options.pageNumber=1,this._updatePagination(event,"first")},_onPagePre:function(event){this.options.pageNumber--,this._updatePagination(event,"prev")},_onPageNext:function(event){this.options.pageNumber++,this._updatePagination(event,"next")},_onPageLast:function(event){this.options.pageNumber=this.options.totalPages,this._updatePagination(event,"last")},_onPageNumber:function(event){this.options.pageNumber!==+$(event.currentTarget).text()&&(this.options.pageNumber=+$(event.currentTarget).text(),this._updatePagination(event,"page"))},_formatShowingRows:function(pageFrom,pageTo,totalRows){return sprintf("Showing %s to %s of %s rows",pageFrom,pageTo,totalRows)},_formatRecordsPerPage:function(pageNumber){return sprintf("%s records per page",pageNumber)},_initToolbar:function(){var $keepOpen,$search,self=this,html=[],timeoutId=0,switchableCount=0;this.$toolbar=this.$grid.find(".fixed-table-toolbar").html(""),"string"==typeof this.options.toolbar&&$(sprintf('<div class="bars pull-%s"></div>',this.options.toolbarAlign)).appendTo(this.$toolbar).append($(this.options.toolbar)),html=[sprintf('<div class="columns columns-%s btn-group pull-%s">',this.options.buttonsAlign,this.options.buttonsAlign)],"string"==typeof this.options.icons&&(this.options.icons=calculateObjectValue(null,this.options.icons)),this.options.showPaginationSwitch&&html.push(sprintf('<button class="btn btn-default" type="button" name="paginationSwitch" title="%s">',"Hide/Show pagination"),sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),"</button>"),this.options.showRefresh&&html.push(sprintf('<button class="btn btn-default'+(void 0===this.options.iconSize?"":" btn-"+this.options.iconSize)+'" type="button" name="refresh" title="%s">',"Refresh"),sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.refresh),"</button>"),this.options.showToggle&&html.push(sprintf('<button class="btn btn-default'+(void 0===this.options.iconSize?"":" btn-"+this.options.iconSize)+'" type="button" name="toggle" title="%s">',"Toggle"),sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.toggle),"</button>"),this.options.showColumns&&(html.push(sprintf('<div class="keep-open btn-group" title="%s">',"Columns"),'<button type="button" class="btn btn-default'+(void 0===this.options.iconSize?"":" btn-"+this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">',sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'),$.each(this.options.columns,function(i,column){if(!column.radio&&!column.checkbox&&(!self.options.cardView||column.cardVisible)){var checked=column.visible?' checked="checked"':"";column.switchable&&(html.push(sprintf('<li><label><input type="checkbox" data-field="%s" value="%s"%s> %s</label></li>',column.field,i,checked,column.title)),switchableCount++)}}),html.push("</ul>","</div>")),html.push("</div>"),(this.showToolbar||html.length>2)&&this.$toolbar.append(html.join("")),this.options.showPaginationSwitch&&this.$toolbar.find('button[name="paginationSwitch"]').off("click").on("click",$.proxy(this.togglePagination,this)),this.options.showRefresh&&this.$toolbar.find('button[name="refresh"]').off("click").on("click",$.proxy(this.refresh,this)),this.options.showToggle&&this.$toolbar.find('button[name="toggle"]').off("click").on("click",function(){self.toggleView()}),this.options.showColumns&&($keepOpen=this.$toolbar.find(".keep-open"),switchableCount<=this.options.minimumCountColumns&&$keepOpen.find("input").prop("disabled",!0),$keepOpen.find("li").off("click").on("click",function(event){event.stopImmediatePropagation()}),$keepOpen.find("input").off("click").on("click",function(){var $this=$(this);self.toggleColumn($this.val(),$this.prop("checked"),!1),self._triggerEvent("column-switch",$(this).data("field"),$this.prop("checked"))})),this.options.search&&(html=[],html.push('<div class="pull-'+this.options.searchAlign+' search">',sprintf('<input class="form-control'+(void 0===this.options.iconSize?"":" input-"+this.options.iconSize)+'" type="text" placeholder="%s">',"Search"),"</div>"),this.$toolbar.append(html.join("")),$search=this.$toolbar.find(".search input"),$search.off("keyup").on("keyup",function(event){clearTimeout(timeoutId),timeoutId=setTimeout(function(){self.onSearch(event)},self.options.searchTimeOut)}),""!==this.options.searchText&&($search.val(this.options.searchText),clearTimeout(timeoutId),timeoutId=setTimeout(function(){$search._triggerEvent("keyup")},self.options.searchTimeOut)))},_initBody:function(fixedScroll){var self=this,ops=this.options,html=[],data=this.getData();if(this.$body=this.$el.find("tbody"),this.$body.length||(this.$body=$("<tbody></tbody>").appendTo(this.$el)),ops.isPaging||(this.pageFrom=1,this.pageTo=data.length),$.each(data,function(i,item){var key,style={},csses=[],attributes={},htmlAttributes=[];if(style=calculateObjectValue(self.options,self.options.rowStyle,[item,i],style),style&&style.css)for(key in style.css)csses.push(key+": "+style.css[key]);if(attributes=calculateObjectValue(self.options,self.options.rowAttributes,[item,i],attributes))for(key in attributes)htmlAttributes.push(sprintf('%s="%s"',key,escapeHTML(attributes[key])));html.push("<tr",sprintf(" %s",htmlAttributes.join(" ")),sprintf(' class="%s"',style.classes),sprintf(' data-index="%s"',i),">"),$.each(self.header.fields,function(j,field){var text="",cellStyle={},class_=self.header.classes[j],column=ops.columns[getFieldIndex(ops.columns,field)];if(style=sprintf('style="%s"',csses.concat(self.header.styles[j]).join("; ")),cellStyle.classes&&(class_=sprintf(' class="%s"',cellStyle.classes)),cellStyle.css){var csses_=[];for(var key in cellStyle.css)csses_.push(key+": "+cellStyle.css[key]);style=sprintf('style="%s"',csses_.concat(self.header.styles[j]).join("; "))}if("checkboxCol"==field)text='<td field="checkboxCol" '+style+'><div class="th-inner"><div class="ckbox ckbox-default"><input id="'+self.options.id+"_checkboxCol_"+i+'" type="checkbox"></input><label for="'+self.options.id+"_checkboxCol_"+i+'"></label></div></div></td>';else if("indexCol"==field)text='<td field="indexCol" '+style+">"+(i+self.pageFrom)+"</td>";else if(column.wrap&&(class_="break-word"),ops.treeColumn&&ops.treeColumn==field){var level=item.aeNodeLevel;level||(level="1");var hasChild=item.aeHasChild;hasChild=hasChild?"unfold":"file",class_=class_+" level level-"+level+" "+hasChild,text=[sprintf('<td field="%s" class="%s" %s %s %s %s>',column.field,class_?class_:"",style,'aeNodeLevel="'+level+'"','aeNodeId="'+item.aeNodeId+'"','aeNodePId="'+item.aeNodePId+'"'),'<i class="'+ops.treeIcons[hasChild]+'"></i><span class="text nowrap">'+self._buildRowCellValues(column,item,i)+"</span>","</td>"].join("")}else text=[sprintf('<td field="%s" class="%s" %s>',column.field,class_?class_:"",style),self._buildRowCellValues(column,item,i),"</td>"].join("");html.push(text)}),self.options.cardView&&html.push("</td>"),html.push("</tr>")}),html.length||html.push('<tr class="no-records-found">',sprintf('<td colspan="%s">%s</td>',this.header.fields.length,"No matching records found"),"</tr>"),this.$body.html(html.join("")),fixedScroll||this._scrollTo(0),this.$body.find("> tr > td").off("click").on("click",function(event){var $tr=$(this).parent(),index=$tr.data("index");null!==self._clickTimer&&(clearTimeout(self._clickTimer),self._clickTimer=null),self._clickTimer=setTimeout(function(){$tr.hasClass("tr_checked")?(ops.singleSelect?(self._rowDeSelect(index),ops._selectIndex=-1):(self._rowDeSelect(index),self._refreshHeaderCheckBox()),self._trigger("onRowDeselect",event,index,self._getRowData(index),self)):(ops.singleSelect?(-1!=ops._selectIndex&&self._rowDeSelect(ops._selectIndex),self._rowSelect(index),ops._selectIndex=index):(self._rowSelect(index),self._refreshHeaderCheckBox()),self._trigger("onRowClick",event,index,self._getRowData(index),self))},300)}),this.$body.find("tr").off("dblclick").on("dblclick",function(event){null!==self._clickTimer&&(clearTimeout(self._clickTimer),self._clickTimer=null);var $tr=$(this),index=$tr.data("index");$tr.hasClass("tr_checked")?ops.singleSelect?(self._rowDeSelect(index),ops._selectIndex=-1):(self._rowDeSelect(index),self._refreshHeaderCheckBox()):ops.singleSelect?(-1!=ops._selectIndex&&self._rowDeSelect(ops._selectIndex),self._rowSelect(index),ops._selectIndex=index):(self._rowSelect(index),self._refreshHeaderCheckBox()),self._trigger("onRowDblClick",event,index,self._getRowData(index))}),$.each(this.header.events,function(i,events){if(events){"string"==typeof events&&(events=calculateObjectValue(null,events));for(var key in events)self.$body.find("tr").each(function(){var $tr=$(this),$td=$tr.find(self.options.cardView?".card-view":"td").eq(i),index=key.indexOf(" "),name=key.substring(0,index),el=key.substring(index+1),func=events[key];$td.find(el).off(name).on(name,function(e){var index=$tr.data("index"),row=self.data[index],value=row[self.header.fields[i]];func.apply(this,[e,value,row,index])})})}}),ops.treeColumn){var $tdIco=$("td[field="+ops.treeColumn+"] i",this.$body);$tdIco.length&&$tdIco.prop("isOpen",!0).bind("click",function(event){var isOpen=$(this).prop("isOpen");isOpen?(self._expandTreeNode($(this).parent().attr("aeNodeId"),!1),$(this).prop("isOpen",!1)):(self._expandTreeNode($(this).parent().attr("aeNodeId"),!0),$(this).prop("isOpen",!0)),$.stopPropagation()})}this._updateSelected(),this._resetView(),this._triggerEvent("post-body")},_buildRowCellValues:function(column,rowData,rowIndex){var value,field=column.field,render=column.renderer;return field.indexOf("|")>0&&(value=$.aries.common.getDataByDatafield(rowData,field.replace(new RegExp(/\|/g),"."))),void 0===value&&(value=void 0===rowData[field]?"":rowData[field]),"function"==typeof render&&(value=render(value,rowData,rowIndex)),value},_getRowData:function(index){var d=this.getData();return d&&d.length?d[index]:void 0},_getTrs:function(index){return"undefined"!=typeof index?this.$body.children().filter('[data-index="'+index+'"]'):this.$body.find("tr")},_rowSelect:function(index){var tr=this._getTrs(index),chk=$("td[field=checkboxCol] label",tr);tr.attr("class","tr_checked"),chk.length&&(chk.attr("isChecked","true"),chk.addClass("checked")),this.options.doSelectEvent&&this._trigger("onRowSelect",null,index,this._getRowData(index),this)},_rowDeSelect:function(index){var tr=this._getTrs(index),chk=$("td[field=checkboxCol] label",tr);tr.removeClass("tr_checked"),chk.length&&(chk.attr("isChecked","false"),chk.removeClass()),this.options.doSelectEvent&&this._trigger("onRowDeselect",null,index,this._getRowData(index),this)},_refreshHeaderCheckBox:function(){var header=this.$grid.find(".fixed-table-header");header&&header.is(":hidden")&&(header=this.$header);var headerCheckbox=$("th[field=checkboxCol]",header).find("label"),len=this._getTrs().length;len>0&&len==this.getSelections().length?(headerCheckbox.addClass("checked"),headerCheckbox.attr("isChecked","true")):(headerCheckbox.removeClass(),headerCheckbox.attr("isChecked","false"))},_resetView:function(params){var self=this,padding=0,$tableContainer=self.$grid.find(".fixed-table-container");if(params&&params.height&&(this.options.height=params.height),this.options.height){var toolbarHeight=+this.$toolbar.children().outerHeight(!0),paginationHeight=+this.$pagination.children().outerHeight(!0),height=this.options.height-toolbarHeight-paginationHeight;$tableContainer.css("height",height+"px")}this.options.showHeader&&this.options.height?(this.$grid.find(".fixed-table-header").show(),this._resetHeader()):(this.$grid.find(".fixed-table-header").hide(),this._triggerEvent("post-header")),this.options.showFooter&&(this._resetFooter(),this.options.height),$tableContainer.css("padding-bottom",padding+"px")},_resetHeader:function(){this.$el.css("margin-top",this.$header.height()?-this.$header.height():-37),clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout($.proxy(this._fitHeader,this),this.$el.is(":hidden")?100:0)},_fitHeader:function(){var $fixedHeader,$fixedBody,scrollWidth,self=this;$fixedHeader=self.$grid.find(".fixed-table-header"),$fixedBody=self.$grid.find(".fixed-table-body"),scrollWidth=self.$el.width()>$fixedBody.width()?getScrollBarWidth():0,self.$header_=self.$header.clone(!0,!0),self.$selectAll_=self.$header_.find('[name="btSelectAll"]'),$fixedHeader.find("table").html("").attr("class",self.$el.attr("class")).append(self.$header_),self.$header.find("th").each(function(i){self.$header_.find("th").eq(i).data($(this).data())}),self.$body.find("tr:first-child:not(.no-records-found) > *").each(function(i){}),$fixedBody.off("scroll").on("scroll",function(){$fixedHeader.scrollLeft($(this).scrollLeft())}),self._triggerEvent("post-header")},_resetFooter:function(){var self=this,data=self.getData(),html=[];this.options.showFooter&&($.each(this.options.columns,function(i,column){var falign="",style="",class_=sprintf(' class="%s"',column["class"]);column.visible&&(falign=sprintf("text-align: %s; ",column.falign?column.falign:column.align),style=sprintf("vertical-align: %s; ",column.valign),html.push("<td",class_,sprintf(' style="%s"',falign+style),">"),html.push(calculateObjectValue(column,column.footerFormatter,[data],"&nbsp;")||"&nbsp;"),html.push("</td>"))}),this.$footer.find("tr").html(html.join("")),clearTimeout(this.timeoutFooter_),this.timeoutFooter_=setTimeout($.proxy(this._fitFooter,this),this.$el.is(":hidden")?100:0))},_fitFooter:function(){var $fixedBody,$footerTd,elWidth,scrollWidth;return clearTimeout(this.timeoutFooter_),this.$el.is(":hidden")?void(this.timeoutFooter_=setTimeout($.proxy(this.fitFooter,this),100)):($fixedBody=this.$grid.find(".fixed-table-body"),elWidth=this.$el.css("width"),scrollWidth=elWidth>$fixedBody.width()?getScrollBarWidth():0,this.$footer.css({"margin-right":scrollWidth}).find("table").css("width",elWidth).attr("class",this.$el.attr("class")),$footerTd=this.$footer.find("td"),void $fixedBody.find("tbody tr:first-child:not(.no-records-found) > td").each(function(i){}))},_resetWidth:function(){var ops=this.options,cms=ops.columns;if(cms&&0!==cms.length){var autoExpandColField=cms[cms.length-1].field,$header=this.$header,allColsWidth=0;$.each(cms,function(index,cm){var cmWidth=cm.width||0;if("autoExpand"==cmWidth&&(cmWidth=0,autoExpandColField=cm.field),"string"==typeof cmWidth)if(cmWidth.indexOf("%")>-1){var unitWidth=$.trim(cmWidth).substring(0,cmWidth.length);cmWidth=parseInt(this.$grid.width()*unitWidth/100)}else cmWidth=parseInt(cmWidth.replace("px",""));cmWidth>0&&($header.find("th[field='"+cm.field+"']").width(cmWidth),allColsWidth+=cmWidth+ops.DEFINE.cellPadding)}),ops.singleSelect||(allColsWidth+=ops.DEFINE.checkboxWidth),ops.showIndex&&(allColsWidth+=ops.DEFINE.indexWidth),this._fixHeaderWidth(autoExpandColField,allColsWidth);var headerWidth={};$($header.find("th[field]")).each(function(){headerWidth[$(this).attr("field")]=$(this).width()}),this.$body.find("td[field]").each(function(index,td){var field=$(td).prop("field");headerWidth[field]&&$(td).width(headerWidth[field])})}},_fixHeaderWidth:function(autoExpandColField,allColsWidth){var tableWidth,ops=this.options,$grid=this.$grid,$header=this.$header,cms=ops.columns,tempWidth=$grid.width();if(tableWidth=0>=tempWidth?$grid.parent().width():tempWidth,ops.autoFit){var usableWidth=tableWidth-allColsWidth,percent=1+usableWidth/tableWidth;$.each(cms,function(index,cm){cm.width>0?$header.find("th[field='"+cm.field+"']").width(parseInt(cm.width*percent)):$header.find("th[field='"+cm.field+"']").width(parseInt(ops.DEFINE.colDefWidth*percent))})}},_triggerEvent:function(name){var args=Array.prototype.slice.call(arguments,1);name+=".bs.table",this.options[this.options.EVENTS[name]].apply(this.options,args),this.$el.trigger($.Event(name),args),this.options.onAll(name,args),this.$el.trigger($.Event("all.bs.table"),[name,args])},_scrollTo:function(value){var $tbody=this.$grid.find(".fixed-table-body");"string"==typeof value&&(value="bottom"===value?$tbody[0].scrollHeight:0),"number"==typeof value&&$tbody.scrollTop(value)},_updateSelected:function(){},_updateRows:function(checked){var self=this;this.$selectItem.each(function(){self.data[$(this).data("index")][self.header.stateField]=checked})},_showNoRecords:function(){this.$body.find("tr.no-records-found").length||this.$body.html(['<tr class="no-records-found">',sprintf('<td colspan="%s">%s</td>',this.header.fields.length,"No matching records found"),"</tr>"].join(""))},_resetGridView:function(hasRecord){hasRecord?this.options.isPaging&&this.$pagination.show():(this._showNoRecords(),this.options.isPaging&&this.$pagination.hide())},_getSelections:function(){var self=this;return $.grep(this.data,function(row){return row[self.header.stateField]})},_initServer:function(){var self=this,ops=(self.$grid,self.options),param=ops._params;return ops.url?self.loading?!0:(self.loading=!0,this.$loading.show(),ops.isPaging&&(param+="&"+ops.startField+"="+self.getStart()+"&"+ops.endField+"="+self.getEnd()),void $.aries.ajax.post(ops.url,param,function(data){var onSuccess=ops.onSuccess;data&&ops.dataField&&(data=$.aries.common.getDataByDatafield(data,ops.dataField)),data?self._reload(data):self._resetGridView(!1),self.loading=!1,self.$loading.hide(),"function"==typeof onSuccess&&self._trigger("onSuccess",null,data)},function(code,data){try{var onError=ops.onError;"function"==typeof onError&&onError(code,data)}catch(e){}finally{return self.loading=!1,self.$loading.hide(),self._resetGridView(!1),!1}},$.extend({},{type:ops.method}),ops._header)):(self._resetGridView(!1),!1)},_reload:function(data){var fixedScroll=!1,hasNoRecords=!0;data?($.isObject(data)?(data.total&&$.isString(data.total)&&(data.total=parseInt(data.total)),data.total<1?(this.options.totalRows=0,data=[],hasNoRecords=!1):(this.options.totalRows=data.total,fixedScroll=data.fixedScroll,data=data.rows)):$.isArray(data)&&(0===data.length?hasNoRecords=!1:this.options.totalRows=-1),this.options.treeColumn&&(data=this._buildTreeData(data))):(data=[],this.options.totalRows=0,hasNoRecords=!1),this._resetGridView(hasNoRecords),this._initData(data),hasNoRecords&&(this._initPagination(),this._initBody(fixedScroll))},_buildTreeData:function(data){var rtn=[],tmp=[],ops=this.options;return col={},col.idField=ops.treeIdField,col.pIdField=ops.treePidField,col.labelField="",col.valueField="",col.sortField=ops.treeSortField,tmp=$.buildTreeData(data,col),tmp&&tmp.length&&(rtn=this._iterateBuildTreeData(tmp,rtn)),rtn},_iterateBuildTreeData:function(data,rtn){if(!data||!data.length)return rtn;for(var item,children,i=0;i<data.length;i++)item=data[i],children=item.aeChildren,children&&children.length&&(item.aeHasChild=!0),"undefined"!=typeof children&&delete item.aeChildren,delete item.aeNodeLabel,delete item.aeNodeValue,rtn.push(item),children&&children.length&&this._iterateBuildTreeData(children,rtn);return rtn},_expandTreeNode:function(index,isShow){if(index){var $td=$("td[aeNodeId="+index+"]",this.$body);if($td.length){var $trs,$otherTr,$nextTr,parent=$td.parent();$trs=parent.nextAll("tr"),$otherTr=$trs.filter(function(index){return $("td[aeNodeLevel]",$(this)).attr("aeNodeLevel")<=$td.attr("aeNodeLevel")}),$otherTr.length&&($nextTr=$otherTr.eq(0),$trs=parent.nextAll("tr:lt("+$trs.index($nextTr)+")")),$trs.length&&(isShow?($trs.show(),this._changeTreeNodeState(parent,!0)):($trs.hide(),this._changeTreeNodeState(parent,!1)))}}},_changeTreeNodeState:function($el,isOpen){isOpen?$("td[aeNodeLevel]",$el).removeClass("fold").addClass("unfold").find("i").removeClass().addClass(this.options.treeIcons.unfold):$("td[aeNodeLevel]",$el).removeClass("unfold").find("i").removeClass().addClass(this.options.treeIcons.fold)},addRowData:function(data,noRefresh){if(data&&$.isObject(data)&&(this.options.changedData.add.push(data),!noRefresh)){var newAry=[];newAry.push(data);var gridData=this.getData();gridData&&(newAry=$.merge(newAry,gridData)),gridData=newAry;var newGridData={};newGridData.rows=gridData;var total=this.options.totalRows+1;newGridData.total=total+"",this._reload(newGridData)}},editRowData:function(data,idKey,noRefresh){if(data&&$.isObject(data)&&idKey&&(this.options.changedData.edit.push(data),!noRefresh)){var gridData=this.getData();if(gridData){for(var i=0;i<gridData.length;i++){var item=gridData[i];if(item&&item[idKey]==data[idKey]){gridData[i]=data;break}}var newGridData={};newGridData.rows=gridData,newGridData.total=this.options.totalRows+"",this._reload(newGridData)}}},delRowData:function(idKey,idVal,noRefresh){if(idKey&&idVal){var delItem,gridData=this.getData();if(gridData){for(var i=0;i<gridData.length;i++){var item=gridData[i];if(item&&item[idKey]==idVal){delItem=item,gridData.splice(i,1);break}}if(this.options.changedData.del.push(delItem),!noRefresh){var newGridData={};newGridData.rows=gridData;var total=this.options.totalRows-1;newGridData.total=total+"",this._reload(newGridData)}}}},getChangedData:function(){return this.options.changedData},_editRow:function($tr,isNew){var ops=this.options,editView=ops._editOption;ops.editable&&!editView._triggered&&editView._editRowId!=$tr.data("index")&&(ops._triggered=!0,editView._editRowId=$tr.data("index"),col.editor.editable="false"==item.attr("editable")?!1:!0,col.editor.type=item.attr("editType")||"text",$.each(ops.columns,function(idx,column){var field=column.field,$td=$("td[field="+field+"]",$tr);if(column.editor.editable&&$td.length){var $field,type=column.editor.type;"combo"==type?($field='<input aeType="aeCombo" id="'+ops.id+"_edit_field_"+field+'" aeInit="false"/>',$td.html($field),$field.aeCombo()):"date"==type?($field='<input aeType="aeCalendar" id="'+ops.id+"_edit_field_"+field+'" aeInit="false"/>',$td.html($field),$field.aeCalendar()):"popup"==type?($field='<input aeType="aeTextpopup" id="'+ops.id+"_edit_field_"+field+'" aeInit="false"/>',$td.html($field),$field.aeTextpopup()):($field='<input aeType="aeTextfield" id="'+ops.id+"_edit_field_"+field+'" aeInit="false"/>',$td.html($field),$field.aeTextfield())}}))},reload:function(data,param,page){if(!this.loading){var ops=this.options;if(!data)return void this._resetGridView(!1);"undefined"!=typeof page?(page=parseInt(page)||1,page=0>=page?1:page,ops.totalPages&&(page=page>ops.totalPages?ops.totalPages:page),ops.pageNumber=page):ops.pageNumber=1,$.isString(data)?(ops.sidePagination="server",ops.url=data,ops._params=param?param:void 0,this._initServer()):($.isObject(data)||$.isArray(data))&&(ops.sidePagination="client",ops.dataField&&(data=$.aries.common.getDataByDatafield(data,ops.dataField)),this._reload(data),this._trigger("onSuccess",null,data)),this.options.changedData={add:[],edit:[],del:[]}}},setSelections:function(indexes){var self=this;$.isArray(indexes)||(indexes=[indexes]);var selected=this.getSelections();$(selected).each(function(){self._rowDeSelect(this)}),$(indexes).each(function(){self._rowSelect(this)}),self._refreshHeaderCheckBox()},getSelections:function(needRecords){var $trs=this._getTrs(),selectedTrs=$trs.filter(".tr_checked"),result=[];if(needRecords){var rowsData=this.getData();rowsData&&rowsData.length&&selectedTrs.each(function(index,tr){result[result.length]=rowsData[$trs.index($(tr))]})}else selectedTrs.each(function(index,tr){result[result.length]=$trs.index($(tr))});return result},getStart:function(){var ops=this.options,start=-1;return ops.pagingSize>0&&(start=(ops.pageNumber-1)*ops.pagingSize+1),start},getEnd:function(){var ops=this.options,end=-1;return ops.pagingSize>0&&(end=ops.pageNumber*ops.pagingSize),end},searchGrid:function(searchTxt,filter){if(!$.isString(searchTxt))return void $.message.alert("","The search condition is incorrect!");filter=filter&&$.isArray(filter)?filter:[],filter=$.unique($.merge(filter,$.grep(this.header.fields,function(item){return"checkboxCol"===item||"indexCol"===item||""===item?!1:!0})));var data=$.filterStringInArray(searchTxt,this.getData(),filter);data&&this.reload(data)},_buildOptions:function(ops,el){ops.id=void 0!==el.attr("id")?el.attr("id"):"",ops.aeType=el.attr("aeType")||"aeGrid",ops.title=$.evalI18nString(el.attr("title")),ops.width=el.attr("width")||ops.width,ops.height=el.attr("height")||ops.height,ops.singleSelect="true"==el.attr("singleSelect")?!0:!1,ops.dataSource=el.attr("dataSource")||ops.dataSource,ops.showIndex="true"==el.attr("showIndex")?!0:!1,ops.autoFit="false"==el.attr("autoFit")?!1:!0,ops.emptyMsg=$.evalI18nString(el.attr("emptyMsg"))||ops.emptyMsg,ops.errorMsg=$.evalI18nString(el.attr("errorMsg"))||ops.errorMsg,ops.loadingMsg=$.evalI18nString(el.attr("loadingMsg"))||ops.loadingMsg,ops.pagingType=el.attr("pagingType")||ops.pagingType,ops.pagingAlign=el.attr("pagingAlign")||ops.pagingAlign,ops.striped="false"==el.attr("singleRowClass")?!0:!1,ops.dataField=el.attr("dataField")||ops.dataField,el.attr("pagingSize")&&""!==el.attr("pagingSize")&&(ops.pagingSize=parseInt(el.attr("pagingSize"))),ops.showMsg="false"==el.attr("showMsg")?!1:!0,ops.datafield=el.attr("datafield")||ops.datafield,ops.isPaging="true"==el.attr("isPaging")?!0:!1,ops.preProcess=el.attr("preProcess")||ops.preProcess,ops.treeColumn=el.attr("treeColumn")||"",ops.treeIdField=el.attr("treeIdField")||"",ops.treePidField=el.attr("treePidField")||"",ops.treeSortField=el.attr("treeSortField")||"",ops.editable="true"==el.attr("editable")?!0:!1,ops.doSelectEvent=el.attr("doSelectEvent")||ops.doSelectEvent,ops.onRowClick=el.attr("onRowClick")||ops.onRowClick,ops.onRowSelect=el.attr("onRowSelect")||ops.onRowSelect,ops.onRowDeselect=el.attr("onRowDeselect")||ops.onRowDeselect,ops.onRowDblClick=el.attr("onRowDblClick")||ops.onRowDblClick,ops.onPageChange=el.attr("onPageChange")||ops.onPageChange,el.attr("onSuccess")?ops.onSuccess=el.attr("onSuccess")||ops.onSuccess:ops.onSuccess=el.attr("onReload")||ops.onSuccess,ops.onError=el.attr("onError")||ops.onError,ops.showFooter="true"==el.attr("showFooter")?!0:!1,ops.theme=el.attr("theme")||"",ops.showBorder="true"==el.attr("showBorder")?!0:!1,ops.startField=el.attr("startField")||ops.startField,ops.endField=el.attr("endField")||ops.endField,ops.titleRenderer=el.attr("titleRenderer")||void 0,this._buildOptionsEvents(ops);var cols=el.children("[datafield]");"undefined"!=typeof cols&&cols.length&&(ops.columns=[],cols.each(function(idx,item){var col={},$item=$(item);col.field=$item.attr("datafield")||"",""!==col.field&&(col.field=col.field.replace(new RegExp(/\./g),"|")),col.title=$.evalI18nString($item.attr("title"))||"",col.width=$item.attr("width")||"",col.headAlign=$item.attr("headAlign")||"center",col.align=$item.attr("align")||"left",col.visible="false"==$item.attr("visible")?!1:!0,col.wrap="true"==$item.attr("wrap")?!0:!1,col.renderer=$item.attr("renderer")||void 0;var render=col.renderer;$.isString(render)&&(col.renderer=render?function(colValue,rowData,rowIndex){var i=render.indexOf("("),actName=i>0?render.substring(0,i):render,func="return window."+actName+"?"+actName+".call(window,c,rd,ri):false;";return new Function("c","rd","ri",func)(colValue,rowData,rowIndex)}:void 0),col.sortable="true"==$item.attr("sortable")||!1,col.order=$item.attr("order")||"asc",col.editor={},col.editor.editable="false"==$item.attr("editable")?!1:!0,col.editor.type=$item.attr("editType")||"text",col.editor.options={},"select"==col.editor.type?(col.editor.options.emptytext=$item.attr("emptyText")||"",
col.editor.options.dataSource=$item.attr("dataSource")||""):"date"==col.editor.type?(col.editor.options.dataField=$item.attr("dataField")||"",col.editor.options.dateFormat=$item.attr("dateFormat")||"",col.editor.options.showTime=$item.attr("showTime")):"popup"==col.editor.type&&(col.editor.options.popupType=$item.attr("popupType"),col.editor.options.popupSource=$item.attr("popupSource"),col.editor.options.popupTitle=$item.attr("popupTitle"),col.editor.options.popupWidth=$item.attr("popupWidth"),col.editor.options.popupHeight=$item.attr("popupHeight")),ops.columns.push(col)}))},_buildOptionsEvents:function(ops){this._buildCommonEvent(ops,"onRowClick",ops.onRowClick),this._buildCommonEvent(ops,"onRowSelect",ops.onRowSelect),this._buildCommonEvent(ops,"onRowDeselect",ops.onRowDeselect),this._buildCommonEvent(ops,"onRowDblClick",ops.onRowDblClick),this._buildCommonEvent(ops,"onPageChange",ops.onPageChange),this._buildCommonEvent(ops,"onRefresh",ops.onRefresh);var onSuccess=ops.onSuccess;$.isString(onSuccess)&&(ops.onSuccess=onSuccess?function(data,status,xhr){var i=onSuccess.indexOf("("),actName=i>0?onSuccess.substring(0,i):onSuccess,func="return window."+actName+"?"+actName+".call(window,d,t,x):false;";return new Function("d","t","x",func)(data,status,xhr)}:function(data,status,xhr){});var onError=ops.onError;$.isString(onError)&&(ops.onError=onError?function(code,data){var i=onError.indexOf("("),actName=i>0?onError.substring(0,i):onError,func="return window."+actName+"?"+actName+".call(window,c,d):false;";return new Function("c","d",func)(code,data)}:function(code,data){});var preProcess=ops.preProcess;$.isString(preProcess)&&(ops.preProcess=preProcess?function(data){var i=preProcess.indexOf("("),actName=i>0?preProcess.substring(0,i):preProcess,func="return window."+actName+"?"+actName+".call(window,d):false;";return new Function("d",func)(data)}:!1);var titleRenderer=ops.titleRenderer;$.isString(titleRenderer)&&(ops.titleRenderer=titleRenderer?function(data){var i=titleRenderer.indexOf("("),actName=i>0?titleRenderer.substring(0,i):titleRenderer,func="return window."+actName+"?"+actName+".call(window):false;";return new Function(func)()}:!1)},_buildCommonEvent:function(ops,evtName,evtValue){$.isString(evtValue)&&(ops[evtName]=evtValue?function(param1,param2,event){var i=evtValue.indexOf("("),actName=i>0?evtValue.substring(0,i):evtValue,func="return window."+actName+"?"+actName+".call(window,p1,p2,e):false;";return new Function("p1","p2","e",func)(param1,param2,event)}:function(rowIndex,rowData,event){})},getData:function(){return"undefined"==typeof this.data?[]:this.data}});var cachedWidth=null,sprintf=function(str){var args=arguments,flag=!0,i=1;return str=str.replace(/%s/g,function(){var arg=args[i++];return"undefined"==typeof arg?(flag=!1,""):arg}),flag?str:""},getFieldIndex=function(columns,field){var index=-1;return $.each(columns,function(i,column){return column.field===field?(index=i,!1):!0}),index},getScrollBarWidth=function(){if(null===cachedWidth){var w1,w2,inner=$("<p/>").addClass("fixed-table-scroll-inner"),outer=$("<div/>").addClass("fixed-table-scroll-outer");outer.append(inner),$("body").append(outer),w1=inner[0].offsetWidth,outer.css("overflow","scroll"),w2=inner[0].offsetWidth,w1===w2&&(w2=outer[0].clientWidth),outer.remove(),cachedWidth=w1-w2}return cachedWidth},calculateObjectValue=function(self,name,args,defaultValue){if("string"==typeof name){var names=name.split(".");names.length>1?(name=window,$.each(names,function(i,f){name=name[f]})):name=window[name]}return"object"==typeof name?name:"function"==typeof name?name.apply(self,args):defaultValue},escapeHTML=function(text){return"string"==typeof text?text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):text}}),define("ui-pageflow",function(require,exports,modules){"require:nomunge,exports:nomunge,modules:nomunge";"undefined"==typeof $.bizpageflow&&($.bizpageflow=function(id,steps,domId){return new $.bizpageflow.fn.construct(id,steps,domId)},$.bizpageflow.fn={construct:function(id,steps,domId){this.id=id,this.steps=steps,this.active=0,this.activeFrames=[],this.curStep="",this.size=steps.length,this.gostep=$.DataMap("{}"),this.drawGuide=!1,this.isFilish=!1,this.currentEvent=null,this.isBack=!1,this.currentData=null,this.submitListener=null,this.submitParams="",this.currentEvtType=null,this.globalVars=new $.DataMap,this.bindedButtons={},this.defaultShow="",this.beginStep="",$.extend(this,steps)},_initFlow:function(){var data=this.getStep("begin");null!=data&&"undefined"!=typeof data&&(this.beginStep?(this.active=this.beginStep,this.curStep=this.beginStep,this.next(this.beginStep)):(this.active=data.name,this.curStep=data.name,this.next(data.nextstep)),window.getFlow().initBindEvent())},initFlow:function(){var _steps=this.steps,self=this;if(_steps&&_steps.length){for(var step,childSteps=[],i=0;i<_steps.length;i++)step=_steps[i],"child"==step.tagname&&childSteps.push(step);if(childSteps.length)for(var backStep,nextStepName,finishedNum=childSteps.length,currentNum=1,i=0;i<childSteps.length;i++)step=childSteps[i],backStep=this.getStepsByNext(step.name),nextStepName=step.nextstep,$.aries.ajax.get(step.page,"",function(data){if(data&&data.steps){for(var _childStep,_childStart,_events,_childSteps=data.steps,_useSteps=[],j=0;j<_childSteps.length;j++)_childStep=_childSteps[j],"begin"==_childStep.name?_childStart=_childStep:"step"==_childStep.tagname?_useSteps.push(_childStep):"event"==_childStep.tagname&&(_events=_childStep.events);_childStart&&$.each(_useSteps,function(idx,val){return val.name==_childStart.nextstep?($.each(backStep,function(idx1,val1){backStep[idx1].nextstep=val.name}),!0):void 0}),$.each(_useSteps,function(idx,val){return"end"==val.nextstep?(_useSteps[idx].nextstep=nextStepName,!0):void 0}),_useSteps&&_useSteps.length&&$.each(_useSteps,function(idx,val){self.steps.push(val)}),_events&&_events.length&&$.each(_events,function(idx,val){"next"==val.type&&window.getFlow().bindNextEvent(val.page,val.name,val.source,val.trigger,val.btnName,val.verifyFn),"submit"==val.type})}finishedNum==currentNum?window.getFlow()._initFlow():currentNum+=1},function(code,info){finishedNum==currentNum?window.getFlow()._initFlow():currentNum+=1,$.aelog("Pageflow load "+step.page+" is error! Info : "+info)});else window.getFlow()._initFlow()}},reInitFlow:function(){this.active=0,this.curStep="",this.isFilish=!1,this.currentEvent=null,this.isBack=!1,this.currentData=null,this.submitListener=null,this.submitParams="",this.currentEvtType=null,this.globalVars=new $.DataMap;var data=this.getStep("begin");null!=data&&"undefined"!=typeof data&&(this.active=data.name,this.curStep=data.name,this.next(data.nextstep))},includePage:function(noi){var data=this.getStep(noi),self=this;if(null!=data&&"undefined"!=typeof data){$("#"+this.id).html(this.defaultShow);var url=data.page,flow=window.getFlow(),dynamicId=flow.getGlobalVarsByName("dynamicId");"true"==data.dynamic&&data.dynamicPath&&dynamicId&&(url=data.dynamicPath+dynamicId+".html"),$.aries.common.includeHtml(this.id,url,function(e){self.pageInitEvent(noi),$.isFunction(window.initFunction)&&(eval("window.initFunction();"),window.initFunction=void 0)})}},pageInitEvent:function(noi){$("body").length&&$("body").children(":first").length&&$("body").children(":first").scrollTop(0);var data=this.getStep(noi),bindedBtns=this.bindedButtons[noi];if(bindedBtns&&bindedBtns.length)for(var bindedBtn,evtType,evt,evtName="",evtArgs="",endLen,i=0;i<bindedBtns.length;i++){bindedBtn=bindedBtns[i];var btn=$("[name="+bindedBtn.name+"]");if(btn.length&&(evtType=bindedBtn.evtType,null!=evtType&&"undefined"!=typeof evtType&&""!=evtType)){if(evt=btn[0].getAttribute(evtType),evt&&""!=evt){var len=evt.indexOf("(");len>-1?(evtName=evt.substring(0,len),endLen=evt.indexOf(")"),evtArgs=endLen>-1?evt.substring(len+1,endLen):evt.substring(len+1,evt.length)):evtName=evt}var bindType=0==evtType.indexOf("on")?evtType.substring(2,evtType.length):evtType;btn.data("idx",i),btn.data("evtName",evtName),btn.data("evtArgs",evtArgs);var btnSpan=btn.find("span");btnSpan.length&&(btnSpan.data("idx",i),btnSpan.data("evtName",evtName),btnSpan.data("evtArgs",evtArgs)),btn.unbind(bindType),btn.bind(bindType,function(e){var curBtn=bindedBtns[$(e.target).data("idx")],eName=$(e.target).data("evtName"),eArgs=$(e.target).data("evtArgs");""!=eName&&$.isFunction(window[eName])&&(""!=eArgs?eval("window."+eName+"("+eArgs+");"):eval("window."+eName+"();")),window.getFlow().verifyNextEvent(curBtn.verifyEvent)&&("s"==curBtn.type?(window.getFlow().setCurrentEvent(curBtn.submitEvt),window.getFlow().setSubmitListener(curBtn.submitSV),window.getFlow().setCurrentEvtType("submit"),$("#bnext").trigger("click")):(window.getFlow().setCurrentEvent(curBtn.nextEvt),window.getFlow().setSubmitListener(""),window.getFlow().setCurrentEvtType("next"),$("#bnext").trigger("click")))}),btn[0].setAttribute(evtType,"")}}},setDefaultShow:function(html){html?this.defaultShow=html:this.defaultShow=""},getName:function(){return this.id},execExpress:function(noi,express,defval){var execval=null;return execval="$EVENT"==express?this.getCurrentEvent():f("#"+express).val(),null==execval||"undefined"==typeof execval?defval:execval},getTransData:function(noi,next){var data=this.getStep(noi);if(null==data||"undefined"==typeof data)return null;if("begin"==data.name||"end"==data.name||"step"!=data.tagname)return null;var ids=data.transdata,flow=window.getFlow();return ids&&"undefined"!=typeof ids&&""!=ids&&$.each(ids.split(","),function(idx,val){if(val.indexOf(":")>0){var valArray=val.split(":");val=valArray[0];var globalkey=valArray[1];globalkey&&""!=globalkey&&((null==val||"undefined"==typeof val)&&(val=""),flow.setGlobalVarsByName($.trim(globalkey),$.aries.page.data.getData($.trim(val))))}}),null},firstStep:function(){var beginStep;return $.each(this.steps,function(idx,val){"step"==val.tagname&&"begin"===val.name&&(beginStep=val.nextstep)}),beginStep},lastStep:function(){var endStep;return $.each(this.steps,function(idx,val){"step"==val.tagname&&"end"===val.nextstep&&(endStep+=val.name+"|")}),endStep},backView:function(noi){if(null!=noi&&"undefined"!=typeof noi){var changekey=this.getChange();if(changekey!=noi){if(changekey&&($("#guide_"+changekey).attr("monitor","{"+this.getStepMonitor(changekey)+"}"),window.confirm($.lang["view.web.comp.pageflow.confirm"])))return this.reset(changekey),this.setShowPage(changekey),void $("#bnext").triggerHandler("click");this.setShowPage(noi),this.resetByGuide(noi,!1),this.setAutoHeight(),this.curStep=noi}}},reset:function(changekey,updateGuide){if(changekey){var lastFlowName=this.activeFrames.slice(this.activeFrames.length-1)[0];if(changekey!=lastFlowName){$("#bback").attr("back");this.resetStatus(changekey,updateGuide);for(var keyIndex=this.gostep.indexOfKey(changekey),stepsCount=this.gostep.getCount(),i=stepsCount-1;i>keyIndex;i--)$("#guide_"+this.gostep.itemAt(i).name).remove(),this.gostep.removeAt(i)}}},resetByGuide:function(changekey,updateGuide){changekey&&changekey!=this.active&&this.resetStatus(changekey,updateGuide)},resetStatus:function(noi,updateGuide){var data=this.getStep(noi);if(null!=data&&"undefined"!=typeof data&&"begin"!==data.name&&"end"!==data.name&&(data.nexttrigger="",0!=updateGuide)){var lastFrame,framesLength,noiPos=$.inArray(noi,this.activeFrames);framesLength=noiPos>=0?this.activeFrames.length-noiPos-1:this.activeFrames.length;for(var i=0;framesLength>i;i++)lastFrame=this.activeFrames.pop(),$("#"+lastFrame).attr("src","about:blank");this.setButton(noi),this.active=noi,this.curStep=noi}},getChange:function(){var changekey=null;return this.gostep.eachKey(function(key,idx){return window.getFlow().isMonChanged(key)?(changekey=key,!0):void 0}),changekey},setShowPage:function(noi){var beginStep=this.firstStep(),endStep=this.lastStep(),active=this.active,autoheight=this.autoSize();$.each(this.steps,function(){"step"==this.tagname&&(this.name==noi?(beginStep&&beginStep==noi?$("#guide_"+noi).attr("class","first on"):endStep&&endStep.indexOf(noi+"|")>-1?$("#guide_"+noi).attr("class","last on"):$("#guide_"+noi).attr("class","on"),$("#"+this.name).attr("height",autoheight),$("#"+this.name).css("display","block")):(this.name==active?endStep&&endStep.indexOf(active+"|")>-1?$("#guide_"+active).attr("class","last active"):$("#guide_"+active).attr("class","active"):beginStep&&beginStep==this.name?$("#guide_"+this.name).attr("class","first ok"):$("#guide_"+this.name).attr("class","ok"),$("#"+this.name).css("display","none"),$("#"+this.name).attr("height","0")))})},setFrame:function(noi,params){var data=this.getStep(noi);if(null!=data&&"undefined"!=typeof data){this.getTransData(this.active,noi),data.initsv,data.onsuccess;return void this.includePage(noi);var data}},setFlow:function(noi){},setButton:function(noi,isDisabled){var data=this.getStep(noi);if(null!=data&&"undefined"!=typeof data){isDisabled&&$("#bnext").attr("disabled","disabled"),"end"==data.nextstep?($("#bnext").attr("class","finish"),$("#bnext").attr("active",noi),$("#bnext").attr("uuid",noi),$("#bnext").html("Finish"),$("#bnext").attr("next",data.nextstep),$("#bnext").unbind("click"),$("#bnext").bind("click",function(){window.getFlow().submit()}),this.isFilish=!0):($("#bnext").attr("class",""),$("#bnext").attr("active",noi),$("#bnext").attr("uuid","step"),$("#bnext").attr("next",data.nextstep),$("#bnext").unbind("click"),$("#bnext").bind("click",function(){window.getFlow().next(data.nextstep)}),this.isFilish=!1),isDisabled?$.aries.common.disabledButton("bnext",!0):$.aries.common.disabledButton("bnext",!1);var firstStepName=this.getStep("begin").nextstep;if(firstStepName!=noi){$("#bback").css("visibility","visible");var back=null;this.gostep.eachKey(function(key,idx){key!=data.name&&(back=key)}),$("#bback").attr("active",noi),$("#bback").attr("back",back),$("#bback").unbind("click"),$("#bback").bind("click",function(){window.getFlow().back(back)})}else $("#bback").css("visibility","hidden"),$("#bback").unbind("click")}},toSwitch:function(noi,ignoreMonitor,notTriggerNextButton){var data=this.getStep(noi);if(null!=data&&"undefined"!=typeof data){var pdata=this.getActive(),execval=this.execExpress(pdata.name,data.expression,data["default"]);pdata=null;var caseval=null;$.each(data.cases,function(val){return this.value==val?(caseval=val,!0):void 0},[execval]);var next=null;try{next=null==caseval?data.cases[data["default"]].nextstep:data.cases[caseval].nextstep}catch(e){return alert("bad switch config,at "+noi),-1}return null==next||"undefined"==typeof next?(alert("bad switch config,at "+noi),-1):void this.next(next,ignoreMonitor,notTriggerNextButton)}},getActive:function(){var data=this.getStep(this.active);return null==data||"undefined"==typeof data?(alert("the flow has stopped"),null):data},getStep:function(noi){if(noi&&"string"==typeof noi){var step=null;return $.each(this.steps,function(_value){return this.name==_value?(step=this,!0):void 0},[noi]),step}return this.steps[noi]},getStepsByNext:function(name){var steps=[];return $.each(this.steps,function(idx,val){val.nextstep==name&&steps.push(val)}),steps},autoSize:function(){return document.body.offsetHeight-$("#guideBtns")[0].offsetHeight-3},setAutoHeight:function(){var h=this.autoSize();$.each(this.steps,function(idx,val){var name=val.name;if("begin"!=name||"end"!=name){var el=$("#"+name);el.length>0&&el.attr("src")&&""!=el.attr("src")&&el.attr("height")&&"0"!=el.attr("height")&&el.css("height",h)}})},getBackStep:function(){return this.getStep($("#bback").attr("back"))},clear:function(){this.id=null,this.steps=null,this.active=0,this.activeFrames=[],this.curStep="",this.size=-1,this.gostep=null,this.drawGuide=!1,this.isFilish=!1,this.currentEvent=null,this.isBack=!1,this.currentData=null,this.submitListener=null,this.submitParams="",this.currentEvtType=null,this.globalVars=null,this.bindedButtons=null,this.defaultShow=""},next:function(noi,ignoreMonitor,notTriggerNextButton){if(noi||(noi=$("#bnext").attr("next")),"submit"==window.getFlow().getCurrentEvtType())return void window.getFlow().submit();var params=(this.getActive(),"");this.setShowPage(this.active);var data=this.getStep(noi);if(null!=data&&"undefined"!=typeof data){if("switch"==data.tagname)return void this.toSwitch(noi,ignoreMonitor,notTriggerNextButton);this.gostep.put(data.name,data),"about:blank"!=$("#"+data.name).attr("src")?this.setButton(noi):this.setButton(noi,!0),$.bizpageflow.fn.displayNextButton(this.active,"none"),$.bizpageflow.fn.displayNextButton(noi,"inline-block"),this.setFrame(noi,params),this.active=noi,this.curStep=noi}},back:function(noi,notTriggerNextButton){noi||(noi=$("#bback").attr("back"));var data=this.getStep(noi);if(null!=data&&"undefined"!=typeof data&&"begin"!==data.name&&"end"!==data.name){this.getActive();data.nexttrigger="",this.gostep.removeKey(this.active),this.setButton(noi),this.setFrame(noi,""),this.active=noi,this.curStep=noi,this.setAutoHeight()}},cancel:function(){alert("close the window!")},submit:function(){var curListener=window.getFlow().getSubmitListener();if(null!=curListener&&""!=curListener){$.aries.common.disabledButton("bnext",!0);var data=this.getActive();this.getTransData(data.name);var submitdata;if(this.submitParams){for(var paramAry=this.submitParams.split(","),buf=[],i=0;i<paramAry.length;i++){var param=paramAry[i];buf.push(param+"="+this.getGlobalValue(param))}submitdata=buf.join("&"),$.aries.ajax.post(curListener,submitdata,function(data){$.aries.common.disabledButton("bnext",!1),$.aries.messagebox.success("Submit Successfully!")},function(i,e){$.aries.common.disabledButton("bnext",!1)})}}},stepChange:function(ignoreMonitor){var changekey=this.getChange(),lastFlowName=this.activeFrames.slice(this.activeFrames.length-1)[0];if(1!=ignoreMonitor){if(changekey&&changekey!=lastFlowName&&($("#guide_"+changekey).attr("monitor","{"+this.getStepMonitor(changekey)+"}"),window.confirm($.lang["view.web.comp.pageflow.confirm"])))return this.reset(changekey),this.setShowPage(changekey),$("#bnext").triggerHandler("click"),!1}else changekey&&changekey!=lastFlowName&&changekey==this.curStep&&$("#guide_"+this.curStep).attr("monitor","{"+this.getStepMonitor(this.curStep)+"}");return!0},isFilishStep:function(){return this.isFilish},setCurrentEvent:function(evt){this.currentEvent=evt},getCurrentEvent:function(){return this.currentEvent},setCurrentEvtType:function(evtType){this.currentEvtType=evtType},getCurrentEvtType:function(){return this.currentEvtType},initNextButton:function(evt,page,text,verifyEvent){var subFrame=$("#"+page);if(null!=subFrame&&"undefined"!=typeof subFrame){var btnHtml='<a href="#nogo" id="'+evt+'" name="'+evt+'" page="'+page+'" style="display:none;">'+text+"</a>\n";$("#guideBtns").append(btnHtml);var btn=$("#"+evt+"[page="+page+"]"),pf=this;void 0!=btn&&void 0!=btn[0]&&btn.bind("click",function(e){pf.verifyNextEvent(verifyEvent)&&(pf.setCurrentEvent(evt),pf.setSubmitListener(""),pf.setCurrentEvtType("next"),$("#bnext").trigger("click"))}),page==this.active&&this.displayNextButton(page,"inline-block")}},displayNextButton:function(page,state){var btns=$("#guideBtns").children("a[page="+page+"]");btns&&btns.length&&(btns.css("display",state),$("#guideBtns").show())},bindNextEvent:function(page,nextEvt,source,evtType,evtName,verifyEvent){if(null!=page&&"undefined"!=typeof page&&""!=page){if((null==evtName||"undefined"==typeof evtName||""==evtName)&&(evtName="Next"),null==nextEvt||"undefined"==typeof nextEvt||""==nextEvt)return void window.getFlow().initNextButton("defBtn_"+page,page,evtName,verifyEvent);if(null==source||"undefined"==typeof source||""==source)return void window.getFlow().initNextButton(nextEvt,page,evtName,verifyEvent);("undefined"==typeof this.bindedButtons[page]||null==this.bindedButtons[page])&&(this.bindedButtons[page]=[]);var bindedBtn={};return bindedBtn.name=source,bindedBtn.type="n",bindedBtn.evtType=evtType,bindedBtn.nextEvt=nextEvt,bindedBtn.verifyEvent=verifyEvent,void this.bindedButtons[page].push(bindedBtn);var subFrame}},verifyNextEvent:function(verifyEvent){var rtnFlag=!0;if(verifyEvent&&"undefined"!=typeof verifyEvent&&""!=verifyEvent){var errorTitle="",evtName,evtArgs="",len=-1;if(len=verifyEvent.indexOf("("),len>-1){evtName=verifyEvent.substring(0,len);var endLen=verifyEvent.indexOf(")");evtArgs=endLen>-1?verifyEvent.substring(len+1,endLen):verifyEvent.substring(len+1,verifyEvent.length)}else evtName=verifyEvent;var rtn,rtnMsg="";rtn=""!=evtArgs?eval("window."+evtName+"("+evtArgs+");"):eval("window."+evtName+"();"),rtn&&$.isArray(rtn)&&rtn.length>0?(rtnFlag=rtn[0],rtn.length>1&&(rtnMsg=rtn[1])):rtnFlag=rtn,rtnFlag=void 0==rtnFlag||"false"==rtnFlag||0==rtnFlag?!1:!0,rtnFlag||($.aries.messagebox.error(errorTitle,rtnMsg?rtnMsg:""),window.getFlow().setCurrentEvent(null),window.getFlow().setSubmitListener(null))}return rtnFlag},bindSubmitEvent:function(page,submitEvt,source,evtType,evtName,submitSV,params,verifyEvent,afterSubmit){if(null!=page&&"undefined"!=typeof page&&""!=page){if((null==evtName||"undefined"==typeof evtName||""==evtName)&&(evtName="Submit"),null==submitEvt||"undefined"==typeof submitEvt||""==submitEvt)return void window.getFlow().initSubmitButton("defBtn_"+page,page,evtName,submitSV,verifyEvent);if(null==source||"undefined"==typeof source||""==source)return void window.getFlow().initSubmitButton(submitEvt,page,evtName,submitSV,verifyEvent);("undefined"==typeof this.bindedButtons[page]||null==this.bindedButtons[page])&&(this.bindedButtons[page]=[]);var bindedBtn={};return bindedBtn.name=source,bindedBtn.type="s",bindedBtn.submitEvt=submitEvt,bindedBtn.evtType=evtType,bindedBtn.evtName=evtName,bindedBtn.submitSV=submitSV,bindedBtn.verifyEvent=verifyEvent,this.bindedButtons[page].push(bindedBtn),void(params?this.submitParams=params:this.submitParams="");var subFrame}},initSubmitButton:function(evt,page,text,submitSV,verifyEvent){var subFrame=$("#"+page);if(null!=subFrame&&"undefined"!=typeof subFrame){var btnHtml='<a href="#nogo" id="'+evt+'" name="'+evt+'" class="finish" page="'+page+'" style="display:none;">'+text+"</a>\n";$("#guideBtns").append(btnHtml);var btn=$("#"+evt+"[page="+page+"]"),pf=this;void 0!=btn&&void 0!=btn[0]&&btn.bind("click",function(e){pf.verifyNextEvent(verifyEvent)&&(pf.setCurrentEvent(evt),pf.setSubmitListener(submitSV),pf.setCurrentEvtType("submit"),$("#bnext").trigger("click"))}),page==this.active&&this.displayNextButton(page,"inline-block")}},setSubmitListener:function(ltr){this.submitListener=ltr},getSubmitListener:function(){return this.submitListener},getGlobalVarsByName:function(key){return key&&""!=key&&this.globalVars.containsKey(key)?this.globalVars.get(key):""},setGlobalVarsByName:function(key,value){key&&""!=key&&((void 0==value||null==value)&&(value=""),this.globalVars.containsKey(key)?(this.globalVars.removeKey(key),this.globalVars.put(key,value)):this.globalVars.put(key,value))},clearGlobalVars:function(){this.globalVars.clear()},getGlobalVarsList:function(){return this.globalVars},bindTransValue:function(page,uiid){if(null!=page&&void 0!=page&&""!=page&&null!=uiid&&void 0!=uiid&&""!=uiid){var toFrame=$("#"+page);toFrame&&toFrame.bind("load",function(e){var toItem=$("[uiid="+uiid+"]",this.contentDocument);if(void 0!=toItem&&void 0!=toItem[0]&&($.nodeName(toItem[0],"input")||$.nodeName(toItem[0],"select")||$.nodeName(toItem[0],"textarea"))){var p=$.params.load(toFrame[0].src);toItem.val(p.get(uiid)+"")}})}},getGlobalValue:function(key){return key&&""!=key&&this.globalVars.containsKey(key)?this.globalVars.get(key):""},setBeginStep:function(stepName){this.beginStep=stepName}},$.bizpageflow.fn.construct.prototype=$.bizpageflow.fn)}),define("ui-tpl",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeTpl",{options:{initial:!1,isHide:!1,sourceId:"",dataField:"",onAfterReload:function(){},forceInit:!0,initType:"html"},_create:function(){var options=this.options,$ele=this.element,id=$ele.attr("id");1!=options.initial&&(id&&$ele.attr("aeId",id),"html"==options.initType&&this._buildOptions(options,$ele),options.aeType?$ele.attr("aeType",options.aeType):$ele.attr("aeType","aeTpl"),options.uiid?$ele.attr("uiid",options.uiid):$ele.attr("uiid",id),""!=options.sourceId&&(options.tpl=$("#"+options.sourceId).html()),options.template=Handlebars.compile(options.tpl),options.initial=!0)},_init:function(){var self=this,options=self.options,$ele=self.element,str=$ele.html(),regex=/{{.*?[}]?}}/g,newHtml=str.replace(regex,"");options.isHide?$ele.empty():($ele.html(newHtml),$ele.removeClass("ae_tpl"),$ele.show())},_buildOptions:function(options,element){options.tpl=element.html(),options.dataField=element.attr("dataField")||options.dataField,options.isHide="true"==element.attr("isHide")?!0:options.isHide,options.sourceId=element.attr("sourceId")||options.sourceId,options.aeType=element.attr("aeType"),options.uiid=element.attr("uiid"),options.forceInit="false"==element.attr("forceInit")?!1:options.forceInit;var onAfterReload=element.attr("onAfterReload");options.onAfterReload=onAfterReload?function(event){if($.isString(onAfterReload)){var i=onAfterReload.indexOf("("),actName=i>0?onAfterReload.substring(0,i):onAfterReload,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}}:""},_reload:function(data,obj){var options=this.options,$ele=this.element,template=options.template;obj?obj.html(template(data)):$ele.html(template(data))},_getInitFunction:function(data,obj){var $ele=this.element,options=this.options,initFuncs,aeTypes,initFuncArray=[];obj?(initFuncs=obj.find("[initFunction]"),aeTypes=obj.find("*[aeType]")):(initFuncs=$ele.find("[initFunction]"),aeTypes=$ele.find("*[aeType]")),initFuncs&&initFuncs.length&&($.each(initFuncs,function(index,item){var initFunction=$(item).attr("initFunction");if(initFunction.length){var i=initFunction.indexOf("(");if(funcName=i>0?initFunction.substring(0,i):initFunction,"$"==funcName||funcName.indexOf(".")>0)initFuncArray.push(initFunction);else{var func="return window."+funcName+"?"+funcName+".call(window):false";func=new Function(func)(),0==func&&initFuncArray.push(initFunction)}}}),initFuncArray.length>0&&eval(initFuncArray.join(";"))),aeTypes.length&&$.each(aeTypes,function(index,item){if(!$(item).attr("initFunction"))if(options.forceInit)$(item)[$(item).attr("aeType")](),$(item).attr("aeInit","false");else{var aeInit=$(item).attr("aeInit");aeInit&&"true"==aeInit&&($(item)[$(item).attr("aeType")](),$(item).attr("aeInit","false"))}})},reload:function(data,obj,callback){var options=this.options,$ele=this.element;data&&(this._reload(data,obj),this._getInitFunction(data,obj),options.isHide||($ele.removeClass("ae_tpl"),$ele.show()),callback&&$.isFunction(callback)?callback():options.onAfterReload&&this._trigger("onAfterReload"))},getData:function(object){var options=this.options,$ele=this.element,obj={},keyValueObj=$ele.find("*[dataField]");if(keyValueObj&&$.each(keyValueObj,function(index,item){var dataField=$(item).attr("dataField");if($(item).attr("value")){var value=$(item).attr("value");obj=$.aries.common.buildUiidData(obj,dataField,value)}else if($(item).text()){var value=$(item).text();obj=$.aries.common.buildUiidData(obj,dataField,value)}}),void 0==object){if(options.dataField){var objw={};obj=$.aries.common.buildUiidData(objw,options.dataField,obj)}return obj}return object=$.aries.common.buildUiidData(object,options.dataField,obj)}})}),define("ui-messagebox",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aries.messagebox={initCount:0,_init:function(){var msgBoxHtml=[];msgBoxHtml.push('<div id="messagebox_div_'+$.aries.messagebox.initCount+'" style="display: none;">'),msgBoxHtml.push('  <i class="icon-info"></i>'),msgBoxHtml.push('  <h3 class="modal-title"></h3>'),msgBoxHtml.push("  <p></p>"),msgBoxHtml.push("</div>"),$(document.body).append(msgBoxHtml.join("")),msgBoxHtml=[],msgBoxHtml=null},_show:function(settings){$.aries.messagebox._init();var s=$.extend({},settings),obj=($.extend({},s.buttons),$("#messagebox_div_"+$.aries.messagebox.initCount)),title=obj.find(">h3.modal-title"),content=title.next();s.title&&title.html(s.title),s.content?content.html(s.content):("alert"===s.type&&content.html($.ae.messagebox.alert),"confirm"===s.type&&content.html($.ae.messagebox.confirm),"success"===s.type&&content.html($.ae.messagebox.success),"error"===s.type&&content.html($.ae.messagebox.error));var str=$.extend(!0,{},$.extend({draggable:!1,resizable:!1,showClose:!0,showButton:!0,modal:!0},s.settings)),cfg={autoOpen:!0,modal:str.modal,width:str.width||"500",height:str.height||"auto",draggable:str.draggable,resizable:str.resizable,showClose:str.showClose,showButton:str.showButton,componentType:"message",messageType:s.type,close:function(){$.aries.messagebox.initCount--}};obj.aeDialog(cfg),obj.next().find(">button.btn-primary").off().on("click",function(){var ret;s.fn&&$.isFunction(s.fn)&&(ret=s.fn()),!1!==ret&&obj.aeDialog("close")}),$.aries.messagebox.initCount++},alert:function(title,content,fn,settings){$.aries.messagebox._show({type:"alert",title:title||"Warning!",content:content,fn:fn,settings:settings})},success:function(title,content,fn,settings){$.aries.messagebox._show({type:"success",title:title||"Success!",content:content,fn:fn,settings:settings})},error:function(title,content,fn,settings){$.aries.messagebox._show({type:"error",title:title||"Error!",content:content,fn:fn,settings:settings})},confirm:function(title,content,fn,settings){$.aries.messagebox._show({type:"confirm",title:title||"Info!",content:content,fn:fn,settings:settings})}},$.ae.messagebox={alert:"Operation error!",success:"Operation successed!",error:"Operation failed!",confirm:"Are you sure you want to operate?"},"undefined"==typeof $.message&&($.message={}),$.message.alert=$.aries.messagebox.alert,$.message.success=$.aries.messagebox.success,$.message.error=$.aries.messagebox.error,$.message.confirm=$.aries.messagebox.confirm}),define("ui-slider",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeSlider",{options:{cssPre:"c_",width:"500px",height:"400px",autoPlay:!0,autoPlayTime:3e3,animSpeed:400,delayTime:200,pauseOnHover:!0,isDirectionIcon:!0,isNavigation:!0,navigationType:"num",isNavigationInimg:!0,animEffect:"fade",onBeforeSlide:function(index){},onAfterSlide:function(index){},initType:"html"},_create:function(){var self=this,options=this.options,$ele=this.element,id=$ele.attr("id"),vars={startSlide:0,nowSlide:0,totalSlides:0,running:!1,paused:!1,stop:!1,selectedNavStyle:"nav-selected"};id&&$ele.attr("aeId",id),options.vars=vars,vars.pre=options.cssPre,"html"==options.initType&&self._buildOptions(options,$ele);var imgs=$ele.children();vars.totalSlides=imgs.length,vars.width=$ele.attr("width"),vars.height=$ele.attr("height"),(void 0===vars.width||void 0===vars.height)&&$ele.find("img").each(function(index,item){if($(item).attr("src")){var src=$(item).attr("src");$(item).attr("src",src).load(function(){vars.width=this.width,vars.height=this.height})}}),options.width=vars.width?vars.width:options.width,options.height=vars.height?vars.height:options.height,$ele.width(options.width).height(options.height),options.thumbW=parseInt(options.width)/10+"px",options.thumbH=parseInt(options.height)/10+"px",$('img[name="thumbImgs"]')&&$('img[name="thumbImgs"]').each(function(index,item){$(item).attr({width:options.thumbW,height:options.thumbH})}),$ele.addClass(vars.pre+"slider"),(void 0!==options.diyNavigationId||void 0!==$("#"+options.diyNavigationId))&&($("#"+options.diyNavigationId).wrap('<div class="temp"></div>'),options.vars.diyNavHtml=$(".temp").html(),$(".temp").remove()),$ele.children().wrapAll('<ul class="'+vars.pre+'slider-content"></ul>').wrap('<li class="'+vars.pre+'slider-item"></li>'),("slide-y"==options.animEffect||"slide-x"==options.animEffect)&&$ele.find("."+vars.pre+"slider-content").addClass(vars.pre+"slider-effect-"+options.animEffect);
},_init:function(){var self=this,options=this.options,$ele=this.element,vars=options.vars,timer=0,$container=$ele.find("ul."+vars.pre+"slider-content:first"),$item=$container.children(),top=0,left=0;1==options.isNavigation&&self._initNavigation($ele),"slide-x"==options.animEffect?($item.each(function(n){return 0==n?!1:void(left-=$(this).width())}),setTimeout(function(){$container.css({left:left,top:top})},0)):"slide-y"==options.animEffect?($item.each(function(n){return 0==n?!1:void(top-=$(this).height())}),setTimeout(function(){$container.css({left:left,top:top})},0)):$container.children().eq(0).show(),vars.navigationStyle&&self._toggleNavigationStyle($ele,0),options.autoPlay&&(vars.autoPlayTimer=timer=setInterval(function(){self._next($ele)},options.autoPlayTime)),options.pauseOnHover&&$ele.hover(function(){vars.paused=!0,clearInterval(timer)},function(){vars.paused=!1,options.autoPlay&&(vars.autoPlayTimer=timer=setInterval(function(){self._next($ele)},options.autoPlayTime))}),1==options.isDirectionIcon&&self._initDirectionIcon($ele)},_buildOptions:function(options,element){options.autoPlay="false"==element.attr("isAutoPlay")?!1:options.autoPlay,options.autoPlayTime=element.attr("autoPlayTime")||options.autoPlayTime,options.animSpeed=element.attr("animSpeed")||options.animSpeed,options.delayTime=element.attr("delayTime")||options.delayTime,options.pauseOnHover="false"==element.attr("pauseOnHover")?!1:options.pauseOnHover,options.isDirectionIcon="false"==element.attr("isDirectionIcon")?!1:options.isDirectionIcon,options.isNavigation="false"==element.attr("isNavigation")?!1:options.isNavigation,options.navigationType=element.attr("navigationType")||options.navigationType,options.isNavigationInimg="false"==element.attr("isNavigationInimg")?!1:options.isNavigationInimg,options.animEffect=element.attr("animEffect")||options.animEffect,1==options.isNavigation&&"diy"==options.navigationType&&(options.diyNavigationId=element.attr("diyNavigationId"));var onBeforeSlide=element.attr("onBeforeSlide");options.onBeforeSlide=onBeforeSlide?function(index,event){if($.isString(onBeforeSlide)){var i=onBeforeSlide.indexOf("("),actName=i>0?onBeforeSlide.substring(0,i):onBeforeSlide,func="return window."+actName+"?"+actName+".call(window,i,e):false;";return new Function("i","e",func)(index,event)}}:options.onBeforeSlide;var onAfterSlide=element.attr("onAfterSlide");options.onAfterSlide=onAfterSlide?function(index,event){if($.isString(onAfterSlide)){var i=onAfterSlide.indexOf("("),actName=i>0?onAfterSlide.substring(0,i):onAfterSlide,func="return window."+actName+"?"+actName+".call(window,i,e):false;";return new Function("i","e",func)(index,event)}}:options.onAfterSlide},_initNavigation:function($ele){var n,self=this,options=this.options,vars=options.vars;if("num"===options.navigationType){var $nav=$('<ul class="'+vars.pre+'slider-nav-classical"></ul>');for(vars.navigationStyle="."+vars.pre+"slider-nav-classical",n=0;n<vars.totalSlides;n++){var $navItem=$("<li>"+(n+1)+"</li>");$navItem.data("sid",n);var hTimer=0;$navItem.click(function(){self._slideTo($ele,$(this).data("sid"))}),$navItem.hover(function(){if(vars.running||vars.stop)return!1;var _self=$(this);return _self.hasClass(vars.selectedNavStyle)?!1:void(vars.slideTimer=hTimer=setTimeout(function(){self._slideTo($ele,_self.data("sid"))},options.delayTime))},function(){clearTimeout(hTimer)}),$nav.append($navItem)}$ele.append($nav),0==options.isNavigationInimg&&$nav.css({bottom:"-50px"})}else if("dot"===options.navigationType){var $nav=$('<div class="'+vars.pre+'slider-nav-dot"></div>');for(vars.navigationStyle="."+vars.pre+"slider-nav-dot",n=0;n<vars.totalSlides;n++){var $navItem=$('<a href="javascript:void(0)">'+(n+1)+"</a>");$navItem.data("sid",n);var hTimer=0;$navItem.click(function(){self._slideTo($ele,$(this).data("sid"))}),$navItem.hover(function(){if(vars.running||vars.stop)return!1;var _self=$(this);return _self.hasClass(vars.selectedNavStyle)?!1:void(vars.slideTimer=hTimer=setTimeout(function(){self._slideTo($ele,_self.data("sid"))},options.delayTime))},function(){clearTimeout(hTimer)}),$nav.append($navItem)}$nav.appendTo($ele).css({marginLeft:-1*$nav.width()/2}),0==options.isNavigationInimg&&$nav.css({bottom:"-50px"})}else if("thumb"==options.navigationType){var $container=$ele.find("ul."+vars.pre+"slider-content:first"),$item=$container.children(":first"),$nav=$('<ul class="'+vars.pre+'slider-nav-thumb"></ul>');for(vars.navigationStyle="."+vars.pre+"slider-nav-thumb",n=0;n<vars.totalSlides;n++){$imgItem=$item.find("img");var thumbSrc=$imgItem.attr("src"),w=options.thumbW||"60px",h=options.thumbH||"40px",$navItem=$('<li><img name="thumbImgs" width="'+w+'" height="'+h+'" src="'+thumbSrc+'"/></li>');$navItem.data("sid",n);var hTimer=0;$navItem.click(function(){self._slideTo($ele,$(this).data("sid"))}),$navItem.hover(function(){if(vars.running||vars.stop)return!1;var _self=$(this);return _self.hasClass(vars.selectedNavStyle)?!1:void(vars.slideTimer=hTimer=setTimeout(function(){self._slideTo($ele,_self.data("sid"))},options.delayTime))},function(){clearTimeout(hTimer)}),$nav.append($navItem),$item=$item.next()}$ele.append($nav),0==options.isNavigationInimg&&$nav.css({bottom:"-50px"})}else if("diy"==options.navigationType||vars.diyNavHtml){var diyId=options.diyNavigationId;$ele.append(vars.diyNavHtml),vars.navigationStyle="."+$("#"+diyId).attr("class");var $nav=$("#"+diyId),$navItem=$nav.children(":first");for(n=0;n<vars.totalSlides;n++){$navItem.data("sid",n);var hTimer=0;$navItem.click(function(){self._slideTo($ele,$(this).data("sid"))}),$navItem.hover(function(){if(vars.running||vars.stop)return!1;var _self=$(this);return _self.hasClass(vars.selectedNavStyle)?!1:void(vars.slideTimer=hTimer=setTimeout(function(){self._slideTo($ele,_self.data("sid"))},options.delayTime))},function(){clearTimeout(hTimer)}),$navItem=$navItem.next()}}},_toggleNavigationStyle:function($ele,index){var options=this.options,vars=options.vars,navItems=$ele.find(vars.navigationStyle).children();navItems.each(function(n){$(this).toggleClass(vars.selectedNavStyle,n==index)})},_initDirectionIcon:function($ele){var self=this,options=this.options,vars=options.vars,directionNav=$('<div class="'+vars.pre+'slider-directionNav">').appendTo($ele);$('<a class="'+vars.pre+'slider-prevNav"></a>').appendTo(directionNav).click(function(){return vars.running?!1:void self._prev($ele)}),$('<a class="'+vars.pre+'slider-nextNav"></a>').appendTo(directionNav).click(function(){return vars.running?!1:void self._next($ele)}),$ele.hover(function(){directionNav.show()},function(){directionNav.hide()})},_slideTo:function($ele,index){var self=this,options=this.options,vars=options.vars;$ele.find("ul."+vars.pre+"slider-content:first");return isNaN(index)||0>index||index>=vars.totalSlides?void 0:this._trigger("onBeforeSlide",null,index)===!1?!1:(("slide-x"==options.animEffect||"slide-y"==options.animEffect)&&self._runSlideEffect($ele,index),"fade"==options.animEffect&&self._runFadeEffect($ele,index),vars.navigationStyle&&self._toggleNavigationStyle($ele,index),vars.nowSlide=index,$ele)},_runSlideEffect:function($ele,index,animEffect){var _self=this,options=this.options,vars=options.vars,$container=$ele.find("ul."+vars.pre+"slider-content:first"),$item=$container.children(),top=0,left=0,animEffectnow=animEffect?animEffect:options.animEffect;if($container.stop(),"slide-y"!=animEffectnow&&"slide-x"!=animEffectnow)return!1;var slideY="slide-y"==animEffectnow;$item.each(function(n){return n==index?!1:void(slideY?top-=$(this).height():left-=$(this).width())}),vars.running=!0,$container.animate({top:top,left:left},options.animSpeed,function(){vars.running=!1,_self._trigger("onAfterSlide",null,index)})},_runFadeEffect:function($ele,index){var _self=this,options=this.options,vars=options.vars,items=$ele.find("ul."+vars.pre+"slider-content:first").children();items.each(function(n){var $child=$(this);n==index?(vars.running=!0,$child.fadeIn(options.animSpeed,function(){vars.running=!1,_self._trigger("onAfterSlide",null,index)})):n==vars.nowSlide&&$child.fadeOut(options.animSpeed)})},_next:function($ele){var options=this.options,vars=options.vars,next_index=0;return vars.nowSlide+2<=vars.totalSlides&&(next_index=vars.nowSlide+1),this._slideTo($ele,next_index)},_prev:function($ele){var options=this.options,vars=options.vars,index=vars.totalSlides-1;return 0!=vars.nowSlide&&(index=vars.nowSlide-1),this._slideTo($ele,index)},slideTo:function(index){options=this.options,this._slideTo(this.element,index)},next:function(){options=this.options,this._next(this.element)},prev:function(){options=this.options,this._prev(this.element)},destroy:function(){var options=(this.element,this.options),vars=options.vars;clearTimeout(vars.slideTimer),clearInterval(vars.autoPlayTimer)}})}),define("ui-popup",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aries.popup={initCount:0,type:"",_popupSettings:function(popupTitle,popupWidth,popupHeight,ss){return{autoOpen:!0,modal:ss.modal,width:popupWidth||"800",height:popupHeight||"auto",title:popupTitle||"",popupType:ss.popupType||"",draggable:ss.draggable,resizable:ss.resizable,showClose:ss.showClose,showButton:ss.showButton,elementId:ss.elementId,componentType:ss.showTitle?"":"message",beforeClose:$.aries.popup._buildEvent(ss.onBeforeClose),close:$.aries.popup._buildEvent(ss.onClose,!0),confirm:$.aries.popup._buildEvent(ss.onConfirm),afterInit:ss.afterInit}},_buildEvent:function(param,flag){var obj="",array=$.aries.page.data._paramArray,_privateArray=$.aries.page.data._privateArray;return param?obj=function(event){flag&&(array.length>0?array.pop():$.aries.page.data._removeHidedData("ae_popup_Id"),$.aries.page.data._removeHidedData("ae_popup_param"),"page"===$.aries.popup.type&&$.aries.popup.initCount--,$.isArray(_privateArray)&&_privateArray.length>0&&_privateArray.pop());var i=param.indexOf("("),actName=i>0?param.substring(0,i):param,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}:flag&&(obj=function(){array.length>0?array.pop():$.aries.page.data._removeHidedData("ae_popup_Id"),$.aries.page.data._removeHidedData("ae_popup_param"),"page"===$.aries.popup.type&&$.aries.popup.initCount--,$.isArray(_privateArray)&&_privateArray.length>0&&_privateArray.pop()}),obj},openPage:function(popupSource,popupParam,popupTitle,popupWidth,popupHeight,settings){var ss=$.extend(!0,{},$.extend({modal:!0,draggable:!1,resizable:!1,showClose:!0,showButton:!0,cache:!1,elementId:"ae_popup_div_"+$.aries.popup.initCount,showTitle:!0},settings));if(popupSource){var cfg=$.aries.popup._popupSettings(popupTitle,popupWidth,popupHeight,ss);popupParam&&$.aries.page.data._setHidedData("ae_popup_param",popupParam),$.ajax(popupSource,{cache:ss.cache,success:function(data,textStatus,jqXHR){$('<div id="ae_popup_div_'+$.aries.popup.initCount+'"></div>').appendTo(document.body),$("#ae_popup_div_"+$.aries.popup.initCount).aeDialog(cfg);var obj=$.extend(!0,{},$.extend({elementId:"ae_popup_div_"+$.aries.popup.initCount},ss));if($.aries.page.data._paramArray.push(obj),$.aries.page.data._setHidedData("ae_popup_Id",$.aries.page.data._paramArray),$("#ae_popup_div_"+$.aries.popup.initCount).html(data),"function"==typeof $.popupConfirmEvent){var array=$.aries.page.data._privateArray;array.push($.popupConfirmEvent)}$.aries.common.globalInit("ae_popup_div_"+$.aries.popup.initCount),$.aries.popup.type="page",$.aries.popup.initCount++},error:function(jqXHR,textStatus,errorThrown){}})}},openDiv:function(popupSource,popupTitle,popupWidth,popupHeight,settings){var ss=$.extend(!0,{},$.extend({modal:!0,draggable:!1,resizable:!1,showClose:!0,showButton:!0,popupType:"div",elementId:popupSource,showTitle:!0},settings));if(popupSource){var cfg=$.aries.popup._popupSettings(popupTitle,popupWidth,popupHeight,ss);if(ss.initAfterAction){var i=ss.initAfterAction.indexOf("("),actName=i>0?ss.initAfterAction.substring(0,i):ss.initAfterAction,func="return window."+actName+"?"+actName+".call(window):false;";new Function(func)()}$("#"+popupSource).aeDialog(cfg);var obj=$.extend(!0,{},$.extend({elementId:popupSource},ss));$.aries.page.data._paramArray.push(obj),$.aries.page.data._setHidedData("ae_popup_Id",$.aries.page.data._paramArray),$.aries.popup.type="div"}},closePage:function(json){var paramArray=$.aries.page.data._getHidedData("ae_popup_Id");if($.isArray(paramArray)&&!(paramArray.length<0)){var ss=paramArray[paramArray.length-1];$("#"+ss.elementId).aeDialog("close");var afterAction=ss.afterAction;if(json&&afterAction){var i=afterAction.indexOf("("),actName=i>0?afterAction.substring(0,i):afterAction,func="return window."+actName+"?"+actName+".call(window,j):false;";new Function("j",func)(json)}}},closeDiv:function(json){var paramArray=$.aries.page.data._getHidedData("ae_popup_Id");if($.isArray(paramArray)&&!(paramArray.length<0)){var ss=paramArray[paramArray.length-1];$("#"+ss.elementId).aeDialog("close");var afterAction=ss.afterAction;if(json&&afterAction){var i=afterAction.indexOf("("),actName=i>0?afterAction.substring(0,i):afterAction,func="return window."+actName+"?"+actName+".call(window,j):false;";new Function("j",func)(json)}}},getParam:function(){return $.aries.page.data._getHidedData("ae_popup_param")||""},setParam:function(data){return $.aries.page.data._setHidedData("ae_popup_param",data)}},$.openPopupPage=$.aries.popup.openPage,$.closePopupPage=$.aries.popup.closePage,$.openPopupDiv=$.aries.popup.openDiv,$.closePopupDiv=$.aries.popup.closeDiv,$.getPopupParam=$.aries.popup.getParam,$.setPopupParam=$.aries.popup.setParam}),define("ui-tips",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeTips",{options:{showLink:!0,showClose:!0,showType:"alert",initType:"html"},_create:function(){var opts=this.options,$ele=this.element,id=$ele.attr("id");id&&$ele.attr("aeId",id),"html"==opts.initType&&this._buildOptions(opts,$ele),$ele.addClass("alert"),$('<i class="icon-close pull-right"></i>').appendTo($ele)},_init:function(){var self=this,opts=self.options,$ele=self.element,deleteObj=$ele.find(">i");opts.content&&$ele.prepend(opts.content),opts.showClose||deleteObj.hide(),"alert"===opts.showType&&$ele.addClass("alert-warning"),"success"===opts.showType&&$ele.addClass("alert-success"),"error"===opts.showType&&$ele.addClass("alert-danger"),"confirm"===opts.showType&&$ele.addClass("alert-info"),deleteObj.on("click",function(){$ele.hide()})},_buildOptions:function(options,element){options.content=$.evalI18nString(element.attr("content")),options.showClose="false"==element.attr("showClose")?!1:options.showClose,options.showType=element.attr("showType")||options.showType},setContent:function(content){if(content){var $ele=this.element;$ele.html(content),$('<i class="icon-close pull-right"></i>').appendTo($ele),$ele.find(">i").on("click",function(){$ele.hide()})}}})}),define("ui-toggle",function(require,exports,moudle){$.aeWidget("ae.aeToggle",{options:{initType:"html",textOn:"ON",textOff:"OFF",onOff:"on",animate:250,width:65,height:25,event:"toggle",color:"default"},_create:function(){var self=this,options=self.options,$ele=self.element,id=$ele.attr("id");id&&$ele.attr("aeId",id),"html"==options.initType&&(this._buildOptions(options,$ele),self.selectType="select"===options.type,$ele.addClass("inline-block toggle toggle-"+options.color))},_init:function(){var width,height,self=this,options=self.options,$ele=self.element;$ele.height(height=options.height),$ele.width(width=options.width),self.h=height,self.w=width;var div=function(name){return $('<div class="toggle-'+name+'">')};self.els={slide:div("slide"),inner:div("inner"),on:div("on"),off:div("off"),blob:div("blob")};var halfHeight=height/2,onOffWidth=width-halfHeight,isSelect=self.selectType;self.els.on.css({height:height,width:onOffWidth,textIndent:isSelect?"":-halfHeight,lineHeight:height+"px"}).html(options.textOn),self.els.off.css({height:height,width:onOffWidth,marginLeft:isSelect?"":-halfHeight,textIndent:isSelect?"":halfHeight,lineHeight:height+"px"}).html(options.textOff),self.els.blob.css({height:height,width:height,marginLeft:-halfHeight}),self.els.inner.css({width:2*width-height,marginLeft:isSelect||self.active?0:-width+height}),self.selectType&&(self.els.slide.addClass("toggle-select"),$ele.css("width",2*onOffWidth),self.els.blob.hide()),self.els.inner.append(self.els.on,self.els.blob,self.els.off),self.els.slide.html(self.els.inner),$ele.html(self.els.slide),"on"===options.onOff?self.active="off":self.active="on",$ele.on("click",function(e){e.target!==self.els.blob[0]&&(self.toggle(),options.onValueChange&&options.onValueChange&&self._trigger("onValueChange",null,e))}),self.toggle(options.onOff,!0,!0)},toggle:function(state,noAnimate,noEvent){var self=this,options=self.options,$ele=self.element;if(self.active!==state){var active=self.active="on"===self.active?"off":"on";if(self.els.off.toggleClass("active","on"!==active),self.els.on.toggleClass("active","on"===active),options.onOff=active,noEvent||$ele.trigger(options.event,active),!self.selectType){var margin="on"===active?0:-parseInt(self.w)+parseInt(self.h);self.els.inner.stop().animate({marginLeft:margin},noAnimate?0:options.animate)}}},_buildOptions:function(options,element){options.aeType=element.attr("aeType")||"aeToggle",options.textOn=element.attr("textOn")||options.textOn,options.textOff=element.attr("textOff")||options.textOff,options.onOff=element.attr("onOff")||options.onOff,options.animate=element.attr("animate")||options.animate,options.width=element.attr("width")||options.width,options.height=element.attr("height")||options.height,options.color=element.attr("color")||options.color;var onValueChange=element.attr("onValueChange");options.onValueChange=onValueChange?function(event){if($.isString(onValueChange)){var i=onValueChange.indexOf("("),actName=i>0?onValueChange.substring(0,i):onValueChange,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}}:""},getValue:function(){var self=this;return self.options.onOff},setValue:function(value){var self=this,options=self.options;("on"===value||"off"===value)&&(options.onOff=value,self.toggle(value,!0,!0))}})}),define("ui-include",function(require,exports,moudles){"require:nomunge,exports:nomunge,moudles:nomunge";$.aeWidget("ae.aeInclude",{options:{_initial:!1,initType:"html"},_create:function(){var ops=this.options,ele=this.element,id=ele.attr("id");ops._initial||(ops._initial=!0,id&&ele.attr("aeId",id),"html"==ops.initType&&this._buildOptions(ops,ele))},_init:function(){var ops=this.options,ele=this.element;ops.url&&$.includeHtml(ele,ops.url,ops.callback)},_buildOptions:function(options,ele){options.id=ele.attr("id")||"",options.aeType=ele.attr("aeType")||"aeInclude",options.url=ele.attr("url")||"",options.callback=ele.attr("callback")||void 0;var callback=options.callback;options.callback=callback?function(event){if($.isString(callback)){if("$"!=callback.substring(0,1)){var i=callback.indexOf("("),actName=i>0?callback.substring(0,i):callback,func="return window."+actName+"?"+actName+".call(window,e):false;";return new Function("e",func)(event)}eval(callback)}}:void 0}})});