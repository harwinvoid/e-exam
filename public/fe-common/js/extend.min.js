define(function(e,t,i){e("ui-blocklist");e("ui-pagination");e("ui-selectgroup");e("ui-logicblock");e("ui-notice");e("ui-htree")});define("ui-pagination",function(e,t,i){$.ae.lang.aePagination={firstPageTipText:"First",lastPageTipText:"Last",prePageTipText:"Prev",nextPageTipText:"Next",totalRecordsBeforeText:"Total"};$.aeWidget("ae.aePagination",{options:{initType:"html",totalRecords:0,pageSize:10,align:"right",currentPage:1,isShowPageSizeCombo:true,isShowFirstLastBtn:false,isShowPreNextBtn:true,isShowTotalPage:false,isShowCurrPage:false,isShowTotalRecords:false,isMinPagination:false,onPageChange:$.noop,onComboChange:$.noop},_create:function(){var e=this,t=e.options,i=e.element,n=i.attr("id");if(n){i.attr("aeId",n)}if(t.initType=="html"){i.addClass("wrapper clearfix");e._buildOptions(t,i)}},_buildOptions:function(e,t){e.aeType=t.attr("aeType")||"aePagination";e.totalRecords=t.attr("totalRecords")||e.totalRecords;e.currentPage=t.attr("currentPage")||e.currentPage;e.pageSize=t.attr("pageSize")||e.pageSize;e.isShowPageSizeCombo=t.attr("isShowPageSizeCombo")||e.isShowPageSizeCombo;e.isShowFirstLastBtn=t.attr("isShowFirstLastBtn")||e.isShowFirstLastBtn;e.isShowPreNextBtn=t.attr("isShowPreNextBtn")||e.isShowPreNextBtn;e.isShowTotalPage=t.attr("isShowTotalPage")||e.isShowTotalPage;e.isShowCurrPage=t.attr("isShowCurrPage")||e.isShowCurrPage;e.isShowTotalRecords=t.attr("isShowTotalRecords")||e.isShowTotalRecords;e.isGoPage=t.attr("isGoPage")||e.isGoPage;e.onPageChange=t.attr("onPageChange")||e.onPageChange;e.align=t.attr("align")||e.align},reload:function(e){$.extend(true,this.options,e);this._generPageHtml(this.options)},_generPageHtml:function(e){var t=this,i,n,r=$.ae.lang.aePagination;e.currentPage=parseInt(e.currentPage)||1;var a=e.totalRecords%e.pageSize?Math.ceil(e.totalRecords/e.pageSize):e.totalRecords/e.pageSize;e.totalPage=a;if(!e.totalPage){t.element.empty();return false}e.prv=e.currentPage<=2?1:e.currentPage-1;e.next=e.currentPage>=e.totalPage-1?e.totalPage:e.currentPage+1;e.hasPrv=e.currentPage>1;e.hasNext=e.currentPage<e.totalPage;var o="",s="",l="",d="";if(e.isShowFirstLastBtn){if(e.hasPrv){o="<li><a "+this._getHandlerStr(1)+' title="'+r.firstPageTipText+'"><<</a></li>'}else{o='<li class="disabled"><a href="javascript:void(0)" title="'+r.firstPageTipText+'"><<</a></li>'}if(e.hasNext){d="<li><a "+this._getHandlerStr(e.totalPage)+' title="'+r.lastPageTipText+'">>></a></li>'}else{d='<li class="disabled" title="'+r.lastPageTipText+'"><a href="javascript:void(0)">>></a></li>'}}if(e.isShowPreNextBtn){if(e.hasPrv){s="<li><a "+this._getHandlerStr(e.prv)+' title="'+r.prePageTipText+'"><</a></li>'}else{s='<li class="disabled" title="'+r.prePageTipText+'"><a href="javascript:void(0)"><</a></li>'}if(e.hasNext){l="<li><a "+this._getHandlerStr(e.next)+' title="'+r.nextPageTipText+'">></a></li>'}else{l='<li class="disabled"><a href="javascript:void(0)" title="'+r.nextPageTipText+'">></a></li>'}}var c="";var u='<li class="dot"><a href="javascript:void(0)">...</a></li>';if(e.isMinPagination){c='<li class="active"><a href="javascript:void(0)">'+e.currentPage+"</a></li>"}else{if(e.totalPage<=8){for(i=1;i<=e.totalPage;i++){if(e.currentPage==i){c+='<li class="active"><a href="javascript:void(0)">'+i+"</a></li>"}else{c+="<li><a "+this._getHandlerStr(i)+">"+i+"</a></li>"}}}else{if(e.currentPage<=5){for(i=1;i<=6;i++){if(e.currentPage==i){c+='<li class="active"><a href="javascript:void(0)">'+i+"</a></li>"}else{c+="<li><a "+this._getHandlerStr(i)+">"+i+"</a></li>"}}c+=u;c+="<li><a "+this._getHandlerStr(e.totalPage)+">"+e.totalPage+"</a></li>"}else{c+="<li><a "+this._getHandlerStr(1)+">1</a></li>";c+=u;var h=e.currentPage-2;var f=e.currentPage+2;if(f>e.totalPage){f=e.totalPage;h=f-4;if(e.currentPage-h<2){h=h-1}}else if(f+1==e.totalPage){f=e.totalPage}for(i=h;i<=f;i++){if(e.currentPage==i){c+='<li class="active"><a href="javascript:void(0)">'+i+"</a></li>"}else{c+="<li><a "+this._getHandlerStr(i)+">"+i+"</a></li>"}}if(f!=e.totalPage){c+=u}if(f!=e.totalPage){c+="<li><a "+this._getHandlerStr(e.totalPage)+">"+e.totalPage+"</a></li>"}}}}var p='<ul class="pagination m-n pull-right">';p+=o+s+c+l+d;p+="</ul>";var v="",m,g,b;if(e.isShowPageSizeCombo){m=true;g=this.element.attr("id")+"_PageSize";b=g.replace(/-/g,"_");if(typeof e.onComboChange=="function"){v='<div class="pull-left m-r-sm"><span onValueChange="'+b+'" aeType="aeCombo" id="'+g+'" aeInit="true"width="100"></span></div>'}else{v='<div class="pull-left m-r-sm"><span aeType="aeCombo" id="'+g+'" aeInit="true"width="100"></span></div>'}}var y="";if(e.isShowTotalRecords){y+='<div class="pull-left m-n text-light" style="line-height:32px;">'+r.totalRecordsBeforeText+":"+e.totalRecords+"</div>"}v+=y;v+=p;this.element.addClass("text-"+e.align).html(v);if(m){var w;var C=[{text:"5 Items",value:"5"},{text:"10 Items",value:"10"},{text:"15 Items",value:"15"}];for(n in C){if(C[n].value==e.pageSize){w=true;break}}if(!w){C.unshift({text:e.pageSize+" Items",value:e.pageSize})}if(typeof e.onComboChange=="function"){window[b]=function(){var i=$("#"+g).aeCombo("getValue");t.options.pageSize=i;t.options.currentPage="1";e.onComboChange.call(t,t.options.currentPage,i);t.setTotalRecords(t.options.totalRecords)}}$("#"+g).aeCombo("reload",C);$("#"+g).aeCombo("setDefault",e.pageSize)}this.element.find("li:not(.disabled,.active,.dot)").on("click",function(){t.selectPage($(this).children().attr("data-value"));t.options.onPageChange.call(t,$(this).children().attr("data-value"),e.pageSize)})},_getHandlerStr:function(e){return'href="javascript:void(0)" data-value='+e},selectPage:function(e){this.options.currentPage=e},setTotalRecords:function(e){this.options.totalRecords=e;this._generPageHtml(this.options)},getPageSize:function(){return this.options.pageSize}})});define("ui-blocklist",function(e,t,i){function n(e,t,i){var n,r;if($.isArray(e)){n=e.length;r=(t-1)*i;return e.slice(r,r+i)}return null}$.aeWidget("ae.aeBlocklist",{options:{mutiSelect:false,col:"1",columnHeadId:"",pagingConfig:{},selectedRowStyle:"",traceRowStyle:"",showEmpty:false,showException:false,emptyTipMsg:"data",tpl:"",template:null,localPagination:false},_create:function(){var e=this.options,t=this.element,i=t.attr("id");if(i){t.attr("aeId",i)}t.attr("aeInit",false);this._source=null;this._buildOptions(e,t);this._rebuildSkeleton();this._loadColumnHead();this._createEmptyBrand()},_hdLocalPageChange:function(e,t){var i=parseInt(e,10),r=n(this._source,i,parseInt(t,10)),a=$("#"+this.options.pagingConfig.id),o;this.clear();o=a.aePagination("option");o.currentPage=i;a.aePagination("reload",o);this._reload(r,this.options)},_loadColumnHead:function(){var e=this.options,t,i;if(e.columnHeadId){t=$("#"+e.columnHeadId);if(t.length>0){i=this.element.find("[data-role='column-head-container']");if(i.children().length===0){i.append(t)}}}},_createExceptionBrand:function(){var e=this.element,t;if(e.find("[data-role='exceptionBrand']").length===0){t=$('<div data-role="exceptionBrand" style="display: none;width:100%" class="text-center padder-v-lg m-t-xl m-b-lg bg-white text-muted"> <i class="md-warning icon-xl"></i><p class="text-md">Data error.</p></div>');t.appendTo(e)}},_showExceptionBrand:function(){if(this.options.showException){this.element.find("[data-role='exceptionBrand']").fadeIn()}},_hideExceptionBrand:function(){this.element.find("[data-role='exceptionBrand']").stop().hide()},_reload:function(e){var t=this.element,i,n=this.options,r=e,a;this._hideExceptionBrand();this._hideEmptyBrand();this._rebuildSkeleton();this._loadColumnHead();if(!r){this._createEmptyBrand();this._showEmptyBrand();return false}if(!$.isArray(r)){this._createExceptionBrand();this._showExceptionBrand();return false}return this._generator(r)},_reloadPagination:function(e){var t=$.extend({},e),i;if(this.options.localPagination===true){i=$.proxy(this._hdLocalPageChange,this);t.onPageChange=i;t.onComboChange=i}if($("#"+e.id).length===0){this.element.after('<div style="clear:both"></div><div id="'+e.id+'" aeType="aePagination" aeInit="true"></div>')}$("#"+e.id).aePagination("reload",t)},_rebuildSkeleton:function(){var e=this.element;if(this.options.columnHeadId){if(e.find(".block-list-tb").length===0){this.element.empty().append($("<div class='block-list-tb'><div data-role='column-head-container' class='list-head'></div><div data-role='body-container' class='list-body'></div></div>"))}}else{if(e.find(".block-list").length===0){this.element.empty().append($("<div class='block-list'><div data-role='column-head-container'></div><div data-role='body-container'></div></div>"))}}},reload:function(e){var t=e?e.data:null,i;$.extend(true,this.options,e);this.clear();this._buildOptions(this.options,this.element);this._hidePagination();if(this.hasPaging()===true&&e&&$.isArray(e.data)&&e.data.length>0){this._reloadPagination(this.options.pagingConfig);this._showPagination();if(this.options.localPagination===true){this._source=e.data;i=$("#"+this.options.pagingConfig.id);t=n(this._source,i.aePagination("option","currentPage"),i.aePagination("getPageSize"))}}if(this._reload(t,this.options)===true){this._addEvents()}},_showPagination:function(){var e=$("#"+this.options.pagingConfig.id);if(e.length>0){e.show()}},_hidePagination:function(){var e=$("#"+this.options.pagingConfig.id);if(e.length>0){e.hide()}},_setRowSelectedStyle:function(e,t){var i=this.options;if(t){$(e.parentNode.parentNode).addClass(i.selectedRowStyle)}else{$(e.parentNode.parentNode).removeClass(i.selectedRowStyle)}},_addEvents:function(){var e=this.options,t=this;if(e.selectedRowStyle){this.element.off("click").on("click","[data-role='_checkbox']",function(e){t._setRowSelectedStyle(this,this.checked)})}if(e.traceRowStyle){this.element.find(".list-item").on("mouseover",function(t){var i=$(this),n=i.find("[data-role='_checkbox']");if(e.selectedRowStyle&&n.length>0&&n[0].checked){i.removeClass(e.selectedRowStyle)}i.addClass(e.traceRowStyle)}).on("mouseout",function(t){var i=$(this),n=i.find("[data-role='_checkbox']");i.removeClass(e.traceRowStyle);if(e.selectedRowStyle&&n.length>0&&n[0].checked){i.addClass(e.selectedRowStyle)}})}},clear:function(){this.element.find("[data-role='body-container']").empty();this._showEmptyBrand()},selectAll:function(){var e,t,i;if(this.options.mutiSelect){e=this.element.find("[data-role='_checkbox']");i=e.length;for(t=0;t<i;t++){if(e[t].checked===false){e[t].checked=true;this._setRowSelectedStyle(e[t],true)}}}},getSelected:function(){var e,t=[],i,n,r,a;if(this.options.mutiSelect){e=this.element.find("[data-role='_checkbox']");for(r=0;r<e.length;r++){if(e[r].checked){n=$(e[r].parentNode.parentNode);t.push(n.data())}}}else{t.push(n.data())}return t},hasPaging:function(){var e=this.options.pagingConfig;return!!(e&&e.id)},addBlock:function(e,t,i){var n=this.element.find("[data-role='body-container']").eq(0),r,a,o,s,l=[],d={},c;if($.isArray(e)){l=e}else if($.isObject(e)){l.push(e)}if(this.hasPaging()===false){this._hideExceptionBrand();this._hideEmptyBrand();if(t){s=Handlebars.compile("<div class='list-item'>"+t+"</div>")}c=this._generatorDOMs(l,s);o=c.length;if(i&&i==="top"){for(a=0;a<o;a++){c[a].prependTo(n)}}else{for(a=0;a<o;a++){c[a].appendTo(n)}}$.aries.common.globalInit(this.element.attr("id"));return c.length===1?c[0]:c}return null},setData:function(e){var t,i,r=e,a;this.clear();this._hidePagination();if(this.hasPaging()===true&&e.length>0){t=$("#"+this.options.pagingConfig.id);if(t.length>0){i=t.aePagination("option")}else{i=this.options.pagingConfig}this._reloadPagination(i);this._showPagination();if(this.options.localPagination===true){this._source=e;a=$("#"+this.options.pagingConfig.id);r=n(this._source,a.aePagination("option","currentPage"),a.aePagination("getPageSize"))}}if(this._reload(r,this.options)===true){this._addEvents()}},_buildOptions:function(e,t){var i;e.aeType=t.attr("aeType")||"aeBlocklist";e.col=e.col||t.attr("col");e.selectedRowStyle=e.selectedRowStyle||t.attr("selectedRowStyle");e.showEmpty=e.showEmpty||t.attr("showEmpty");e.showEmpty=e.showEmpty==="false"?false:!!e.showEmpty;e.showException=e.showException||t.attr("showException");e.showException=e.showException==="false"?false:!!e.showException;e.emptyTipMsg=t.attr("emptyTipMsg")?t.attr("emptyTipMsg"):"data";e.mutiSelect=e.mutiSelect||t.attr("mutiSelect");e.mutiSelect=e.mutiSelect==="false"?false:!!e.mutiSelect;if(e.mutiSelect){i="<div class='list-item' style='display: none;position:relative;padding-left:22px'><div style='position:absolute;margin-left:5px;left:0;top:50%;margin-top:-12px'><input type='checkbox' data-role='_checkbox' style='cursor:pointer'/></div>"+e.tpl+"</div>"}else{i="<div class='list-item' style='display: none'>"+e.tpl+"</div>"}e.template=Handlebars.compile(i);e.columnHeadId=e.columnHeadId||t.attr("columnHeadId")||""},_generator:function(e){var t=this.options;if($.isArray(e)&&e.length===0){this._showEmptyBrand();return false}else{this._hideEmptyBrand();this._generatorHtml(e);$.aries.common.globalInit(this.element.attr("id"));return true}},_generatorHtml:function(e){var t,i,n=this.element.find("[data-role='body-container']"),r=this.options,a=this._generatorDOMs(e);for(t=0,i=a.length;t<i;t++){a[t].appendTo(n).fadeIn()}},_createEmptyBrand:function(){var e=this.element,t=this.options,i;if(e.find("[data-role='emptyBrand']").length===0){i=$('<div style="display: none;width:100%" data-role="emptyBrand" class="text-center padder-v-lg m-t-xl m-b-lg bg-white text-muted"> <i class="md-error icon-xl"></i><p class="text-md">No '+t.emptyTipMsg+".</p></div>");i.appendTo(e)}},_showEmptyBrand:function(){if(this.options.showEmpty){this.element.find("[data-role='emptyBrand']").fadeIn()}},_hideEmptyBrand:function(){this.element.find("[data-role='emptyBrand']").stop().hide()},_generatorDOMs:function(e,t){var i=this.options,n=t||i.template,r=i.col,a="",o=[],s,l,d,c,u=e.length;if(r=="1"){for(c=0;c<u;c++){a=n(e[c]);s=$(a);s.data(e[c]);o.push(s)}}else{l="<div class='list-row'></div>";d=$(l);for(c=0;c<u;c++){a=n(e[c]);s=$(a);s.data(e[c]);s.appendTo(d);if(!((c+1)%r||c+1===e.length)){o.push(d);d=$(l)}}}return o}})});define("ui-selectgroup",function(e,t,i){$.aeWidget("ae.aeSelectgroup",{options:{initType:"html",mode:"simple"},_create:function(){var e=this,t=e.options,i=e.element,n=i.attr("id");if(n){i.attr("aeId",n)}if(t.initType=="html"){t.mode=i.attr("mode")||t.mode;t.aeType=i.attr("aeType")||"aeSelectgroup"}},_init:function(){var e=this,t=e.options,i=e.element;var n=[],r="";if(t.mode==="complex"){i.addClass("btn-group select-group select-group-complex")}else{i.addClass("btn-group select-group select-group-simple")}var a=i.find(">button");a.each(function(e,t){$(t).addClass("btn btn-default");if($(t).find("input").next().length===0){var i=$(t).html();var n=i.split(">");n[1]="<span>"+n[1]+"</span>";$(t).html(n.join(">"))}});i.show();var o=e.type();(function(){i.on("click","button.btn",function(e){var i=$(this).find("input").is(":checked");if(o==="radio"){if(!i){$(this).siblings(".btn-primary").removeClass("btn-primary").addClass("btn-default").find("i.fa-check-circle-o").remove();$(this).addClass("btn-primary").removeClass("btn-default");if(t.mode==="complex"){$(this).append('<i class="fa fa-check-circle-o"></i>')}$(this).find("input").attr("checked",true)}}else{if(i){$(this).removeClass("btn-primary").addClass("btn-default").find("i.fa-check-circle-o").remove();$(this).find("input").removeAttr("checked")}else{$(this).addClass("btn-primary").removeClass("btn-default");if(t.mode==="complex"){$(this).append('<i class="fa fa-check-circle-o"></i>')}$(this).find("input").prop("checked","checked")}}})})()},type:function(){return this.element.find(".btn input").eq(0).attr("type")||"radio"},getSelectValue:function(){var e=this,t=e.options,i=e.element;if(this.type()==="radio"){return i.find("input[type='radio']:checked").val()}else{var n=[];i.find("input[type='checkbox']").each(function(e,t){if($(this).prop("checked")){n.push($(this).val())}});return n}},getSelectText:function(){var e=this,t=e.options,i=e.element;if(this.type()==="radio"){return i.find("input[type='radio']:checked").next().text()}else{var n=[];i.find("input[type='checkbox']").each(function(e,t){if($(t).prop("checked")){n.push($(t).next().text())}});return n}},setSelectByIndex:function(e){var t=this,i=t.options,n=t.element,r=this.type(),a;if(!isNaN(e)){if(r==="radio"){n.find(".btn-primary").removeClass("btn-primary").addClass("btn-default").find("i.fa-check-circle-o").remove();a=n.children().eq(parseInt(e));a.addClass("btn-primary").removeClass("btn-default");if(i.mode==="complex"){a.append('<i class="fa fa-check-circle-o"></i>')}n.find("input[type='radio']").eq(parseInt(e)).attr("checked",true)}else if(r==="checkbox"){a=n.find(".btn").eq(parseInt(e));if(a.hasClass("btn-primary"))return false;a.addClass("btn-primary").removeClass("btn-default");if(i.mode==="complex"){a.append('<i class="fa fa-check-circle-o"></i>')}a.find("input").prop("checked","checked")}}else if(Object.prototype.toString.call(e)=="[object Array]"){if(r==="radio")return false;for(var o=0;o<e.length;o++){a=n.find(".btn").eq(parseInt(e[o]));if(a.hasClass("btn-primary"))continue;a.addClass("btn-primary").removeClass("btn-default");if(i.mode==="complex"){a.append('<i class="fa fa-check-circle-o"></i>')}n.find("input").eq(parseInt(e[o])).prop("checked","checked")}}},setSelectByValue:function(e){var t=this,i=t.options,n=t.element,r=this.type(),a;if(!isNaN(e)){if(r==="radio"){n.find(".btn-primary").removeClass("btn-primary").addClass("btn-default").find("i.fa-check-circle-o").remove();a=n.find("input[value='"+e+"']:radio").attr("checked",true).parent().addClass("btn-primary").removeClass("btn-default");if(i.mode==="complex"){a.parent().append('<i class="fa fa-check-circle-o"></i>')}}else if(r==="checkbox"){a=n.find("input[value='"+e+"']");if(a.hasClass("btn-primary"))return false;a.prop("checked","checked").parent().addClass("btn-primary").removeClass("btn-default");if(i.mode==="complex"){a.parent().append('<i class="fa fa-check-circle-o"></i>')}}}else if(Object.prototype.toString.call(e)=="[object Array]"){if(r==="radio")return false;for(var o=0;o<e.length;o++){a=n.find("input[value='"+e[o]+"']");if(a.hasClass("btn-primary"))return false;a.prop("checked","checked").parent().addClass("btn-primary").removeClass("btn-default");if(i.mode==="complex"){a.parent().append('<i class="fa fa-check-circle-o"></i>')}}}},empty:function(){var e=this,t=e.options,i=e.element;i.find(".btn-primary").removeClass("btn-primary").addClass("btn-default");if(this.type()==="radio"){return i.find("input[type='radio']:checked").removeAttr("checked")}else{i.find("input[type='checkbox']").each(function(e,t){if($(this).prop("checked")){$(this).removeAttr("checked");$(this).parent().find("i.fa-check-circle-o").remove()}})}return false}})});define("ui-logicblock",function(e,t,i){var n,r="<div class='panel panel-default m-b-sm' id='{{id}}' data-group-id='{{group_id}}' data-dock='true' data-role='member'><div class='pull-right pos-abt' style='right:15px;top:50%;margin-top:-10px;'><a href='javascript:void(0);'><i class='ion-close text-dark' data-role='member-del' data-group-id='{{group_id}}' data-member-id='{{id}}' style='opacity:0.5;filter:\"alpha(opacity=0.5)\"'></i></a></div><div class='inline-block v-middle pos-abt' style='cursor: move;left: 0px;top: 50%; margin-top: -25px;' data-role='drag-handle'><a class='text-center block text-muted m' style='cursor: move;opacity:0.5;filter:\"alpha(opacity=0.5)\"'><i class='ion-drag' data-member-id='{{id}}' data-role='member-icon'></i></a></div><div class='form-inline inline-block v-middle m-t-xs' data-role='member-cntr' style='padding:10px 40px 10px 40px;width:100%'></div></div>",a=null,o="bg-light lt",s="$ATTR_CODE$",l="$ATTR_VALUE$",d=1,c=2,u=3,h=4,f=0,p=1,v=2,m=3,g=4,b;$.ae.lang.aeLogicBlock={addNewCondition:"Add new condition",dropTip:"drop here add to the group",notFound:"No matching items."};n="<div class='condition-group' id='{{id}}' data-role='member-group'><div class='condition-group-title'><span class='ion-drag pos-abt' data-role='drag-handle' style='cursor:move;top:10px;left:10px;opacity:0.5;filter:\"alpha(opacity=0.5)\"'></span><span class='ion-close pos-abt' data-role='group-del' style='cursor:pointer;bottom:10px;left:12px;opacity:0.5;filter:\"alpha(opacity=0.5)\"' data-group-id='{{id}}'></span><a class='inline-block text-white v-middle font-bold' data-role='oper' data-oper='and' data-group-id='{{id}}'>AND</a></div><div class='condition-group-content' data-role='group-cntr' data-dock='true' data-group-id='{{id}}'><button class='btn btn-default btn-block' data-role='member-add' style='opacity:0.5;filter:\"alpha(opacity=0.5)\"' data-group-id='{{id}}'>"+$.ae.lang.aeLogicBlock.addNewCondition+"</button><div class='b-gray text-center text-muted b-r b-2x b-dashed' style='height:32px;display:none' data-role='member-drop-tip' data-group-id='{{id}}'><span class='ion-arrow-shrink text-md'></span>"+$.ae.lang.aeLogicBlock.dropTip+"</div></div></div>";function y(){var e=$.ae.lang.aeLogicBlock,t='<div class="node-selection-search"><i class="close_circle pull-right none" data-role="search-clear" style="cusor:pointer"></i><i class="search"></i><input type="text" class="node-search-input" data-role="search-input"/></div><ul class="none" data-role="result" style="padding:50px 10px 0 10px;width:100%"><div data-role="not-found" style="width:100%" class="none text-center padder-v-lg m-t-xl m-b-lg bg-white text-muted"><i class="md-info-outline text-muted" style="width:70px;height:70px"></i><p class="text-md text-muted">'+e.notFound+"</p></div></ul>";return t}function w(e,t){var i="<li data-node-id='"+t.id+"'><i class='icon-page2' style='font-size:24px;color:rgb(204,204,204)'></i><div style='display:inline-block;padding:5px'>";i+="<span title='"+t.name+"'>"+t.name+"</span>";i+="</div></li>";return i}function C(e){return e+(new Date).getTime()}function S(e,t,i){var n;n=i.replace(/\$ATTR_CODE\$/g,e);n=n.replace(/\$ATTR_VALUE\$/g,t);return n}function _(e,t){var i;for(i=e.length-1;i>=0;i--){if(e[i].name===t){return e[i]}}return null}function x(e,t,i,n){this.id=e;this.root=new k({id:t||false,expr:this,operator:n,operatorName:i});this.groups={};this.groups[this.root.id]=this.root}x.prototype={addGroup:function(e,t){if(t&&t instanceof k){if(e instanceof k){this.groups[e.id]=e;t.addMember(e)}}else{this.root.addMember(e)}},getGroup:function(e){return this.groups[e]||null},deleteGroup:function(e){if(e in this.groups){this.groups[e].gc();delete this.groups[e]}},toExpression:function(e,t){return this.root.toExpression(e,t)},getState:function(){var e={id:this.id,rootId:this.root.id,groups:[]},t,i=this.groups;for(t in i){e.groups.push(i[t].getState())}return e},_clear:function(){var e;this.id="";this.root=null;for(e in this.groups){this.groups[e].gc();delete this.groups[e]}},setState:function(e,t){var i,n,r,a={},o,s;if(typeof e==="object"&&$.isArray(e.groups)&&e.groups.length>0){this._clear();this.id=e.id;r=e.groups;n=r.length;for(i=0;i<n;i++){if(r[i].id===e.rootId){this.root=new k({expr:this,id:r[i].id});a[this.root.id]=i;this.groups[this.root.id]=this.root}else{s=new k({expr:this,id:r[i].id});a[s.id]=i;this.groups[s.id]=s}}for(o in this.groups){s=this.groups[o];s.setState(r[a[s.id]],t)}return true}return false},gc:function(){var e,t=this.groups;for(e in t){t[e].gc();delete t[e]}this.root=null}};function T(e,t,i,n,r,a,o,s,l,d,c,u,h){this.id=e;this.variableName=t;this.variable=i;this.variableId=n;this.operator=r;this.operatorName=a;this.value=o;this.valueText=s;this.valueType=l||p;this.controlType=d||null;this.template=c;this.displayTemplate=u;this.parentGroup=h||null}T.prototype={getState:function(){return{id:this.id,value:this.value,valueText:this.valueText,valueType:this.valueType,controlType:this.controlType,operator:this.operator,operatorName:this.operatorName,variableName:this.variableName,variableId:this.variableId,variable:this.variable,template:this.template,displayTemplate:this.displayTemplate,parentGroupId:this.parentGroup.id}},gc:function(){this.parentGroup=null}};function k(e){this.expr=e.expr;this.operator=e.operator||"and";this.operatorName=e.operatorName||"AND";this.members=e.members||[];this.id=e.id||C("g");this.parentGroup=e.parentGroup||null}k.prototype={getState:function(){var e={id:this.id,members:[],operator:this.operator,operatorName:this.operatorName,parentGroupId:this.parentGroup===null?"":this.parentGroup.id},t=this.members,i,n=t.length;for(i=0;i<n;i++){if(t[i]instanceof k){e.members.push({id:t[i].id,isGroup:"1"})}else{e.members.push(t[i].getState())}}return e},setState:function(e,t){var i,n,r,a,o,s;this.operator=e.operator;this.operatorName=e.operatorName;this.id=e.id;this.parentGroup=this.expr.getGroup(e.parentGroupId);r=e.members;this.members=[];n=r.length;for(i=0;i<n;i++){if(r[i].isGroup==="1"){a=this.expr.getGroup(r[i].id);this.members.push(a)}else{o=new T(r[i].id,r[i].variableName,r[i].variable,r[i].variableId,r[i].operator,r[i].operatorName,r[i].value,r[i].valueText,parseInt(r[i].valueType,10),parseInt(r[i].controlType,10),r[i].template,r[i].displayTemplate,this);this.members.push(o)}}},toExpression:function(e,t){var i=this.members,n,r=i.length,a="",o,s,l,d,c=$('[data-expr-inst-id="'+this.expr.id+'"]'),u=c.aeLogicBlock("option"),h=u.templateParser,f=c.data("map_vars"),p;for(n=0;n<r;n++){if(i[n]instanceof k){a+=i[n].toExpression(e,t)}else{if(typeof e==="function"){p=f[i[n].variableId].userData;o=e({variableCode:i[n].variable,variableName:i[n].variableName,operatorCode:i[n].operator,operatorName:i[n].operatorName,value:i[n].value,valueText:i[n].valueText,valueType:i[n].valueType,template:i[n].template,displayTemplate:i[n].displayTemplate,templateParser:u.templateParser,userData:p});if(typeof o==="string"){a+=o}else if(o===false){d=i[n].template;if(typeof d==="string"&&d!==""){l=h(i[n].variable,i[n].value,d)}else{l=i[n].variable+i[n].operator+i[n].value}a+=" "+l+" "}}else{d=i[n].template;if(typeof d==="string"&&d!==""){l=h(i[n].variable,i[n].value,d)}else{l=i[n].variable+i[n].operator+i[n].value}a+=" "+l+" "}}if(n!==r-1){a+=" "+(t?this.operatorName:this.operator)+" "}}s=a.lastIndexOf(this.operator);if(s===a.length-this.operator.length){a=a.substr(0,s)}return"("+a+")"},hasMember:function(e){var t=this.members,i,n,r;if(e instanceof T||e instanceof k){r=e.id;for(i=0,n=t.length;i<n;i++){if(t[i].id===r){return i}}}return-1},getMember:function(e){var t=this.members,i;for(i=t.length-1;i>=0;i--){if(t[i].id===e){return t[i]}}return null},addMember:function(e){var t,i=e instanceof k;if(e instanceof T||i){t=this.hasMember(e);if(t===-1){if(e.parentGroup instanceof k){e.parentGroup.removeMember(e)}e.parentGroup=this;this.members.push(e)}}},removeMember:function(e){var t=this.members,i,n=e.id;for(i=t.length-1;i>=0;i--){if(t[i].id===n){t.splice(i,1);break}}},gc:function(){var e=this.members,t;for(t=e.length-1;t>=0;t--){if(e[t]instanceof k){e[t].gc()}e.splice(t,1)}if(this.parentGroup!==null){this.parentGroup.removeMember(this);this.parentGroup=null}this.expr=null}};var E={addGroup:function(e,t){var i,n,r,a,o,s;i=$("#"+e).attr("data-expr-id");a=$('[data-expr-inst-id="'+i+'"]');n=a.data("expr");o=a.aeLogicBlock("option");defaultLogicOperator=o.logicOperators[0];r=new k({id:e,expr:n,operatorName:defaultLogicOperator.text,operator:defaultLogicOperator.code});s=n.getGroup(t);n.addGroup(r,s);return r},getExpr:function(e){var t=$("#"+e).attr("data-expr-id"),i=$('[data-expr-inst-id="'+t+'"]').data("expr");return i?i:null},getGroup:function(e){var t=$("#"+e).attr("data-expr-id"),i=$('[data-expr-inst-id="'+t+'"]').data("expr");return i?i.getGroup(e):null},delGroup:function(e){var t=$("#"+e).attr("data-expr-id"),i=$('[data-expr-inst-id="'+t+'"]').data("expr");i.deleteGroup(e)},fireExprChangeEvent:function(e){var t=$('[data-expr-inst-id="'+e+'"]');t.aeLogicBlock("option").onExprChange.call(t)}};function D(e,t){var i=$("#"+e),n=i.attr("data-group-id"),r,a,o,s=G(n),l,f,p,v,m,g="",b,y;l=i.find("[data-role='member-operator']");p=parseInt(l.aeCombo("getUserdata",l.aeCombo("getIndex")).controlType,10);if(p==h){v=i.find("[data-role='member-value-enum']");m=v.aeCombo("getValue");g=v.aeCombo("getDisplayText")}else if(p==c){m=i.find("[data-role='member-value']").val();g=m}else if(p==d){m=i.find("[data-role='member-value-number']").aeFlip("getValue");g=m}else if(p==u){if(t===3){m=i.find("[data-role='member-value-date']").aeCalendar("getValue");g=m}else if(t===4){m=i.find("[data-role='member-value-datetime']").aeCalendar("getValue");g=m}}else{m="?";g="?"}y={valueType:t,operator:l.aeCombo("getValue"),operatorName:l.aeCombo("getDisplayText"),controlType:p,value:m||"?",valueText:g||"?"};if(s.hasCatalog){r=i.find("[data-role='member-tree-button']");y.variable=r.attr("data-code");o=U(n);a=o[r.attr("data-variable-id")];y.variableName=a.name;y.variableId=a.id;f=_(a.operators,y.operatorName);y.template=f.template||"";y.displayTemplate=f.displayTemplate||""}else{r=i.find("[data-role='member-variable']");y.variable=r.aeCombo("getValue");b=r.aeCombo("getIndex");a=r.aeCombo("getUserdata",b);y.variableName=r.aeCombo("getDisplayText");y.variableId=a.id;f=_(a.operators,y.operatorName);y.template=f.template||"";y.displayTemplate=f.displayTemplate||""}return y}function I(e){var t;e=e||C("gid");t=n.replace(/\{\{id\}\}/g,e);return $(t)}function M(e,t){var i;t=t||C("mid");i=r.replace(/\{\{id\}\}/g,t);i=i.replace(/\{\{group_id\}\}/g,e);return $(i)}function P(e,t,i){var n,r,a;r=t.length;for(n=0;n<r;n++){a=t[n].name===i?"selected":"";e.append($("<option value='"+t[n].code+"'"+a+" data-control-type='"+t[n].controlType+"' data-default-value='"+t[n].defaultValue+"'>"+t[n].name+"</option>"))}}function R(e,t,i){var n,r,a;r=t.length;for(n=0;n<r;n++){a=t[n].name===i?"selected":"";e.append($("<option value='"+t[n].code+"' "+a+">"+t[n].name+"</option>"))}}function N(e,t,i){var n=i[0].variableId;var r=$("<button class='btn btn-default m-b-xs' data-role='member-tree-button' data-variable-id='"+n+"' data-group-id='"+e+"' data-member-id='"+t+"'></button>");return r}function H(e,t){var i="logicblock-"+e,n=$("#"+i),r=y();if(n.length===0){n=$("<div aeType='aeDialog' id='"+i+"' data-role='member-tree-dialog' style='display:none'>"+r+"<div style='padding-top:40px;height:100%' data-role='var-tree'><div style='overflow:auto;height:100%'><div aeType='aeTree' showCheckbox='false' showLine='true' idField='id' pIdField='pid' labelField='name' valueField='id' data-role='member-tree' onSelect='hdVariablesTreeSelect'></div></div></div></div>");$(document.body).append(n)}return n}function L(e,t,i){var n,r,a,o,s={},l=0,d;r=t.length;for(n=0;n<r;n++){if(!t[n].pid){o=$("<optgroup label='"+t[n].name+"'></optgroup>");s[t[n].id]=o;l++}}d=l===r;for(n=0;n<r;n++){a=t[n].name===i?"selected":"";if(d){o=$("<option value='"+t[n].code+"' data-idx='"+n+"' "+a+" data-value-type='"+(t[n].valueType||1)+"'>"+t[n].name+"</option>");e.append(o)}else{if(t[n].pid){o=$("<option value='"+t[n].code+"' data-idx='"+n+"' "+a+" data-value-type='"+(t[n].valueType||1)+"'>"+t[n].name+"</option>");if(t[n].id in s){s[t[n].id].append(o);e.append(s[t[n].id])}else{e.append(o)}}}}}function F(e,t,i,n){var r=$("<span aeType='aeCombo' id='var_"+t+"' aeInit='false' class='none' width='150px' optionField='name' valueField='id' data-role='member-variable' data-group-id='"+e+"' data-member-id='"+t+"'>");return r}function A(e,t,i,n){var r=$("<span aeType='aeCombo' id='opr_"+t+"' class='none' width='160px' optionField='name' valueField='code' data-role='member-operator' data-value-type='"+i.valueType+"' data-group-id='"+e+"' data-member-id='"+t+"'>");return r}function O(e){var t=e.parent().prev(),i=t.attr("data-group-id"),n=t.attr("data-member-id"),r=t.attr("data-value-type"),a={groupId:i,memberId:n,valueType:parseInt(r,10)};Y(a)}window.hdDateChange=O;function z(e,t,i,n,r,a){var o,s,l,d,c="<span aeType='aeCombo' id='enum_"+i+"' aeInit='false' class='none' width='150px' optionField='name' valueField='code' data-role='member-value-enum' data-value-type='"+n+"' data-group-id='"+t+"' data-member-id='"+i+"'/><input type='text' class='form-control' data-role='member-value' data-value-type='"+n+"' data-group-id='"+t+"' data-member-id='"+i+"' style='width:150px'/><span aeType='aeCalendar' width='150px' data-role='member-value-date' data-value-type='"+n+"' data-group-id='"+t+"' data-member-id='"+i+"' onValueChange='hdDateChange'></span><span aeType='aeCalendar' width='150px' data-role='member-value-datetime' data-value-type='"+n+"' data-group-id='"+t+"' data-member-id='"+i+"' onValueChange='hdDateChange'></span><span aeType='aeFlip' data-role='member-value-number' width='150px' minData='0' data-value-type='"+n+"' data-group-id='"+t+"' data-member-id='"+i+"'></span>";
o=$(c);e.append(o);s=e.find("[data-role='member-value-enum']");s.aeCombo({visible:false});s.next().addClass("m-b-xs");e.find("[data-role='member-value-date']").aeCalendar({showTime:false,visible:false});e.find("[data-role='member-value-datetime']").aeCalendar({showTime:true,visible:false});l=e.find("[data-role='member-value-number']");l.aeFlip({visible:false});l.next().addClass("m-b-xs");d=l.aeFlip("option");d.onValueChange=O;o.hide();if($.isArray(r)){s=$(o[0]);s.aeCombo("visible",true);s.next().addClass("m-b-xs")}else{if(n==2){s=e.find("[data-role='member-value-number']");s.aeFlip("visible",true);s.aeFlip("setValue",r||a||"")}else if(n==3){s=e.find("[data-role='member-value-date']");s.aeCalendar("visible",true);s.next().addClass("m-b-xs");s.aeCalendar("setValue",r||a||"")}else if(n==4){s=e.find("[data-role='member-value-datetime']");s.aeCalendar("visible",true);s.next().addClass("m-b-xs");s.aeCalendar("setValue",r||a||"")}else{s=$(o[1]);s.addClass("m-b-xs");s.val(r||a||"");s.show()}}l.aeFlip("option",d);return o}function B(e){var t=e.attr("id"),i,n,r,a;i=e.attr("data-group-id");r=E.getGroup(i).getMember(t);n=D(t,3);r.value=n.value;r.valueText=n.valueText;r.valueType=n.valueType;r.operator=n.operator;r.operatorName=n.operatorName;r.controlType=n.controlType;r.variable=n.variable;r.variableId=n.variableId;r.variableName=n.variableName;r.template=n.template;r.displayTemplate=n.displayTemplate;a=$("#"+i).attr("data-expr-id");E.fireExprChangeEvent(a)}function Y(e){var t,i,n,r,o,s;if(b){i=b.attr("data-group-id");t=b.attr("data-member-id");o=parseInt(b.attr("data-value-type"),10)}else{i=e.groupId;t=e.memberId;o=e.valueType}r=E.getGroup(i).getMember(t);n=D(t,o);r.value=n.value;r.valueText=n.valueText;r.valueType=n.valueType;r.operator=n.operator;r.operatorName=n.operatorName;r.controlType=n.controlType;r.variable=n.variable;r.variableId=n.variableId;r.variableName=n.variableName;r.template=n.template;r.displayTemplate=n.displayTemplate;b=null;a=null;s=$("#"+i).attr("data-expr-id");E.fireExprChangeEvent(s)}function U(e){var t=$("#"+e).attr("data-expr-id"),i=$('[data-expr-inst-id="'+t+'"]'),n=i.data("map_vars");return n}function G(e){var t=$("#"+e).attr("data-expr-id"),i=$('[data-expr-inst-id="'+t+'"]'),n=i.aeLogicBlock("option");return n}function V(e,t,i){var n=e.memberId,r=$("#"+n),a=r.find("[data-role='member-operator']");a.aeCombo("reload",t.operators);a.aeCombo("setDefault",i||t.operators[0].code);te(a,t.operators);ue(a)}function j(e){var t=e.memberId,i=$("#"+t),n=e.controlType,r=e.valueType,a;if(n==d){Y(e)}else if(n==c){Y(e)}else if(n==u){if(r==m){B(i)}else if(r==g){B(i)}}else if(n==h){Y(e)}else{Y(e)}}function W(e,t,i){var n=e.memberId,r=$("#"+n),a=e.groupId,o=r.find("[data-role='member-value-enum']"),s=r.find("[data-role='member-value']"),l=r.find("[data-role='member-value-date']"),f=r.find("[data-role='member-value-datetime']"),p=r.find("[data-role='member-value-number']"),v=e.valueType,b=e.controlType,y;s.hide();o.aeCombo("visible",false);l.aeCalendar("visible",false);f.aeCalendar("visible",false);p.aeFlip("visible",false);if(i==="?"){i=""}y=t||i;if(b==d){if($.isArray(y)){y=""}p.aeFlip("setValue",y);p.aeFlip("visible",true)}else if(b==c){if($.isArray(y)){y=""}s.val(y);s.show()}else if(b==u){if($.isArray(y)){y=""}if(v==m){l.aeCalendar("setValue",y);l.aeCalendar("visible",true)}else if(v==g){f.aeCalendar("setValue",y);f.aeCalendar("visible",true)}}else if(b==h){if($.isArray(y)){o.aeCombo("reload",y);o.aeCombo("setDefault",y[0].code)}o.aeCombo("visible",true)}}function q(e){var t=window.logicblock_share_data.memberId,i=window.logicblock_share_data.groupId,n=$("#"+t),r=$("#"+i),a=n.find("[data-role='member-tree-button']");delete window.logicblock_share_data;a.attr("data-code",e.code).attr("data-variable-id",e.id).text(e.name);n.find("[data-role='member-operator']").attr("data-value-type",e.valueType);n.find("[data-role='member-value']").attr("data-value-type",e.valueType);n.find("[data-role='member-value-enum']").attr("data-value-type",e.valueType);n.find("[data-role='member-value-date']").attr("data-value-type",e.valueType).attr("data-group-id",i).attr("data-member-id",t);n.find("[data-role='member-value-datetime']").attr("data-value-type",e.valueType).attr("data-group-id",i).attr("data-member-id",t);n.find("[data-role='member-value-number']").attr("data-value-type",e.valueType).attr("data-group-id",i).attr("data-member-id",t);V({groupId:i,memberId:t},e)}function Z(e){if(e.valueType!==undefined){$.closePopupDiv();q(e)}}window.hdVariablesTreeSelect=Z;function K(e){var t=$(this).attr("data-group-id"),i=$(this).attr("data-member-id"),n=G(t),r=$("#"+t).attr("data-expr-id"),a="logicblock-"+r,o=$("#"+a).find("[data-role='member-tree']");window.logicblock_share_data={groupId:t,memberId:i};$('[data-expr-inst-id="'+r+'"]').data("ae-aeLogicBlock")._initSearchbar();$.openPopupDiv(a,"Select Variable","640","480",{showButton:false});$("#"+a).aeDialog("option","beforeClose",function(){$('[data-expr-inst-id="'+r+'"]').data("ae-aeLogicBlock")._resetDialog()})}function X(e){var t,i,n=e.length;for(t=0;t<n;t++){if(typeof e[t].valueType==="number"&&isNaN(e[t].valueType)===false){return e[t]}}return null}function Q(e){var t=$(this).attr("data-group-id");E.delGroup(t);$("#"+t).fadeOut(400,function(){var e=$(this);e.remove();exprId=e.attr("data-expr-id");E.fireExprChangeEvent(exprId)})}function J(e){var t,i,n=[];if($.isArray(e)){i=e.length;for(t=0;t<i;t++){if(typeof e[t].valueType==="number"&&isNaN(e[t].valueType)===false){n.push(e[t])}}}return n}function ee(e,t){var i,n=0,r,a,o;if($.isArray(t)){r=t.length;a=[];o=[];for(i=0;i<r;i++){if(typeof t[i].valueType==="number"&&isNaN(t[i].valueType)===false){a.push(n++);o.push(t[i])}}e.aeCombo("setUserdata",a,o)}}function te(e,t){var i,n,r,a;if($.isArray(t)){n=t.length;r=[];a=[];for(i=0;i<n;i++){r.push(i);a.push(t[i])}e.aeCombo("setUserdata",r,a)}}function ie(e){var t=$(this),i=C("mid"),n,r,a,o=t.parent().attr("data-group-id"),s=$("#"+o).attr("data-expr-id"),l=$('[data-expr-inst-id="'+s+'"]'),d=l.data("expr"),c=l.aeLogicBlock("option"),u,h,f,p,v,m,g,b;n=M(o,i);n.insertBefore(t);r=n.find("[data-role='member-cntr']");if(c.hasCatalog){p=X(c.variables);if(p!==null){f=N(o,i,c.variables);f.attr("data-code",p.code).attr("data-variable-id",p.id).text(p.name);r.append(f);f.on("click.aeLogicBlock",K)}}else{a=F(o,i,c.variables);r.append(a);a.aeCombo({});a.next().addClass("m-b-xs");a.aeCombo("reload",J(c.variables));ee(a,c.variables);p=a.aeCombo("getUserdata",0);a.aeCombo("setDefault",p.id)}h=p.operators;m=h[0].template;g=h[0].displayTemplate;b=h[0].defaultValue;a=A(o,i,p);r.append(a);a.aeCombo({});a.next().addClass("m-b-xs");a.aeCombo("reload",h);a.aeCombo("setDefault",h[0].code);te(a,h);a=z(r,o,i,p.valueType,p.value,b);if($.isArray(p.value)){$(a[0]).aeCombo("reload",p.value);$(a[0]).aeCombo("setDefault",p.value[0].code)}Me(n);u=D(i,p.valueType);v=new T(i,u.variableName,u.variable,u.variableId,u.operator,u.operatorName,u.value,u.valueText,u.valueType,u.controlType,m,g);d.getGroup(o).addMember(v);E.fireExprChangeEvent(s)}function ne(e){var t=$(this),i=t.attr("data-member-id");$("#"+i).fadeOut(400,function(){var e=$(this),t,i=e.attr("id"),n=e.attr("data-group-id");t=E.getGroup(n);t.removeMember(t.getMember(i));e.remove();re(n);exprId=$("#"+n).attr("data-expr-id");E.fireExprChangeEvent(exprId)})}function re(e){var t=$("#"+e),i=t.attr("data-root-group")==="1",n,r,a;if(i){return}n=t.children("[data-role='group-cntr']");r=t.parent().attr("data-group-id");a=t.attr("data-expr-id");if(n.children("[data-role='member']").length===0&&n.children("[data-role='member-group']").length===0){E.delGroup(e);t.fadeOut(400,function(){$(this).remove();E.fireExprChangeEvent(a);re(r)})}}function ae(e){var t=$(this).parent().prev();oe(t)}function oe(e){var t,i,n,r,a;i=e.attr("data-group-id");t=e.attr("data-member-id");r=E.getGroup(i).getMember(t);n=D(t,0);r.value=n.value;r.valueText=n.valueText;r.valueType=n.valueType;r.operator=n.operator;r.controlType=n.controlType;r.variable=n.variable;r.variableId=n.variableId;r.variableName=n.variableName;a=$("#"+i).attr("data-expr-id");E.fireExprChangeEvent(a)}function se(e){var t=$(this).parent().prev(),i=t.attr("data-group-id"),n=$("#"+i),r=n.attr("data-expr-id"),a=t.attr("data-member-id"),o=$("#"+a),s=$('[data-expr-inst-id="'+r+'"]'),l=s.aeLogicBlock("option"),d=l.variables[t.aeCombo("getIndex")].valueType;o.find("[data-role='member-operator']").attr("data-value-type",d);o.find("[data-role='member-value']").attr("data-value-type",d);o.find("[data-role='member-value-enum']").attr("data-value-type",d);o.find("[data-role='member-value-date']").attr("data-value-type",d).attr("data-group-id",i).attr("data-member-id",a);o.find("[data-role='member-value-datetime']").attr("data-value-type",d).attr("data-group-id",i).attr("data-member-id",a);o.find("[data-role='member-value-number']").attr("data-value-type",d).attr("data-group-id",i).attr("data-member-id",a);V({groupId:i,memberId:a},l.variables[t.aeCombo("getIndex")])}function le(e,t,i){var n,r=U(i);if(t.hasCatalog){$variable=e.find("[data-role='member-tree-button']");n=$variable.attr("data-variable-id")}else{$variable=e.find("[data-role='member-variable']");idx=$variable.aeCombo("getIndex");n=t.variables[idx].id}return r[n].value}function de(e){var t,i,n;t=e.find("[data-role='member-operator']");n=t.aeCombo("getUserdata",t.aeCombo("getIndex"));i=n.defaultValue;return i}function ce(e){var t=$(this).parent().prev();ue(t)}function ue(e){var t=e.attr("data-group-id"),i=e.attr("data-member-id"),n=$("#"+t),r=$("#"+i),a=n.attr("data-expr-id"),o=$('[data-expr-inst-id="'+a+'"]'),s=o.aeLogicBlock("option"),l,d,c=de(r),u=le(r,s,t),h;l=e.attr("data-value-type");d=parseInt(e.aeCombo("getUserdata",e.aeCombo("getIndex")).controlType,10);h={groupId:t,memberId:i,valueType:parseInt(l,10),controlType:d};W(h,u,c);j(h)}function he(e){if(a!==null){clearTimeout(a);a=null}b=$(this);a=setTimeout(Y,500)}function fe(e,t){var i,n,r;if($.isArray(e)){n=e.length;for(i=0;i<n;i++){r=e[i];if(r.code===t){return{current:e[i],next:e[i>=n-1?0:i+1]}}}}return null}function pe(e){var t=$(this),i,n=t.attr("data-oper"),r=t.attr("data-group-id"),a=$("#"+r),o=E.getGroup(r),s=$('[data-expr-inst-id="'+a.attr("data-expr-id")+'"]').aeLogicBlock("option").logicOperators,l=fe(s,n);if(l!==null){a.removeClass(l.current.color).addClass(l.next.color);t.attr("data-oper",l.next.code).text(l.next.text);o.operatorName=l.next.text;o.operator=l.next.code;i=a.attr("data-expr-id");E.fireExprChangeEvent(i)}}function ve(e){var t=$("[data-role='expr-cntr']").not("[data-expr-inst-id='"+e+"']");t.find("[data-role='member']").aeDroppable("disable");t.find("[data-role='member-drop-tip']").aeDroppable("disable")}function me(e){var t=$("[data-role='expr-cntr']").not("[data-expr-inst-id='"+e+"']");t.find("[data-role='member']").aeDroppable("enable");t.find("[data-role='member-drop-tip']").aeDroppable("enable")}function ge(e){ve(e);$('[data-expr-inst-id="'+e+'"]').find("[data-role='member']").aeDroppable("disable")}function be(e){me(e);$('[data-expr-inst-id="'+e+'"]').find("[data-role='member']").aeDroppable("enable")}function ye(e,t){var i=$(this),n=i.attr("data-group-id"),r=$("#"+n),a=r.attr("data-expr-id"),o=$('[data-expr-inst-id="'+a+'"]'),s,l;ve(a);o.find("[data-role='member-icon']").not("[data-member-id='"+i.attr("id")+"']").removeClass("ion-drag").addClass("ion-arrow-shrink");o.find("[data-role='member-del']").hide();s=o.find("[data-role='member-add']");s.not("[data-group-id='"+n+"']").hide();l=o.find("[data-role='member-drop-tip']");l.not("[data-group-id='"+n+"']").show();i.css("z-index",9999)}function we(e,t){var i=$(this),n=i.attr("id"),r=i.parent(),a=$("#"+n),o=a.attr("data-expr-id"),s=$('[data-expr-inst-id="'+o+'"]');ge(o);s.find("[data-role='member-del']").hide();a.find("[data-role='member-add']").attr("data-excluder","1");a.find("[data-role='member-drop-tip']").attr("data-excluder","1");$btns=s.find("[data-role='member-add']");$btns.not("[data-excluder='1']").hide();$tips=s.find("[data-role='member-drop-tip']");$tips.not("[data-excluder='1']").show();r.children("[data-role='member-add']").show();r.children("[data-role='member-drop-tip']").hide();i.css("z-index",9999)}function Ce(e,t){var i=$(this),n=i.attr("data-group-id"),r=$("#"+n).attr("data-expr-id"),a=$('[data-expr-inst-id="'+r+'"]');me(r);a.find("[data-role='member-icon']").not("[data-member-id='"+i.attr("id")+"']").removeClass("ion-arrow-shrink").addClass("ion-drag");a.find("[data-role='member-del']").show();a.find("[data-role='member-add']").show();a.find("[data-role='member-drop-tip']").hide();i.css({"z-index":0,width:"100%"})}function Se(e,t){var i=$(this),n=i.attr("id"),r=$("#"+n),a=r.attr("data-expr-id"),o=$('[data-expr-inst-id="'+a+'"]');be(a);o.find("[data-role='member-del']").show();$btns=o.find("[data-role='member-add']");$btns.not("[data-excluder='1']").show();$tips=o.find("[data-role='member-drop-tip']");$tips.not("[data-excluder='1']").hide();r.find("[data-role='member-add']").attr("data-excluder","0");r.find("[data-role='member-drop-tip']").attr("data-excluder","0");i.css({"z-index":0,width:"100%"})}function _e(e,t){var i=$(this),n=i.attr("data-role"),r;if(n==="member-drop-tip"){i.addClass("b-danger")}else if(n==="member"){i.addClass("b-danger")}}function xe(e,t){var i=$(this),n=i.attr("data-role"),r;if(n==="member-drop-tip"){i.removeClass("b-danger")}else if(n==="member"){i.removeClass("b-danger")}}function Te(e,t){var i=$(this),n,r=e.draggable,a=i.attr("data-role"),o,s,l,d,c,u,h,f,p,v,m;i.removeClass("b-danger");if(a==="member"){o=C("gid");i.hide();v=i.attr("data-group-id");p=r.attr("data-group-id");s=$("#"+v).attr("data-expr-id");u=$('[data-expr-inst-id="'+s+'"]').aeLogicBlock("option").logicOperators[0];d=I(o);d.addClass(u.color);d.find('[data-role="oper"]').text(u.text);d.attr("data-expr-id",$("#"+v).attr("data-expr-id"));d.insertBefore(i);m=$("#"+o);n=m.find("[data-role='group-cntr']").children("[data-role='member-add']");i.insertBefore(n);r.insertBefore(n);i.attr("data-group-id",o);i.find("[data-group-id]").attr("data-group-id",o);r.attr("data-group-id",o);r.find("[data-group-id]").attr("data-group-id",o);m.attr("data-expr-id",s);f=E.addGroup(o,v);h=E.getGroup(v).getMember(i.attr("id"));f.addMember(h);l=r.attr("data-group-id");c=l;h=E.getGroup(p).getMember(r.attr("id"));f.addMember(h);i.show();m.find("[data-role='member-drop-tip']").aeDroppable({greedy:true,drop:Te,over:_e,out:xe});m.aeDraggable({handle:"[data-role='drag-handle']",revert:true,distance:5,start:we,stop:Se})}else if(a==="member-drop-tip"){if(r.attr("data-role")==="member-group"){l=r.attr("id");f=E.getGroup(l);m=$("#"+l);s=m.attr("data-expr-id");c=m.parent().attr("data-group-id");l=i.attr("data-group-id");m=$("#"+l);n=m.find("[data-role='member-add']").filter("[data-group-id='"+l+"']");r.insertBefore(n);E.getGroup(l).addMember(f)}else{l=r.attr("data-group-id");c=l;l=i.attr("data-group-id");m=$("#"+l);s=m.attr("data-expr-id");n=m.find("[data-role='member-add']").filter("[data-group-id='"+l+"']");r.insertBefore(n);r.attr("data-group-id",l);r.find("[data-group-id]").attr("data-group-id",l);h=E.getGroup(c).getMember(r.attr("id"));E.getGroup(l).addMember(h)}}if(c){re(c)}E.fireExprChangeEvent(s);return false}function ke(){var e=$(this);e.animate({opacity:.5,filter:"alpha(opacity=0.5)"},400)}function Ee(){var e=$(this);e.stop().css({opacity:1,filter:"alpha(opacity=1)"})}function De(e){e.on("click.aeLogicBlock","[data-role='member-add']",ie).on("click.aeLogicBlock","[data-role='group-del']",Q).on("click.aeLogicBlock","[data-role='oper']",pe).on("mouseover.aeLogicBlock","[data-role='drag-handle'],[data-role='group-del'],[data-role='member-add']",Ee).on("mouseout.aeLogicBlock","[data-role='drag-handle'],[data-role='group-del'],[data-role='member-add']",ke)}function Ie(e){e.off("click.aeLogicBlock").off("mouseover.aeLogicBlock").off("mouseout.aeLogicBlock")}function Me(e){var t=e.data("inited");e.on("click.aeLogicBlock","[data-role='member-del']",ne);e.find("[data-role='member-variable']").aeCombo("option","onValueChange",se);e.find("[data-role='member-operator']").aeCombo("option","onValueChange",ce);e.find("[data-role='member-value']").on("keyup.aeLogicBlock",he);e.find("[data-role='member-value-enum']").aeCombo("option","onValueChange",ae);if(t){e.aeDraggable("enable").aeDroppable("enable")}else{e.data("inited",true);e.aeDraggable({handle:"[data-role='drag-handle']",revert:true,distance:5,start:ye,stop:Ce}).aeDroppable({greedy:true,drop:Te,over:_e,out:xe})}e.find("[data-role='member-icon'],[data-role='member-del']").on("mouseover.aeLogicBlock",Ee).on("mouseout.aeLogicBlock",ke)}function Pe(e){e.off("click.aeLogicBlock");e.find("[data-role='member-variable']").off("change.aeLogicBlock");e.find("[data-role='member-operator']").off("change.aeLogicBlock");e.find("[data-role='member-value']").off("keyup.aeLogicBlock");e.find("[data-role='member-del']").off("mouseover.aeLogicBlock").off("mouseout.aeLogicBlock");e.aeDraggable("disable").aeDroppable("disable")}$.aeWidget("ae.aeLogicBlock",{options:{variables:null,logicOperators:[{text:"AND",code:"and",color:"bg-info"},{text:"OR",code:"or",color:"bg-success"}],hasCatalog:false,onExprChange:$.noop,assembler:null,templateParser:S},_create:function(){var e=this.element,t=e.attr("id"),i=C("gid");this._hdTimer=null;if(!t){t=C("expr");e.attr("id",t)}e.attr("aeId",e.attr("id"));this._initModel(t,i);this._initView(t,i)},_initSearchbar:function(){var e,t;if(!this._$tree){e=this.element.data("expr").id;t=$("#logicblock-"+e);this._$tree=t.find('[data-role="var-tree"]');this._$result=t.find('[data-role="result"]');this._$result.on("mouseover.aeLogicBlock","li",this,function(e){$(this).addClass(o)}).on("mouseout.aeLogicBlock","li",this,function(e){$(this).removeClass(o)}).on("click.aeLogicBlock","li",this,function(e){var t=e.data,i=$(this).attr("data-node-id");t._gotoNode(i)});this._$input=t.find('[data-role="search-input"]');this._$input.on("keyup.aeLogicBlock",this,function(e){var t=e.data,i=".bg-light",n;if(t._hdTimer!==null){clearTimeout(t._hdTimer);t._hdTimer=null}switch(e.which){case 27:$(this).trigger("blur.aeLogicBlock",t);return false;case 13:if(t._nodeId){t._gotoNode(t._nodeId)}break;case 38:n=t._$result.find("li").eq(0);if(!(t._nodeId&&t._nodeId===n.attr("data-node-id"))){n=t._$result.find(i);if(n.length>0){n=n.removeClass(o).prev().addClass(o);t._nodeId=n.attr("data-node-id")}}return false;case 40:n=t._$result.find("li").filter(":last");if(!(t._nodeId&&t._nodeId===n.attr("data-node-id"))){n=t._$result.find(i);if(n.length===0){n=t._$result.find("li").eq(0).addClass(o)}else{n=n.removeClass(o).next().addClass(o)}t._nodeId=n.attr("data-node-id")}return false}t._$input.parent().find('[data-role="search-clear"]').show();t._hdTimer=setTimeout($.proxy(t._refreshResults,t),300)}).parent().find('[data-role="search-clear"]').on("click.aeLogicBlock",this,function(e){e.data._resetDialog()})}},_resetDialog:function(){this._nodeId=null;this._$input.parent().find('[data-role="search-clear"]').hide();this._$input.val("");this._$result.hide();this._$tree.show()},_gotoNode:function(e){var t=this._$tree.find('[aeType="aeTree"]');t.aeTree("expandNode",e);t.aeTree("selectNode",e);this._$result.hide();this._$tree.show()},_refreshResults:function(){var e,t,i=this._$result.find('[data-role="not-found"]');i.hide().siblings().remove();e=this._$input.val();if(e===""){this._$input.parent().find('[data-role="search-clear"]').hide();this._$result.hide();this._$tree.show()}else{if(e.length>=1){t=this._search(e);if(t.length>0){this._reloadResult(t)}else{i.show()}}this._$tree.hide();this._$result.show()}},_search:function(e){var t=this.element.data("expr").id,i=$("#logicblock-"+t).find("[data-role='member-tree']"),n,r,a,o=[],s=e.toLowerCase();if(i.length>0){n=i.data("nodes");for(r in n){a=n[r];if(a&&a.valueType!==undefined&&typeof a.name==="string"){if(a.name.toLowerCase().indexOf(s)>=0){o.push({id:r,info:a})}}}}return o},_reloadResult:function(e){var t,i=e.length,n="";for(t=0;t<i;t++){n+=w(e[t].id,e[t].info)}this._$result.append($(n))},_preprocessVariables:function(){var e=this.options.variables,t,i,n={},r,a;for(r=e.length-1;r>=0;r--){if($.isArray(e[r].operators)){e[r].value=e[r].value||null;e[r].valueType=parseInt(e[r].valueType,10);t=e[r].operators;for(a=t.length-a;a>=0;a--){i=t[a];i.noValue=i.template.indexOf(l)<0;i.template=i.template||"";i.controlType=parseInt(i.controlType,10);if(typeof i.defaultValue!=="string"){i.defaultValue=null}}n[e[r].id]=e[r]}}this.element.data("map_vars",n)},_initModel:function(e,t){var i,n=this.options.logicOperators[0];i=new x(e,t,n.text,n.code);this._preprocessVariables();this.element.attr("data-expr-inst-id",e).data("expr",i);return i},_initView:function(e,t){var i=this.element,n=I(t);n.find('[data-role="oper"]').text(this.options.logicOperators[0].text);n.attr("aeType","aeLogicBlock").attr("data-expr-id",e).attr("data-root-group","1");n.addClass(this.options.logicOperators[0].color);i.attr("data-root-gid",t).prepend(n);n.find("[data-role='drag-handle']").remove();n.find("[data-role='group-del']").remove();n.find("[data-role='member-drop-tip']").aeDroppable({greedy:true,drop:Te,over:_e,out:xe});De(i);if(this.options.hasCatalog){this._initVariableTreeDialog(e)}return n},_initVariableTreeDialog:function(e){var t,i;t=H(e,this.options.variables);i=t.find("[data-role='member-tree']");i.aeTree({});i.aeTree("remove");i.aeTree("reload",this.options.variables)},enable:function(){var e=this.element,t=e.find("[data-role='member']"),i;De(e);e.find("[data-role='member-group']").not("[data-root-group]").aeDraggable("enable");e.find("[data-role='oper']").css("cursor","hand");e.find("[data-role='group-del']").show();e.find("[data-role='drag-handle']").show();e.find("[data-role='member-variable']").aeCombo("enable",true);e.find("[data-role='member-operator']").aeCombo("enable",true);e.find("[data-role='member-value']").attr("disabled",false);e.find("[data-role='member-value-enum']").aeCombo("enable",true);e.find("[data-role='member-value-number']").aeFlip("enable",true);e.find("[data-role='member-tree-button']").attr("disabled",false);e.find("[data-role='member-del']").show();e.find("[data-role='member-add']").show();for(i=t.length-1;i>=0;i--){Me($(t[i]))}},disable:function(){var e=this.element,t=e.find("[data-role='member']"),i;Ie(e);e.find("[data-role='member-group']").not("[data-root-group]").aeDraggable("disable");e.find("[data-role='oper']").css({cursor:"default"});e.find("[data-role='group-del']").hide();e.find("[data-role='drag-handle']").hide();e.find("[data-role='member-variable']").aeCombo("enable",false);e.find("[data-role='member-operator']").aeCombo("enable",false);e.find("[data-role='member-value']").attr("disabled",true);e.find("[data-role='member-value-enum']").aeCombo("enable",false);e.find("[data-role='member-value-number']").aeFlip("enable",false);e.find("[data-role='member-tree-button']").attr("disabled",true);e.find("[data-role='member-del']").hide();e.find("[data-role='member-add']").hide();for(i=t.length-1;i>=0;i--){Pe($(t[i]))}},toExpression:function(e,t){var i=this.element.data("expr");return i.toExpression(e||this.options.assembler,t)},getState:function(){var e=this.element.data("expr");return e.getState()},_clear:function(){var e=this.element.data("expr"),t=e.id;groupId=e.root.id;e.gc();this.element.off(".aeLogicBlock");this.element.empty();$("#logicblock-"+t).remove();return{exprId:t,groupId:groupId}},_getVariableObject:function(e,t){var i;for(i=e.length-1;i>=0;i--){if(e[i].name===t){return e[i]}}return null},_getLogicOperator:function(e){var t=this.options.logicOperators,i;for(i=t.length-1;i>=0;i--){if(t[i].code===e){return t[i]}}return null},_reloadViews:function(e,t){var i,n,r,a,o,s,l,d,c,u,h,f,p,v,m,g,b,y=this.options;n=t.length;r=e.find("[data-role='group-cntr']").children("[data-role='member-add']");for(i=0;i<n;i++){if(t[i]instanceof k){h=I(t[i].id);h.attr("data-expr-id",e.attr("data-expr-id"));h.insertBefore(r);v=this._getLogicOperator(t[i].operator);if(v!==null){a=h.find("[data-role='oper']");a.attr("data-oper",v.code).text(v.text);c=a.attr("data-group-id");$("#"+c).addClass(v.color)}h.find("[data-role='member-drop-tip']").aeDroppable({greedy:true,drop:Te,over:_e,out:xe});h.aeDraggable({handle:"[data-role='drag-handle']",revert:true,distance:5,start:we,stop:Se});this._reloadViews(h,t[i].members)}else{c=e.attr("id");u=t[i].id;m=M(c,u);m.insertBefore(r);$cntr=m.find("[data-role='member-cntr']");g=this._getVariableObject(y.variables,t[i].variableName);if(g===null){g=X(y.variables)}if(this.options.hasCatalog){l=N(c,u,y.variables);l.attr("data-code",t[i].variable).attr("data-variable-id",t[i].variableId).text(t[i].variableName);$cntr.append(l);l.on("click.aeLogicBlock",K)}else{d=F(c,u,y.variables,g.name);$cntr.append(d);d.aeCombo({});d.next().addClass("m-b-xs");d.aeCombo("reload",y.variables);d.aeCombo("setDefault",y.variables[0].id);ee(d,y.variables)}f=A(c,u,g,t[i].operator);$cntr.append(f);f.aeCombo({});f.next().addClass("m-b-xs");f.aeCombo("reload",g.operators);f.aeCombo("setDefault",t[i].operator);te(f,g.operators);d=z($cntr,c,u,t[i].valueType,t[i].value,t[i].defaultValue);Me(m);p=f.aeCombo("option").onValueChange;f.aeCombo("option","onValueChange",null);f.aeCombo("setValue",t[i].operator);f.aeCombo("option","onValueChange",p);b={groupId:c,memberId:u,valueType:parseInt(t[i].valueType,10),controlType:parseInt(t[i].controlType,10)};o=$("#"+c).attr("data-expr-id");s=$('[data-expr-inst-id="'+o+'"]');optionValue=t[i].value;if(optionValue==="?"){optionValue=""}W(b,optionValue,t[i].valueText);if($.isArray(g.value)){$(d[0]).aeCombo("reload",g.value);$(d[0]).aeCombo("setDefault",t[i].value||g.value[0].code)}j(b)}}},clear:function(){var e=C("gid"),t=this._clear();this._initModel(t.exprId,t.groupId);this._initView(t.exprId,t.groupId);E.fireExprChangeEvent(t.exprId)},_reloadRoot:function(e,t){var i,n=t.groups,r,a,o=null;i=e.find("[data-role='oper']");for(r=n.length-1;r>=0;r--){if(n[r].id===t.rootId){o=n[r].operator}}if(o!==null){a=this._getLogicOperator(o);i.attr("data-oper",a.code).text(a.text);$("#"+e.attr("id")).addClass(a.color)}},reload:function(e){var t,i,n,r,a;n=this._clear();t=this._initModel(e.id,e.rootId);a=this.element.data("map_vars");t.setState(e,a);r=this._initView(e.id,e.rootId);this._reloadRoot(r,e);i=t.root.members;this._reloadViews(r,i);E.fireExprChangeEvent(e.id)},_destroy:function(){if(this._hdTimer!==null){clearTimeout(this._hdTimer);this._hdTimer=null}this._$input.off(".aeLogicBlock");this._$input.remove();this._$input=null;this._$result.remove();this._$result=null;this._clear()}})});define("ui-notice",function(e,t,i){$.ae.lang.aeNotice={success:"Success",error:"Error",warning:"Warning",message:"Message",notify:"Notification",annunciate:"Announcement",rss:"Rss"};$.aeWidget("ae.aeNotice",{options:{life:3e3,type:"success",title:"Tips",content:null,audio:"/fe-common/audio/blop",volume:"45",autoClose:true,verticalEdge:"bottom",horizontalEdge:"right",zindex:"1060",icon:"md-close",onCreate:null,onClose:null,clickEvent:null},_create:function(){var e=[],t,i=[{h:"right",v:"top"},{h:"right",v:"bottom"},{h:"center",v:"top"},{h:"center",v:"bottom"},{h:"left",v:"top"},{h:"left",v:"bottom"}];for(t=0;t<=5;t++){e[t]=$("<div></div>");e[t].attr("id",i[t].h+""+i[t].v);e[t].addClass("notice-container"+" "+i[t].h+" "+i[t].v);this.element.append(e[t])}this.containers=e;this.pos=i},_createNotice:function(e){var t,i,n,r,a=e.verticalEdge;i=e.horizontalEdge;n={h:i,v:a};for(t=0;t<this.pos.length;t++){if(n.h===this.pos[t].h&&n.v===this.pos[t].v){r=this.containers[t];break}}this.container=r;this._buildNotification(e)},open:function(e){var t=$.extend({},this.options,e);this._createNotice(t)},_buildNotification:function(e){var t,i,n,r,a,o,s;t=this.container;a=t.data("notice")||0;a+=1;t.data("notice",a);r="notice-notification-"+a;t.css("z-index",e.zindex);i=$('<div class="r clear m-t-xs"></div>');if(window.top===window.self){t.addClass("is-top-frame")}if(e.type==="dark"){i.addClass("text-white")}i.attr("id",r);if(this._hasContent(e)){i.addClass("notice-notification");if(e.type==="light"){i.addClass("b")}}else{i.addClass("notice-notificationNoContent")}if(e.verticalEdge==="bottom"){i.addClass("up")}else{i.addClass("down")}i.addClass("bg-"+e.type);i.append(this._buildIcon(e));i.append(this._buildContent(e));t.append(i);this._playAudio({url:e.audio,volume:e.volume});if($.isFunction(e.onCreate)===true){e.onCreate.call()}o=this;s=$("#"+e.horizontalEdge+""+e.verticalEdge+">"+"#"+r);if(e.autoClose){setTimeout(function(e,t){if(s){o._closeNotification(e,t)}},e.life,i,e)}s.on("click",".md-close",{inst:this,opts:e},function(e){var t=e.data;t.inst._closeNotification(s,t.opts)});s.find(".rightArea .content").on("click",{inst:this,opts:e},function(e){var t=e.data;if($.isFunction(t.opts.clickEvent)===true){t.opts.clickEvent.call(t.inst.element)}})},_hasIcon:function(e){return typeof e.icon==="string"&&e.icon!==""},_buildIcon:function(e){if(this._hasIcon(e)){var t=$('<div class="pull-left text-center"></div>');var i=$("<i class="+e.icon+"/>");i.addClass("text-2x");if(!this._hasContent(e)){i.addClass("notice-pos-center");t.addClass("nonotice-iconNoContent")}else{t.addClass("notice-top-icon")}t.append(i);return t[0].outerHTML}else{return""}},_buildContent:function(e){var t=$("<div></div>"),i=$("<div class='pull-left'></div>"),n=$("<div></div>"),r;if(this._hasContent(e)){n.addClass("m-t-xs");t.addClass("rightArea");if(e.type==="light"){t.addClass("b-l")}}else{n.addClass("notice-pos-center");t.addClass("rightAreaNoContent")}n.append('<span class="text-base font-medium" title="'+(e.title||"Tips")+'">'+(e.title||"Tips")+"</span>");i.append(n);if(this._hasContent(e)){r=$("<div class='m-t-xs m-b-xs notice-subText'><span class='text-base'></span></div>");r.find("span").text(e.content);i.append(r)}t.addClass(e.type+" "+"lt pull-right");i.addClass("content");t.append(i);t.append(this._buildClose(e));return t[0].outerHTML},_buildClose:function(e){var t=$('<div class="pull-right m-r-sm"></div>');var i=$('<a><i class="md-close"></i></a>');if(this._hasContent(e)){t.addClass("notice-top-close")}else{i.addClass("notice-pos-center")}t.append(i);return t},_playAudio:function(e){e=e||{};var t=$(this);t._audio=t._audio||{};var i=navigator.userAgent.toLowerCase();t.IE8=i.indexOf("msie")!=-1&&parseInt(i.split("msie")[1])==8;if(!e.url||t.IE8)return this;if(!t._audio[e.url]){var n=jQuery("<audio/>");jQuery("<source/>",{src:e.url+".mp3"}).appendTo(n);jQuery("<source/>",{src:e.url+".ogg"}).appendTo(n);t._audio[e.url]=n[0]}t._audio[e.url].volume=Math.min(e.volume!==undefined?e.volume:(t.options.volume!==undefined?t.options.volume:100)/100,1);t._audio[e.url].pause();try{t._audio[e.url].currentTime=0}catch(r){}t._audio[e.url].play()},_hasContent:function(e){if(typeof e.content==="string"&&e.content!==""){return true}else{return false}},_closeNotification:function(e,t){var i=this.container.data("notice");e.fadeOut("slow",function(){e.remove()});i--;if($.isFunction(t.onClose)===true){t.onClose.call(this.element)}this.container.data("notice",i<0?0:i)}});$(document.body).aeNotice();$.Notice=function(e){$(document.body).aeNotice("open",e)};var n={success:function(e,t,i,n,r){if(!!t&&!!e){e+=": "+t}else if(!!t){e=t}var a=$.ae.lang.aeNotice;$.Notice({title:e||a.success,type:"success",verticalEdge:"top",horizontalEdge:"center",icon:"check_circle",clickEvent:$.isFunction(i)?i:null,onClose:$.isFunction(n)?n:null,onCreate:$.isFunction(r)?r:null,audio:"/fe-common/audio/blop"})},error:function(e,t,i,n,r){if(!!t&&!!e){e+=": "+t}else if(!!t){e=t}var a=$.ae.lang.aeNotice;$.Notice({title:e||a.error,type:"danger",content:null,verticalEdge:"top",horizontalEdge:"center",icon:"close_circle",clickEvent:$.isFunction(i)?i:null,onClose:$.isFunction(n)?n:null,onCreate:$.isFunction(r)?r:null,audio:"/fe-common/audio/blop"})},warning:function(e,t,i,n,r){if(!!t&&!!e){e+=": "+t}else if(!!t){e=t}var a=$.ae.lang.aeNotice;$.Notice({title:e||a.warning,type:"warning",verticalEdge:"top",
horizontalEdge:"center",icon:"warning",clickEvent:$.isFunction(i)?i:null,onClose:$.isFunction(n)?n:null,onCreate:$.isFunction(r)?r:null,audio:"/fe-common/audio/blop"})},info:function(e,t,i,n,r){if(!!t&&!!e){e+=": "+t}else if(!!t){e=t}var a=$.ae.lang.aeNotice;$.Notice({title:e||a.warning,type:"info",verticalEdge:"top",horizontalEdge:"center",icon:"error",clickEvent:$.isFunction(i)?i:null,onClose:$.isFunction(n)?n:null,onCreate:$.isFunction(r)?r:null,audio:"/ARIESRES/crm-bj/fe-common/audio/blop"})},message:function(e,t,i,n,r){var a=$.ae.lang.aeNotice;$.Notice({title:e||a.message,type:"light",content:t,icon:"message_text_outline2",clickEvent:$.isFunction(i)?i:null,onClose:$.isFunction(n)?n:null,onCreate:$.isFunction(r)?r:null,audio:"/fe-common/audio/boop2"})},messageDark:function(e,t,i,n,r){var a=$.ae.lang.aeNotice;$.Notice({title:e||a.message,type:"dark",content:t,icon:"message_text_outline2",clickEvent:$.isFunction(i)?i:null,onClose:$.isFunction(n)?n:null,onCreate:$.isFunction(r)?r:null,audio:"/fe-common/audio/boop2"})},notify:function(e,t,i,n,r){var a=$.ae.lang.aeNotice;$.Notice({title:e||a.notify,type:"light",content:t,icon:"notifications_none",clickEvent:$.isFunction(i)?i:null,onClose:$.isFunction(n)?n:null,onCreate:$.isFunction(r)?r:null,audio:"/fe-common/audio/boop2"})},annunciate:function(e,t,i,n,r){var a=$.ae.lang.aeNotice;$.Notice({title:e||a.annunciate,type:"light",content:t,icon:"bullhorn",clickEvent:$.isFunction(i)?i:null,onClose:$.isFunction(n)?n:null,onCreate:$.isFunction(r)?r:null,audio:"/fe-common/audio/boop2"})},rss:function(e,t,i,n,r){var a=$.ae.lang.aeNotice;$.Notice({title:e||a.annunciate,type:"light",content:t,icon:"rss",clickEvent:$.isFunction(i)?i:null,onClose:$.isFunction(n)?n:null,onCreate:$.isFunction(r)?r:null,audio:"/fe-common/audio/boop2"})}};$.Notice.success=n.success;$.Notice.info=n.info;$.Notice.warning=n.warning;$.Notice.error=n.error;$.Notice.message=n.message;$.Notice.messageDark=n.messageDark;$.Notice.notify=n.notify;$.Notice.annunciate=n.annunciate;$.Notice.rss=n.rss});define("ui-htree",function(e,t,n){var r=jQuery,a="check_box_outline_blank",o="check_box",s="indeterminate_check_box",l="active",d="node-selection",c="folder",u="folder_move",h="file_outline",f="loading.gif";r.ae.lang.aeHTree={selectedCount:"You have selected ? items",select:"Select",cancel:"Cancel"};function p(e){return e.indexOf(".")>=0}function v(e,t){var i=r(this),n=i.hasClass(a),o;o=e.setSelected(t,n);e._updateSelectedNodes(o);return o}function m(e,t,i,n){if(i.loading===false&&r.isFunction(n.source)){e.find('[data-role="htree-icon"]').hide();e.find('[data-role="htree-loading"]').show();i.loading=true;n.source.call(t.element,i.getState())}}function g(e,t){var i=r(this),n="."+l,a=e.options,o=a.lazyLoadMode,s,d,c,u,h,f,v,g,b,y;f=e._nodes[t];s=!i.hasClass(l);c=i.siblings(n).removeClass(l);if(c.length>0){b=c.attr("data-node-id");if(e._nodes[b].getChildCount()>0){c=c.find('[data-role="htree-icon"]');if(p(e._nodes[b].foldedIcon)){c.attr("src",e._nodes[b].foldedIcon)}else{c.removeClass().addClass(e._nodes[b].foldedIcon)}}}if(s){i.addClass(l);if(o&&f.isLazy){m(i,e,f,a)}else{if(f.getChildCount()>0){c=i.find('[data-role="htree-icon"]');if(p(f.expandedIcon)){c.attr("src",f.expandedIcon)}else{c.removeClass().addClass(f.expandedIcon)}}}}else{if(o&&f.isLazy){m(i,e,f,a)}}d=f.getChildCount()>0;if(f.pid===null){if(s){e._$sub.empty();if(d){e._$sub.append(x("",e._getChilrenById(t),a))}}else{c=e._$sub.find('[data-role="htree-list"]:eq(0)');u=c.find(n);if(u.length>0){u.removeClass(l);v=e._nodes[u.attr("data-node-id")];if(v.getChildCount()>0){if(p(f.foldedIcon)){u.attr("src",f.foldedIcon)}else{u.find('[data-role="htree-icon"]').removeClass().addClass(f.foldedIcon)}}}c.nextAll().remove()}}else{c=i.parents('[data-role="htree-list"]:eq(0)');if(s){c.nextAll().remove();if(d){e._$sub.append(x("",e._getChilrenById(t),a))}}else{if(d){c=c.nextAll();u=r(c[0]).find(n);if(u.length>0){u.removeClass(l);v=e._nodes[u.attr("data-node-id")];if(v.getChildCount()>0){if(p(f.foldedIcon)){u.attr("src",v.foldedIcon)}else{u.find('[data-role="htree-icon"]').removeClass().addClass(v.foldedIcon)}}}c.slice(1).remove()}}}if(a.mutiSelect===false){if(s){if(b){g=e._nodes[b].setSelected(e._nodes,e._levels,false);e._updateSelectedNodes(g)}}else{e._clearSelectedList()}f.setSelected(e._nodes,e._levels,true,false,true);e._updateSelectedNodes(e._getAncestorsById(t,true))}}function b(e){var t={noRelativeAncestors:false,noRelativeDescendants:false};switch(e){case 1:t.noRelativeAncestors=true;break;case 2:t.noRelativeDescendants=true;break;case 3:t.noRelativeAncestors=true;t.noRelativeDescendants=true;break}return t}function y(e,t){var i=t||{};this.id=e.id;this.pid=e.pid||null;this.rootId=e.rootId||null;this.name=e.name||"";this.level=isNaN(e.level)?0:parseInt(e.level,10);this.selected=!!e.selected;this.foldedIcon=e.foldedIcon||i&&i.foldedIcon||c;this.expandedIcon=e.expandedIcon||i&&i.expandedIcon||c;this.leafIcon=e.leafIcon||i&&i.leafIcon||h;this.blurryIcon=e.blurryIcon||i&&i.blurryIcon||u;this.userData=e.userData||null;this.childInfo={children:null,selectedCount:0};this.isIndeterminate=!!e.isIndeterminate;this.isLazy=e.isLazy===undefined?true:!!e.isLazy;this.loading=false}y.prototype={getChildCount:function(){return this.childInfo.children!==null?this.childInfo.children.length:0},gc:function(){var e=this.childInfo.children;if(e!==null){e.splice(0,e.length)}this.childInfo=null;this.userData=null},isRoot:function(){return this.pid===null},getState:function(){var e={id:this.id,pid:this.pid,selected:this.selected,isIndeterminate:this.isIndeterminate,userData:this.userData,isLazy:this.isLazy,rootId:this.rootId,children:[]},t=this.childInfo.children,i,n;if(t){for(i=0,n=t.length;i<n;i++){e.children.push(t[i].id)}}return e},each:function(e,t,i,n){var r=this.childInfo.children,a,o;t.call(this,e);if(!i){o=this;o=e[o.pid];while(o){o.each(e,t,i,n);o=e[o.pid]}}if(!n){if(r!==null){for(a=r.length-1;a>=0;a--){r[a].each(e,t,i,n)}}}},setSelected:function(e,t,i,n,r){var o,l,d,c,u,h,f,p,v,m,g=[],b=[],y=!!i,C;if(this.selected!==y){C=y?1:-1;this.selected=y;this.isIndeterminate=false;g.push(this);t[this.level].selectedCount+=C;if(this.isRoot()===false){o=e[this.pid];o.childInfo.selectedCount+=C;if(!n){while(o){h=false;f=w(o.childInfo);p=f!==a;v=f===s;C=p?1:-1;if(o.selected!==p){h=true;o.selected=p;t[o.level].selectedCount+=C;if(e[o.pid]){e[o.pid].childInfo.selectedCount+=C}}if(o.isIndeterminate!==v){h=true;o.isIndeterminate=v}if(h){g.push(o)}o=e[o.pid]}}}l=this.childInfo.children;if(!r&&l){for(c=0,u=l.length;c<u;c++){b=l[c].setSelected(e,t,y,true);g=g.concat(b)}}}return g}};function w(e){var t=e.children,i,n=0;if(t!==null){n=t.length;for(i=n-1;i>=0;i--){if(t[i].isIndeterminate){return s}}}if(n===e.selectedCount){return o}else if(e.selectedCount===0){return a}else{return s}}function C(){var e='<div class="node-selection-search" data-role="htree-search-bar"><i class="close_circle pull-right none" data-role="htree-search-clear"></i><i class="search"></i><input type="text" class="node-search-input" data-role="htree-search"/></div><ul class="node-selection-result none" data-role="htree-result"></ul><div class="node-selection-tree" data-role="htree-tree"><div class="main-column" data-role="htree-main-list"></div><div class="branch-columns" data-role="htree-sub-list"></div></div>';e+=S();return r(e)}function S(){var e=r.ae.lang.aeHTree,t='<div class="node-selection-footer pos-rlt" data-role="htree-footer"><button class="btn btn-primary pull-right" type="button" data-role="htree-ok">'+e.select+'</button> <button class="btn btn-default pull-right m-r-sm" type="button" data-role="htree-cancel">'+e.cancel+'</button><span class="node-selection-selected-num" data-role="htree-tips">',i='<a tabindex="0" role="button" data-toggle="popover" data-trigger="click" class="text-primary font-medium" date-role="htree-count">0</a>';t+=e.selectedCount.replace("?",i);t+='</span><div class="have-selected-popover none" data-role="htree-popover"><i class="window_close" data-role="htree-win-close"></i></div></div>';return t}function _(e,t){return'<span class="label label-primary" data-role="htree-item">'+t+'<i class="window_close" data-role="htree-delete-item" data-node-id="'+e+'"></i></span>'}function x(e,t,i){var n,a,o='<div class="node-selection-tree-column thin-scroll" data-role="htree-list"><h5 class="column-name '+(e||"none")+'">'+(e||"")+"</h5><ul>";for(n in t){a=t[n];o+=T(a,i)}o+="</ul></div>";return r(o)}function T(e,t){var i,n,l=t.mutiSelect,d=t.nodeRender,c;if(e.isIndeterminate){n=s}else{n=e.selected?o:a}if(t.lazyLoadMode&&e.isLazy===true){i=e.blurryIcon}else if(e.getChildCount()===0){i=e.leafIcon}else{i=e.foldedIcon}c='<li data-node-id="'+e.id+'"><i class="'+n+" "+(l?"":"none")+'" data-role="htree-checkbox"></i>';if(t.lazyLoadMode===true){c+='<img src="'+t.loadingAni+'" class="rounded m-l-xs m-r-xs none" data-role="htree-loading" width="14px" height="14px"/>'}if(p(i)){c+='<img src="'+i+'" class="rounded m-l-xs m-r-xs" data-role="htree-icon" width="14px" height="14px"/>'}else{c+='<i class="'+i+'" data-role="htree-icon"></i>'}if(r.isFunction(d)===false){c+='<label data-role="htree-label" title="'+e.name+'">'+e.name+"</label></li>"}else{c+=d(e.getState())+"</li>"}return c}function k(e,t){var i=e.options,n=i.nodeRender,l,d,c,u,h,f,p;if(t.selected){l=t.isIndeterminate?s:o;d=t.expandedIcon||i.expandedIcon}else{l=a;d=t.foldedIcon||i.foldedIcon}p='<li><div class="result-name" data-node-id="'+t.id+'"><i class="'+l+" "+(i.mutiSelect?"":"none")+'" data-role="htree-result-checkbox"></i>';if(r.isFunction(n)){p+=n(t.getState())+"</div>"}else{p+='<i class="'+d+'"></i><label for="" class="text-c-c">'+t.name+"</label></div>"}c=e._getAncestorsById(t.id);p+='<div class="result-route">';for(h=c.length-1;h>=0;h--){f=c[h];p+='<a href="javascript:void(0)" data-role="htree-link" data-node-id="'+f.id+'">'+f.name+"</a>";if(h>0){p+='<i class="chevron_right"></i>'}}p+="</div></li>";return r(p)}r.aeWidget("ae.aeHTree",{options:{foldedIcon:c,expandedIcon:c,leafIcon:h,blurryIcon:u,loadingAni:f,nodeRender:null,searchable:true,mutiSelect:false,mutiSelectMode:0,minLength:1,delay:300,footerEnabled:true,source:null,lazyLoadMode:false,subTreeId:null,ok:null,cancel:null,select:null,beforeCheck:null,beforeUnCheck:null,beforeDeleteNode:null,afterDeleteNode:null,check:null,unCheck:null},_create:function(){var e=this.element,t=this.options,i=e.attr("aeInit"),n,a;if(i){e.data("org_aeInit",i).attr("aeInit",false)}e.attr("aeId",e.attr("id")).addClass(d).addClass("pos-rlt");this._hdTimer=null;this._roots={};this._nodes={};this._levels=[];this._selectedNodes={};this._selectedCount=0;e.append(C());this._$input=e.find('[data-role="htree-search"]');this._$tree=e.find('[data-role="htree-tree"]');this._$result=e.find('[data-role="htree-result"]');this._$main=e.find('[data-role="htree-main-list"]');this._$sub=e.find('[data-role="htree-sub-list"]');this._$footer=e.find('[data-role="htree-footer"]');a=r.proxy(function(){return this._$footer.find('[data-role="htree-popover"]').html()},this);this._$footer.find('[date-role="htree-count"]').popover({html:true,placement:"top",title:"",content:a}).on("show.bs.popover",this,function(e){var t=e.data;if(t.options.disabled||t._selectedCount===0){return false}});this._addEvents();if(t.searchable===false){t.searchable=!t.searchable;this._setOption("searchable",!t.searchable)}else{this._addSearchbarEvents()}if(t.footerEnabled===false){t.footerEnabled=!t.footerEnabled;this._setOption("footerEnabled",!t.footerEnabled)}else{if(this.options.mutiSelect===true){this._$footer.find('[data-role="htree-tips"]').show()}else{this._$footer.find('[data-role="htree-tips"]').hide()}this._addFooterEvents()}if(t.source!==null){n=t.source;t.source=null;this._setOption("source",n)}this.reset()},_refreshResults:function(){var e,t;this._$result.empty();e=this._$input.val();if(e===""){this.element.find('[data-role="htree-search-clear"]').hide();this._$tree.show();this._$result.hide()}else{if(e.length>=this.options.minLength){t=this._search(e);if(t.length>0){this._reloadResult(t)}}this._$tree.hide();this._$result.show()}},_addEvents:function(){this.element.find('[data-role="htree-tree"]').on("click.aeHTree","li",this,function(e){var t=e.data,i=r(this).attr("data-node-id");g.apply(this,[t,i]);t._trigger("select",null,t._nodes[i].getState())}).on("click.aeHTree",'[data-role="htree-checkbox"]',this,function(e){var t=e.data,i=r(this),n=i.parent().attr("data-node-id"),o,s,l=i.hasClass(a),d,c;if(t._trigger(l?"beforeCheck":"beforeUnCheck",null,t._nodes[n].getState())===false){e.stopPropagation();return false}d=v.apply(this,[t,n]);s=d.length;if(s>0){c=[];for(o=0;o<s;o++){c.push(d[o].getState())}t._$footer.find('[date-role="htree-count"]').popover("hide");t._trigger(l?"check":"unCheck",null,c)}e.stopPropagation()})},_delEvents:function(){this.element.find('[data-role="htree-tree"]').off(".aeHTree")},_addFooterEvents:function(){this._$footer.on("click.aeHTree","button",this,function(e){var t=r(this),i=e.data;if(t.attr("data-role")==="htree-ok"){i._trigger("ok",null,i.getSelectedNodes())}else{i._trigger("cancel")}return false}).on("click.aeHTree",'[data-role="htree-win-close"]',this,function(e){var t=e.data;t._$footer.find('[date-role="htree-count"]').popover("hide");r(this).parents(".popover").hide();return false}).on("click.aeHTree",'[data-role="htree-delete-item"]',this,function(e){var t=r(this),i=e.data,n,a,o=i.options.mutiSelect,s=t.attr("data-node-id");if(o&&i._trigger("beforeUnCheck",null,i._nodes[s].getState())===false){return}a=i.setSelected(s,false);n=i._$footer.find('[date-role="htree-count"]');n.popover("hide");i._updateSelectedNodes(a);if(i._selectedCount>0){n.popover("show")}if(o){i._$footer.find('[date-role="htree-count"]').popover("hide");i._trigger("unCheck",null,i._nodes[s].getState())}return false})},_delFooterEvents:function(){this._$footer.off(".aeHTree")},_addSearchbarEvents:function(){this.element.find('[data-role="htree-search-clear"]').on("click.aeHTree",this,function(e){var t=e.data;if(t._hdTimer!==null){clearTimeout(t._hdTimer);t._hdTimer=null}r(this).hide();t._$result.empty();t._$result.hide();t._$tree.show();t._$input.val("")[0].focus();e.stopPropagation()});this._$input.on("keyup.aeHTree",this,function(e){var t=e.data;if(t._hdTimer!==null){clearTimeout(t._hdTimer);t._hdTimer=null}if(e.which===27){r(this).trigger("blur.aeHtree",t);return}t.element.find('[data-role="htree-search-clear"]').show();t._hdTimer=setTimeout(r.proxy(t._refreshResults,t),t.options.delay)}).on("focus.aeHTree",this,function(e){var t=e.data;if(t._$result.has("i").length>0&&t._$result.css("display")==="none"){t._$tree.hide();t._$result.slideDown(200)}}).on("blur.aeHTree",this,function(e){});this._$result.on("click.aeHTree",'[data-role="htree-result-checkbox"]',this,function(e){var t=e.data,i=r(this),n=t.options.mutiSelect,l,d,c,u,h,f,p,m,g,b,y,w=t._nodes,C=t._levels,S=i.parent().attr("data-node-id");m=w[S];l=!m.selected;if(n&&t._trigger(l?"beforeCheck":"beforeUnCheck",null,m.getState())===false){e.stopPropagation();return false}d=t._$tree.find('[data-node-id="'+S+'"]>[data-role="htree-checkbox"]');if(d.length>0){h=v.apply(d[0],[t,S])}else{h=m.setSelected(w,C,l);t._updateSelectedNodes(h);for(b=h.length-1;b>=0;b--){d=t._$tree.find('[data-node-id="'+h[b].id+'"]');if(d.length>0){if(h[b].isIndeterminate){g=s}else{g=h[b].selected?o:a}d.find('[data-role="htree-checkbox"]').removeClass().addClass(g)}}}u=t._$result.find('[data-role="htree-result-checkbox"]');for(b=u.length-1;b>=0;b--){d=r(u[b]);d.removeClass();p=d.parent().attr("data-node-id");if(w[p].isIndeterminate){d.addClass(s)}else{d.addClass(w[p].selected?o:a)}}y=h.length;if(y>0){f=[];for(b=0;b<y;b++){f.push(h[b].getState())}t._$footer.find('[date-role="htree-count"]').popover("hide");t._trigger(l?"check":"unCheck",null,f)}}).on("click.aeHTree","a",this,function(e){var t=r(this),i,n=e.data;if(t.attr("data-role")==="htree-link"){i=t.attr("data-node-id");n.goto(i);n._$result.hide();n._$tree.show()}})},_delSearchbarEvents:function(){this._$input.off(".aeHTree");this._$result.off(".aeHTree");this.element.find('[data-role="htree-search-clear"]').off(".aeHTree")},_updateSelectedNodes:function(e,t){var i,n,r,a,o,s,l=this._selectedNodes;if(t===true){for(r=0,a=e.length;r<a;r++){i=e[r];if(i.id in l){delete l[i.id];this._selectedCount--}}}else{s=this._$footer.find('[data-role="htree-popover"]');for(r=0,a=e.length;r<a;r++){i=e[r];n=i.id;o=n in l;if(i.selected===true&&o===false){l[n]=i;this._selectedCount++;if(s.find('[data-node-id="'+n+'"]').length===0){s.append(_(n,i.name))}}else if(i.selected===true&&o===true){if(s.find('[data-node-id="'+n+'"]').length===0){s.append(_(n,i.name))}}else if(i.selected===false&&o===true){delete l[n];this._selectedCount--;s.find('[data-node-id="'+n+'"]').parent().remove()}}}this._$footer.find('[date-role="htree-count"]').text(""+this._selectedCount)},_clearSelectedList:function(){var e=this._selectedNodes,t;for(t in e){delete e[t]}this._selectedCount=0;this._$footer.find('[data-role="htree-popover"]').empty()},_search:function(e){var t=this._nodes,i,n,r=[];for(i in t){n=t[i];if(n.name.indexOf(e)>=0){r.push(n)}}return r},_reloadResult:function(e){var t=this._$result,i,n,r=e.length;t.empty();for(n=0;n<r;n++){i=e[n];t.append(k(this,i))}},"goto":function(e){var t,i,n,r,a,o;if(e in this._nodes){t=this._nodes[e];i=this._$tree.find('[data-node-id="'+e+'"]');o=this._$tree;n=this._getAncestorsById(e);for(a=n.length-1;a>=0;a--){r=n[a].id;i=o.find('[data-node-id="'+r+'"]');g.apply(i[0],[this,r])}this._$sub.scrollLeft(i.position().left);return true}return false},getSelectedCount:function(){if(this.options.mutiSelect===true){return this._selectedCount}else{if(this._$tree.find("."+l).length>0){return 1}}},_setSelected:function(e,t,i,n){var r,s,d,c,u="."+l,h,f,p,v,m,g,b,y,C;if(e in this._nodes){c=this._nodes[e];m=c.isRoot();p=this._$tree.find('[data-node-id="'+e+'"]');r=p.find('[data-role="htree-checkbox"]');if(t){r.removeClass(a).addClass(o)}else{r.removeClass().addClass(a)}if(n===false){if(c.getChildCount()>0&&p.hasClass(l)){h=c.selected?o:a;if(m){f=this._$sub.find('[data-role="htree-checkbox"]')}else{f=this._$sub.find('[data-node-id="'+e+'"]').parents('[data-role="htree-list"]:eq(0)').nextAll().find('[data-role="htree-checkbox"]')}f.removeClass().addClass(h)}}if(i===false){if(m===false){d=this._getAncestorsById(e);y=d.length;for(b=1;b<y;b++){h=w(d[b].childInfo);f=d[b].isRoot()?this._$main:this._$sub;f.find('[data-node-id="'+d[b].id+'"]>[data-role="htree-checkbox"]').removeClass().addClass(h)}}}}},setSelected:function(e,t){var i=this.options.mutiSelect,n=[],r,a;this.goto(e);if(i===true){a=b(this.options.mutiSelectMode);n=this._nodes[e].setSelected(this._nodes,this._levels,t,a.noRelativeAncestors,a.noRelativeDescendants);this._setSelected(e,t,a.noRelativeAncestors,a.noRelativeDescendants)}return n},_initData:function(e){var t,i=e.length,n=this.options.expandedIcon,r=this.options.foldedIcon,o=this.options.leafIcon,l=this.options.blurryIcon,d=this.options.lazyLoadMode,c=this.options.mutiSelectMode,u=this._nodes,h=this._roots,f=this._levels,p=this._selectedNodes,v,m,g,b,C,S,_,x,T;for(t=0;t<i;t++){v=new y({id:e[t].id,pid:e[t].pid,name:e[t].name,expandedIcon:e[t].expandedIcon||n,foldedIcon:e[t].foldedIcon||r,leafIcon:e[t].leafIcon||o,blurryIcon:e[t].blurryIcon||l,selected:!!e[t].selected,userData:e[t].userData});if(d===true&&e[t].isLazy===false){v.isLazy=false}u[v.id]=v;if(v.isRoot()){h[v.id]=v;v.rootId=v.id}}for(T in u){v=u[T];if(v.pid!==null){S=u[v.pid];if(S.childInfo.children===null){S.childInfo.children=[]}S.childInfo.children.push(v);if(v.selected){S.childInfo.selectedCount++;p[v.id]=v;this._selectedCount++}}else{if(v.selected){p[v.id]=v;this._selectedCount++}}}x=function(e){var t;if(this.isRoot()===false){this.level=e[this.pid].level+1;this.rootId=e[this.pid].rootId}t=f[this.level];if(!t){t=f[this.level]={selectedCount:0,count:0,parents:{}}}if(this.selected){t.selectedCount++}t.count++;if(this.pid!==null){t.parents[this.pid]=u[this.pid]}};for(T in h){h[T].each(u,x,true)}if(c===0||c===2){for(t=f.length-1;t>=1;t--){_=f[t].parents;for(T in _){v=_[T];levelInfo=f[v.level];m=w(v.childInfo);v.isIndeterminate=m===s;C=m!==a;if(v.selected!==C){v.selected=C;if(C){b=1;p[v.id]=v}else{b=-1;delete p[v.id]}if(v.pid!==null){u[v.pid].childInfo.selectedCount+=b}this._selectedCount+=b;levelInfo.selectedCount+=b}}}}this._filterSubTree()},_filterSubTree:function(){var e,t,i,n,r,a,o,s,l,d=this.options.subTreeId,c,u=this;if(d!==null&&d in this._nodes){e={};for(c in this._nodes){e[c]=this._nodes[c]}t=this._nodes={};i=this._roots={};n=this._levels=[];r=this._selectedNodes={};u._selectedCount=0;a=e[d].rootId;o=e[d].id;s=function(e){if(this.rootId==a){t[this.id]=this;if(this.isRoot()===false){this.level=e[this.pid].level+1;this.rootId=o}l=n[this.level];if(!l){l=n[this.level]={selectedCount:0,count:0,parents:{}}}l.count++;if(this.selected){l.selectedCount++;r[this.id]=this;u._selectedCount++}if(this.pid!==null){l.parents[this.pid]=e[this.pid]}}};e[d].pid=null;e[d].level=0;e[d].each(e,s,true);e[d].rootId=e[d].id;i[d]=e[d]}},_setOptions:function(e){var t,i=this.options.disabled;this._super(e);t=this.options;if(i!==t.disabled){if(t.disabled){this.element.find('[data-role="htree-search-clear"]').trigger("click.aeHTree",this);this._delEvents();this._delSearchbarEvents();this._delFooterEvents();this._$input.prop("disabled",true).addClass("bg-gray");this._$footer.find('[data-role="htree-cancel"],[data-role="htree-ok"]').prop("disabled",true);this._$footer.find('[data-role="htree-tips"]').addClass("text-muted").find("a").removeClass("text-primary").addClass("text-muted")}else{this._$input.prop("disabled",false).removeClass("bg-gray");this._$footer.find('[data-role="htree-cancel"],[data-role="htree-ok"]').prop("disabled",false);this._$footer.find('[data-role="htree-tips"]').removeClass("text-muted").find("a").removeClass("text-muted").addClass("text-primary");this._addEvents();if(t.searchable){this._addSearchbarEvents()}if(t.footerEnabled){this._addFooterEvents()}}}},_setOption:function(e,t){var i,n,o,s,l;if(this.options[e]===t){return}this._super(e,t);switch(e){case"searchable":i=this.element.find('[data-role="htree-search-bar"]');if(t){this._addSearchbarEvents();i.show();this._$tree.css("padding-top","auto")}else{this._$result.hide();this._$tree.show();i.hide();this._delSearchbarEvents();this._$tree.css("padding-top",0)}break;case"mutiSelect":i=this.element.find('[data-role="htree-checkbox"]');if(t){s=i.filter(":last").parent().attr("data-node-id");if(s){l=this._nodes[s].setSelected(this._nodes,this._levels,false)}this._$footer.find('[data-role="htree-tips"]').show();i.show()}else{i.removeClass().addClass(a);for(s in this._roots){l=this._roots[s].setSelected(this._nodes,this._levels,false)}this._$footer.find('[data-role="htree-tips"]').hide();i.hide()}break;case"source":if(r.isArray(t)){this.reload(t)}else if(r.isFunction(t)){this.reload(t.call(this.element,null))}break;case"footerEnabled":if(t){this._addFooterEvents();if(this.options.mutiSelect===true){this._$footer.find('[data-role="htree-tips"]').show()}else{this._$footer.find('[data-role="htree-tips"]').hide()}this._$footer.show();this._$tree.css("padding-bottom","auto")}else{this._delFooterEvents();this._$footer.hide();this._$tree.css("padding-bottom",0)}break;case"minLength":if(r.isNumeric(t)){this.options.minLength=t<1?1:parseInt(vlaue,10)}else{this.options.minLength=1}break}},addLazyChilds:function(e,t,i,n){if(this.options.lazyLoadMode===false||!(e in this._nodes)||this._nodes[e].isLazy===false){return false}r.ajaxPost(t,i,r.proxy(function(t){var i,a,o,s,l=null,d=this.options;if(r.isArray(t)){l=t}else if(r.isArray(t.rows)){l=t.rows}if(r.isFunction(n)&&l!==null){o=l.length;for(a=0;a<o;a++){i=n(l[a]);this.addNode({id:i.id,pid:e,name:i.name,expandedIcon:i.expandedIcon||d.expandedIcon,foldedIcon:i.foldedIcon||d.foldedIcon,leafIcon:i.leafIcon||d.leafIcon,blurryIcon:i.blurryIcon||d.blurryIcon,selected:!!i.selected,isLazy:!!i.isLazy,userData:i.userData||l[a]},e)}}s=this._$tree.find('[data-node-id="'+e+'"]');this._nodes[e].isLazy=false;this._nodes[e].loading=false;s.find('[data-role="htree-icon"]').show().removeClass().addClass(this._nodes[e].expandedIcon);s.find('[data-role="htree-loading"]').hide()},this),r.proxy(function(t,i){$el=this._$tree.find('[data-node-id="'+e+'"]');$el.find('[data-role="htree-icon"]').show();$el.find('[data-role="htree-loading"]').hide();this._nodes[e].loading=false},this));return true},_checkState:function(e){var t=!(e.id in this._nodes)&&e.id&&e.name;if(e.pid){t=t&&e.pid in this._nodes}return!!t},addNode:function(e){var t=this._nodes,i=this._levels,n,a,o,s,l,d,c,u;if(this._checkState(e)===true){o=new y(e,this.options);u=o.pid===null;o.level=u?0:t[o.pid].level+1;n=i[o.level];if(!n){n=i[o.level]={selectedCount:0,count:0,parents:{}}}if(u===false){n.parents[o.pid]=t[o.pid];a=t[o.pid].childInfo;if(t[o.pid].getChildCount()===0){a.children=[]}a.children.push(o);if(o.selected===true){n.selectedCount++;a.selectedCount++}this._updateAncestorNodesState(t[o.pid])}t[o.id]=o;if(o.pid===null){s=this._$main.find('[data-role="htree-list"]:eq(0)');s.find("ul:eq(0)").append(r(T(o,this.options)))}else{this._refreshAssociationNodesView(o)}if(o.selected){this._updateSelectedNodes([o])}return true}return false},_refreshAssociationNodesView:function(e){var t=this.options,i=t.lazyLoadMode,n,a="."+l,o,s,d,c,u,h;o=this._$tree.find('[data-node-id="'+e.pid+'"]');if(o.length>0){if(o.hasClass(l)===true){if(this._nodes[e.pid].pid===null){s=this._$sub.find('[data-role="htree-list"]:eq(0)')}else{s=o.parents('[data-role="htree-list"]:eq(0)').next()}if(s.length>0){s.find("ul:eq(0)").append(r(T(e,t)))}else{this._$sub.append(x("",this._getChilrenById(e.pid),this.options))}}else{o.addClass(l).siblings(a).removeClass(l);o.parents('[data-role="htree-list"]:eq(0)').next().remove();this._$sub.append(x("",this._getChilrenById(e.pid),this.options))}}else{h=this._getAncestorsById(e.pid);u=h.length;for(c=0;c<u;c++){this._refreshNodeView(h[c])}}},_updateAncestorNodesState:function(e){var t,i=e,n=this._nodes;while(i){css=w(i.childInfo);i.isIndeterminate=css===s;i.selected=css!==a;this._refreshNodeView(i);i=n[i.pid]}},_refreshNodeView:function(e){var t,i,n,r,l=e.id;t=this._$tree.find('[data-node-id="'+l+'"]');if(t.length>0){if(this.options.lazyLoadMode&&e.isLazy===true){n=e.blurryIcon}else if(e.getChildCount()===0){n=e.leafIcon}else{n=e.foldedIcon}if(p(n)){t.find('[data-role="htree-icon"]').attr("src",n)}else{t.find('[data-role="htree-icon"]').removeClass().addClass(n)}if(this.options.mutiSelect===true){if(e.isIndeterminate){t.find('[data-role="htree-checkbox"]').removeClass().addClass(s)}else{t.find('[data-role="htree-checkbox"]').removeClass().addClass(e.selected?o:a)}}i=t.find('[data-role="htree-label"]');if(i.text()!==e.name){i.text(e.name)}}},deleteNode:function(e){var t=this._nodes,n=this._levels,r=this._selectedNodes,a,o,s,l,d;if(e in t){if(this._trigger("beforeDeleteNode",null,t[e].getState())===false){return}a=t[e];this._deleteNodeView(a);if(a.pid!==null){a=t[a.pid];a.childInfo.children=null;a.childInfo.selectedCount=0;a.isLazy=false;a.loading=false}o=[];s=function(e){var t=this.id;d=n[this.level];if(this.selected===true){d.selectedCount--}if(t in d.parents){delete d.parents[t]}o.push(this)};a.each(t,s,true);this._updateSelectedNodes(o,true);for(i=o.length-1;i>=0;i--){o[i].gc();delete t[o[i].id]}this._$footer.find('[date-role="htree-count"]').popover("hide");this._trigger("afterDeleteNode")}},_deleteNodeView:function(e){var t;if(e.isRoot()){this._$main.find("[data-node-id='"+e.id+"']").remove();if(e.selected===true){this._$sub.empty();this.reset()}}else{t=this._$sub.find("[data-node-id='"+e.id+"']");t.parents('[data-role="htree-list"]:eq(0)').nextAll().remove();t.remove()}},setNodeText:function(e,t){if(r.isFunction(this.options.nodeRender)){}else{this._$tree.find('[data-node-id="'+e+'"]').find("label").text(t)}},clear:function(){var e,t=this._selectedNodes,i,n;if(this._hdTimer!==null){clearTimeout(this._hdTimer);this._hdTimer=null}this.element.find('[data-role="htree-search-clear"]').trigger("click.aeHTree",this);for(i=this._levels.length-1;i>=0;i--){n=this._levels.parents;for(e in n){delete n[e]}}this._levels.splice(0,this._levels.length);this._$input.val("");this._$result.empty().hide();this._$tree.show();this._$main.empty();this._$sub.empty();for(e in t){delete t[e]}this._selectedCount=0;t=this._roots;for(e in t){delete t[e]}t=this._nodes;for(e in t){t[e].gc();delete t[e]}},_reloadRootList:function(){this._$main.append(x("",this._roots,this.options))},reload:function(e){var t,i,n;this.clear();if(r.isArray(e)===true){this._initData(e);this._reloadRootList();n=[];t=this._selectedNodes;for(i in t){n.push(t[i])}if(n.length>0){this._updateSelectedNodes(n)}}},getNodeById:function(e){if(e in this._nodes){return this._nodes[e].getState()}return null},reset:function(){var e=this._$main.find("[data-node-id]:eq(0)").attr("data-node-id");this.goto(e)},getSelectedNodes:function(){var e,t,i,n=[];if(this.options.mutiSelect===true){t=this._selectedNodes;for(e in t){n.push(t[e].getState())}}else{i=this._$tree.find("."+l).filter(":last");if(i.length>0){e=i.attr("data-node-id");n.push(this._nodes[e].getState())}}return n},_getAncestorsById:function(e,t,i){var n=this._nodes,r=n[e],a=[];if(t){while(r){if(r.selected){a.push(r)}r=n[r.pid]}}else{while(r){a.push(r);r=n[r.pid]}}return i?a.reverse():a},getAncestorsById:function(e,t,i){var n=this._getAncestorsById(e,t,i),r,a=n.length;for(r=0;r<a;r++){n[r]=n[r].getState()}return n},_getChilrenById:function(e,t){var i=this._nodes[e],n,r={},a,o;if(i.getChildCount()>0){n=i.childInfo.children;if(t){for(a=0,o=n.length;a<o;a++){if(n[a].selected){r[n[a].id]=n[a]}}}else{for(a=0,o=n.length;a<o;a++){r[n[a].id]=n[a]}}}return r},getChilrenById:function(e,t){var i=this._getChilrenById(e,t),n,r=[];for(n in i){r.push(i[n].getState())}return r},_destroy:function(){var e,t=this.element,i=t.data("org_aeInit");this.clear();if(i){t.attr("aeInit",i)}t.removeAttr("aeId").removeClass(d);this._selectedNodes=null;this._roots=null;this._nodes=null;this._levels=null;this._$input=null;this._$result=null;this._$main=null;this._$sub=null;this._$tree=null}})});(function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(e,t){return Te.call(e,t)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(e){ye.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function a(e,t){var i=!0;return h(function(){return i&&(r(e),i=!1),t.apply(this,arguments)},t)}function o(e,t){mt[e]||(r(t),mt[e]=!0)}function s(e,t){return function(i){return v(e.call(this,i),t)}}function l(e,t){return function(i){return this.localeData().ordinal(e.call(this,i),t)}}function d(){}function c(e,t){t!==!1&&P(e),f(this,e),this._d=new Date(+e._d)}function u(e){var t=x(e),i=t.year||0,n=t.quarter||0,r=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,d=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*d+6e4*l+36e5*s,this._days=+o+7*a,this._months=+r+3*n+12*i,this._data={},this._locale=ye.localeData(),this._bubble()}function h(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t){var i,n,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),
He.length>0)for(i in He)n=He[i],r=t[n],"undefined"!=typeof r&&(e[n]=r);return e}function p(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e,t,i){for(var n=""+Math.abs(e),r=e>=0;n.length<t;)n="0"+n;return(r?i?"+":"":"-")+n}function m(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function g(e,t){var i;return t=F(t,e),e.isBefore(t)?i=m(e,t):(i=m(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function b(e,t){return function(i,n){var r,a;return null===n||isNaN(+n)||(o(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),a=i,i=n,n=a),i="string"==typeof i?+i:i,r=ye.duration(i,n),y(this,r,e),this}}function y(e,t,i,n){var r=t._milliseconds,a=t._days,o=t._months;n=null==n?!0:n,r&&e._d.setTime(+e._d+r*i),a&&fe(e,"Date",he(e,"Date")+a*i),o&&ue(e,he(e,"Month")+o*i),n&&ye.updateOffset(e,a||o)}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function C(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function S(e,t,i){var n,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(n=0;r>n;n++)(i&&e[n]!==t[n]||!i&&k(e[n])!==k(t[n]))&&o++;return o+a}function _(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=dt[e]||ct[t]||t}return e}function x(e){var t,n,r={};for(n in e)i(e,n)&&(t=_(n),t&&(r[t]=e[n]));return r}function T(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}ye[t]=function(r,a){var o,s,l=ye._locale[t],d=[];if("number"==typeof r&&(a=r,r=e),s=function(e){var t=ye().utc().set(n,e);return l.call(ye._locale,t,r||"")},null!=a)return s(a);for(o=0;i>o;o++)d.push(s(o));return d}}function k(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function E(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function D(e,t,i){return se(ye([e,11,31+t-i]),t,i).week}function I(e){return M(e)?366:365}function M(e){return e%4===0&&e%100!==0||e%400===0}function P(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Ee]<0||e._a[Ee]>11?Ee:e._a[De]<1||e._a[De]>E(e._a[ke],e._a[Ee])?De:e._a[Ie]<0||e._a[Ie]>24||24===e._a[Ie]&&(0!==e._a[Me]||0!==e._a[Pe]||0!==e._a[Re])?Ie:e._a[Me]<0||e._a[Me]>59?Me:e._a[Pe]<0||e._a[Pe]>59?Pe:e._a[Re]<0||e._a[Re]>999?Re:-1,e._pf._overflowDayOfYear&&(ke>t||t>De)&&(t=De),e._pf.overflow=t)}function R(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function N(e){return e?e.toLowerCase().replace("_","-"):e}function H(e){for(var t,i,n,r,a=0;a<e.length;){for(r=N(e[a]).split("-"),t=r.length,i=N(e[a+1]),i=i?i.split("-"):null;t>0;){if(n=L(r.slice(0,t).join("-")))return n;if(i&&i.length>=t&&S(r,i,!0)>=t-1)break;t--}a++}return null}function L(e){var t=null;if(!Ne[e]&&Le)try{t=ye.locale(),require("./locale/"+e),ye.locale(t)}catch(i){}return Ne[e]}function F(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(ye.isMoment(e)||C(e)?+e:+ye(e))-+i,i._d.setTime(+i._d+n),ye.updateOffset(i,!1),i):ye(e).local()}function $(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function A(e){var t,i,n=e.match(Oe);for(t=0,i=n.length;i>t;t++)n[t]=vt[n[t]]?vt[n[t]]:$(n[t]);return function(r){var a="";for(t=0;i>t;t++)a+=n[t]instanceof Function?n[t].call(r,e):n[t];return a}}function O(e,t){return e.isValid()?(t=z(t,e.localeData()),ut[t]||(ut[t]=A(t)),ut[t](e)):e.localeData().invalidDate()}function z(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(ze.lastIndex=0;n>=0&&ze.test(e);)e=e.replace(ze,i),ze.lastIndex=0,n-=1;return e}function B(e,t){var i,n=t._strict;switch(e){case"Q":return Xe;case"DDDD":return Je;case"YYYY":case"GGGG":case"gggg":return n?et:Ue;case"Y":case"G":case"g":return it;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?tt:Ge;case"S":if(n)return Xe;case"SS":if(n)return Qe;case"SSS":if(n)return Je;case"DDD":return Ye;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return je;case"a":case"A":return t._locale._meridiemParse;case"x":return Ze;case"X":return Ke;case"Z":case"ZZ":return We;case"T":return qe;case"SSSS":return Ve;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Qe:Be;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Be;case"Do":return n?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return i=new RegExp(K(Z(e.replace("\\","")),"i"))}}function Y(e){e=e||"";var t=e.match(We)||[],i=t[t.length-1]||[],n=(i+"").match(st)||["-",0,0],r=+(60*n[1])+k(n[2]);return"+"===n[0]?-r:r}function U(e,t,i){var n,r=i._a;switch(e){case"Q":null!=t&&(r[Ee]=3*(k(t)-1));break;case"M":case"MM":null!=t&&(r[Ee]=k(t)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(t,e,i._strict),null!=n?r[Ee]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[De]=k(t));break;case"Do":null!=t&&(r[De]=k(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=k(t));break;case"YY":r[ke]=ye.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[ke]=k(t);break;case"a":case"A":i._isPm=i._locale.isPM(t);break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":r[Ie]=k(t);break;case"m":case"mm":r[Me]=k(t);break;case"s":case"ss":r[Pe]=k(t);break;case"S":case"SS":case"SSS":case"SSSS":r[Re]=k(1e3*("0."+t));break;case"x":i._d=new Date(k(t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=Y(t);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(t),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=k(t));break;case"gg":case"GG":i._w=i._w||{},i._w[e]=ye.parseTwoDigitYear(t)}}function G(e){var i,n,r,a,o,s,l;i=e._w,null!=i.GG||null!=i.W||null!=i.E?(o=1,s=4,n=t(i.GG,e._a[ke],se(ye(),1,4).year),r=t(i.W,1),a=t(i.E,1)):(o=e._locale._week.dow,s=e._locale._week.doy,n=t(i.gg,e._a[ke],se(ye(),o,s).year),r=t(i.w,1),null!=i.d?(a=i.d,o>a&&++r):a=null!=i.e?i.e+o:o),l=le(n,r,a,s,o),e._a[ke]=l.year,e._dayOfYear=l.dayOfYear}function V(e){var i,n,r,a,o=[];if(!e._d){for(r=W(e),e._w&&null==e._a[De]&&null==e._a[Ee]&&G(e),e._dayOfYear&&(a=t(e._a[ke],r[ke]),e._dayOfYear>I(a)&&(e._pf._overflowDayOfYear=!0),n=ne(a,0,e._dayOfYear),e._a[Ee]=n.getUTCMonth(),e._a[De]=n.getUTCDate()),i=0;3>i&&null==e._a[i];++i)e._a[i]=o[i]=r[i];for(;7>i;i++)e._a[i]=o[i]=null==e._a[i]?2===i?1:0:e._a[i];24===e._a[Ie]&&0===e._a[Me]&&0===e._a[Pe]&&0===e._a[Re]&&(e._nextDay=!0,e._a[Ie]=0),e._d=(e._useUTC?ne:ie).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[Ie]=24)}}function j(e){var t;e._d||(t=x(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],V(e))}function W(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function q(t){if(t._f===ye.ISO_8601)return void Q(t);t._a=[],t._pf.empty=!0;var i,n,r,a,o,s=""+t._i,l=s.length,d=0;for(r=z(t._f,t._locale).match(Oe)||[],i=0;i<r.length;i++)a=r[i],n=(s.match(B(a,t))||[])[0],n&&(o=s.substr(0,s.indexOf(n)),o.length>0&&t._pf.unusedInput.push(o),s=s.slice(s.indexOf(n)+n.length),d+=n.length),vt[a]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(a),U(a,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(a);t._pf.charsLeftOver=l-d,s.length>0&&t._pf.unusedInput.push(s),t._pf.bigHour===!0&&t._a[Ie]<=12&&(t._pf.bigHour=e),t._isPm&&t._a[Ie]<12&&(t._a[Ie]+=12),t._isPm===!1&&12===t._a[Ie]&&(t._a[Ie]=0),V(t),P(t)}function Z(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,r){return t||i||n||r})}function K(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(e){var t,i,r,a,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(a=0;a<e._f.length;a++)o=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=n(),t._f=e._f[a],q(t),R(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==r||r>o)&&(r=o,i=t));h(e,i||t)}function Q(e){var t,i,n=e._i,r=nt.exec(n);if(r){for(e._pf.iso=!0,t=0,i=at.length;i>t;t++)if(at[t][1].exec(n)){e._f=at[t][0]+(r[6]||" ");break}for(t=0,i=ot.length;i>t;t++)if(ot[t][1].exec(n)){e._f+=ot[t][0];break}n.match(We)&&(e._f+="Z"),q(e)}else e._isValid=!1}function J(e){Q(e),e._isValid===!1&&(delete e._isValid,ye.createFromInputFallback(e))}function ee(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function te(t){var i,n=t._i;n===e?t._d=new Date:C(n)?t._d=new Date(+n):null!==(i=Fe.exec(n))?t._d=new Date(+i[1]):"string"==typeof n?J(t):w(n)?(t._a=ee(n.slice(0),function(e){return parseInt(e,10)}),V(t)):"object"==typeof n?j(t):"number"==typeof n?t._d=new Date(n):ye.createFromInputFallback(t)}function ie(e,t,i,n,r,a,o){var s=new Date(e,t,i,n,r,a,o);return 1970>e&&s.setFullYear(e),s}function ne(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function re(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ae(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function oe(e,t,i){var n=ye.duration(e).abs(),r=xe(n.as("s")),a=xe(n.as("m")),o=xe(n.as("h")),s=xe(n.as("d")),l=xe(n.as("M")),d=xe(n.as("y")),c=r<ht.s&&["s",r]||1===a&&["m"]||a<ht.m&&["mm",a]||1===o&&["h"]||o<ht.h&&["hh",o]||1===s&&["d"]||s<ht.d&&["dd",s]||1===l&&["M"]||l<ht.M&&["MM",l]||1===d&&["y"]||["yy",d];return c[2]=t,c[3]=+e>0,c[4]=i,ae.apply({},c)}function se(e,t,i){var n,r=i-t,a=i-e.day();return a>r&&(a-=7),r-7>a&&(a+=7),n=ye(e).add(a,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function le(e,t,i,n,r){var a,o,s=ne(e,0,1).getUTCDay();return s=0===s?7:s,i=null!=i?i:r,a=r-s+(s>n?7:0)-(r>s?7:0),o=7*(t-1)+(i-r)+a+1,{year:o>0?e:e-1,dayOfYear:o>0?o:I(e-1)+o}}function de(t){var i,n=t._i,r=t._f;return t._locale=t._locale||ye.localeData(t._l),null===n||r===e&&""===n?ye.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),ye.isMoment(n)?new c(n,!0):(r?w(r)?X(t):q(t):te(t),i=new c(t),i._nextDay&&(i.add(1,"d"),i._nextDay=e),i))}function ce(e,t){var i,n;if(1===t.length&&w(t[0])&&(t=t[0]),!t.length)return ye();for(i=t[0],n=1;n<t.length;++n)t[n][e](i)&&(i=t[n]);return i}function ue(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),E(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function he(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function fe(e,t,i){return"Month"===t?ue(e,i):e._d["set"+(e._isUTC?"UTC":"")+t](i)}function pe(e,t){return function(i){return null!=i?(fe(this,e,i),ye.updateOffset(this,t),this):he(this,e)}}function ve(e){return 400*e/146097}function me(e){return 146097*e/400}function ge(e){ye.duration.fn[e]=function(){return this._data[e]}}function be(e){"undefined"==typeof ender&&(we=_e.moment,_e.moment=e?a("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ye):ye)}for(var ye,we,Ce,Se="2.8.4",_e="undefined"!=typeof global?global:this,xe=Math.round,Te=Object.prototype.hasOwnProperty,ke=0,Ee=1,De=2,Ie=3,Me=4,Pe=5,Re=6,Ne={},He=[],Le="undefined"!=typeof module&&module&&module.exports,Fe=/^\/?Date\((\-?\d+)/i,$e=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ae=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Oe=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,ze=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Be=/\d\d?/,Ye=/\d{1,3}/,Ue=/\d{1,4}/,Ge=/[+\-]?\d{1,6}/,Ve=/\d+/,je=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,We=/Z|[\+\-]\d\d:?\d\d/gi,qe=/T/i,Ze=/[\+\-]?\d+/,Ke=/[\+\-]?\d+(\.\d{1,3})?/,Xe=/\d/,Qe=/\d\d/,Je=/\d{3}/,et=/\d{4}/,tt=/[+-]?\d{6}/,it=/[+-]?\d+/,nt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rt="YYYY-MM-DDTHH:mm:ssZ",at=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ot=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],st=/([\+\-]|\d\d)/gi,lt=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),dt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ct={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ut={},ht={s:45,m:45,h:22,d:26,M:11},ft="DDD w W M D d".split(" "),pt="M D H h m s w W".split(" "),vt={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+v(Math.abs(e),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return k(this.milliseconds()/100)},SS:function(){return v(k(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+v(k(e/60),2)+":"+v(k(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+v(k(e/60),2)+v(k(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},mt={},gt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ft.length;)Ce=ft.pop(),vt[Ce+"o"]=l(vt[Ce],Ce);for(;pt.length;)Ce=pt.pop(),vt[Ce+Ce]=s(vt[Ce],2);vt.DDDD=s(vt.DDD,3),h(d.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,i){var n,r,a;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(r=ye.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=ye([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,i){var n=this._calendar[e];return"function"==typeof n?n.apply(t,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var r=this._relativeTime[i];return"function"==typeof r?r(e,t,i,n):r.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return se(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ye=function(t,i,r,a){var o;return"boolean"==typeof r&&(a=r,r=e),o={},o._isAMomentObject=!0,o._i=t,o._f=i,o._l=r,o._strict=a,o._isUTC=!1,o._pf=n(),de(o)},ye.suppressDeprecationWarnings=!1,ye.createFromInputFallback=a("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),ye.min=function(){var e=[].slice.call(arguments,0);return ce("isBefore",e)},ye.max=function(){var e=[].slice.call(arguments,0);return ce("isAfter",e)},ye.utc=function(t,i,r,a){var o;return"boolean"==typeof r&&(a=r,r=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=r,o._i=t,o._f=i,o._strict=a,o._pf=n(),de(o).utc()},ye.unix=function(e){return ye(1e3*e)},ye.duration=function(e,t){var n,r,a,o,s=e,l=null;return ye.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(l=$e.exec(e))?(n="-"===l[1]?-1:1,s={y:0,d:k(l[De])*n,h:k(l[Ie])*n,m:k(l[Me])*n,s:k(l[Pe])*n,ms:k(l[Re])*n}):(l=Ae.exec(e))?(n="-"===l[1]?-1:1,a=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},s={y:a(l[2]),M:a(l[3]),d:a(l[4]),h:a(l[5]),m:a(l[6]),s:a(l[7]),w:a(l[8])}):"object"==typeof s&&("from"in s||"to"in s)&&(o=g(ye(s.from),ye(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),r=new u(s),ye.isDuration(e)&&i(e,"_locale")&&(r._locale=e._locale),r},ye.version=Se,ye.defaultFormat=rt,ye.ISO_8601=function(){},ye.momentProperties=He,ye.updateOffset=function(){},ye.relativeTimeThreshold=function(t,i){return ht[t]===e?!1:i===e?ht[t]:(ht[t]=i,!0)},ye.lang=a("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return ye.locale(e,t)}),ye.locale=function(e,t){var i;return e&&(i="undefined"!=typeof t?ye.defineLocale(e,t):ye.localeData(e),i&&(ye.duration._locale=ye._locale=i)),ye._locale._abbr},ye.defineLocale=function(e,t){return null!==t?(t.abbr=e,Ne[e]||(Ne[e]=new d),Ne[e].set(t),ye.locale(e),Ne[e]):(delete Ne[e],null)},ye.langData=a("moment.langData is deprecated. Use moment.localeData instead.",function(e){return ye.localeData(e)}),ye.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ye._locale;if(!w(e)){if(t=L(e))return t;e=[e]}return H(e)},ye.isMoment=function(e){return e instanceof c||null!=e&&i(e,"_isAMomentObject")},ye.isDuration=function(e){return e instanceof u};for(Ce=gt.length-1;Ce>=0;--Ce)T(gt[Ce]);ye.normalizeUnits=function(e){return _(e)},ye.invalid=function(e){var t=ye.utc(0/0);return null!=e?h(t._pf,e):t._pf.userInvalidated=!0,t},ye.parseZone=function(){return ye.apply(null,arguments).parseZone()},ye.parseTwoDigitYear=function(e){return k(e)+(k(e)>68?1900:2e3)},h(ye.fn=c.prototype,{clone:function(){return ye(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=ye(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():O(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return R(this)},isDSTShifted:function(){return this._a?this.isValid()&&S(this._a,(this._isUTC?ye.utc(this._a):ye(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=O(this,e||ye.defaultFormat);return this.localeData().postformat(t)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(e,t,i){var n,r,a,o=F(e,this),s=6e4*(this.zone()-o.zone());return t=_(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),a=this-ye(this).startOf("month")-(o-ye(o).startOf("month")),a-=6e4*(this.zone()-ye(this).startOf("month").zone()-(o.zone()-ye(o).startOf("month").zone())),r+=a/n,"year"===t&&(r/=12)):(n=this-o,r="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-s)/864e5:"week"===t?(n-s)/6048e5:n),i?r:p(r)},from:function(e,t){return ye.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(ye(),e)},calendar:function(e){var t=e||ye(),i=F(t,this).startOf("day"),n=this.diff(i,"days",!0),r=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,ye(t)))},isLeapYear:function(){return M(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=re(e,this.localeData()),this.add(e-t,"d")):t},month:pe("Month",!0),startOf:function(e){switch(e=_(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=_(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var i;return t=_("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=ye.isMoment(e)?e:ye(e),+this>+e):(i=ye.isMoment(e)?+e:+ye(e),i<+this.clone().startOf(t))},isBefore:function(e,t){var i;return t=_("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=ye.isMoment(e)?e:ye(e),+e>+this):(i=ye.isMoment(e)?+e:+ye(e),+this.clone().endOf(t)<i)},isSame:function(e,t){var i;return t=_(t||"millisecond"),"millisecond"===t?(e=ye.isMoment(e)?e:ye(e),+this===+e):(i=+ye(e),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))},min:a("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=ye.apply(null,arguments),this>e?this:e}),max:a("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=ye.apply(null,arguments),e>this?this:e}),zone:function(e,t){var i,n=this._offset||0;return null==e?this._isUTC?n:this._dateTzOffset():("string"==typeof e&&(e=Y(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(i=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=i&&this.subtract(i,"m"),n!==e&&(!t||this._changeInProgress?y(this,ye.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ye.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?ye(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return E(this.year(),this.month())},dayOfYear:function(e){var t=xe((ye(this).startOf("day")-ye(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=se(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=se(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=se(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return D(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return D(this.year(),e.dow,e.doy)},get:function(e){return e=_(e),this[e]()},set:function(e,t){return e=_(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var i;return t===e?this._locale._abbr:(i=ye.localeData(t),null!=i&&(this._locale=i),this)},lang:a("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),ye.fn.millisecond=ye.fn.milliseconds=pe("Milliseconds",!1),ye.fn.second=ye.fn.seconds=pe("Seconds",!1),ye.fn.minute=ye.fn.minutes=pe("Minutes",!1),ye.fn.hour=ye.fn.hours=pe("Hours",!0),ye.fn.date=pe("Date",!0),ye.fn.dates=a("dates accessor is deprecated. Use date instead.",pe("Date",!0)),ye.fn.year=pe("FullYear",!0),ye.fn.years=a("years accessor is deprecated. Use year instead.",pe("FullYear",!0)),ye.fn.days=ye.fn.day,ye.fn.months=ye.fn.month,ye.fn.weeks=ye.fn.week,ye.fn.isoWeeks=ye.fn.isoWeek,ye.fn.quarters=ye.fn.quarter,ye.fn.toJSON=ye.fn.toISOString,h(ye.duration.fn=u.prototype,{_bubble:function(){var e,t,i,n=this._milliseconds,r=this._days,a=this._months,o=this._data,s=0;o.milliseconds=n%1e3,e=p(n/1e3),o.seconds=e%60,t=p(e/60),o.minutes=t%60,i=p(t/60),o.hours=i%24,r+=p(i/24),s=p(ve(r)),r-=p(me(s)),a+=p(r/30),r%=30,s+=p(a/12),a%=12,o.days=r,o.months=a,o.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return p(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12)},humanize:function(e){var t=oe(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var i=ye.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=ye.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=_(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,i;if(e=_(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,i=this._months+12*ve(t),"month"===e?i:i/12;switch(t=this._days+Math.round(me(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:ye.fn.lang,locale:ye.fn.locale,toIsoString:a("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),r=Math.abs(this.minutes()),a=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||r||a?"T":"")+(n?n+"H":"")+(r?r+"M":"")+(a?a+"S":""):"P0D"},localeData:function(){return this._locale}}),ye.duration.fn.toString=ye.duration.fn.toISOString;for(Ce in lt)i(lt,Ce)&&ge(Ce.toLowerCase());ye.duration.fn.asMilliseconds=function(){return this.as("ms")},ye.duration.fn.asSeconds=function(){return this.as("s")},ye.duration.fn.asMinutes=function(){return this.as("m")},ye.duration.fn.asHours=function(){return this.as("h")},ye.duration.fn.asDays=function(){return this.as("d")},ye.duration.fn.asWeeks=function(){return this.as("weeks")},ye.duration.fn.asMonths=function(){return this.as("M")},ye.duration.fn.asYears=function(){return this.as("y")},ye.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===k(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),Le?module.exports=ye:"function"==typeof define&&define.amd?(define("moment",function(e,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(_e.moment=we),ye}),be(!0)):be()}).call(this);(function(e){if(typeof define==="function"&&define.amd){define(["jquery","moment"],e)}else if(typeof exports==="object"){module.exports=e(require("jquery"),require("moment"));
}else{e(jQuery,moment)}})(function(e,t){var i=e.fullCalendar={version:"2.3.1"};var n=i.views={};e.fn.fullCalendar=function(t){var n=Array.prototype.slice.call(arguments,1);var r=this;this.each(function(a,o){var s=e(o);var l=s.data("fullCalendar");var d;if(typeof t==="string"){if(l&&e.isFunction(l[t])){d=l[t].apply(l,n);if(!a){r=d}if(t==="destroy"){s.removeData("fullCalendar")}}}else if(!l){l=new i.CalendarBase(s,t);s.data("fullCalendar",l);l.render()}});return r};var r=["header","buttonText","buttonIcons","themeButtonIcons"];function a(){var t=Array.prototype.slice.call(arguments);var i={};var n,a;var o;var s;var l;for(n=0;n<r.length;n++){a=r[n];o=null;for(s=0;s<t.length;s++){l=t[s][a];if(e.isPlainObject(l)){o=e.extend(o||{},l)}else if(l!=null){o=null}}if(o!==null){i[a]=o}}t.unshift({});t.push(i);return e.extend.apply(e,t)}function o(t){var i={views:t.views||{}};var n;e.each(t,function(t,a){if(t!="views"){if(e.isPlainObject(a)&&!/(time|duration|interval)$/i.test(t)&&e.inArray(t,r)==-1){n=null;e.each(a,function(e,r){if(/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(e)){if(!i.views[e]){i.views[e]={}}i.views[e][t]=r}else{if(!n){n={}}n[e]=r}});if(n){i[t]=n}}else{i[t]=a}}});return i}i.intersectionToSeg=M;i.applyAll=W;i.debounce=ie;i.isInt=ee;i.htmlEscape=Z;i.cssToStr=X;i.proxy=te;function s(e,t){if(t.left){e.css({"border-left-width":1,"margin-left":t.left-1})}if(t.right){e.css({"border-right-width":1,"margin-right":t.right-1})}}function l(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function d(){e("body").addClass("fc-not-allowed")}function c(){e("body").removeClass("fc-not-allowed")}function u(t,i,n){var r=Math.floor(i/t.length);var a=Math.floor(i-r*(t.length-1));var o=[];var s=[];var l=[];var d=0;h(t);t.each(function(i,n){var c=i===t.length-1?a:r;var u=e(n).outerHeight(true);if(u<c){o.push(n);s.push(u);l.push(e(n).height())}else{d+=u}});if(n){i-=d;r=Math.floor(i/o.length);a=Math.floor(i-r*(o.length-1))}e(o).each(function(t,i){var n=t===o.length-1?a:r;var d=s[t];var c=l[t];var u=n-(d-c);if(d<n){e(i).height(u)}})}function h(e){e.height("")}function f(t){var i=0;t.find("> *").each(function(t,n){var r=e(n).outerWidth();if(r>i){i=r}});i++;t.width(i);return i}function p(e,t){e.height(t).addClass("fc-scroller");if(e[0].scrollHeight-1>e[0].clientHeight){return true}v(e);return false}function v(e){e.height("").removeClass("fc-scroller")}i.getClientRect=b;i.getContentRect=y;i.getScrollbarWidths=w;function m(t){var i=t.css("position"),n=t.parents().filter(function(){var t=e(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return i==="fixed"||!n.length?e(t[0].ownerDocument||document):n}function g(e){var t=e.offset();return{left:t.left,right:t.left+e.outerWidth(),top:t.top,bottom:t.top+e.outerHeight()}}function b(e){var t=e.offset();var i=w(e);var n=t.left+x(e,"border-left-width")+i.left;var r=t.top+x(e,"border-top-width")+i.top;return{left:n,right:n+e[0].clientWidth,top:r,bottom:r+e[0].clientHeight}}function y(e){var t=e.offset();var i=t.left+x(e,"border-left-width")+x(e,"padding-left");var n=t.top+x(e,"border-top-width")+x(e,"padding-top");return{left:i,right:i+e.width(),top:n,bottom:n+e.height()}}function w(e){var t=e.innerWidth()-e[0].clientWidth;var i={left:0,right:0,top:0,bottom:e.innerHeight()-e[0].clientHeight};if(S()&&e.css("direction")=="rtl"){i.left=t}else{i.right=t}return i}var C=null;function S(){if(C===null){C=_()}return C}function _(){var t=e("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body");var i=t.children();var n=i.offset().left>t.offset().left;t.remove();return n}function x(e,t){return parseFloat(e.css(t))||0}function T(e){return e.which==1&&!e.ctrlKey}function k(e,t){var i={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};if(i.left<i.right&&i.top<i.bottom){return i}return false}function E(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function D(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function I(e,t){return{left:e.left-t.left,top:e.top-t.top}}function M(e,t){var i=e.start;var n=e.end;var r=t.start;var a=t.end;var o,s;var l,d;if(n>r&&i<a){if(i>=r){o=i.clone();l=true}else{o=r.clone();l=false}if(n<=a){s=n.clone();d=true}else{s=a.clone();d=false}return{start:o,end:s,isStart:l,isEnd:d}}}i.computeIntervalUnit=F;i.durationHasTime=A;var P=["sun","mon","tue","wed","thu","fri","sat"];var R=["year","month","week","day","hour","minute","second","millisecond"];function N(e,i){return t.duration({days:e.clone().stripTime().diff(i.clone().stripTime(),"days"),ms:e.time()-i.time()})}function H(e,i){return t.duration({days:e.clone().stripTime().diff(i.clone().stripTime(),"days")})}function L(e,i,n){return t.duration(Math.round(e.diff(i,n,true)),n)}function F(e,t){var i,n;var r;for(i=0;i<R.length;i++){n=R[i];r=$(n,e,t);if(r>=1&&ee(r)){break}}return n}function $(e,i,n){if(n!=null){return n.diff(i,e,true)}else if(t.isDuration(i)){return i.as(e)}else{return i.end.diff(i.start,e,true)}}function A(e){return Boolean(e.hours()||e.minutes()||e.seconds()||e.milliseconds())}function O(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function z(e){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)}var B={}.hasOwnProperty;function Y(e){var t=function(){};t.prototype=e;return new t}function U(e,t){for(var i in e){if(V(e,i)){t[i]=e[i]}}}function G(e,t){var i=["constructor","toString","valueOf"];var n,r;for(n=0;n<i.length;n++){r=i[n];if(e[r]!==Object.prototype[r]){t[r]=e[r]}}}function V(e,t){return B.call(e,t)}function j(t){return/undefined|null|boolean|number|string/.test(e.type(t))}function W(t,i,n){if(e.isFunction(t)){t=[t]}if(t){var r;var a;for(r=0;r<t.length;r++){a=t[r].apply(i,n)||a}return a}}function q(){for(var e=0;e<arguments.length;e++){if(arguments[e]!==undefined){return arguments[e]}}}function Z(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function K(e){return e.replace(/&.*?;/g,"")}function X(t){var i=[];e.each(t,function(e,t){if(t!=null){i.push(e+":"+t)}});return i.join(";")}function Q(e){return e.charAt(0).toUpperCase()+e.slice(1)}function J(e,t){return e-t}function ee(e){return e%1===0}function te(e,t){var i=e[t];return function(){return i.apply(e,arguments)}}function ie(e,t){var i;var n;var r;var a;var o=function(){var s=+new Date-a;if(s<t&&s>0){i=setTimeout(o,t-s)}else{i=null;e.apply(r,n);if(!i){r=n=null}}};return function(){r=this;n=arguments;a=+new Date;if(!i){i=setTimeout(o,t)}}}var ne=/^\s*\d{4}-\d\d$/;var re=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;var ae=t.fn;var oe=e.extend({},ae);var se;var le;var de;i.moment=function(){return ce(arguments)};i.moment.utc=function(){var e=ce(arguments,true);if(e.hasTime()){e.utc()}return e};i.moment.parseZone=function(){return ce(arguments,true,true)};function ce(i,n,r){var a=i[0];var o=i.length==1&&typeof a==="string";var s;var l;var d;var c;if(t.isMoment(a)){c=t.apply(null,i);he(a,c)}else if(O(a)||a===undefined){c=t.apply(null,i)}else{s=false;l=false;if(o){if(ne.test(a)){a+="-01";i=[a];s=true;l=true}else if(d=re.exec(a)){s=!d[5];l=true}}else if(e.isArray(a)){l=true}if(n||s){c=t.utc.apply(t,i)}else{c=t.apply(null,i)}if(s){c._ambigTime=true;c._ambigZone=true}else if(r){if(l){c._ambigZone=true}else if(o){if(c.utcOffset){c.utcOffset(a)}else{c.zone(a)}}}}c._fullCalendar=true;return c}ae.clone=function(){var e=oe.clone.apply(this,arguments);he(this,e);if(this._fullCalendar){e._fullCalendar=true}return e};ae.week=ae.weeks=function(e){var t=(this._locale||this._lang)._fullCalendar_weekCalc;if(e==null&&typeof t==="function"){return t(this)}else if(t==="ISO"){return oe.isoWeek.apply(this,arguments)}return oe.week.apply(this,arguments)};ae.time=function(e){if(!this._fullCalendar){return oe.time.apply(this,arguments)}if(e==null){return t.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}else{this._ambigTime=false;if(!t.isDuration(e)&&!t.isMoment(e)){e=t.duration(e)}var i=0;if(t.isDuration(e)){i=Math.floor(e.asDays())*24}return this.hours(i+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())}};ae.stripTime=function(){var e;if(!this._ambigTime){e=this.toArray();this.utc();le(this,e.slice(0,3));this._ambigTime=true;this._ambigZone=true}return this};ae.hasTime=function(){return!this._ambigTime};ae.stripZone=function(){var e,t;if(!this._ambigZone){e=this.toArray();t=this._ambigTime;this.utc();le(this,e);this._ambigTime=t||false;this._ambigZone=true}return this};ae.hasZone=function(){return!this._ambigZone};ae.local=function(){var e=this.toArray();var t=this._ambigZone;oe.local.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;if(t){de(this,e)}return this};ae.utc=function(){oe.utc.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;return this};e.each(["zone","utcOffset"],function(e,t){if(oe[t]){ae[t]=function(e){if(e!=null){this._ambigTime=false;this._ambigZone=false}return oe[t].apply(this,arguments)}}});ae.format=function(){if(this._fullCalendar&&arguments[0]){return ve(this,arguments[0])}if(this._ambigTime){return pe(this,"YYYY-MM-DD")}if(this._ambigZone){return pe(this,"YYYY-MM-DD[T]HH:mm:ss")}return oe.format.apply(this,arguments)};ae.toISOString=function(){if(this._ambigTime){return pe(this,"YYYY-MM-DD")}if(this._ambigZone){return pe(this,"YYYY-MM-DD[T]HH:mm:ss")}return oe.toISOString.apply(this,arguments)};ae.isWithin=function(e,t){var i=ue([this,e,t]);return i[0]>=i[1]&&i[0]<i[2]};ae.isSame=function(e,t){var n;if(!this._fullCalendar){return oe.isSame.apply(this,arguments)}if(t){n=ue([this,e],true);return oe.isSame.call(n[0],n[1],t)}else{e=i.moment.parseZone(e);return oe.isSame.call(this,e)&&Boolean(this._ambigTime)===Boolean(e._ambigTime)&&Boolean(this._ambigZone)===Boolean(e._ambigZone)}};e.each(["isBefore","isAfter"],function(e,t){ae[t]=function(e,i){var n;if(!this._fullCalendar){return oe[t].apply(this,arguments)}n=ue([this,e]);return oe[t].call(n[0],n[1],i)}});function ue(e,n){var r=false;var a=false;var o=e.length;var s=[];var l,d;for(l=0;l<o;l++){d=e[l];if(!t.isMoment(d)){d=i.moment.parseZone(d)}r=r||d._ambigTime;a=a||d._ambigZone;s.push(d)}for(l=0;l<o;l++){d=s[l];if(!n&&r&&!d._ambigTime){s[l]=d.clone().stripTime()}else if(a&&!d._ambigZone){s[l]=d.clone().stripZone()}}return s}function he(e,t){if(e._ambigTime){t._ambigTime=true}else if(t._ambigTime){t._ambigTime=false}if(e._ambigZone){t._ambigZone=true}else if(t._ambigZone){t._ambigZone=false}}function fe(e,t){e.year(t[0]||0).month(t[1]||0).date(t[2]||0).hours(t[3]||0).minutes(t[4]||0).seconds(t[5]||0).milliseconds(t[6]||0)}se="_d"in t()&&"updateOffset"in t;le=se?function(e,i){e._d.setTime(Date.UTC.apply(Date,i));t.updateOffset(e,false)}:fe;de=se?function(e,i){e._d.setTime(+new Date(i[0]||0,i[1]||0,i[2]||0,i[3]||0,i[4]||0,i[5]||0,i[6]||0));t.updateOffset(e,false)}:fe;function pe(e,t){return oe.format.call(e,t)}function ve(e,t){return me(e,xe(t))}function me(e,t){var i="";var n;for(n=0;n<t.length;n++){i+=be(e,t[n])}return i}var ge={t:function(e){return pe(e,"a").charAt(0)},T:function(e){return pe(e,"A").charAt(0)}};function be(e,t){var i;var n;if(typeof t==="string"){return t}else if(i=t.token){if(ge[i]){return ge[i](e)}return pe(e,i)}else if(t.maybe){n=me(e,t.maybe);if(n.match(/[1-9]/)){return n}}return""}function ye(e,t,n,r,a){var o;e=i.moment.parseZone(e);t=i.moment.parseZone(t);o=(e.localeData||e.lang).call(e);n=o.longDateFormat(n)||n;r=r||" - ";return we(e,t,xe(n),r,a)}i.formatRange=ye;function we(e,t,i,n,r){var a;var o;var s="";var l;var d="";var c;var u="";var h="";var f="";for(o=0;o<i.length;o++){a=Se(e,t,i[o]);if(a===false){break}s+=a}for(l=i.length-1;l>o;l--){a=Se(e,t,i[l]);if(a===false){break}d=a+d}for(c=o;c<=l;c++){u+=be(e,i[c]);h+=be(t,i[c])}if(u||h){if(r){f=h+n+u}else{f=u+n+h}}return s+f+d}var Ce={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function Se(e,t,i){var n;var r;if(typeof i==="string"){return i}else if(n=i.token){r=Ce[n.charAt(0)];if(r&&e.isSame(t,r)){return pe(e,n)}}return false}var _e={};function xe(e){if(e in _e){return _e[e]}return _e[e]=Te(e)}function Te(e){var t=[];var i=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;var n;while(n=i.exec(e)){if(n[1]){t.push(n[1])}else if(n[2]){t.push({maybe:Te(n[2])})}else if(n[3]){t.push({token:n[3]})}else if(n[5]){t.push(n[5])}}return t}i.Class=ke;function ke(){}ke.extend=function(e){var t=this;var i;e=e||{};if(V(e,"constructor")){i=e.constructor}if(typeof i!=="function"){i=e.constructor=function(){t.apply(this,arguments)}}i.prototype=Y(t.prototype);U(e,i.prototype);G(e,i.prototype);U(t,i);return i};ke.mixin=function(e){U(e.prototype||e,this.prototype)};var Ee=ke.extend({isHidden:true,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(e){this.options=e||{}},show:function(){if(this.isHidden){if(!this.el){this.render()}this.el.show();this.position();this.isHidden=false;this.trigger("show")}},hide:function(){if(!this.isHidden){this.el.hide();this.isHidden=true;this.trigger("hide")}},render:function(){var t=this;var i=this.options;this.el=e('<div class="fc-popover"/>').addClass(i.className||"").css({top:0,left:0}).append(i.content).appendTo(i.parentEl);this.el.on("click",".fc-close",function(){t.hide()});if(i.autoHide){e(document).on("mousedown",this.documentMousedownProxy=te(this,"documentMousedown"))}},documentMousedown:function(t){if(this.el&&!e(t.target).closest(this.el).length){this.hide()}},destroy:function(){this.hide();if(this.el){this.el.remove();this.el=null}e(document).off("mousedown",this.documentMousedownProxy)},position:function(){var t=this.options;var i=this.el.offsetParent().offset();var n=this.el.outerWidth();var r=this.el.outerHeight();var a=e(window);var o=m(this.el);var s;var l;var d;var c;var u;c=t.top||0;if(t.left!==undefined){u=t.left}else if(t.right!==undefined){u=t.right-n}else{u=0}if(o.is(window)||o.is(document)){o=a;s=0;l=0}else{d=o.offset();s=d.top;l=d.left}s+=a.scrollTop();l+=a.scrollLeft();if(t.viewportConstrain!==false){c=Math.min(c,s+o.outerHeight()-r-this.margin);c=Math.max(c,s+this.margin);u=Math.min(u,l+o.outerWidth()-n-this.margin);u=Math.max(u,l+this.margin)}this.el.css({top:c-i.top,left:u-i.left})},trigger:function(e){if(this.options[e]){this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}}});var De=ke.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,bounds:null,constructor:function(e){this.grid=e},build:function(){this.rowCoords=this.grid.computeRowCoords();this.colCoords=this.grid.computeColCoords();this.computeBounds()},clear:function(){this.rowCoords=null;this.colCoords=null},getCell:function(t,i){var n=this.rowCoords;var r=n.length;var a=this.colCoords;var o=a.length;var s=null;var l=null;var d,c;var u;if(this.inBounds(t,i)){for(d=0;d<r;d++){c=n[d];if(i>=c.top&&i<c.bottom){s=d;break}}for(d=0;d<o;d++){c=a[d];if(t>=c.left&&t<c.right){l=d;break}}if(s!==null&&l!==null){u=this.grid.getCell(s,l);u.grid=this.grid;e.extend(u,n[s],a[l]);return u}}return null},computeBounds:function(){this.bounds=this.containerEl?b(this.containerEl):null},inBounds:function(e,t){var i=this.bounds;if(i){return e>=i.left&&e<i.right&&t>=i.top&&t<i.bottom}return true}});var Ie=ke.extend({coordMaps:null,constructor:function(e){this.coordMaps=e},build:function(){var e=this.coordMaps;var t;for(t=0;t<e.length;t++){e[t].build()}},getCell:function(e,t){var i=this.coordMaps;var n=null;var r;for(r=0;r<i.length&&!n;r++){n=i[r].getCell(e,t)}return n},clear:function(){var e=this.coordMaps;var t;for(t=0;t<e.length;t++){e[t].clear()}}});var Me=i.DragListener=ke.extend({options:null,isListening:false,isDragging:false,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(e){e=e||{};this.options=e;this.subjectEl=e.subjectEl},mousedown:function(e){if(T(e)){e.preventDefault();this.startListening(e);if(!this.options.distance){this.startDrag(e)}}},startListening:function(t){var i;if(!this.isListening){if(t&&this.options.scroll){i=m(e(t.target));if(!i.is(window)&&!i.is(document)){this.scrollEl=i;this.scrollHandlerProxy=ie(te(this,"scrollHandler"),100);this.scrollEl.on("scroll",this.scrollHandlerProxy)}}e(document).on("mousemove",this.mousemoveProxy=te(this,"mousemove")).on("mouseup",this.mouseupProxy=te(this,"mouseup")).on("selectstart",this.preventDefault);if(t){this.originX=t.pageX;this.originY=t.pageY}else{this.originX=0;this.originY=0}this.isListening=true;this.listenStart(t)}},listenStart:function(e){this.trigger("listenStart",e)},mousemove:function(e){var t=e.pageX-this.originX;var i=e.pageY-this.originY;var n;var r;if(!this.isDragging){n=this.options.distance||1;r=t*t+i*i;if(r>=n*n){this.startDrag(e)}}if(this.isDragging){this.drag(t,i,e)}},startDrag:function(e){if(!this.isListening){this.startListening()}if(!this.isDragging){this.isDragging=true;this.dragStart(e)}},dragStart:function(e){var t=this.subjectEl;this.trigger("dragStart",e);if(this.subjectHref=t?t.attr("href"):null){t.removeAttr("href")}},drag:function(e,t,i){this.trigger("drag",e,t,i);this.updateScroll(i)},mouseup:function(e){this.stopListening(e)},stopDrag:function(e){if(this.isDragging){this.stopScrolling();this.dragStop(e);this.isDragging=false}},dragStop:function(e){var t=this;this.trigger("dragStop",e);setTimeout(function(){if(t.subjectHref){t.subjectEl.attr("href",t.subjectHref)}},0)},stopListening:function(t){this.stopDrag(t);if(this.isListening){if(this.scrollEl){this.scrollEl.off("scroll",this.scrollHandlerProxy);this.scrollHandlerProxy=null}e(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault);this.mousemoveProxy=null;this.mouseupProxy=null;this.isListening=false;this.listenStop(t)}},listenStop:function(e){this.trigger("listenStop",e)},trigger:function(e){if(this.options[e]){this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}},preventDefault:function(e){e.preventDefault()},computeScrollBounds:function(){var e=this.scrollEl;this.scrollBounds=e?g(e):null},updateScroll:function(e){var t=this.scrollSensitivity;var i=this.scrollBounds;var n,r;var a,o;var s=0;var l=0;if(i){n=(t-(e.pageY-i.top))/t;r=(t-(i.bottom-e.pageY))/t;a=(t-(e.pageX-i.left))/t;o=(t-(i.right-e.pageX))/t;if(n>=0&&n<=1){s=n*this.scrollSpeed*-1}else if(r>=0&&r<=1){s=r*this.scrollSpeed}if(a>=0&&a<=1){l=a*this.scrollSpeed*-1}else if(o>=0&&o<=1){l=o*this.scrollSpeed}}this.setScrollVel(s,l)},setScrollVel:function(e,t){this.scrollTopVel=e;this.scrollLeftVel=t;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId){this.scrollIntervalId=setInterval(te(this,"scrollIntervalFunc"),this.scrollIntervalMs)}},constrainScrollVel:function(){var e=this.scrollEl;if(this.scrollTopVel<0){if(e.scrollTop()<=0){this.scrollTopVel=0}}else if(this.scrollTopVel>0){if(e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight){this.scrollTopVel=0}}if(this.scrollLeftVel<0){if(e.scrollLeft()<=0){this.scrollLeftVel=0}}else if(this.scrollLeftVel>0){if(e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth){this.scrollLeftVel=0}}},scrollIntervalFunc:function(){var e=this.scrollEl;var t=this.scrollIntervalMs/1e3;if(this.scrollTopVel){e.scrollTop(e.scrollTop()+this.scrollTopVel*t)}if(this.scrollLeftVel){e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t)}this.constrainScrollVel();if(!this.scrollTopVel&&!this.scrollLeftVel){this.stopScrolling()}},stopScrolling:function(){if(this.scrollIntervalId){clearInterval(this.scrollIntervalId);this.scrollIntervalId=null;this.scrollStop()}},scrollHandler:function(){if(!this.scrollIntervalId){this.scrollStop()}},scrollStop:function(){}});var Pe=Me.extend({coordMap:null,origCell:null,cell:null,coordAdjust:null,constructor:function(e,t){Me.prototype.constructor.call(this,t);this.coordMap=e},listenStart:function(e){var t=this.subjectEl;var i;var n;var r;Me.prototype.listenStart.apply(this,arguments);this.computeCoords();if(e){n={left:e.pageX,top:e.pageY};r=n;if(t){i=g(t);r=E(r,i)}this.origCell=this.getCell(r.left,r.top);if(t&&this.options.subjectCenter){if(this.origCell){i=k(this.origCell,i)||i}r=D(i)}this.coordAdjust=I(r,n)}else{this.origCell=null;this.coordAdjust=null}},computeCoords:function(){this.coordMap.build();this.computeScrollBounds()},dragStart:function(e){var t;Me.prototype.dragStart.apply(this,arguments);t=this.getCell(e.pageX,e.pageY);if(t){this.cellOver(t)}},drag:function(e,t,i){var n;Me.prototype.drag.apply(this,arguments);n=this.getCell(i.pageX,i.pageY);if(!Re(n,this.cell)){if(this.cell){this.cellOut()}if(n){this.cellOver(n)}}},dragStop:function(){this.cellDone();Me.prototype.dragStop.apply(this,arguments)},cellOver:function(e){this.cell=e;this.trigger("cellOver",e,Re(e,this.origCell),this.origCell)},cellOut:function(){if(this.cell){this.trigger("cellOut",this.cell);this.cellDone();this.cell=null}},cellDone:function(){if(this.cell){this.trigger("cellDone",this.cell)}},listenStop:function(){Me.prototype.listenStop.apply(this,arguments);this.origCell=this.cell=null;this.coordMap.clear()},scrollStop:function(){Me.prototype.scrollStop.apply(this,arguments);this.computeCoords()},getCell:function(e,t){if(this.coordAdjust){e+=this.coordAdjust.left;t+=this.coordAdjust.top}return this.coordMap.getCell(e,t)}});function Re(e,t){if(!e&&!t){return true}if(e&&t){return e.grid===t.grid&&e.row===t.row&&e.col===t.col}return false}var Ne=ke.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:false,isHidden:false,isAnimating:false,constructor:function(t,i){this.options=i=i||{};this.sourceEl=t;this.parentEl=i.parentEl?e(i.parentEl):t.parent()},start:function(t){if(!this.isFollowing){this.isFollowing=true;this.mouseY0=t.pageY;this.mouseX0=t.pageX;this.topDelta=0;this.leftDelta=0;if(!this.isHidden){this.updatePosition()}e(document).on("mousemove",this.mousemoveProxy=te(this,"mousemove"))}},stop:function(t,i){var n=this;var r=this.options.revertDuration;function a(){this.isAnimating=false;n.destroyEl();this.top0=this.left0=null;if(i){i()}}if(this.isFollowing&&!this.isAnimating){this.isFollowing=false;e(document).off("mousemove",this.mousemoveProxy);if(t&&r&&!this.isHidden){this.isAnimating=true;this.el.animate({top:this.top0,left:this.left0},{duration:r,complete:a})}else{a()}}},getEl:function(){var e=this.el;if(!e){this.sourceEl.width();e=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)}return e},destroyEl:function(){if(this.el){this.el.remove();this.el=null}},updatePosition:function(){var e;var t;this.getEl();if(this.top0===null){this.sourceEl.width();e=this.sourceEl.offset();t=this.el.offsetParent().offset();this.top0=e.top-t.top;this.left0=e.left-t.left}this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(e){this.topDelta=e.pageY-this.mouseY0;this.leftDelta=e.pageX-this.mouseX0;if(!this.isHidden){this.updatePosition()}},hide:function(){if(!this.isHidden){this.isHidden=true;if(this.el){this.el.hide()}}},show:function(){if(this.isHidden){this.isHidden=false;this.updatePosition();this.getEl().show()}}});var He=ke.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(e){this.view=e;this.isRTL=e.opt("isRTL")},rowHtml:function(e,t){var i=this.getHtmlRenderer("cell",e);var n="";var r;var a;t=t||0;for(r=0;r<this.colCnt;r++){a=this.getCell(t,r);n+=i(a)}n=this.bookendCells(n,e,t);return"<tr>"+n+"</tr>"},bookendCells:function(e,t,i){var n=this.getHtmlRenderer("intro",t)(i||0);var r=this.getHtmlRenderer("outro",t)(i||0);var a=this.isRTL?r:n;var o=this.isRTL?n:r;if(typeof e==="string"){return a+e+o}else{return e.prepend(a).append(o)}},getHtmlRenderer:function(e,t){var i=this.view;var n;var r;var a;var o;n=e+"Html";if(t){r=t+Q(e)+"Html"}if(r&&(o=i[r])){a=i}else if(r&&(o=this[r])){a=this}else if(o=i[n]){a=i}else if(o=this[n]){a=this}if(typeof o==="function"){return function(){return o.apply(a,arguments)||""}}return function(){return o||""}}});var Le=i.Grid=He.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,coordMap:null,elsByFill:null,externalDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,cellDuration:null,largeUnit:null,constructor:function(){He.apply(this,arguments);this.coordMap=new De(this);this.elsByFill={};this.externalDragStartProxy=te(this,"externalDragStart")},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return true},computeDisplayEventEnd:function(){return true},setRange:function(e){var t=this.view;var i;var n;this.start=e.start.clone();this.end=e.end.clone();this.rowData=[];this.colData=[];this.updateCells();this.colHeadFormat=t.opt("columnFormat")||this.computeColHeadFormat();this.eventTimeFormat=t.opt("eventTimeFormat")||t.opt("timeFormat")||this.computeEventTimeFormat();i=t.opt("displayEventTime");if(i==null){i=this.computeDisplayEventTime()}n=t.opt("displayEventEnd");if(n==null){n=this.computeDisplayEventEnd()}this.displayEventTime=i;this.displayEventEnd=n},updateCells:function(){},rangeToSegs:function(e){},diffDates:function(e,t){if(this.largeUnit){return L(e,t,this.largeUnit)}else{return N(e,t)}},getCell:function(t,i){var n;if(i==null){if(typeof t==="number"){i=t%this.colCnt;t=Math.floor(t/this.colCnt)}else{i=t.col;t=t.row}}n={row:t,col:i};e.extend(n,this.getRowData(t),this.getColData(i));e.extend(n,this.computeCellRange(n));return n},computeCellRange:function(e){var t=this.computeCellDate(e);return{start:t,end:t.clone().add(this.cellDuration)}},computeCellDate:function(e){},getRowData:function(e){return this.rowData[e]||{}},getColData:function(e){return this.colData[e]||{}},getRowEl:function(e){},getColEl:function(e){},getCellDayEl:function(e){return this.getColEl(e.col)||this.getRowEl(e.row)},computeRowCoords:function(){var e=[];var t,i;var n;for(t=0;t<this.rowCnt;t++){i=this.getRowEl(t);n=i.offset().top;e.push({top:n,bottom:n+i.outerHeight()})}return e},computeColCoords:function(){var e=[];var t,i;var n;for(t=0;t<this.colCnt;t++){i=this.getColEl(t);n=i.offset().left;e.push({left:n,right:n+i.outerWidth()})}return e},setElement:function(t){var i=this;this.el=t;t.on("mousedown",function(t){if(!e(t.target).is(".fc-event-container *, .fc-more")&&!e(t.target).closest(".fc-popover").length){i.dayMousedown(t)}});this.bindSegHandlers();this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers();this.el.remove()},renderSkeleton:function(){},renderDates:function(){},destroyDates:function(){},bindGlobalHandlers:function(){e(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){e(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(e){var t=this;var i=this.view;var n=i.opt("selectable");var r;var a;var o=new Pe(this.coordMap,{scroll:i.opt("dragScroll"),dragStart:function(){i.unselect()},cellOver:function(e,i,o){if(o){r=i?e:null;if(n){a=t.computeSelection(o,e);if(a){t.renderSelection(a)}else{d()}}}},cellOut:function(e){r=null;a=null;t.destroySelection();c()},listenStop:function(e){if(r){i.trigger("dayClick",t.getCellDayEl(r),r.start,e)}if(a){i.reportSelection(a,e)}c()}});o.mousedown(e)},renderRangeHelper:function(e,t){var i=this.fabricateHelperEvent(e,t);this.renderHelper(i,t)},fabricateHelperEvent:function(e,t){var i=t?Y(t.event):{};i.start=e.start.clone();i.end=e.end?e.end.clone():null;i.allDay=null;this.view.calendar.normalizeEventRange(i);i.className=(i.className||[]).concat("fc-helper");if(!t){i.editable=false}return i},renderHelper:function(e,t){},destroyHelper:function(){},renderSelection:function(e){this.renderHighlight(e)},destroySelection:function(){this.destroyHighlight()},computeSelection:function(e,t){var i=[e.start,e.end,t.start,t.end];var n;i.sort(J);n={start:i[0].clone(),end:i[3].clone()};if(!this.view.calendar.isSelectionRangeAllowed(n)){return null}return n},renderHighlight:function(e){this.renderFill("highlight",this.rangeToSegs(e))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(e,t){},destroyFill:function(e){var t=this.elsByFill[e];if(t){t.remove();delete this.elsByFill[e]}},renderFillSegEls:function(t,i){var n=this;var r=this[t+"SegEl"];var a="";var o=[];var s;if(i.length){for(s=0;s<i.length;s++){a+=this.fillSegHtml(t,i[s])}e(a).each(function(t,a){var s=i[t];var l=e(a);if(r){l=r.call(n,s,l)}if(l){l=e(l);if(l.is(n.fillSegTag)){s.el=l;o.push(s)}}})}return o},fillSegTag:"div",fillSegHtml:function(e,t){var i=this[e+"SegClasses"];var n=this[e+"SegCss"];var r=i?i.call(this,t):[];var a=X(n?n.call(this,t):{});return"<"+this.fillSegTag+(r.length?' class="'+r.join(" ")+'"':"")+(a?' style="'+a+'"':"")+" />"},headHtml:function(){return""+'<div class="fc-row '+this.view.widgetHeaderClass+'">'+"<table>"+"<thead>"+this.rowHtml("head")+"</thead>"+"</table>"+"</div>"},headCellHtml:function(e){var t=this.view;var i=e.start;return""+'<th class="fc-day-header '+t.widgetHeaderClass+" fc-"+P[i.day()]+'">'+Z(i.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(e){var t=this.view;var i=e.start;var n=this.getDayClasses(i);n.unshift("fc-day",t.widgetContentClass);return'<td class="'+n.join(" ")+'"'+' data-date="'+i.format("YYYY-MM-DD")+'"'+"></td>"},getDayClasses:function(e){var t=this.view;var i=t.calendar.getNow().stripTime();var n=["fc-"+P[e.day()]];if(t.intervalDuration.as("months")==1&&e.month()!=t.intervalStart.month()){n.push("fc-other-month")}if(e.isSame(i,"day")){n.push("fc-today",t.highlightStateClass)}else if(e<i){n.push("fc-past")}else{n.push("fc-future")}return n}});Le.mixin({mousedOverSeg:null,isDraggingSeg:false,isResizingSeg:false,isDraggingExternal:false,segs:null,renderEvents:function(e){var t=this.eventsToSegs(e);var i=[];var n=[];var r,a;for(r=0;r<t.length;r++){a=t[r];if(Fe(a.event)){i.push(a)}else{n.push(a)}}i=this.renderBgSegs(i)||i;n=this.renderFgSegs(n)||n;this.segs=i.concat(n)},destroyEvents:function(){this.triggerSegMouseout();this.destroyFgSegs();this.destroyBgSegs();this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(e){},destroyFgSegs:function(){},renderFgSegEls:function(t,i){var n=this.view;var r="";var a=[];var o;if(t.length){for(o=0;o<t.length;o++){r+=this.fgSegHtml(t[o],i)}e(r).each(function(i,r){var o=t[i];var s=n.resolveEventEl(o.event,e(r));if(s){s.data("fc-seg",o);o.el=s;a.push(o)}})}return a},fgSegHtml:function(e,t){},renderBgSegs:function(e){return this.renderFill("bgEvent",e)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(e,t){return this.view.resolveEventEl(e.event,t)},bgEventSegClasses:function(e){var t=e.event;var i=t.source||{};return["fc-bgevent"].concat(t.className,i.className||[])},bgEventSegCss:function(e){var t=this.view;var i=e.event;var n=i.source||{};return{"background-color":i.backgroundColor||i.color||n.backgroundColor||n.color||t.opt("eventBackgroundColor")||t.opt("eventColor")}},businessHoursSegClasses:function(e){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var t=this;var i=this.view;e.each({
mouseenter:function(e,i){t.triggerSegMouseover(e,i)},mouseleave:function(e,i){t.triggerSegMouseout(e,i)},click:function(e,t){return i.trigger("eventClick",this,e.event,t)},mousedown:function(n,r){if(e(r.target).is(".fc-resizer")&&i.isEventResizable(n.event)){t.segResizeMousedown(n,r,e(r.target).is(".fc-start-resizer"))}else if(i.isEventDraggable(n.event)){t.segDragMousedown(n,r)}}},function(i,n){t.el.on(i,".fc-event-container > *",function(i){var r=e(this).data("fc-seg");if(r&&!t.isDraggingSeg&&!t.isResizingSeg){return n.call(this,r,i)}})})},triggerSegMouseover:function(e,t){if(!this.mousedOverSeg){this.mousedOverSeg=e;this.view.trigger("eventMouseover",e.el[0],e.event,t)}},triggerSegMouseout:function(e,t){t=t||{};if(this.mousedOverSeg){e=e||this.mousedOverSeg;this.mousedOverSeg=null;this.view.trigger("eventMouseout",e.el[0],e.event,t)}},segDragMousedown:function(e,t){var i=this;var n=this.view;var r=n.calendar;var a=e.el;var o=e.event;var s;var l=new Ne(e.el,{parentEl:n.el,opacity:n.opt("dragOpacity"),revertDuration:n.opt("dragRevertDuration"),zIndex:2});var u=new Pe(n.coordMap,{distance:5,scroll:n.opt("dragScroll"),subjectEl:a,subjectCenter:true,listenStart:function(e){l.hide();l.start(e)},dragStart:function(t){i.triggerSegMouseout(e,t);i.segDragStart(e,t);n.hideEvent(o)},cellOver:function(t,a,c){if(e.cell){c=e.cell}s=i.computeEventDrop(c,t,o);if(s&&!r.isEventRangeAllowed(s,o)){d();s=null}if(s&&n.renderDrag(s,e)){l.hide()}else{l.show()}if(a){s=null}},cellOut:function(){n.destroyDrag();l.show();s=null},cellDone:function(){c()},dragStop:function(t){l.stop(!s,function(){n.destroyDrag();n.showEvent(o);i.segDragStop(e,t);if(s){n.reportEventDrop(o,s,this.largeUnit,a,t)}})},listenStop:function(){l.stop()}});u.mousedown(t)},segDragStart:function(e,t){this.isDraggingSeg=true;this.view.trigger("eventDragStart",e.el[0],e.event,t,{})},segDragStop:function(e,t){this.isDraggingSeg=false;this.view.trigger("eventDragStop",e.el[0],e.event,t,{})},computeEventDrop:function(e,t,i){var n=this.view.calendar;var r=e.start;var a=t.start;var o;var s;if(r.hasTime()===a.hasTime()){o=this.diffDates(a,r);if(i.allDay&&A(o)){s={start:i.start.clone(),end:n.getEventEnd(i),allDay:false};n.normalizeEventRangeTimes(s)}else{s={start:i.start.clone(),end:i.end?i.end.clone():null,allDay:i.allDay}}s.start.add(o);if(s.end){s.end.add(o)}}else{s={start:a.clone(),end:null,allDay:!a.hasTime()}}return s},applyDragOpacity:function(e){var t=this.view.opt("dragOpacity");if(t!=null){e.each(function(e,i){i.style.opacity=t})}},externalDragStart:function(t,i){var n=this.view;var r;var a;if(n.opt("droppable")){r=e((i?i.item:null)||t.target);a=n.opt("dropAccept");if(e.isFunction(a)?a.call(r[0],r):r.is(a)){if(!this.isDraggingExternal){this.listenToExternalDrag(r,t,i)}}}},listenToExternalDrag:function(e,t,i){var n=this;var r=Ye(e);var a;var o;a=new Pe(this.coordMap,{listenStart:function(){n.isDraggingExternal=true},cellOver:function(e){o=n.computeExternalDrop(e,r);if(o){n.renderDrag(o)}else{d()}},cellOut:function(){o=null;n.destroyDrag();c()},dragStop:function(){n.destroyDrag();c();if(o){n.view.reportExternalDrop(r,o,e,t,i)}},listenStop:function(){n.isDraggingExternal=false}});a.startDrag(t)},computeExternalDrop:function(e,t){var i={start:e.start.clone(),end:null};if(t.startTime&&!i.start.hasTime()){i.start.time(t.startTime)}if(t.duration){i.end=i.start.clone().add(t.duration)}if(!this.view.calendar.isExternalDropRangeAllowed(i,t.eventProps)){return null}return i},renderDrag:function(e,t){},destroyDrag:function(){},segResizeMousedown:function(e,t,i){var n=this;var r=this.view;var a=r.calendar;var o=e.el;var s=e.event;var l=a.getEventEnd(s);var u;var h;u=new Pe(this.coordMap,{distance:5,scroll:r.opt("dragScroll"),subjectEl:o,dragStart:function(t){n.triggerSegMouseout(e,t);n.segResizeStart(e,t)},cellOver:function(t,o,c){h=i?n.computeEventStartResize(c,t,s):n.computeEventEndResize(c,t,s);if(h){if(!a.isEventRangeAllowed(h,s)){d();h=null}else if(h.start.isSame(s.start)&&h.end.isSame(l)){h=null}}if(h){r.hideEvent(s);n.renderEventResize(h,e)}},cellOut:function(){h=null},cellDone:function(){n.destroyEventResize();r.showEvent(s);c()},dragStop:function(t){n.segResizeStop(e,t);if(h){r.reportEventResize(s,h,this.largeUnit,o,t)}}});u.mousedown(t)},segResizeStart:function(e,t){this.isResizingSeg=true;this.view.trigger("eventResizeStart",e.el[0],e.event,t,{})},segResizeStop:function(e,t){this.isResizingSeg=false;this.view.trigger("eventResizeStop",e.el[0],e.event,t,{})},computeEventStartResize:function(e,t,i){return this.computeEventResize("start",e,t,i)},computeEventEndResize:function(e,t,i){return this.computeEventResize("end",e,t,i)},computeEventResize:function(e,t,i,n){var r=this.view.calendar;var a=this.diffDates(i[e],t[e]);var o;var s;o={start:n.start.clone(),end:r.getEventEnd(n),allDay:n.allDay};if(o.allDay&&A(a)){o.allDay=false;r.normalizeEventRangeTimes(o)}o[e].add(a);if(!o.start.isBefore(o.end)){s=n.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration;if(this.cellDuration&&this.cellDuration<s){s=this.cellDuration}if(e=="start"){o.start=o.end.clone().subtract(s)}else{o.end=o.start.clone().add(s)}}return o},renderEventResize:function(e,t){},destroyEventResize:function(){},getEventTimeText:function(e,t,i){if(t==null){t=this.eventTimeFormat}if(i==null){i=this.displayEventEnd}if(this.displayEventTime&&e.start.hasTime()){if(i&&e.end){return this.view.formatRange(e,t)}else{return e.start.format(t)}}return""},getSegClasses:function(e,t,i){var n=e.event;var r=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(n.className,n.source?n.source.className:[]);if(t){r.push("fc-draggable")}if(i){r.push("fc-resizable")}return r},getEventSkinCss:function(e){var t=this.view;var i=e.source||{};var n=e.color;var r=i.color;var a=t.opt("eventColor");return{"background-color":e.backgroundColor||n||i.backgroundColor||r||t.opt("eventBackgroundColor")||a,"border-color":e.borderColor||n||i.borderColor||r||t.opt("eventBorderColor")||a,color:e.textColor||i.textColor||t.opt("eventTextColor")}},eventsToSegs:function(e,t){var i=this.eventsToRanges(e);var n=[];var r;for(r=0;r<i.length;r++){n.push.apply(n,this.eventRangeToSegs(i[r],t))}return n},eventsToRanges:function(t){var i=this;var n=Oe(t);var r=[];e.each(n,function(e,t){if(t.length){r.push.apply(r,$e(t[0])?i.eventsToInverseRanges(t):i.eventsToNormalRanges(t))}});return r},eventsToNormalRanges:function(e){var t=this.view.calendar;var i=[];var n,r;var a,o;for(n=0;n<e.length;n++){r=e[n];a=r.start.clone().stripZone();o=t.getEventEnd(r).stripZone();i.push({event:r,start:a,end:o,eventStartMS:+a,eventDurationMS:o-a})}return i},eventsToInverseRanges:function(e){var t=this.view;var i=t.start.clone().stripZone();var n=t.end.clone().stripZone();var r=this.eventsToNormalRanges(e);var a=[];var o=e[0];var s=i;var l,d;r.sort(ze);for(l=0;l<r.length;l++){d=r[l];if(d.start>s){a.push({event:o,start:s,end:d.start})}s=d.end}if(s<n){a.push({event:o,start:s,end:n})}return a},eventRangeToSegs:function(e,t){var i;var n,r;if(t){i=t(e)}else{i=this.rangeToSegs(e)}for(n=0;n<i.length;n++){r=i[n];r.event=e.event;r.eventStartMS=e.eventStartMS;r.eventDurationMS=e.eventDurationMS}return i}});function Fe(e){var t=Ae(e);return t==="background"||t==="inverse-background"}function $e(e){return Ae(e)==="inverse-background"}function Ae(e){return q((e.source||{}).rendering,e.rendering)}function Oe(e){var t={};var i,n;for(i=0;i<e.length;i++){n=e[i];(t[n._id]||(t[n._id]=[])).push(n)}return t}function ze(e,t){return e.eventStartMS-t.eventStartMS}function Be(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||(e.event.title||"").localeCompare(t.event.title)}i.compareSegs=Be;i.dataAttrPrefix="";function Ye(n){var r=i.dataAttrPrefix;var a;var o;var s;var l;if(r){r+="-"}a=n.data(r+"event")||null;if(a){if(typeof a==="object"){a=e.extend({},a)}else{a={}}o=a.start;if(o==null){o=a.time}s=a.duration;l=a.stick;delete a.start;delete a.time;delete a.duration;delete a.stick}if(o==null){o=n.data(r+"start")}if(o==null){o=n.data(r+"time")}if(s==null){s=n.data(r+"duration")}if(l==null){l=n.data(r+"stick")}o=o!=null?t.duration(o):null;s=s!=null?t.duration(s):null;l=Boolean(l);return{eventProps:a,startTime:o,duration:s,stick:l}}var Ue=Le.extend({numbersVisible:false,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,constructor:function(){Le.apply(this,arguments);this.cellDuration=t.duration(1,"day")},renderDates:function(e){var t=this.view;var i=this.rowCnt;var n=this.colCnt;var r=i*n;var a="";var o;var s,l;for(o=0;o<i;o++){a+=this.dayRowHtml(o,e)}this.el.html(a);this.rowEls=this.el.find(".fc-row");this.dayEls=this.el.find(".fc-day");for(s=0;s<r;s++){l=this.getCell(s);t.trigger("dayRender",null,l.start,this.dayEls.eq(s))}},destroyDates:function(){this.destroySegPopover()},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents(true);var t=this.eventsToSegs(e);this.renderFill("businessHours",t,"bgevent")},dayRowHtml:function(e,t){var i=this.view;var n=["fc-row","fc-week",i.widgetContentClass];if(t){n.push("fc-rigid")}return""+'<div class="'+n.join(" ")+'">'+'<div class="fc-bg">'+"<table>"+this.rowHtml("day",e)+"</table>"+"</div>"+'<div class="fc-content-skeleton">'+"<table>"+(this.numbersVisible?"<thead>"+this.rowHtml("number",e)+"</thead>":"")+"</table>"+"</div>"+"</div>"},dayCellHtml:function(e){return this.bgCellHtml(e)},computeColHeadFormat:function(){if(this.rowCnt>1){return"ddd"}else if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return this.colCnt==1},updateCells:function(){var e;var t;var i;var n;this.updateCellDates();e=this.cellDates;if(this.breakOnWeeks){t=e[0].day();for(n=1;n<e.length;n++){if(e[n].day()==t){break}}i=Math.ceil(e.length/n)}else{i=1;n=e.length}this.rowCnt=i;this.colCnt=n},updateCellDates:function(){var e=this.view;var t=this.start.clone();var i=[];var n=-1;var r=[];while(t.isBefore(this.end)){if(e.isHiddenDay(t)){r.push(n+.5)}else{n++;r.push(n);i.push(t.clone())}t.add(1,"days")}this.cellDates=i;this.dayToCellOffsets=r},computeCellDate:function(e){var t=this.colCnt;var i=e.row*t+(this.isRTL?t-e.col-1:e.col);return this.cellDates[i].clone()},getRowEl:function(e){return this.rowEls.eq(e)},getColEl:function(e){return this.dayEls.eq(e)},getCellDayEl:function(e){return this.dayEls.eq(e.row*this.colCnt+e.col)},computeRowCoords:function(){var e=Le.prototype.computeRowCoords.call(this);e[e.length-1].bottom+=this.bottomCoordPadding;return e},rangeToSegs:function(e){var t=this.isRTL;var i=this.rowCnt;var n=this.colCnt;var r=[];var a,o;var s;var l,d;var c,u;var h,f;var p;e=this.view.computeDayRange(e);a=this.dateToCellOffset(e.start);o=this.dateToCellOffset(e.end.subtract(1,"days"));for(s=0;s<i;s++){l=s*n;d=l+n-1;h=Math.max(l,a);f=Math.min(d,o);h=Math.ceil(h);f=Math.floor(f);if(h<=f){c=h===a;u=f===o;h-=l;f-=l;p={row:s,isStart:c,isEnd:u};if(t){p.leftCol=n-f-1;p.rightCol=n-h-1}else{p.leftCol=h;p.rightCol=f}r.push(p)}}return r},dateToCellOffset:function(e){var t=this.dayToCellOffsets;var i=e.diff(this.start,"days");if(i<0){return t[0]-1}else if(i>=t.length){return t[t.length-1]+1}else{return t[i]}},renderDrag:function(e,t){this.renderHighlight(this.view.calendar.ensureVisibleEventRange(e));if(t&&!t.el.closest(this.el).length){this.renderRangeHelper(e,t);this.applyDragOpacity(this.helperEls);return true}},destroyDrag:function(){this.destroyHighlight();this.destroyHelper()},renderEventResize:function(e,t){this.renderHighlight(e);this.renderRangeHelper(e,t)},destroyEventResize:function(){this.destroyHighlight();this.destroyHelper()},renderHelper:function(t,i){var n=[];var r=this.eventsToSegs([t]);var a;r=this.renderFgSegEls(r);a=this.renderSegRows(r);this.rowEls.each(function(t,r){var o=e(r);var s=e('<div class="fc-helper-skeleton"><table/></div>');var l;if(i&&i.row===t){l=i.el.position().top}else{l=o.find(".fc-content-skeleton tbody").position().top}s.css("top",l).find("table").append(a[t].tbodyEl);o.append(s);n.push(s[0])});this.helperEls=e(n)},destroyHelper:function(){if(this.helperEls){this.helperEls.remove();this.helperEls=null}},fillSegTag:"td",renderFill:function(t,i,n){var r=[];var a,o;var s;i=this.renderFillSegEls(t,i);for(a=0;a<i.length;a++){o=i[a];s=this.renderFillRow(t,o,n);this.rowEls.eq(o.row).append(s);r.push(s[0])}this.elsByFill[t]=e(r);return i},renderFillRow:function(t,i,n){var r=this.colCnt;var a=i.leftCol;var o=i.rightCol+1;var s;var l;n=n||t.toLowerCase();s=e('<div class="fc-'+n+'-skeleton">'+"<table><tr/></table>"+"</div>");l=s.find("tr");if(a>0){l.append('<td colspan="'+a+'"/>')}l.append(i.el.attr("colspan",o-a));if(o<r){l.append('<td colspan="'+(r-o)+'"/>')}this.bookendCells(l,t);return s}});Ue.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover();Le.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return Le.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(t){var i=e.grep(t,function(e){return e.event.allDay});return Le.prototype.renderBgSegs.call(this,i)},renderFgSegs:function(t){var i;t=this.renderFgSegEls(t);i=this.rowStructs=this.renderSegRows(t);this.rowEls.each(function(t,n){e(n).find(".fc-content-skeleton > table").append(i[t].tbodyEl)});return t},destroyFgSegs:function(){var e=this.rowStructs||[];var t;while(t=e.pop()){t.tbodyEl.remove()}this.rowStructs=null},renderSegRows:function(e){var t=[];var i;var n;i=this.groupSegRows(e);for(n=0;n<i.length;n++){t.push(this.renderSegRow(n,i[n]))}return t},fgSegHtml:function(e,t){var i=this.view;var n=e.event;var r=i.isEventDraggable(n);var a=!t&&n.allDay&&e.isStart&&i.isEventResizableFromStart(n);var o=!t&&n.allDay&&e.isEnd&&i.isEventResizableFromEnd(n);var s=this.getSegClasses(e,r,a||o);var l=X(this.getEventSkinCss(n));var d="";var c;var u;s.unshift("fc-day-grid-event","fc-h-event");if(e.isStart){c=this.getEventTimeText(n);if(c){d='<span class="fc-time">'+Z(c)+"</span>"}}u='<span class="fc-title">'+(Z(n.title||"")||"&nbsp;")+"</span>";return'<a class="'+s.join(" ")+'"'+(n.url?' href="'+Z(n.url)+'"':"")+(l?' style="'+l+'"':"")+">"+'<div class="fc-content">'+(this.isRTL?u+" "+d:d+" "+u)+"</div>"+(a?'<div class="fc-resizer fc-start-resizer" />':"")+(o?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(t,i){var n=this.colCnt;var r=this.buildSegLevels(i);var a=Math.max(1,r.length);var o=e("<tbody/>");var s=[];var l=[];var d=[];var c,u;var h;var f;var p,v;var m;function g(t){while(h<t){m=(d[c-1]||[])[h];if(m){m.attr("rowspan",parseInt(m.attr("rowspan")||1,10)+1)}else{m=e("<td/>");f.append(m)}l[c][h]=m;d[c][h]=m;h++}}for(c=0;c<a;c++){u=r[c];h=0;f=e("<tr/>");s.push([]);l.push([]);d.push([]);if(u){for(p=0;p<u.length;p++){v=u[p];g(v.leftCol);m=e('<td class="fc-event-container"/>').append(v.el);if(v.leftCol!=v.rightCol){m.attr("colspan",v.rightCol-v.leftCol+1)}else{d[c][h]=m}while(h<=v.rightCol){l[c][h]=m;s[c][h]=v;h++}f.append(m)}}g(n);this.bookendCells(f,"eventSkeleton");o.append(f)}return{row:t,tbodyEl:o,cellMatrix:l,segMatrix:s,segLevels:r,segs:i}},buildSegLevels:function(e){var t=[];var i,n;var r;e.sort(Be);for(i=0;i<e.length;i++){n=e[i];for(r=0;r<t.length;r++){if(!Ge(n,t[r])){break}}n.level=r;(t[r]||(t[r]=[])).push(n)}for(r=0;r<t.length;r++){t[r].sort(Ve)}return t},groupSegRows:function(e){var t=[];var i;for(i=0;i<this.rowCnt;i++){t.push([])}for(i=0;i<e.length;i++){t[e[i].row].push(e[i])}return t}});function Ge(e,t){var i,n;for(i=0;i<t.length;i++){n=t[i];if(n.leftCol<=e.rightCol&&n.rightCol>=e.leftCol){return true}}return false}function Ve(e,t){return e.leftCol-t.leftCol}Ue.mixin({segPopover:null,popoverSegs:null,destroySegPopover:function(){if(this.segPopover){this.segPopover.hide()}},limitRows:function(e){var t=this.rowStructs||[];var i;var n;for(i=0;i<t.length;i++){this.unlimitRow(i);if(!e){n=false}else if(typeof e==="number"){n=e}else{n=this.computeRowLevelLimit(i)}if(n!==false){this.limitRow(i,n)}}},computeRowLevelLimit:function(t){var i=this.rowEls.eq(t);var n=i.height();var r=this.rowStructs[t].tbodyEl.children();var a,o;var s;function l(t,i){s=Math.max(s,e(i).outerHeight())}for(a=0;a<r.length;a++){o=r.eq(a).removeClass("fc-limited");s=0;o.find("> td > :first-child").each(l);if(o.position().top+s>n){return a}}return false},limitRow:function(t,i){var n=this;var r=this.rowStructs[t];var a=[];var o=0;var s;var l;var d;var c;var u,h;var f;var p;var v;var m,g;var b;var y;var w,C,S;function _(r){while(o<r){s=n.getCell(t,o);f=n.getCellSegs(s,i);if(f.length){m=d[i-1][o];S=n.renderMoreLink(s,f);C=e("<div/>").append(S);m.append(C);a.push(C[0])}o++}}if(i&&i<r.segLevels.length){l=r.segLevels[i-1];d=r.cellMatrix;c=r.tbodyEl.children().slice(i).addClass("fc-limited").get();for(u=0;u<l.length;u++){h=l[u];_(h.leftCol);v=[];p=0;while(o<=h.rightCol){s=this.getCell(t,o);f=this.getCellSegs(s,i);v.push(f);p+=f.length;o++}if(p){m=d[i-1][h.leftCol];g=m.attr("rowspan")||1;b=[];for(y=0;y<v.length;y++){w=e('<td class="fc-more-cell"/>').attr("rowspan",g);f=v[y];s=this.getCell(t,h.leftCol+y);S=this.renderMoreLink(s,[h].concat(f));C=e("<div/>").append(S);w.append(C);b.push(w[0]);a.push(w[0])}m.addClass("fc-limited").after(e(b));c.push(m[0])}}_(this.colCnt);r.moreEls=e(a);r.limitedEls=e(c)}},unlimitRow:function(e){var t=this.rowStructs[e];if(t.moreEls){t.moreEls.remove();t.moreEls=null}if(t.limitedEls){t.limitedEls.removeClass("fc-limited");t.limitedEls=null}},renderMoreLink:function(t,i){var n=this;var r=this.view;return e('<a class="fc-more"/>').text(this.getMoreLinkText(i.length)).on("click",function(a){var o=r.opt("eventLimitClick");var s=t.start;var l=e(this);var d=n.getCellDayEl(t);var c=n.getCellSegs(t);var u=n.resliceDaySegs(c,s);var h=n.resliceDaySegs(i,s);if(typeof o==="function"){o=r.trigger("eventLimitClick",null,{date:s,dayEl:d,moreEl:l,segs:u,hiddenSegs:h},a)}if(o==="popover"){n.showSegPopover(t,l,u)}else if(typeof o==="string"){r.calendar.zoomTo(s,o)}})},showSegPopover:function(e,t,i){var n=this;var r=this.view;var a=t.parent();var o;var s;if(this.rowCnt==1){o=r.el}else{o=this.rowEls.eq(e.row)}s={className:"fc-more-popover",content:this.renderSegPopoverContent(e,i),parentEl:this.el,top:o.offset().top,autoHide:true,viewportConstrain:r.opt("popoverViewportConstrain"),hide:function(){n.segPopover.destroy();n.segPopover=null;n.popoverSegs=null}};if(this.isRTL){s.right=a.offset().left+a.outerWidth()+1}else{s.left=a.offset().left-1}this.segPopover=new Ee(s);this.segPopover.show()},renderSegPopoverContent:function(t,i){var n=this.view;var r=n.opt("theme");var a=t.start.format(n.opt("dayPopoverFormat"));var o=e('<div class="fc-header '+n.widgetHeaderClass+'">'+'<span class="fc-close '+(r?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span>'+'<span class="fc-title">'+Z(a)+"</span>"+'<div class="fc-clear"/>'+"</div>"+'<div class="fc-body '+n.widgetContentClass+'">'+'<div class="fc-event-container"></div>'+"</div>");var s=o.find(".fc-event-container");var l;i=this.renderFgSegEls(i,true);this.popoverSegs=i;for(l=0;l<i.length;l++){i[l].cell=t;s.append(i[l].el)}return o},resliceDaySegs:function(t,i){var n=e.map(t,function(e){return e.event});var r=i.clone().stripTime();var a=r.clone().add(1,"days");var o={start:r,end:a};t=this.eventsToSegs(n,function(e){var t=M(e,o);return t?[t]:[]});t.sort(Be);return t},getMoreLinkText:function(e){var t=this.view.opt("eventLimitText");if(typeof t==="function"){return t(e)}else{return"+"+e+" "+t}},getCellSegs:function(e,t){var i=this.rowStructs[e.row].segMatrix;var n=t||0;var r=[];var a;while(n<i.length){a=i[n][e.col];if(a){r.push(a)}n++}return r}});var je=Le.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){Le.apply(this,arguments);this.processOptions()},renderDates:function(){this.el.html(this.renderHtml());this.dayEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr")},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(e),"bgevent")},renderHtml:function(){return""+'<div class="fc-bg">'+"<table>"+this.rowHtml("slotBg")+"</table>"+"</div>"+'<div class="fc-slats">'+"<table>"+this.slatRowHtml()+"</table>"+"</div>"},slotBgCellHtml:function(e){return this.bgCellHtml(e)},slatRowHtml:function(){var e=this.view;var i=this.isRTL;var n="";var r=this.slotDuration.asMinutes()%15===0;var a=t.duration(+this.minTime);var o;var s;var l;while(a<this.maxTime){o=this.start.clone().time(a);s=o.minutes();l='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(!r||!s?"<span>"+Z(o.format(this.axisFormat))+"</span>":"")+"</td>";n+="<tr "+(!s?"":'class="fc-minor"')+">"+(!i?l:"")+'<td class="'+e.widgetContentClass+'"/>'+(i?l:"")+"</tr>";a.add(this.slotDuration)}return n},processOptions:function(){var e=this.view;var i=e.opt("slotDuration");var n=e.opt("snapDuration");i=t.duration(i);n=n?t.duration(n):i;this.slotDuration=i;this.snapDuration=n;this.cellDuration=n;this.minTime=t.duration(e.opt("minTime"));this.maxTime=t.duration(e.opt("maxTime"));this.axisFormat=e.opt("axisFormat")||e.opt("smallTimeFormat")},computeColHeadFormat:function(){if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return true},updateCells:function(){var e=this.view;var t=[];var i;i=this.start.clone();while(i.isBefore(this.end)){t.push({day:i.clone()});i.add(1,"day");i=e.skipHiddenDays(i)}if(this.isRTL){t.reverse()}this.colData=t;this.colCnt=t.length;this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellDate:function(e){var t=this.computeSnapTime(e.row);return this.view.calendar.rezoneDate(e.day).time(t)},getColEl:function(e){return this.dayEls.eq(e)},computeSnapTime:function(e){return t.duration(this.minTime+this.snapDuration*e)},rangeToSegs:function(e){var t=this.colCnt;var i=[];var n;var r;var a;var o;e={start:e.start.clone().stripZone(),end:e.end.clone().stripZone()};for(r=0;r<t;r++){a=this.colData[r].day;o={start:a.clone().time(this.minTime),end:a.clone().time(this.maxTime)};n=M(e,o);if(n){n.col=r;i.push(n)}}return i},updateSize:function(e){this.computeSlatTops();if(e){this.updateSegVerticals()}},computeRowCoords:function(){var e=this.el.offset().top;var t=[];var i;var n;for(i=0;i<this.rowCnt;i++){n={top:e+this.computeTimeTop(this.computeSnapTime(i))};if(i>0){t[i-1].bottom=n.top}t.push(n)}n.bottom=n.top+this.computeTimeTop(this.computeSnapTime(i));return t},computeDateTop:function(e,i){return this.computeTimeTop(t.duration(e.clone().stripZone()-i.clone().stripTime()))},computeTimeTop:function(e){var t=(e-this.minTime)/this.slotDuration;var i;var n;var r;var a;t=Math.max(0,t);t=Math.min(this.slatEls.length,t);i=Math.floor(t);n=t-i;r=this.slatTops[i];if(n){a=this.slatTops[i+1];return r+(a-r)*n}else{return r}},computeSlatTops:function(){var t=[];var i;this.slatEls.each(function(n,r){i=e(r).position().top;t.push(i)});t.push(i+this.slatEls.last().outerHeight());this.slatTops=t},renderDrag:function(e,t){if(t){this.renderRangeHelper(e,t);this.applyDragOpacity(this.helperEl);return true}else{this.renderHighlight(this.view.calendar.ensureVisibleEventRange(e))}},destroyDrag:function(){this.destroyHelper();this.destroyHighlight()},renderEventResize:function(e,t){this.renderRangeHelper(e,t)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(t,i){var n=this.eventsToSegs([t]);var r;var a,o;var s;n=this.renderFgSegEls(n);r=this.renderSegTable(n);for(a=0;a<n.length;a++){o=n[a];if(i&&i.col===o.col){s=i.el;o.el.css({left:s.css("left"),right:s.css("right"),"margin-left":s.css("margin-left"),"margin-right":s.css("margin-right")})}}this.helperEl=e('<div class="fc-helper-skeleton"/>').append(r).appendTo(this.el)},destroyHelper:function(){if(this.helperEl){this.helperEl.remove();this.helperEl=null}},renderSelection:function(e){if(this.view.opt("selectHelper")){this.renderRangeHelper(e)}else{this.renderHighlight(e)}},destroySelection:function(){this.destroyHelper();this.destroyHighlight()},renderFill:function(t,i,n){var r;var a;var o;var s,l;var d;var c;var u;var h,f;if(i.length){i=this.renderFillSegEls(t,i);r=this.groupSegCols(i);n=n||t.toLowerCase();a=e('<div class="fc-'+n+'-skeleton">'+"<table><tr/></table>"+"</div>");o=a.find("tr");for(s=0;s<r.length;s++){l=r[s];d=e("<td/>").appendTo(o);if(l.length){c=e('<div class="fc-'+n+'-container"/>').appendTo(d);u=this.colData[s].day;for(h=0;h<l.length;h++){f=l[h];c.append(f.el.css({top:this.computeDateTop(f.start,u),bottom:-this.computeDateTop(f.end,u)}))}}}this.bookendCells(o,t);this.el.append(a);this.elsByFill[t]=a}return i}});je.mixin({eventSkeletonEl:null,renderFgSegs:function(t){t=this.renderFgSegEls(t);this.el.append(this.eventSkeletonEl=e('<div class="fc-content-skeleton"/>').append(this.renderSegTable(t)));return t},destroyFgSegs:function(e){if(this.eventSkeletonEl){this.eventSkeletonEl.remove();this.eventSkeletonEl=null}},renderSegTable:function(t){var i=e("<table><tr/></table>");var n=i.find("tr");var r;var a,o;var s,l;var d;r=this.groupSegCols(t);this.computeSegVerticals(t);for(s=0;s<r.length;s++){l=r[s];We(l);d=e('<div class="fc-event-container"/>');for(a=0;a<l.length;a++){o=l[a];o.el.css(this.generateSegPositionCss(o));if(o.bottom-o.top<30){o.el.addClass("fc-short")}d.append(o.el)}n.append(e("<td/>").append(d))}this.bookendCells(n,"eventSkeleton");return i},updateSegVerticals:function(){var e=(this.segs||[]).concat(this.businessHourSegs||[]);var t;this.computeSegVerticals(e);for(t=0;t<e.length;t++){e[t].el.css(this.generateSegVerticalCss(e[t]))}},computeSegVerticals:function(e){var t,i;for(t=0;t<e.length;t++){i=e[t];i.top=this.computeDateTop(i.start,i.start);i.bottom=this.computeDateTop(i.end,i.start)}},fgSegHtml:function(e,t){var i=this.view;var n=e.event;var r=i.isEventDraggable(n);var a=!t&&e.isStart&&i.isEventResizableFromStart(n);var o=!t&&e.isEnd&&i.isEventResizableFromEnd(n);var s=this.getSegClasses(e,r,a||o);var l=X(this.getEventSkinCss(n));var d;var c;var u;s.unshift("fc-time-grid-event","fc-v-event");if(i.isMultiDayEvent(n)){if(e.isStart||e.isEnd){d=this.getEventTimeText(e);c=this.getEventTimeText(e,"LT");u=this.getEventTimeText(e,null,false)}}else{d=this.getEventTimeText(n);c=this.getEventTimeText(n,"LT");u=this.getEventTimeText(n,null,false)}return'<a class="'+s.join(" ")+'"'+(n.url?' href="'+Z(n.url)+'"':"")+(l?' style="'+l+'"':"")+">"+'<div class="fc-content">'+(d?'<div class="fc-time"'+' data-start="'+Z(u)+'"'+' data-full="'+Z(c)+'"'+">"+"<span>"+Z(d)+"</span>"+"</div>":"")+(n.title?'<div class="fc-title">'+Z(n.title)+"</div>":"")+"</div>"+'<div class="fc-bg"/>'+(o?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},generateSegPositionCss:function(e){var t=this.view.opt("slotEventOverlap");var i=e.backwardCoord;var n=e.forwardCoord;var r=this.generateSegVerticalCss(e);var a;var o;if(t){n=Math.min(1,i+(n-i)*2)}if(this.isRTL){a=1-n;o=i}else{a=i;o=1-n}r.zIndex=e.level+1;r.left=a*100+"%";r.right=o*100+"%";if(t&&e.forwardPressure){r[this.isRTL?"marginLeft":"marginRight"]=10*2}return r},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},groupSegCols:function(e){var t=[];var i;for(i=0;i<this.colCnt;i++){t.push([])}for(i=0;i<e.length;i++){t[e[i].col].push(e[i])}return t}});function We(e){var t;var i;var n;e.sort(Be);t=qe(e);Ze(t);if(i=t[0]){for(n=0;n<i.length;n++){Ke(i[n])}for(n=0;n<i.length;n++){Xe(i[n],0,0)}}}function qe(e){var t=[];var i,n;var r;for(i=0;i<e.length;i++){n=e[i];for(r=0;r<t.length;r++){if(!Qe(n,t[r]).length){break}}n.level=r;(t[r]||(t[r]=[])).push(n)}return t}function Ze(e){var t,i;var n,r;var a;for(t=0;t<e.length;t++){i=e[t];for(n=0;n<i.length;n++){r=i[n];r.forwardSegs=[];for(a=t+1;a<e.length;a++){Qe(r,e[a],r.forwardSegs)}}}}function Ke(e){var t=e.forwardSegs;var i=0;var n,r;if(e.forwardPressure===undefined){for(n=0;n<t.length;n++){r=t[n];Ke(r);i=Math.max(i,1+r.forwardPressure)}e.forwardPressure=i}}function Xe(e,t,i){var n=e.forwardSegs;var r;if(e.forwardCoord===undefined){if(!n.length){e.forwardCoord=1}else{n.sort(et);Xe(n[0],t+1,i);e.forwardCoord=n[0].backwardCoord}e.backwardCoord=e.forwardCoord-(e.forwardCoord-i)/(t+1);for(r=0;r<n.length;r++){Xe(n[r],0,e.forwardCoord)}}}function Qe(e,t,i){i=i||[];for(var n=0;n<t.length;n++){if(Je(e,t[n])){i.push(t[n])}}return i}function Je(e,t){return e.bottom>t.top&&e.top<t.bottom}function et(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||Be(e,t)}var tt=i.View=ke.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,isDisplayed:false,isSkeletonRendered:false,isEventsRendered:false,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:false,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(e,i,n,r){this.calendar=e;this.type=this.name=i;this.options=n;this.intervalDuration=r||t.duration(1,"day");this.nextDayThreshold=t.duration(this.opt("nextDayThreshold"));this.initThemingProps();this.initHiddenDays();this.documentMousedownProxy=te(this,"documentMousedown");this.initialize()},initialize:function(){},opt:function(e){return this.options[e]},trigger:function(e,t){var i=this.calendar;return i.trigger.apply(i,[e,t||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(e){this.setRange(this.computeRange(e))},setRange:function(t){e.extend(this,t);this.updateTitle()},computeRange:function(e){var t=F(this.intervalDuration);var i=e.clone().startOf(t);var n=i.clone().add(this.intervalDuration);var r,a;if(/year|month|week|day/.test(t)){i.stripTime();n.stripTime()}else{if(!i.hasTime()){i=this.calendar.rezoneDate(i)}if(!n.hasTime()){n=this.calendar.rezoneDate(n)}}r=i.clone();r=this.skipHiddenDays(r);a=n.clone();a=this.skipHiddenDays(a,-1,true);return{intervalUnit:t,intervalStart:i,intervalEnd:n,start:r,end:a}},computePrevDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(e,t){if(this.intervalDuration.as("days")<=1){if(this.isHiddenDay(e)){e=this.skipHiddenDays(e,t);e.startOf("day")}}return e},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){if(this.intervalUnit=="year"){return"YYYY"}else if(this.intervalUnit=="month"){return this.opt("monthYearFormat")}else if(this.intervalDuration.as("days")>1){return"ll"}else{return"LL"}},formatRange:function(e,t,i){var n=e.end;if(!n.hasTime()){n=n.clone().subtract(1)}return ye(e.start,n,t,i,this.opt("isRTL"))},setElement:function(e){this.el=e;this.bindGlobalHandlers()},removeElement:function(){this.clear();if(this.isSkeletonRendered){this.destroySkeleton();this.isSkeletonRendered=false}this.unbindGlobalHandlers();this.el.remove()},display:function(e){var t=null;if(this.isDisplayed){t=this.queryScroll()}this.clear();this.setDate(e);this.render();this.updateSize();this.renderBusinessHours();this.isDisplayed=true;t=this.computeInitialScroll(t);this.forceScroll(t);this.triggerRender()},clear:function(){if(this.isDisplayed){this.unselect();this.clearEvents();this.triggerDestroy();this.destroyBusinessHours();this.destroy();this.isDisplayed=false}},render:function(){if(!this.isSkeletonRendered){
this.renderSkeleton();this.isSkeletonRendered=true}this.renderDates()},destroy:function(){this.destroyDates()},renderSkeleton:function(){},destroySkeleton:function(){},renderDates:function(){},destroyDates:function(){},renderBusinessHours:function(){},destroyBusinessHours:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerDestroy:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){e(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){e(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header";this.widgetContentClass=e+"-widget-content";this.highlightStateClass=e+"-state-highlight"},updateSize:function(e){var t;if(e){t=this.queryScroll()}this.updateHeight();this.updateWidth();if(e){this.setScroll(t)}},updateWidth:function(){},updateHeight:function(){var e=this.calendar;this.setHeight(e.getSuggestedViewHeight(),e.isHeightAuto())},setHeight:function(e,t){},computeScrollerHeight:function(e){var t=this.scrollerEl;var i;var n;i=this.el.add(t);i.css({position:"relative",left:-1});n=this.el.outerHeight()-t.height();i.css({position:"",left:""});return e-n},computeInitialScroll:function(e){return 0},queryScroll:function(){if(this.scrollerEl){return this.scrollerEl.scrollTop()}},setScroll:function(e){if(this.scrollerEl){return this.scrollerEl.scrollTop(e)}},forceScroll:function(e){var t=this;this.setScroll(e);setTimeout(function(){t.setScroll(e)},0)},displayEvents:function(e){var t=this.queryScroll();this.clearEvents();this.renderEvents(e);this.isEventsRendered=true;this.setScroll(t);this.triggerEventRender()},clearEvents:function(){if(this.isEventsRendered){this.triggerEventDestroy();this.destroyEvents();this.isEventsRendered=false}},renderEvents:function(e){},destroyEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(e){this.trigger("eventAfterRender",e.event,e.event,e.el)});this.trigger("eventAfterAllRender")},triggerEventDestroy:function(){this.renderedEventSegEach(function(e){this.trigger("eventDestroy",e.event,e.event,e.el)})},resolveEventEl:function(t,i){var n=this.trigger("eventRender",t,t,i);if(n===false){i=null}else if(n&&n!==true){i=e(n)}return i},showEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","")},e)},hideEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","hidden")},e)},renderedEventSegEach:function(e,t){var i=this.getEventSegs();var n;for(n=0;n<i.length;n++){if(!t||i[n].event._id===t._id){if(i[n].el){e.call(this,i[n])}}}},getEventSegs:function(){return[]},isEventDraggable:function(e){var t=e.source||{};return q(e.startEditable,t.startEditable,this.opt("eventStartEditable"),e.editable,t.editable,this.opt("editable"))},reportEventDrop:function(e,t,i,n,r){var a=this.calendar;var o=a.mutateEvent(e,t,i);var s=function(){o.undo();a.reportEventChange()};this.triggerEventDrop(e,o.dateDelta,s,n,r);a.reportEventChange()},triggerEventDrop:function(e,t,i,n,r){this.trigger("eventDrop",n[0],e,t,i,r,{})},reportExternalDrop:function(t,i,n,r,a){var o=t.eventProps;var s;var l;if(o){s=e.extend({},o,i);l=this.calendar.renderEvent(s,t.stick)[0]}this.triggerExternalDrop(l,i,n,r,a)},triggerExternalDrop:function(e,t,i,n,r){this.trigger("drop",i[0],t.start,n,r);if(e){this.trigger("eventReceive",null,e)}},renderDrag:function(e,t){},destroyDrag:function(){},isEventResizableFromStart:function(e){return this.opt("eventResizableFromStart")&&this.isEventResizable(e)},isEventResizableFromEnd:function(e){return this.isEventResizable(e)},isEventResizable:function(e){var t=e.source||{};return q(e.durationEditable,t.durationEditable,this.opt("eventDurationEditable"),e.editable,t.editable,this.opt("editable"))},reportEventResize:function(e,t,i,n,r){var a=this.calendar;var o=a.mutateEvent(e,t,i);var s=function(){o.undo();a.reportEventChange()};this.triggerEventResize(e,o.durationDelta,s,n,r);a.reportEventChange()},triggerEventResize:function(e,t,i,n,r){this.trigger("eventResize",n[0],e,t,i,r,{})},select:function(e,t){this.unselect(t);this.renderSelection(e);this.reportSelection(e,t)},renderSelection:function(e){},reportSelection:function(e,t){this.isSelected=true;this.trigger("select",null,e.start,e.end,t)},unselect:function(e){if(this.isSelected){this.isSelected=false;this.destroySelection();this.trigger("unselect",null,e)}},destroySelection:function(){},documentMousedown:function(t){var i;if(this.isSelected&&this.opt("unselectAuto")&&T(t)){i=this.opt("unselectCancel");if(!i||!e(t.target).closest(i).length){this.unselect(t)}}},initHiddenDays:function(){var t=this.opt("hiddenDays")||[];var i=[];var n=0;var r;if(this.opt("weekends")===false){t.push(0,6)}for(r=0;r<7;r++){if(!(i[r]=e.inArray(r,t)!==-1)){n++}}if(!n){throw"invalid hiddenDays"}this.isHiddenDayHash=i},isHiddenDay:function(e){if(t.isMoment(e)){e=e.day()}return this.isHiddenDayHash[e]},skipHiddenDays:function(e,t,i){var n=e.clone();t=t||1;while(this.isHiddenDayHash[(n.day()+(i?t:0)+7)%7]){n.add(t,"days")}return n},computeDayRange:function(e){var t=e.start.clone().stripTime();var i=e.end;var n=null;var r;if(i){n=i.clone().stripTime();r=+i.time();if(r&&r>=this.nextDayThreshold){n.add(1,"days")}}if(!i||n<=t){n=t.clone().add(1,"days")}return{start:t,end:n}},isMultiDayEvent:function(e){var t=this.computeDayRange(e);return t.end.diff(t.start,"days")>1}});var it=i.Calendar=i.CalendarBase=ke.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,constructor:nt,initOptions:function(e){var t,i;var n,r;e=o(e);t=e.lang;i=rt[t];if(!i){t=it.defaults.lang;i=rt[t]||{}}n=q(e.isRTL,i.isRTL,it.defaults.isRTL);r=n?it.rtlDefaults:{};this.dirDefaults=r;this.langDefaults=i;this.overrides=e;this.options=a(it.defaults,r,i,e);lt(this.options);this.viewSpecCache={}},getViewSpec:function(e){var t=this.viewSpecCache;return t[e]||(t[e]=this.buildViewSpec(e))},getUnitViewSpec:function(t){var n;var r;var a;if(e.inArray(t,R)!=-1){n=this.header.getViewsWithButtons();e.each(i.views,function(e){n.push(e)});for(r=0;r<n.length;r++){a=this.getViewSpec(n[r]);if(a){if(a.singleUnit==t){return a}}}}},buildViewSpec:function(e){var i=this.overrides.views||{};var r=[];var o=[];var s=e;var l;var d;var c;var u;var h;var f;while(s&&!l){d=n[s]||{};c=i[s]||{};u=u||c.duration||d.duration;s=c.type||d.type;if(typeof d==="function"){l=d;r.unshift(l.defaults||{})}else{r.unshift(d)}o.unshift(c)}if(l){f={"class":l,type:e};if(u){u=t.duration(u);if(!u.valueOf()){u=null}}if(u){f.duration=u;h=F(u);if(u.as(h)===1){f.singleUnit=h;o.unshift(i[h]||{})}}f.defaults=a.apply(null,r);f.overrides=a.apply(null,o);this.buildViewSpecOptions(f);this.buildViewSpecButtonText(f,e);return f}},buildViewSpecOptions:function(e){e.options=a(it.defaults,e.defaults,this.dirDefaults,this.langDefaults,this.overrides,e.overrides);lt(e.options)},buildViewSpecButtonText:function(e,t){function i(i){var n=i.buttonText||{};return n[t]||(e.singleUnit?n[e.singleUnit]:null)}e.buttonTextOverride=i(this.overrides)||e.overrides.buttonText;e.buttonTextDefault=i(this.langDefaults)||i(this.dirDefaults)||e.defaults.buttonText||i(it.defaults)||(e.duration?this.humanizeDuration(e.duration):null)||t},instantiateView:function(e){var t=this.getViewSpec(e);return new t["class"](this,e,t.options,t.duration)},isValidViewType:function(e){return Boolean(this.getViewSpec(e))}});function nt(n,r){var a=this;a.initOptions(r||{});var o=this.options;a.render=_;a.destroy=T;a.refetchEvents=R;a.reportEvents=$;a.reportEventChange=A;a.rerenderEvents=N;a.changeView=E;a.select=B;a.unselect=U;a.prev=G;a.next=V;a.prevYear=j;a.nextYear=W;a.today=q;a.gotoDate=Z;a.incrementDate=K;a.zoomTo=X;a.getDate=Q;a.getCalendar=te;a.getView=ne;a.option=re;a.trigger=ae;var s=Y(dt(o.lang));if(o.monthNames){s._months=o.monthNames}if(o.monthNamesShort){s._monthsShort=o.monthNamesShort}if(o.dayNames){s._weekdays=o.dayNames}if(o.dayNamesShort){s._weekdaysShort=o.dayNamesShort}if(o.firstDay!=null){var l=Y(s._week);l.dow=o.firstDay;s._week=l}s._fullCalendar_weekCalc=function(e){if(typeof e==="function"){return e}else if(e==="local"){return e}else if(e==="iso"||e==="ISO"){return"ISO"}}(o.weekNumberCalculation);a.defaultAllDayEventDuration=t.duration(o.defaultAllDayEventDuration);a.defaultTimedEventDuration=t.duration(o.defaultTimedEventDuration);a.moment=function(){var e;if(o.timezone==="local"){e=i.moment.apply(null,arguments);if(e.hasTime()){e.local()}}else if(o.timezone==="UTC"){e=i.moment.utc.apply(null,arguments)}else{e=i.moment.parseZone.apply(null,arguments)}if("_locale"in e){e._locale=s}else{e._lang=s}return e};a.getIsAmbigTimezone=function(){return o.timezone!=="local"&&o.timezone!=="UTC"};a.rezoneDate=function(e){return a.moment(e.toArray())};a.getNow=function(){var e=o.now;if(typeof e==="function"){e=e()}return a.moment(e)};a.getEventEnd=function(e){if(e.end){return e.end.clone()}else{return a.getDefaultEventEnd(e.allDay,e.start)}};a.getDefaultEventEnd=function(e,t){var i=t.clone();if(e){i.stripTime().add(a.defaultAllDayEventDuration)}else{i.add(a.defaultTimedEventDuration)}if(a.getIsAmbigTimezone()){i.stripZone()}return i};a.humanizeDuration=function(e){return(e.locale||e.lang).call(e,o.lang).humanize()};ft.call(a,o);var d=a.isFetchNeeded;var c=a.fetchEvents;var u=n[0];var h;var f;var p;var v;var m;var g={};var b;var y;var w=0;var C;var S=[];if(o.defaultDate!=null){C=a.moment(o.defaultDate)}else{C=a.getNow()}function _(){if(!p){x()}else if(k()){I();E()}}function x(){v=o.theme?"ui":"fc";n.addClass("fc");if(o.isRTL){n.addClass("fc-rtl")}else{n.addClass("fc-ltr")}if(o.theme){n.addClass("ui-widget")}else{n.addClass("fc-unthemed")}p=e("<div class='fc-view-container'/>").prependTo(n);h=a.header=new ct(a,o);f=h.render();if(f){n.prepend(f)}E(o.defaultView);if(o.handleWindowResize){y=ie(P,o.windowResizeDelay);e(window).resize(y)}}function T(){if(m){m.removeElement()}h.destroy();p.remove();n.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");if(y){e(window).unbind("resize",y)}}function k(){return n.is(":visible")}function E(t){w++;if(m&&t&&m.type!==t){h.deactivateButton(m.type);J();m.removeElement();m=a.view=null}if(!m&&t){m=a.view=g[t]||(g[t]=a.instantiateView(t));m.setElement(e("<div class='fc-view fc-"+t+"-view' />").appendTo(p));h.activateButton(t)}if(m){C=m.massageCurrentDate(C);if(!m.isDisplayed||!C.isWithin(m.intervalStart,m.intervalEnd)){if(k()){J();m.display(C);ee();O();z();L()}}}ee();w--}a.getSuggestedViewHeight=function(){if(b===undefined){I()}return b};a.isHeightAuto=function(){return o.contentHeight==="auto"||o.height==="auto"};function D(e){if(k()){if(e){M()}w++;m.updateSize(true);w--;return true}}function I(){if(k()){M()}}function M(){if(typeof o.contentHeight==="number"){b=o.contentHeight}else if(typeof o.height==="number"){b=o.height-(f?f.outerHeight(true):0)}else{b=Math.round(p.width()/Math.max(o.aspectRatio,.5))}}function P(e){if(!w&&e.target===window&&m.start){if(D(true)){m.trigger("windowResize",u)}}}function R(){H();F()}function N(){if(k()){J();m.displayEvents(S);ee()}}function H(){J();m.clearEvents();ee()}function L(){if(!o.lazyFetching||d(m.start,m.end)){F()}else{N()}}function F(){c(m.start,m.end)}function $(e){S=e;N()}function A(){N()}function O(){h.updateTitle(m.title)}function z(){var e=a.getNow();if(e.isWithin(m.intervalStart,m.intervalEnd)){h.disableButton("today")}else{h.enableButton("today")}}function B(e,t){e=a.moment(e);if(t){t=a.moment(t)}else if(e.hasTime()){t=e.clone().add(a.defaultTimedEventDuration)}else{t=e.clone().add(a.defaultAllDayEventDuration)}m.select({start:e,end:t})}function U(){if(m){m.unselect()}}function G(){C=m.computePrevDate(C);E()}function V(){C=m.computeNextDate(C);E()}function j(){C.add(-1,"years");E()}function W(){C.add(1,"years");E()}function q(){C=a.getNow();E()}function Z(e){C=a.moment(e);E()}function K(e){C.add(t.duration(e));E()}function X(e,t){var i;t=t||"day";i=a.getViewSpec(t)||a.getUnitViewSpec(t);C=e;E(i?i.type:null)}function Q(){return C.clone()}function J(){p.css({width:"100%",height:p.height(),overflow:"hidden"})}function ee(){p.css({width:"",height:"",overflow:""})}function te(){return a}function ne(){return m}function re(e,t){if(t===undefined){return o[e]}if(e=="height"||e=="contentHeight"||e=="aspectRatio"){o[e]=t;D(true)}}function ae(e,t){if(o[e]){return o[e].apply(t||u,Array.prototype.slice.call(arguments,2))}}}it.defaults={titleRangeSeparator:" — ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:false,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:true,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:false,isRTL:false,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:false,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:true,unselectAuto:true,dropAccept:"*",eventLimit:false,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:true,windowResizeDelay:200};it.englishDefaults={dayPopoverFormat:"dddd, MMMM D"};it.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var rt=i.langs={};i.datepickerLang=function(t,i,n){var r=rt[t]||(rt[t]={});r.isRTL=n.isRTL;r.weekNumberTitle=n.weekHeader;e.each(at,function(e,t){r[e]=t(n)});if(e.datepicker){e.datepicker.regional[i]=e.datepicker.regional[t]=n;e.datepicker.regional.en=e.datepicker.regional[""];e.datepicker.setDefaults(n)}};i.lang=function(t,i){var n;var r;n=rt[t]||(rt[t]={});if(i){n=rt[t]=a(n,i)}r=dt(t);e.each(ot,function(e,t){if(n[e]==null){n[e]=t(r,n)}});it.defaults.lang=t};var at={buttonText:function(e){return{prev:K(e.prevText),next:K(e.nextText),today:K(e.currentText)}},monthYearFormat:function(e){return e.showMonthAfterYear?"YYYY["+e.yearSuffix+"] MMMM":"MMMM YYYY["+e.yearSuffix+"]"}};var ot={dayOfMonthFormat:function(e,t){var i=e.longDateFormat("l");i=i.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");if(t.isRTL){i+=" ddd"}else{i="ddd "+i}return i},mediumTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(e){return e.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}};var st={smallDayDateFormat:function(e){return e.isRTL?"D dd":"dd D"},weekFormat:function(e){return e.isRTL?"w[ "+e.weekNumberTitle+"]":"["+e.weekNumberTitle+" ]w"},smallWeekFormat:function(e){return e.isRTL?"w["+e.weekNumberTitle+"]":"["+e.weekNumberTitle+"]w"}};function lt(t){e.each(st,function(e,i){if(t[e]==null){t[e]=i(t)}})}function dt(e){var i=t.localeData||t.langData;return i.call(t,e)||i.call(t,"en")}i.lang("en",it.englishDefaults);function ct(t,i){var n=this;n.render=s;n.destroy=l;n.updateTitle=c;n.activateButton=u;n.deactivateButton=h;n.disableButton=f;n.enableButton=p;n.getViewsWithButtons=v;var r=e();var a=[];var o;function s(){var t=i.header;o=i.theme?"ui":"fc";if(t){r=e("<div class='fc-toolbar'/>").append(d("left")).append(d("right")).append(d("center")).append('<div class="fc-clear"/>');return r}}function l(){r.remove()}function d(n){var r=e('<div class="fc-'+n+'"/>');var s=i.header[n];if(s){e.each(s.split(" "),function(n){var s=e();var l=true;var d;e.each(this.split(","),function(n,r){var d;var c;var u;var h;var f;var p;var v;var m;var g;if(r=="title"){s=s.add(e("<h2>&nbsp;</h2>"));l=false}else{d=t.getViewSpec(r);if(d){c=function(){t.changeView(r)};a.push(r);u=d.buttonTextOverride;h=d.buttonTextDefault}else if(t[r]){c=function(){t[r]()};u=(t.overrides.buttonText||{})[r];h=i.buttonText[r]}if(c){f=i.themeButtonIcons[r];p=i.buttonIcons[r];if(u){v=Z(u)}else if(f&&i.theme){v="<span class='ui-icon ui-icon-"+f+"'></span>"}else if(p&&!i.theme){v="<span class='fc-icon fc-icon-"+p+"'></span>"}else{v=Z(h)}m=["fc-"+r+"-button",o+"-button",o+"-state-default"];g=e('<button type="button" class="'+m.join(" ")+'">'+v+"</button>").click(function(){if(!g.hasClass(o+"-state-disabled")){c();if(g.hasClass(o+"-state-active")||g.hasClass(o+"-state-disabled")){g.removeClass(o+"-state-hover")}}}).mousedown(function(){g.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){g.removeClass(o+"-state-down")}).hover(function(){g.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){g.removeClass(o+"-state-hover").removeClass(o+"-state-down")});s=s.add(g)}}});if(l){s.first().addClass(o+"-corner-left").end().last().addClass(o+"-corner-right").end()}if(s.length>1){d=e("<div/>");if(l){d.addClass("fc-button-group")}d.append(s);r.append(d)}else{r.append(s)}})}return r}function c(e){r.find("h2").text(e)}function u(e){r.find(".fc-"+e+"-button").addClass(o+"-state-active")}function h(e){r.find(".fc-"+e+"-button").removeClass(o+"-state-active")}function f(e){r.find(".fc-"+e+"-button").attr("disabled","disabled").addClass(o+"-state-disabled")}function p(e){r.find(".fc-"+e+"-button").removeAttr("disabled").removeClass(o+"-state-disabled")}function v(){return a}}i.sourceNormalizers=[];i.sourceFetchers=[];var ut={dataType:"json",cache:false};var ht=1;function ft(n){var r=this;r.isFetchNeeded=m;r.fetchEvents=g;r.addEventSource=w;r.removeEventSource=S;r.updateEvent=T;r.renderEvent=D;r.removeEvents=I;r.clientEvents=M;r.mutateEvent=U;r.normalizeEventRange=A;r.normalizeEventRangeTimes=O;r.ensureVisibleEventRange=B;var a=r.trigger;var o=r.getView;var s=r.reportEvents;var l={events:[]};var d=[l];var c,u;var h=0;var f=0;var p=0;var v=[];e.each((n.events?[n.events]:[]).concat(n.eventSources||[]),function(e,t){var i=C(t);if(i){d.push(i)}});function m(e,t){return!c||e.clone().stripZone()<c.clone().stripZone()||t.clone().stripZone()>u.clone().stripZone()}function g(e,t){c=e;u=t;v=[];var i=++h;var n=d.length;f=n;for(var r=0;r<n;r++){b(d[r],i)}}function b(t,i){y(t,function(n){var r=e.isArray(t.events);var a,o;var l;if(i==h){if(n){for(a=0;a<n.length;a++){o=n[a];if(r){l=o}else{l=F(o,t)}if(l){v.push.apply(v,Y(l))}}}f--;if(!f){s(v)}}})}function y(t,a){var o;var s=i.sourceFetchers;var l;for(o=0;o<s.length;o++){l=s[o].call(r,t,c.clone(),u.clone(),n.timezone,a);if(l===true){return}else if(typeof l=="object"){y(l,a);return}}var d=t.events;if(d){if(e.isFunction(d)){P();d.call(r,c.clone(),u.clone(),n.timezone,function(e){a(e);R()})}else if(e.isArray(d)){a(d)}else{a()}}else{var h=t.url;if(h){var f=t.success;var p=t.error;var v=t.complete;var m;if(e.isFunction(t.data)){m=t.data()}else{m=t.data}var g=e.extend({},m||{});var b=q(t.startParam,n.startParam);var w=q(t.endParam,n.endParam);var C=q(t.timezoneParam,n.timezoneParam);if(b){g[b]=c.format()}if(w){g[w]=u.format()}if(n.timezone&&n.timezone!="local"){g[C]=n.timezone}P();e.ajax(e.extend({},ut,t,{data:g,success:function(t){t=t||[];var i=W(f,this,arguments);if(e.isArray(i)){t=i}a(t)},error:function(){W(p,this,arguments);a()},complete:function(){W(v,this,arguments);R()}}))}else{a()}}}function w(e){var t=C(e);if(t){d.push(t);f++;b(t,h)}}function C(t){var n=i.sourceNormalizers;var a;var o;if(e.isFunction(t)||e.isArray(t)){a={events:t}}else if(typeof t==="string"){a={url:t}}else if(typeof t==="object"){a=e.extend({},t)}if(a){if(a.className){if(typeof a.className==="string"){a.className=a.className.split(/\s+/)}}else{a.className=[]}if(e.isArray(a.events)){a.origArray=a.events;a.events=e.map(a.events,function(e){return F(e,a)})}for(o=0;o<n.length;o++){n[o].call(r,a)}return a}}function S(t){d=e.grep(d,function(e){return!_(e,t)});v=e.grep(v,function(e){return!_(e.source,t)});s(v)}function _(e,t){return e&&t&&x(e)==x(t)}function x(e){return(typeof e==="object"?e.origArray||e.googleCalendarId||e.url||e.events:null)||e}function T(e){e.start=r.moment(e.start);if(e.end){e.end=r.moment(e.end)}else{e.end=null}U(e,k(e));s(v)}function k(t){var i={};e.each(t,function(e,t){if(E(e)){if(t!==undefined&&j(t)){i[e]=t}}});return i}function E(e){return!/^_|^(id|allDay|start|end)$/.test(e)}function D(e,t){var i=F(e);var n;var r,a;if(i){n=Y(i);for(r=0;r<n.length;r++){a=n[r];if(!a.source){if(t){l.events.push(a);a.source=l}v.push(a)}}s(v);return n}return[]}function I(t){var i;var n;if(t==null){t=function(){return true}}else if(!e.isFunction(t)){i=t+"";t=function(e){return e._id==i}}v=e.grep(v,t,true);for(n=0;n<d.length;n++){if(e.isArray(d[n].events)){d[n].events=e.grep(d[n].events,t,true)}}s(v)}function M(t){if(e.isFunction(t)){return e.grep(v,t)}else if(t!=null){t+="";return e.grep(v,function(e){return e._id==t})}return v}function P(){if(!p++){a("loading",null,true,o())}}function R(){if(!--p){a("loading",null,false,o())}}function F(i,a){var o={};var s,l;var d;if(n.eventDataTransform){i=n.eventDataTransform(i)}if(a&&a.eventDataTransform){i=a.eventDataTransform(i)}e.extend(o,i);if(a){o.source=a}o._id=i._id||(i.id===undefined?"_fc"+ht++:i.id+"");if(i.className){if(typeof i.className=="string"){o.className=i.className.split(/\s+/)}else{o.className=i.className}}else{o.className=[]}s=i.start||i.date;l=i.end;if(z(s)){s=t.duration(s)}if(z(l)){l=t.duration(l)}if(i.dow||t.isDuration(s)||t.isDuration(l)){o.start=s?t.duration(s):null;o.end=l?t.duration(l):null;o._recurring=true}else{if(s){s=r.moment(s);if(!s.isValid()){return false}}if(l){l=r.moment(l);if(!l.isValid()){l=null}}d=i.allDay;if(d===undefined){d=q(a?a.allDayDefault:undefined,n.allDayDefault)}$(s,l,d,o)}return o}function $(e,t,i,n){n.start=e;n.end=t;n.allDay=i;A(n);pt(n)}function A(e){O(e);if(e.end&&!e.end.isAfter(e.start)){e.end=null}if(!e.end){if(n.forceEventDuration){e.end=r.getDefaultEventEnd(e.allDay,e.start)}else{e.end=null}}}function O(e){if(e.allDay==null){e.allDay=!(e.start.hasTime()||e.end&&e.end.hasTime())}if(e.allDay){e.start.stripTime();if(e.end){e.end.stripTime()}}else{if(!e.start.hasTime()){e.start=r.rezoneDate(e.start)}if(e.end&&!e.end.hasTime()){e.end=r.rezoneDate(e.end)}}}function B(t){var i;if(!t.end){i=t.allDay;if(i==null){i=!t.start.hasTime()}t=e.extend({},t);t.end=r.getDefaultEventEnd(i,t.start)}return t}function Y(t,i,n){var r=[];var a;var o;var s;var l;var d,h;var f,p;var v;i=i||c;n=n||u;if(t){if(t._recurring){if(o=t.dow){a={};for(s=0;s<o.length;s++){a[o[s]]=true}}l=i.clone().stripTime();while(l.isBefore(n)){if(!a||a[l.day()]){d=t.start;h=t.end;f=l.clone();p=null;if(d){f=f.time(d)}if(h){p=l.clone().time(h)}v=e.extend({},t);$(f,p,!d&&!h,v);r.push(v)}l.add(1,"days")}}else{r.push(t)}}return r}function U(t,i,n){var a={};var o;var s;var l;var d;var c;var u;function h(e,t){if(n){return L(e,t,n)}else if(i.allDay){return H(e,t)}else{return N(e,t)}}i=i||{};if(!i.start){i.start=t.start.clone()}if(i.end===undefined){i.end=t.end?t.end.clone():null}if(i.allDay==null){i.allDay=t.allDay}A(i);o={start:t._start.clone(),end:t._end?t._end.clone():r.getDefaultEventEnd(t._allDay,t._start),allDay:i.allDay};A(o);s=t._end!==null&&i.end===null;l=h(i.start,o.start);if(i.end){d=h(i.end,o.end);c=d.subtract(l)}else{c=null}e.each(i,function(e,t){if(E(e)){if(t!==undefined){a[e]=t}}});u=G(M(t._id),s,i.allDay,l,c,a);return{dateDelta:l,durationDelta:c,undo:u}}function G(t,i,n,a,o,s){var l=r.getIsAmbigTimezone();var d=[];if(a&&!a.valueOf()){a=null}if(o&&!o.valueOf()){o=null}e.each(t,function(t,c){var u;var h;u={start:c.start.clone(),end:c.end?c.end.clone():null,allDay:c.allDay};e.each(s,function(e){u[e]=c[e]});h={start:c._start,end:c._end,allDay:n};A(h);if(i){h.end=null}else if(o&&!h.end){h.end=r.getDefaultEventEnd(h.allDay,h.start)}if(a){h.start.add(a);if(h.end){h.end.add(a)}}if(o){h.end.add(o)}if(l&&!h.allDay&&(a||o)){h.start.stripZone();if(h.end){h.end.stripZone()}}e.extend(c,s,h);pt(c);d.push(function(){e.extend(c,u);pt(c)})});return function(){for(var e=0;e<d.length;e++){d[e]()}}}r.getBusinessHoursEvents=V;function V(t){var i=n.businessHours;var a={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};var o=r.getView();var s;if(i){s=e.extend({},a,typeof i==="object"?i:{})}if(s){if(t){s.start=null;s.end=null}return Y(F(s),o.start,o.end)}return[]}r.isEventRangeAllowed=Z;r.isSelectionRangeAllowed=K;r.isExternalDropRangeAllowed=X;function Z(e,t){var i=t.source||{};var r=q(t.constraint,i.constraint,n.eventConstraint);var a=q(t.overlap,i.overlap,n.eventOverlap);e=B(e);return Q(e,r,a,t)}function K(e){return Q(e,n.selectConstraint,n.selectOverlap)}function X(t,i){var n;var r;if(i){n=e.extend({},i,t);r=Y(F(n))[0]}if(r){return Z(t,r)}else{t=B(t);return K(t)}}function Q(t,i,n,a){var o;var s;var l;var d,c;var u;t=e.extend({},t);t.start=t.start.clone().stripZone();t.end=t.end.clone().stripZone();if(i!=null){o=J(i);s=false;for(d=0;d<o.length;d++){if(ee(o[d],t)){s=true;break}}if(!s){return false}}l=r.getPeerEvents(a,t);for(d=0;d<l.length;d++){c=l[d];if(te(c,t)){if(n===false){return false}else if(typeof n==="function"&&!n(c,a)){return false}if(a){u=q(c.overlap,(c.source||{}).overlap);if(u===false){return false}if(typeof u==="function"&&!u(a,c)){return false}}}}return true}function J(e){if(e==="businessHours"){return V()}if(typeof e==="object"){return Y(F(e))}return M(e)}function ee(e,t){var i=e.start.clone().stripZone();var n=r.getEventEnd(e).stripZone();return t.start>=i&&t.end<=n}function te(e,t){var i=e.start.clone().stripZone();var n=r.getEventEnd(e).stripZone();return t.start<n&&t.end>i}r.getEventCache=function(){return v}}it.prototype.getPeerEvents=function(e,t){var i=this.getEventCache();var n=[];var r,a;for(r=0;r<i.length;r++){a=i[r];if(!e||e._id!==a._id){n.push(a)}}return n};function pt(e){e._allDay=e.allDay;e._start=e.start.clone();e._end=e.end?e.end.clone():null}var vt=n.basic=tt.extend({dayGrid:null,dayNumbersVisible:false,weekNumbersVisible:false,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new Ue(this);this.coordMap=this.dayGrid.coordMap},setRange:function(e){tt.prototype.setRange.call(this,e);this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit);this.dayGrid.setRange(e)},computeRange:function(e){var t=tt.prototype.computeRange.call(this,e);if(/year|month/.test(t.intervalUnit)){t.start.startOf("week");t.start=this.skipHiddenDays(t.start);if(t.end.weekday()){t.end.add(1,"week").startOf("week");t.end=this.skipHiddenDays(t.end,-1,true)}}return t},render:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderHtml());this.headRowEl=this.el.find("thead .fc-row");this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.coordMap.containerEl=this.scrollerEl;this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.renderDates(this.hasRigidRows())},destroy:function(){this.dayGrid.destroyDates();this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderHtml:function(){return""+"<table>"+'<thead class="fc-head">'+"<tr>"+'<td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+'<div class="fc-day-grid-container">'+'<div class="fc-day-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){if(this.weekNumbersVisible){return""+'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+">"+"<span>"+Z(this.opt("weekNumberTitle"))+"</span>"+"</th>"}},numberIntroHtml:function(e){if(this.weekNumbersVisible){return""+'<td class="fc-week-number" '+this.weekNumberStyleAttr()+">"+"<span>"+this.dayGrid.getCell(e,0).start.format("w")+"</span>"+"</td>"}},dayIntroHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"}},introHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"}},numberCellHtml:function(e){var t=e.start;var i;if(!this.dayNumbersVisible){return"<td/>"}i=this.dayGrid.getDayClasses(t);i.unshift("fc-day-number");return""+'<td class="'+i.join(" ")+'" data-date="'+t.format()+'">'+t.date()+"</td>"},weekNumberStyleAttr:function(){if(this.weekNumberWidth!==null){return'style="width:'+this.weekNumberWidth+'px"'}return""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&typeof e!=="number"},updateWidth:function(){if(this.weekNumbersVisible){this.weekNumberWidth=f(this.el.find(".fc-week-number"))}},setHeight:function(e,t){var i=this.opt("eventLimit");var n;v(this.scrollerEl);l(this.headRowEl);this.dayGrid.destroySegPopover();if(i&&typeof i==="number"){this.dayGrid.limitRows(i)}n=this.computeScrollerHeight(e);this.setGridHeight(n,t);if(i&&typeof i!=="number"){this.dayGrid.limitRows(i)}if(!t&&p(this.scrollerEl,n)){s(this.headRowEl,w(this.scrollerEl));n=this.computeScrollerHeight(e);this.scrollerEl.height(n)}},setGridHeight:function(e,t){if(t){h(this.dayGrid.rowEls)}else{u(this.dayGrid.rowEls,e,true)}},renderEvents:function(e){this.dayGrid.renderEvents(e);this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.dayGrid.destroyEvents()},renderDrag:function(e,t){return this.dayGrid.renderDrag(e,t)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(e){this.dayGrid.renderSelection(e)},destroySelection:function(){this.dayGrid.destroySelection()}});var mt=n.month=vt.extend({computeRange:function(e){var t=vt.prototype.computeRange.call(this,e);var i;if(this.isFixedWeeks()){i=Math.ceil(t.end.diff(t.start,"weeks",true));t.end.add(6-i,"weeks")}return t},setGridHeight:function(e,t){t=t||this.opt("weekMode")==="variable";if(t){e*=this.rowCnt/6}u(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){var e=this.opt("weekMode");if(e){return e==="fixed"}return this.opt("fixedWeekCount")}});mt.duration={months:1};mt.defaults={fixedWeekCount:true};n.basicWeek={type:"basic",duration:{weeks:1}};n.basicDay={type:"basic",duration:{days:1}};var gt={allDaySlot:true,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:true};var bt=5;var yt=n.agenda=tt.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new je(this);if(this.opt("allDaySlot")){this.dayGrid=new Ue(this);this.coordMap=new Ie([this.dayGrid.coordMap,this.timeGrid.coordMap])}else{this.coordMap=this.timeGrid.coordMap}},setRange:function(e){tt.prototype.setRange.call(this,e);this.timeGrid.setRange(e);if(this.dayGrid){this.dayGrid.setRange(e)}},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml());this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.coordMap.containerEl=this.scrollerEl;this.timeGrid.setElement(this.el.find(".fc-time-grid"));this.timeGrid.renderDates();this.bottomRuleEl=e('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);if(this.dayGrid){this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.renderDates();this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight();
}this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroyDates();this.timeGrid.removeElement();if(this.dayGrid){this.dayGrid.destroyDates();this.dayGrid.removeElement()}},renderBusinessHours:function(){this.timeGrid.renderBusinessHours();if(this.dayGrid){this.dayGrid.renderBusinessHours()}},renderHtml:function(){return""+"<table>"+'<thead class="fc-head">'+"<tr>"+'<td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/>'+'<hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container">'+'<div class="fc-time-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){var e;var t;if(this.opt("weekNumbers")){e=this.timeGrid.getCell(0).start;t=e.format(this.opt("smallWeekFormat"));return""+'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+">"+"<span>"+Z(t)+"</span>"+"</th>"}else{return'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"}},dayIntroHtml:function(){return""+'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+">"+"<span>"+(this.opt("allDayHtml")||Z(this.opt("allDayText")))+"</span>"+"</td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){if(this.axisWidth!==null){return'style="width:'+this.axisWidth+'px"'}return""},updateSize:function(e){this.timeGrid.updateSize(e);tt.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=f(this.el.find(".fc-axis"))},setHeight:function(e,t){var i;var n;if(this.bottomRuleHeight===null){this.bottomRuleHeight=this.bottomRuleEl.outerHeight()}this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");v(this.scrollerEl);l(this.noScrollRowEls);if(this.dayGrid){this.dayGrid.destroySegPopover();i=this.opt("eventLimit");if(i&&typeof i!=="number"){i=bt}if(i){this.dayGrid.limitRows(i)}}if(!t){n=this.computeScrollerHeight(e);if(p(this.scrollerEl,n)){s(this.noScrollRowEls,w(this.scrollerEl));n=this.computeScrollerHeight(e);this.scrollerEl.height(n)}else{this.scrollerEl.height(n).css("overflow","hidden");this.bottomRuleEl.show()}}},computeInitialScroll:function(){var e=t.duration(this.opt("scrollTime"));var i=this.timeGrid.computeTimeTop(e);i=Math.ceil(i);if(i){i++}return i},renderEvents:function(e){var t=[];var i=[];var n=[];var r;var a;for(a=0;a<e.length;a++){if(e[a].allDay){t.push(e[a])}else{i.push(e[a])}}r=this.timeGrid.renderEvents(i);if(this.dayGrid){n=this.dayGrid.renderEvents(t)}this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.timeGrid.destroyEvents();if(this.dayGrid){this.dayGrid.destroyEvents()}},renderDrag:function(e,t){if(e.start.hasTime()){return this.timeGrid.renderDrag(e,t)}else if(this.dayGrid){return this.dayGrid.renderDrag(e,t)}},destroyDrag:function(){this.timeGrid.destroyDrag();if(this.dayGrid){this.dayGrid.destroyDrag()}},renderSelection:function(e){if(e.start.hasTime()||e.end.hasTime()){this.timeGrid.renderSelection(e)}else if(this.dayGrid){this.dayGrid.renderSelection(e)}},destroySelection:function(){this.timeGrid.destroySelection();if(this.dayGrid){this.dayGrid.destroySelection()}}});yt.defaults=gt;n.agendaWeek={type:"agenda",duration:{weeks:1}};n.agendaDay={type:"agenda",duration:{days:1}};return i});(function(e){if(typeof e.fn.each2=="undefined"){e.extend(e.fn,{each2:function(t){var i=e([0]),n=-1,r=this.length;while(++n<r&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==false);return this}})}})(jQuery);(function(e,t){"use strict";if(window.Select2!==t){return}var i,n,r,a,o,s={x:0,y:0},l,d,c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return true}return false},isControl:function(e){var t=e.which;switch(t){case c.SHIFT:case c.CTRL:case c.ALT:return true}if(e.metaKey)return true;return false},isFunctionKey:function(e){e=e.which?e.which:e;return e>=112&&e<=123}},u="<div class='select2-measure-scrollbar'></div>",h={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};l=e(document);a=function(){var e=1;return function(){return e++}}();function f(t){var i=e(document.createTextNode(""));t.before(i);i.before(t);i.remove()}function p(e){function t(e){return h[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function v(e,t){var i=0,n=t.length;for(;i<n;i=i+1){if(g(e,t[i]))return i}return-1}function m(){var t=e(u);t.appendTo(document.body);var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};t.remove();return i}function g(e,i){if(e===i)return true;if(e===t||i===t)return false;if(e===null||i===null)return false;if(e.constructor===String)return e+""===i+"";if(i.constructor===String)return i+""===e+"";return false}function b(e,t,i){var n,r,a;if(e===null||e.length<1)return[];n=e.split(t);for(r=0,a=n.length;r<a;r=r+1)n[r]=i(n[r]);return n}function y(e){return e.outerWidth(false)-e.width()}function w(i){var n="keyup-change-value";i.on("keydown",function(){if(e.data(i,n)===t){e.data(i,n,i.val())}});i.on("keyup",function(){var r=e.data(i,n);if(r!==t&&i.val()!==r){e.removeData(i,n);i.trigger("keyup-change")}})}function C(i){i.on("mousemove",function(i){var n=s;if(n===t||n.x!==i.pageX||n.y!==i.pageY){e(i.target).trigger("mousemove-filtered",i)}})}function S(e,i,n){n=n||t;var r;return function(){var t=arguments;window.clearTimeout(r);r=window.setTimeout(function(){i.apply(n,t)},e)}}function _(e,t){var i=S(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){if(v(e.target,t.get())>=0)i(e)})}function x(e){if(e[0]===document.activeElement)return;window.setTimeout(function(){var t=e[0],i=e.val().length,n;e.focus();var r=t.offsetWidth>0||t.offsetHeight>0;if(r&&t===document.activeElement){if(t.setSelectionRange){t.setSelectionRange(i,i)}else if(t.createTextRange){n=t.createTextRange();n.collapse(false);n.select()}}},0)}function T(t){t=e(t)[0];var i=0;var n=0;if("selectionStart"in t){i=t.selectionStart;n=t.selectionEnd-i}else if("selection"in document){t.focus();var r=document.selection.createRange();n=document.selection.createRange().text.length;r.moveStart("character",-t.value.length);i=r.text.length-n}return{offset:i,length:n}}function k(e){e.preventDefault();e.stopPropagation()}function E(e){e.preventDefault();e.stopImmediatePropagation()}function D(t){if(!o){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);o=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"});o.attr("class","select2-sizer");e(document.body).append(o)}o.text(t.val());return o.width()}function I(t,i,n){var r,a=[],o;r=e.trim(t.attr("class"));if(r){r=""+r;e(r.split(/\s+/)).each2(function(){if(this.indexOf("select2-")===0){a.push(this)}})}r=e.trim(i.attr("class"));if(r){r=""+r;e(r.split(/\s+/)).each2(function(){if(this.indexOf("select2-")!==0){o=n(this);if(o){a.push(o)}}})}t.attr("class",a.join(" "))}function M(e,t,i,n){var r=p(e.toUpperCase()).indexOf(p(t.toUpperCase())),a=t.length;if(r<0){i.push(n(e));return}i.push(n(e.substring(0,r)));i.push("<span class='select2-match'>");i.push(n(e.substring(r,r+a)));i.push("</span>");i.push(n(e.substring(r+a,e.length)))}function P(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function R(i){var n,r=null,a=i.quietMillis||100,o=i.url,s=this;return function(l){window.clearTimeout(n);n=window.setTimeout(function(){var n=i.data,a=o,d=i.transport||e.fn.select2.ajaxDefaults.transport,c={type:i.type||"GET",cache:i.cache||false,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,c);n=n?n.call(s,l.term,l.page,l.context):null;a=typeof a==="function"?a.call(s,l.term,l.page,l.context):a;if(r&&typeof r.abort==="function"){r.abort()}if(i.params){if(e.isFunction(i.params)){e.extend(u,i.params.call(s))}else{e.extend(u,i.params)}}e.extend(u,{url:a,dataType:i.dataType,data:n,success:function(e){var t=i.results(e,l.page,l);l.callback(t)},error:function(e,t,i){var n={hasError:true,jqXHR:e,textStatus:t,errorThrown:i};l.callback(n)}});r=d.call(s,u)},a)}}function N(t){var i=t,n,r,a=function(e){return""+e.text};if(e.isArray(i)){r=i;i={results:r}}if(e.isFunction(i)===false){r=i;i=function(){return r}}var o=i();if(o.text){a=o.text;if(!e.isFunction(a)){n=o.text;a=function(e){return e[n]}}}return function(t){var n=t.term,r={results:[]},o;if(n===""){t.callback(i());return}o=function(i,r){var s,l;i=i[0];if(i.children){s={};for(l in i){if(i.hasOwnProperty(l))s[l]=i[l]}s.children=[];e(i.children).each2(function(e,t){o(t,s.children)});if(s.children.length||t.matcher(n,a(s),i)){r.push(s)}}else{if(t.matcher(n,a(i),i)){r.push(i)}}};e(i().results).each2(function(e,t){o(t,r.results)});t.callback(r)}}function H(i){var n=e.isFunction(i);return function(r){var a=r.term,o={results:[]};var s=n?i(r):i;if(e.isArray(s)){e(s).each(function(){var e=this.text!==t,i=e?this.text:this;if(a===""||r.matcher(a,i)){o.results.push(e?this:{id:this,text:this})}});r.callback(o)}}}function L(t,i){if(e.isFunction(t))return true;if(!t)return false;if(typeof t==="string")return true;throw new Error(i+" must be a string, function, or falsy value")}function F(t,i){if(e.isFunction(t)){var n=Array.prototype.slice.call(arguments,2);return t.apply(i,n)}return t}function $(t){var i=0;e.each(t,function(e,t){if(t.children){i+=$(t.children)}else{i++}});return i}function A(e,i,n,r){var a=e,o=false,s,l,d,c,u;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return t;while(true){l=-1;for(d=0,c=r.tokenSeparators.length;d<c;d++){u=r.tokenSeparators[d];l=e.indexOf(u);if(l>=0)break}if(l<0)break;s=e.substring(0,l);e=e.substring(l+u.length);if(s.length>0){s=r.createSearchChoice.call(this,s,i);if(s!==t&&s!==null&&r.id(s)!==t&&r.id(s)!==null){o=false;for(d=0,c=i.length;d<c;d++){if(g(r.id(s),r.id(i[d]))){o=true;break}}if(!o)n(s)}}}if(a!==e)return e}function O(){var t=this;e.each(arguments,function(e,i){t[i].remove();t[i]=null})}function z(t,i){var n=function(){};n.prototype=new t;n.prototype.constructor=n;n.prototype.parent=t.prototype;n.prototype=e.extend(n.prototype,i);return n}i=z(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,r,o=".select2-results";this.opts=i=this.prepareOpts(i);this.id=i.id;if(i.element.data("select2")!==t&&i.element.data("select2")!==null){i.element.data("select2").destroy()}this.container=this.createContainer();this.liveRegion=e(".select2-hidden-accessible");if(this.liveRegion.length==0){this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)}this.containerId="s2id_"+(i.element.attr("id")||"autogen"+a());this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.container.attr("title",i.element.attr("title"));this.body=e(document.body);I(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",i.element.attr("style"));this.container.css(F(i.containerCss,this.opts.element));this.container.addClass(F(i.containerCssClass,this.opts.element));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",k);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");I(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(F(i.dropdownCssClass,this.opts.element));this.dropdown.data("select2",this);this.dropdown.on("click",k);this.results=n=this.container.find(o);this.search=r=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",k);C(this.results);this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent));this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(e){this._touchEvent=true;this.highlightUnderEvent(e)}));this.dropdown.on("touchmove",o,this.bind(this.touchMoved));this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved));this.dropdown.on("click",this.bind(function(e){if(this._touchEvent){this._touchEvent=false;this.selectHighlighted()}}));_(80,this.results);this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded));e(this.container).on("change",".select2-input",function(e){e.stopPropagation()});e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()});if(e.fn.mousewheel){n.mousewheel(function(e,t,i,r){var a=n.scrollTop();if(r>0&&a-r<=0){n.scrollTop(0);k(e)}else if(r<0&&n.get(0).scrollHeight-n.scrollTop()+r<=n.height()){n.scrollTop(n.get(0).scrollHeight-n.height());k(e)}})}w(r);r.on("keyup-change input paste",this.bind(this.updateResults));r.on("focus",function(){r.addClass("select2-focused")});r.on("blur",function(){r.removeClass("select2-focused")});this.dropdown.on("mouseup",o,this.bind(function(t){if(e(t.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(t);this.selectHighlighted(t)}}));this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()});this.lastSearchTerm=t;if(e.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(i.maximumInputLength!==null){this.search.attr("maxlength",i.maximumInputLength)}var s=i.element.prop("disabled");if(s===t)s=false;this.enable(!s);var l=i.element.prop("readonly");if(l===t)l=false;this.readonly(l);d=d||m();this.autofocus=i.element.prop("autofocus");i.element.prop("autofocus",false);if(this.autofocus)this.focus();this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,i=e.data("select2"),n=this;this.close();if(e.length&&e[0].detachEvent&&n._sync){e.each(function(){if(n._sync){this.detachEvent("onpropertychange",n._sync)}})}if(this.propertyObserver){this.propertyObserver.disconnect();this.propertyObserver=null}this._sync=null;if(i!==t){i.container.remove();i.liveRegion.remove();i.dropdown.remove();e.removeData("select2").off(".select2");if(!e.is("input[type='hidden']")){e.show().prop("autofocus",this.autofocus||false);if(this.elementTabIndex){e.attr({tabindex:this.elementTabIndex})}else{e.removeAttr("tabindex")}e.show()}else{e.css("display","")}}O.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){if(e.is("option")){return{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:g(e.attr("locked"),"locked")||g(e.data("locked"),true)}}else if(e.is("optgroup")){return{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}}},prepareOpts:function(i){var n,r,o,s,l=this;n=i.element;if(n.get(0).tagName.toLowerCase()==="select"){this.select=r=i.element}if(r){e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}i.debug=i.debug||e.fn.select2.defaults.debug;if(i.debug&&console&&console.warn){if(i.id!=null){console.warn("Select2: The `id` option has been removed in Select2 4.0.0, "+"consider renaming your `id` property or mapping the property before your data makes it to Select2. "+"You can read more at https://select2.github.io/announcements-4.0.html#changed-id")}if(i.text!=null){console.warn("Select2: The `text` option has been removed in Select2 4.0.0, "+"consider renaming your `text` property or mapping the property before your data makes it to Select2. "+"You can read more at https://select2.github.io/announcements-4.0.html#changed-id")}if(i.sortResults!=null){console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. ")}if(i.selectOnBlur!=null){console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0.")}if(i.ajax!=null&&i.ajax.results!=null){console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0.")}if(i.formatNoResults!=null){console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0.")}if(i.formatSearching!=null){console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0.")}if(i.formatInputTooShort!=null){console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0.")}if(i.formatInputTooLong!=null){console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0.")}if(i.formatLoading!=null){console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0.")}if(i.formatSelectionTooBig!=null){console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0.")}if(i.element.data("select2Tags")){console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")}}if(i.element.data("tags")!=null){var d=i.element.data("tags");if(!e.isArray(d)){d=[]}i.element.data("select2Tags",d)}if(i.sorter!=null){i.sortResults=i.sorter}if(i.selectOnClose!=null){i.selectOnBlur=i.selectOnClose}if(i.ajax!=null){if(e.isFunction(i.ajax.processResults)){i.ajax.results=i.ajax.processResults}}if(i.language!=null){var c=i.language;if(e.isFunction(c.noMatches)){i.formatNoMatches=c.noMatches}if(e.isFunction(c.searching)){i.formatSearching=c.searching}if(e.isFunction(c.inputTooShort)){i.formatInputTooShort=c.inputTooShort}if(e.isFunction(c.inputTooLong)){i.formatInputTooLong=c.inputTooLong}if(e.isFunction(c.loadingMore)){i.formatLoading=c.loadingMore}if(e.isFunction(c.maximumSelected)){i.formatSelectionTooBig=c.maximumSelected}}i=e.extend({},{populateResults:function(n,r,o){var s,d=this.opts.id,c=this.liveRegion;s=function(n,r,u){var h,f,p,v,m,g,b,y,w,C;n=i.sortResults(n,r,o);var S=[];for(h=0,f=n.length;h<f;h=h+1){p=n[h];m=p.disabled===true;v=!m&&d(p)!==t;g=p.children&&p.children.length>0;b=e("<li></li>");b.addClass("select2-results-dept-"+u);b.addClass("select2-result");b.addClass(v?"select2-result-selectable":"select2-result-unselectable");if(m){b.addClass("select2-disabled")}if(g){b.addClass("select2-result-with-children")}b.addClass(l.opts.formatResultCssClass(p));b.attr("role","presentation");y=e(document.createElement("div"));y.addClass("select2-result-label");y.attr("id","select2-result-label-"+a());y.attr("role","option");C=i.formatResult(p,y,o,l.opts.escapeMarkup);if(C!==t){y.html(C);b.append(y)}if(g){w=e("<ul></ul>");w.addClass("select2-result-sub");s(p.children,w,u+1);b.append(w)}b.data("select2-data",p);S.push(b[0])}r.append(S);c.text(i.formatMatches(n.length))};s(r,n,0)}},e.fn.select2.defaults,i);if(typeof i.id!=="function"){o=i.id;i.id=function(e){return e[o]}}if(e.isArray(i.element.data("select2Tags"))){if("tags"in i){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id")}i.tags=i.element.data("select2Tags")}if(r){i.query=this.bind(function(e){var i={results:[],more:false},r=e.term,a,o,s;s=function(t,i){var n;if(t.is("option")){if(e.matcher(r,t.text(),t)){i.push(l.optionToData(t))}}else if(t.is("optgroup")){n=l.optionToData(t);t.children().each2(function(e,t){s(t,n.children)});if(n.children.length>0){i.push(n)}}};a=n.children();if(this.getPlaceholder()!==t&&a.length>0){o=this.getPlaceholderOption();if(o){a=a.not(o)}}a.each2(function(e,t){s(t,i.results)});e.callback(i)});i.id=function(e){return e.id}}else{if(!("query"in i)){if("ajax"in i){s=i.element.data("ajax-url");if(s&&s.length>0){i.ajax.url=s}i.query=R.call(i.element,i.ajax)}else if("data"in i){i.query=N(i.data)}else if("tags"in i){i.query=d(i.tags);if(i.createSearchChoice===t){i.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}}if(i.initSelection===t){i.initSelection=function(t,n){var r=[];e(b(t.val(),i.separator,i.transformVal)).each(function(){var t={id:this,text:this},n=i.tags;if(e.isFunction(n))n=n();e(n).each(function(){if(g(this.id,t.id)){t=this;return false}});r.push(t)});n(r)}}}}}if(typeof i.query!=="function"){throw"query function not defined for Select2 "+i.element.attr("id")}if(i.createSearchChoicePosition==="top"){i.createSearchChoicePosition=function(e,t){e.unshift(t)}}else if(i.createSearchChoicePosition==="bottom"){i.createSearchChoicePosition=function(e,t){e.push(t)}}else if(typeof i.createSearchChoicePosition!=="function"){throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function"}return i},monitorSource:function(){var i=this.opts.element,n,r=this;i.on("change.select2",this.bind(function(e){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}));this._sync=this.bind(function(){var e=i.prop("disabled");if(e===t)e=false;this.enable(!e);var n=i.prop("readonly");if(n===t)n=false;this.readonly(n);if(this.container){I(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(F(this.opts.containerCssClass,this.opts.element))}if(this.dropdown){I(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(F(this.opts.dropdownCssClass,this.opts.element))}});if(i.length&&i[0].attachEvent){i.each(function(){this.attachEvent("onpropertychange",r._sync)})}n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(n!==t){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new n(function(t){e.each(t,r._sync)});this.propertyObserver.observe(i.get(0),{attributes:true,subtree:false})}},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});this.opts.element.trigger(i);return!i.isDefaultPrevented()},triggerChange:function(t){t=t||{};t=e.extend({},t,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(t);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange)this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===true},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;if(e===this.enabledInterface)return false;this.container.toggleClass("select2-container-disabled",t);this.close();this.enabledInterface=e;return true},enable:function(e){if(e===t)e=true;if(this._enabled===e)return;this._enabled=e;this.opts.element.prop("disabled",!e);this.enableInterface()},disable:function(){this.enable(false)},readonly:function(e){if(e===t)e=false;if(this._readonly===e)return;this._readonly=e;this.opts.element.prop("readonly",e);this.enableInterface()},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):false},positionDropdown:function(){var t=this.dropdown,i=this.container,n=i.offset(),r=i.outerHeight(false),a=i.outerWidth(false),o=t.outerHeight(false),s=e(window),l=s.width(),c=s.height(),u=s.scrollLeft()+l,h=s.scrollTop()+c,f=n.top+r,p=n.left,v=f+o<=h,m=n.top-o>=s.scrollTop(),g=t.outerWidth(false),b=function(){return p+g<=u},y=function(){return n.left+u+i.outerWidth(false)>g},w=t.hasClass("select2-drop-above"),C,S,_,x,T;if(w){S=true;if(!m&&v){_=true;S=false}}else{S=false;if(!v&&m){_=true;S=true}}if(_){t.hide();n=this.container.offset();r=this.container.outerHeight(false);a=this.container.outerWidth(false);o=t.outerHeight(false);u=s.scrollLeft()+l;h=s.scrollTop()+c;f=n.top+r;p=n.left;g=t.outerWidth(false);t.show();this.focusSearch()}if(this.opts.dropdownAutoWidth){T=e(".select2-results",t)[0];t.addClass("select2-drop-auto-width");t.css("width","");g=t.outerWidth(false)+(T.scrollHeight===T.clientHeight?0:d.width);g>a?a=g:g=a;o=t.outerHeight(false)}else{this.container.removeClass("select2-drop-auto-width")}if(this.body.css("position")!=="static"){C=this.body.offset();f-=C.top;p-=C.left}if(!b()&&y()){p=n.left+this.container.outerWidth(false)-g}x={left:p,width:a};if(S){this.container.addClass("select2-drop-above");t.addClass("select2-drop-above");o=t.outerHeight(false);x.top=n.top-o;x.bottom="auto"}else{x.top=f;x.bottom="auto";this.container.removeClass("select2-drop-above");t.removeClass("select2-drop-above")}x=e.extend(x,F(this.opts.dropdownCss,this.opts.element));t.css(x)},shouldOpen:function(){var t;if(this.opened())return false;if(this._enabled===false||this._readonly===true)return false;t=e.Event("select2-opening");
this.opts.element.trigger(t);return!t.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return false;this.opening();l.on("mousemove.select2Event",function(e){s.x=e.pageX;s.y=e.pageY});return true},opening:function(){var t=this.containerEventName,i="scroll."+t,n="resize."+t,r="orientationchange."+t,a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body.children().last()[0]){this.dropdown.detach().appendTo(this.body)}a=e("#select2-drop-mask");if(a.length===0){a=e(document.createElement("div"));a.attr("id","select2-drop-mask").attr("class","select2-drop-mask");a.hide();a.appendTo(this.body);a.on("mousedown touchstart click",function(t){f(a);var i=e("#select2-drop"),n;if(i.length>0){n=i.data("select2");if(n.opts.selectOnBlur){n.selectHighlighted({noFocus:true})}n.close();t.preventDefault();t.stopPropagation()}})}if(this.dropdown.prev()[0]!==a[0]){this.dropdown.before(a)}e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");a.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each(function(){e(this).on(n+" "+i+" "+r,function(e){if(o.opened())o.positionDropdown()})})},close:function(){if(!this.opened())return;var t=this.containerEventName,i="scroll."+t,n="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(i).off(n).off(r)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();l.off("mousemove.select2Event");this.clearSearch();this.search.removeClass("select2-active");this.search.removeAttr("aria-activedescendant");this.opts.element.trigger(e.Event("select2-close"))},externalSearch:function(e){this.open();this.search.val(e);this.updateResults(false)},clearSearch:function(){},prefillNextSearchTerm:function(){if(this.search.val()!==""){return false}var e=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);if(e!==t){this.search.val(e);this.search.select();return true}return false},getMaximumSelectionSize:function(){return F(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t=this.results,i,n,r,a,o,s,l,d;n=this.highlight();if(n<0)return;if(n==0){t.scrollTop(0);return}i=this.findHighlightableChoices().find(".select2-result-label");r=e(i[n]);d=(r.offset()||{}).top||0;a=d+r.outerHeight(true);if(n===i.length-1){l=t.find("li.select2-more-results");if(l.length>0){a=l.offset().top+l.outerHeight(true)}}o=t.offset().top+t.outerHeight(false);if(a>o){t.scrollTop(t.scrollTop()+(a-o))}s=d-t.offset().top;if(s<0&&r.css("display")!="none"){t.scrollTop(t.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){var i=this.findHighlightableChoices(),n=this.highlight();while(n>-1&&n<i.length){n+=t;var r=e(i[n]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var i=this.findHighlightableChoices(),n,r;if(arguments.length===0){return v(i.filter(".select2-highlighted")[0],i.get())}if(t>=i.length)t=i.length-1;if(t<0)t=0;this.removeHighlight();n=e(i[t]);n.addClass("select2-highlighted");this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();this.liveRegion.text(n.text());r=n.data("select2-data");if(r){this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r})}},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=true},clearTouchMoved:function(){this._touchMoved=false},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else if(i.length==0){this.removeHighlight()}},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),i,n=this.resultsPage+1,r=this,a=this.search.val(),o=this.context;if(t.length===0)return;i=t.offset().top-e.offset().top-e.height();if(i<=this.opts.loadMorePadding){t.addClass("select2-active");this.opts.query({element:this.opts.element,term:a,page:n,context:o,matcher:this.opts.matcher,callback:this.bind(function(i){if(!r.opened())return;r.opts.populateResults.call(this,e,i.results,{term:a,page:n,context:o});r.postprocessResults(i,false,false);if(i.more===true){t.detach().appendTo(e).html(r.opts.escapeMarkup(F(r.opts.formatLoadMore,r.opts.element,n+1)));window.setTimeout(function(){r.loadMoreIfNeeded()},10)}else{t.remove()}r.positionDropdown();r.resultsPage=n;r.context=i.context;this.opts.element.trigger({type:"select2-loaded",items:i})})})}},tokenize:function(){},updateResults:function(i){var n=this.search,r=this.results,a=this.opts,o,s=this,l,d=n.val(),c=e.data(this.container,"select2-last-term"),u;if(i!==true&&c&&g(d,c))return;e.data(this.container,"select2-last-term",d);if(i!==true&&(this.showSearchInput===false||!this.opened())){return}function h(){n.removeClass("select2-active");s.positionDropdown();if(r.find(".select2-no-results,.select2-selection-limit,.select2-searching").length){s.liveRegion.text(r.text())}else{s.liveRegion.text(s.opts.formatMatches(r.find('.select2-result-selectable:not(".select2-selected")').length))}}function f(e){r.html(e);h()}u=++this.queryCount;var p=this.getMaximumSelectionSize();if(p>=1){o=this.data();if(e.isArray(o)&&o.length>=p&&L(a.formatSelectionTooBig,"formatSelectionTooBig")){f("<li class='select2-selection-limit'>"+F(a.formatSelectionTooBig,a.element,p)+"</li>");return}}if(n.val().length<a.minimumInputLength){if(L(a.formatInputTooShort,"formatInputTooShort")){f("<li class='select2-no-results'>"+F(a.formatInputTooShort,a.element,n.val(),a.minimumInputLength)+"</li>")}else{f("")}if(i&&this.showSearch)this.showSearch(true);return}if(a.maximumInputLength&&n.val().length>a.maximumInputLength){if(L(a.formatInputTooLong,"formatInputTooLong")){f("<li class='select2-no-results'>"+F(a.formatInputTooLong,a.element,n.val(),a.maximumInputLength)+"</li>")}else{f("")}return}if(a.formatSearching&&this.findHighlightableChoices().length===0){f("<li class='select2-searching'>"+F(a.formatSearching,a.element)+"</li>")}n.addClass("select2-active");this.removeHighlight();l=this.tokenize();if(l!=t&&l!=null){n.val(l)}this.resultsPage=1;a.query({element:a.element,term:n.val(),page:this.resultsPage,context:null,matcher:a.matcher,callback:this.bind(function(o){var l;if(u!=this.queryCount){return}if(!this.opened()){this.search.removeClass("select2-active");return}if(o.hasError!==t&&L(a.formatAjaxError,"formatAjaxError")){f("<li class='select2-ajax-error'>"+F(a.formatAjaxError,a.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");return}this.context=o.context===t?null:o.context;if(this.opts.createSearchChoice&&n.val()!==""){l=this.opts.createSearchChoice.call(s,n.val(),o.results);if(l!==t&&l!==null&&s.id(l)!==t&&s.id(l)!==null){if(e(o.results).filter(function(){return g(s.id(this),s.id(l))}).length===0){this.opts.createSearchChoicePosition(o.results,l)}}}if(o.results.length===0&&L(a.formatNoMatches,"formatNoMatches")){f("<li class='select2-no-results'>"+F(a.formatNoMatches,a.element,n.val())+"</li>");if(this.showSearch){this.showSearch(n.val())}return}r.empty();s.opts.populateResults.call(this,r,o.results,{term:n.val(),page:this.resultsPage,context:null});if(o.more===true&&L(a.formatLoadMore,"formatLoadMore")){r.append("<li class='select2-more-results'>"+a.escapeMarkup(F(a.formatLoadMore,a.element,this.resultsPage))+"</li>");window.setTimeout(function(){s.loadMoreIfNeeded()},10)}this.postprocessResults(o,i);h();this.opts.element.trigger({type:"select2-loaded",items:o})})})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur)this.selectHighlighted({noFocus:true});this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){x(this.search)},selectHighlighted:function(e){if(this._touchMoved){this.clearTouchMoved();return}var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");if(n){this.highlight(t);this.onSelect(n,e)}else if(e&&e.noFocus){this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==t){return this.opts.placeholderOption==="first"&&i||typeof this.opts.placeholderOption==="function"&&this.opts.placeholderOption(this.select)}else if(e.trim(i.text())===""&&i.val()===""){return i}}},initContainerWidth:function(){function t(){var t,i,n,r,a,o;if(this.opts.width==="off"){return null}else if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}else if(this.opts.width==="copy"||this.opts.width==="resolve"){t=this.opts.element.attr("style");if(typeof t==="string"){i=t.split(";");for(r=0,a=i.length;r<a;r=r+1){o=i[r].replace(/\s/g,"");n=o.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(n!==null&&n.length>=1)return n[1]}}if(this.opts.width==="resolve"){t=this.opts.element.css("width");if(t.indexOf("%")>0)return t;return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}return null}else if(e.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}var i=t.call(this);if(i!==null){this.container.css("width",i)}}});n=z(i,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.focusser.prop("disabled",!this.isInterfaceEnabled())}},opening:function(){var t,i,n;if(this.opts.minimumResultsForSearch>=0){this.showSearch(true)}this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false){this.search.val(this.focusser.val())}if(this.opts.shouldFocusInput(this)){this.search.focus();t=this.search.get(0);if(t.createTextRange){i=t.createTextRange();i.collapse(false);i.select()}else if(t.setSelectionRange){n=this.search.val().length;t.setSelectionRange(n,n)}}this.prefillNextSearchTerm();this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger(e.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}},focus:function(){if(this.opened()){this.close()}else{this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}}},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);O.call(this,"selection","focusser")},initContainer:function(){var t,i=this.container,n=this.dropdown,r=a(),o;if(this.opts.minimumResultsForSearch<0){this.showSearch(false)}else{this.showSearch(true)}this.selection=t=i.find(".select2-choice");this.focusser=i.find(".select2-focusser");t.find(".select2-chosen").attr("id","select2-chosen-"+r);this.focusser.attr("aria-labelledby","select2-chosen-"+r);this.results.attr("id","select2-results-"+r);this.search.attr("aria-owns","select2-results-"+r);this.focusser.attr("id","s2id_autogen"+r);o=e("label[for='"+this.opts.element.attr("id")+"']");this.opts.element.on("focus.select2",this.bind(function(){this.focus()}));this.focusser.prev().text(o.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||o.text());this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(229==e.keyCode)return;if(e.which===c.PAGE_UP||e.which===c.PAGE_DOWN){k(e);return}switch(e.which){case c.UP:case c.DOWN:this.moveHighlight(e.which===c.UP?-1:1);k(e);return;case c.ENTER:this.selectHighlighted();k(e);return;case c.TAB:this.selectHighlighted({noFocus:true});return;case c.ESC:this.cancel(e);k(e);return}}));this.search.on("blur",this.bind(function(e){if(document.activeElement===this.body.get(0)){window.setTimeout(this.bind(function(){if(this.opened()&&this.results&&this.results.length>1){this.search.focus()}}),0)}}));this.focusser.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===c.TAB||c.isControl(e)||c.isFunctionKey(e)||e.which===c.ESC){return}if(this.opts.openOnEnter===false&&e.which===c.ENTER){k(e);return}if(e.which==c.DOWN||e.which==c.UP||e.which==c.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;this.open();k(e);return}if(e.which==c.DELETE||e.which==c.BACKSPACE){if(this.opts.allowClear){this.clear()}k(e);return}}));w(this.focusser);this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){e.stopPropagation();if(this.opened())return;this.open()}}));t.on("mousedown touchstart","abbr",this.bind(function(e){if(!this.isInterfaceEnabled()){return}this.clear();E(e);this.close();if(this.selection){this.selection.focus()}}));t.on("mousedown touchstart",this.bind(function(i){f(t);if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(e.Event("select2-focus"))}if(this.opened()){this.close()}else if(this.isInterfaceEnabled()){this.open()}k(i)}));n.on("mousedown touchstart",this.bind(function(){if(this.opts.shouldFocusInput(this)){this.search.focus()}}));t.on("focus",this.bind(function(e){k(e)}));this.focusser.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(e.Event("select2-focus"))}this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");this.opts.element.trigger(e.Event("select2-blur"))}}));this.search.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(e.Event("select2-focus"))}this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.hide();this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data");if(i){var n=e.Event("select2-clearing");this.opts.element.trigger(n);if(n.isDefaultPrevented()){return}var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();if(t!==false){this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i});this.triggerChange({removed:i})}}},initSelection:function(){var e;if(this.isPlaceholderOptionSelected()){this.updateSelection(null);this.close();this.setPlaceholder()}else{var i=this;this.opts.initSelection.call(null,this.opts.element,function(e){if(e!==t&&e!==null){i.updateSelection(e);i.close();i.setPlaceholder();i.lastSearchTerm=i.search.val()}})}},isPlaceholderOptionSelected:function(){var e;if(this.getPlaceholder()===t)return false;return(e=this.getPlaceholderOption())!==t&&e.prop("selected")||this.opts.element.val()===""||this.opts.element.val()===t||this.opts.element.val()===null},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;if(t.element.get(0).tagName.toLowerCase()==="select"){t.initSelection=function(e,t){var n=e.find("option").filter(function(){return this.selected&&!this.disabled});t(i.optionToData(n))}}else if("data"in t){t.initSelection=t.initSelection||function(i,n){var r=i.val();var a=null;t.query({matcher:function(e,i,n){var o=g(r,t.id(n));if(o){a=n}return o},callback:!e.isFunction(n)?e.noop:function(){n(a)}})}}return t},getPlaceholder:function(){if(this.select){if(this.getPlaceholderOption()===t){return t}}return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var n=0,r=this,a=true;this.findHighlightableChoices().each2(function(e,t){if(g(r.id(t.data("select2-data")),r.opts.element.val())){n=e;return false}});if(i!==false){if(t===true&&n>=0){this.highlight(n)}else{this.highlight(0)}}if(t===true){var o=this.opts.minimumResultsForSearch;if(o>=0){this.showSearch($(e.results)>=o)}}},showSearch:function(t){if(this.showSearchInput===t)return;this.showSearchInput=t;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t);e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t)},onSelect:function(e,t){if(!this.triggerSelect(e)){return}var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e));this.updateSelection(e);this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e});this.lastSearchTerm=this.search.val();this.close();if((!t||!t.noFocus)&&this.opts.shouldFocusInput(this)){this.focusser.focus()}if(!g(i,this.id(e))){this.triggerChange({added:e,removed:n})}},updateSelection:function(e){var i=this.selection.find(".select2-chosen"),n,r;this.selection.data("select2-data",e);i.empty();if(e!==null){n=this.opts.formatSelection(e,i,this.opts.escapeMarkup)}if(n!==t){i.append(n)}r=this.opts.formatSelectionCssClass(e,i);if(r!==t){i.addClass(r)}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==t){this.container.addClass("select2-allowclear")}},val:function(){var e,i=false,n=null,r=this,a=this.data();if(arguments.length===0){return this.opts.element.val()}e=arguments[0];if(arguments.length>1){i=arguments[1];if(this.opts.debug&&console&&console.warn){console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. '+"The `change` event will always be triggered in 4.0.0.")}}if(this.select){if(this.opts.debug&&console&&console.warn){console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. '+'You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.')}this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){n=r.optionToData(t);return false});this.updateSelection(n);this.setPlaceholder();if(i){this.triggerChange({added:n,removed:a})}}else{if(!e&&e!==0){this.clear(i);return}if(this.opts.initSelection===t){throw new Error("cannot call val() if initSelection() is not defined")}this.opts.element.val(e);this.opts.initSelection(this.opts.element,function(e){r.opts.element.val(!e?"":r.id(e));r.updateSelection(e);r.setPlaceholder();if(i){r.triggerChange({added:e,removed:a})}})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(e){var i,n=false;if(arguments.length===0){i=this.selection.data("select2-data");if(i==t)i=null;return i}else{if(opts.debug&&console&&console.warn){console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, '+"consider using the `.val()` method instead.")}if(arguments.length>1){n=arguments[1]}if(!e){this.clear(n)}else{i=this.data();this.opts.element.val(!e?"":this.id(e));this.updateSelection(e);if(n){this.triggerChange({added:e,removed:i})}}}}});r=z(i,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;if(t.element.get(0).tagName.toLowerCase()==="select"){t.initSelection=function(e,t){var n=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){n.push(i.optionToData(t))});t(n)}}else if("data"in t){t.initSelection=t.initSelection||function(i,n){var r=b(i.val(),t.separator,t.transformVal);var a=[];t.query({matcher:function(i,n,o){var s=e.grep(r,function(e){return g(e,t.id(o))}).length;if(s){a.push(o)}return s},callback:!e.isFunction(n)?e.noop:function(){var e=[];for(var i=0;i<r.length;i++){var o=r[i];for(var s=0;s<a.length;s++){var l=a[s];if(g(o,t.id(l))){e.push(l);a.splice(s,1);break}}}n(e)}})}}return t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");if(t.length&&e&&e[0]==t[0]){}else{if(t.length){this.opts.element.trigger("choice-deselected",t)}t.removeClass("select2-search-choice-focus");if(e&&e.length){this.close();e.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",e)}}},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);O.call(this,"searchContainer","selection")},initContainer:function(){var t=".select2-choices",i;this.searchContainer=this.container.find(".select2-search-field");this.selection=i=this.container.find(t);var n=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(t){n.search[0].focus();n.selectChoice(e(this))});this.search.attr("id","s2id_autogen"+a());this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.opts.element.on("focus.select2",this.bind(function(){this.focus()}));this.search.on("input paste",this.bind(function(){if(this.search.attr("placeholder")&&this.search.val().length==0)return;if(!this.isInterfaceEnabled())return;if(!this.opened()){this.open()}}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;++this.keydowns;var t=i.find(".select2-search-choice-focus");var n=t.prev(".select2-search-choice:not(.select2-locked)");var r=t.next(".select2-search-choice:not(.select2-locked)");var a=T(this.search);if(t.length&&(e.which==c.LEFT||e.which==c.RIGHT||e.which==c.BACKSPACE||e.which==c.DELETE||e.which==c.ENTER)){var o=t;if(e.which==c.LEFT&&n.length){o=n}else if(e.which==c.RIGHT){o=r.length?r:null}else if(e.which===c.BACKSPACE){if(this.unselect(t.first())){this.search.width(10);o=n.length?n:r}}else if(e.which==c.DELETE){if(this.unselect(t.first())){this.search.width(10);o=r.length?r:null}}else if(e.which==c.ENTER){o=null}this.selectChoice(o);k(e);if(!o||!o.length){this.open()}return}else if((e.which===c.BACKSPACE&&this.keydowns==1||e.which==c.LEFT)&&(a.offset==0&&!a.length)){this.selectChoice(i.find(".select2-search-choice:not(.select2-locked)").last());k(e);return}else{this.selectChoice(null)}if(this.opened()){switch(e.which){case c.UP:case c.DOWN:this.moveHighlight(e.which===c.UP?-1:1);k(e);return;case c.ENTER:this.selectHighlighted();k(e);return;case c.TAB:this.selectHighlighted({noFocus:true});this.close();return;case c.ESC:this.cancel(e);k(e);return}}if(e.which===c.TAB||c.isControl(e)||c.isFunctionKey(e)||e.which===c.BACKSPACE||e.which===c.ESC){return}if(e.which===c.ENTER){if(this.opts.openOnEnter===false){return}else if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey){return}}this.open();if(e.which===c.PAGE_UP||e.which===c.PAGE_DOWN){k(e)}if(e.which===c.ENTER){k(e)}}));this.search.on("keyup",this.bind(function(e){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened())this.clearSearch();t.stopImmediatePropagation();this.opts.element.trigger(e.Event("select2-blur"))}));this.container.on("click",t,this.bind(function(t){if(!this.isInterfaceEnabled())return;if(e(t.target).closest(".select2-search-choice").length>0){return}this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(e.Event("select2-focus"))}this.open();this.focusSearch();t.preventDefault()}));this.container.on("focus",t,this.bind(function(){if(!this.isInterfaceEnabled())return;if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(e.Event("select2-focus"))}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.initContainerWidth();this.opts.element.hide();this.clearSearch()},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.search.prop("disabled",!this.isInterfaceEnabled())}},initSelection:function(){var e;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var i=this;this.opts.initSelection.call(null,this.opts.element,function(e){if(e!==t&&e!==null){i.updateSelection(e);i.close();i.clearSearch()}})}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();if(e!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(e).addClass("select2-default");this.search.width(i>0?i:this.container.css("width"))}else{this.search.val("").width(10)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.prefillNextSearchTerm();this.updateResults(true);if(this.opts.shouldFocusInput(this)){this.search.focus()}this.opts.element.trigger(e.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i={},n=[],r=this;e(t).each(function(){if(!(r.id(this)in i)){i[r.id(this)]=0;n.push(this)}});this.selection.find(".select2-search-choice").remove();this.addSelectedChoice(n);r.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts);if(e!=null&&e!=t){this.search.val(e);if(e.length>0){this.open()}}},onSelect:function(e,t){if(!this.triggerSelect(e)||e.text===""){return}this.addSelectedChoice(e);this.opts.element.trigger({type:"selected",val:this.id(e),choice:e});this.lastSearchTerm=this.search.val();this.clearSearch();this.updateResults();if(this.select||!this.opts.closeOnSelect)this.postprocessResults(e,false,this.opts.closeOnSelect===true);if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()){this.updateResults(true)}else{if(this.prefillNextSearchTerm()){this.updateResults()}}this.positionDropdown()}else{this.close();this.search.width(10)}}this.triggerChange({added:e});if(!t||!t.noFocus)this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(t){var i=this.getVal(),n=this;e(t).each(function(){i.push(n.createChoice(this))});this.setVal(i)},createChoice:function(i){var n=!i.locked,r=e("<li class='select2-search-choice'>"+"    <div></div>"+"    <a href='#' class='select2-search-choice-close' tabindex='-1'></a>"+"</li>"),a=e("<li class='select2-search-choice select2-locked'>"+"<div></div>"+"</li>");var o=n?r:a,s=this.id(i),l,d;l=this.opts.formatSelection(i,o.find("div"),this.opts.escapeMarkup);if(l!=t){o.find("div").replaceWith(e("<div></div>").html(l))}d=this.opts.formatSelectionCssClass(i,o.find("div"));if(d!=t){o.addClass(d)}if(n){o.find(".select2-search-choice-close").on("mousedown",k).on("click dblclick",this.bind(function(t){if(!this.isInterfaceEnabled())return;this.unselect(e(t.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");k(t);this.close();this.focusSearch()})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}))}o.data("select2-data",i);o.insertBefore(this.searchContainer);return s},unselect:function(t){var i=this.getVal(),n,r;t=t.closest(".select2-search-choice");if(t.length===0){throw"Invalid argument: "+t+". Must be .select2-search-choice"}n=t.data("select2-data");if(!n){return}var a=e.Event("select2-removing");a.val=this.id(n);a.choice=n;this.opts.element.trigger(a);if(a.isDefaultPrevented()){return false}while((r=v(this.id(n),i))>=0){i.splice(r,1);this.setVal(i);if(this.select)this.postprocessResults()}t.remove();this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n});this.triggerChange({removed:n});return true},postprocessResults:function(e,t,i){var n=this.getVal(),r=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),o=this;r.each2(function(e,t){var i=o.id(t.data("select2-data"));if(v(i,n)>=0){t.addClass("select2-selected");t.find(".select2-result-selectable").addClass("select2-selected")}});a.each2(function(e,t){if(!t.is(".select2-result-selectable")&&t.find(".select2-result-selectable:not(.select2-selected)").length===0){t.addClass("select2-selected")}});if(this.highlight()==-1&&i!==false&&this.opts.closeOnSelect===true){
o.highlight(0)}if(!this.opts.createSearchChoice&&!r.filter(".select2-result:not(.select2-selected)").length>0){if(!e||e&&!e.more&&this.results.find(".select2-no-results").length===0){if(L(o.opts.formatNoMatches,"formatNoMatches")){this.results.append("<li class='select2-no-results'>"+F(o.opts.formatNoMatches,o.opts.element,o.search.val())+"</li>")}}}},getMaxSearchWidth:function(){return this.selection.width()-y(this.search)},resizeSearch:function(){var e,t,i,n,r,a=y(this.search);e=D(this.search)+10;t=this.search.offset().left;i=this.selection.width();n=this.selection.offset().left;r=i-(t-n)-a;if(r<e){r=i-a}if(r<40){r=i-a}if(r<=0){r=e}this.search.width(Math.floor(r))},getVal:function(){var e;if(this.select){e=this.select.val();return e===null?[]:e}else{e=this.opts.element.val();return b(e,this.opts.separator,this.opts.transformVal)}},setVal:function(t){if(this.select){this.select.val(t)}else{var i=[],n={};e(t).each(function(){if(!(this in n)){i.push(this);n[this]=0}});this.opts.element.val(i.length===0?"":i.join(this.opts.separator))}},buildChangeDetails:function(e,t){var t=t.slice(0),e=e.slice(0);for(var i=0;i<t.length;i++){for(var n=0;n<e.length;n++){if(g(this.opts.id(t[i]),this.opts.id(e[n]))){t.splice(i,1);i--;e.splice(n,1);break}}}return{added:t,removed:e}},val:function(i,n){var r,a=this;if(arguments.length===0){return this.getVal()}r=this.data();if(!r.length)r=[];if(!i&&i!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(n){this.triggerChange({added:this.data(),removed:r})}return}this.setVal(i);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(n){this.triggerChange(this.buildChangeDetails(r,this.data()))}}else{if(this.opts.initSelection===t){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(t){var i=e.map(t,a.id);a.setVal(i);a.updateSelection(t);a.clearSearch();if(n){a.triggerChange(a.buildChangeDetails(r,a.data()))}})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))});this.setVal(t);this.triggerChange()},data:function(t,i){var n=this,r,a;if(arguments.length===0){return this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get()}else{a=this.data();if(!t){t=[]}r=e.map(t,function(e){return n.opts.id(e)});this.setVal(r);this.updateSelection(t);this.clearSearch();if(i){this.triggerChange(this.buildChangeDetails(a,this.data()))}}}});e.fn.select2=function(){var i=Array.prototype.slice.call(arguments,0),n,r,a,o,s,l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],d=["opened","isFocused","container","dropdown"],c=["val","data"],u={search:"externalSearch"};this.each(function(){if(i.length===0||typeof i[0]==="object"){n=i.length===0?{}:e.extend({},i[0]);n.element=e(this);if(n.element.get(0).tagName.toLowerCase()==="select"){s=n.element.prop("multiple")}else{s=n.multiple||false;if("tags"in n){n.multiple=s=true}}r=s?new window.Select2["class"].multi:new window.Select2["class"].single;r.init(n)}else if(typeof i[0]==="string"){if(v(i[0],l)<0){throw"Unknown method: "+i[0]}o=t;r=e(this).data("select2");if(r===t)return;a=i[0];if(a==="container"){o=r.container}else if(a==="dropdown"){o=r.dropdown}else{if(u[a])a=u[a];o=r[a].apply(r,i.slice(1))}if(v(i[0],d)>=0||v(i[0],c)>=0&&i.length==1){return false}}else{throw"Invalid arguments to select2 plugin: "+i}});return o===t?this:o};e.fn.select2.defaults={debug:false,width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var r=[];M(this.text(e),i.term,r,n);return r.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,i,n){return e?n(this.text(e)):t},sortResults:function(e,t,i){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,i){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){if(t&&this.data&&this.data.text){if(e.isFunction(this.data.text)){return this.data.text(t)}else{return t[this.data.text]}}else{return t.text}},matcher:function(e,t){return p(""+t).toUpperCase().indexOf(p(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:A,escapeMarkup:P,blurOnChange:false,selectOnBlur:false,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,i){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;if(!t){return true}if(e.opts.minimumResultsForSearch<0){return false}return true}};e.fn.select2.locales=[];e.fn.select2.locales["en"]={formatMatches:function(e){if(e===1){return"One result is available, press enter to select it."}return e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,i){return"Loading failed"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" or more character"+(i==1?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(i==1?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(e==1?"":"s")},formatLoadMore:function(e){return"Loading more results��?"},formatSearching:function(){return"Searching��?"}};e.extend(e.fn.select2.defaults,e.fn.select2.locales["en"]);e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:false,dataType:"json"}};window.Select2={query:{ajax:R,local:N,tags:H},util:{debounce:S,markMatch:M,escapeMarkup:P,stripDiacritics:p},"class":{"abstract":i,single:n,multi:r}}})(jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(window.jQuery)}})(function(e){if(!Array.prototype.reduce){Array.prototype.reduce=function(e){var t=Object(this),i=t.length>>>0,n=0,r;if(arguments.length===2){r=arguments[1]}else{while(n<i&&!(n in t)){n++}if(n>=i){throw new TypeError("Reduce of empty array with no initial value")}r=t[n++]}for(;n<i;n++){if(n in t){r=e(r,t[n],n,t)}}return r}}if("function"!==typeof Array.prototype.filter){Array.prototype.filter=function(e){var t=Object(this),i=t.length>>>0;var n=[];var r=arguments.length>=2?arguments[1]:void 0;for(var a=0;a<i;a++){if(a in t){var o=t[a];if(e.call(r,o,a,t)){n.push(o)}}}return n}}if(!Array.prototype.map){Array.prototype.map=function(e,t){var i,n,r;if(this===null){throw new TypeError(" this is null or not defined")}var a=Object(this);var o=a.length>>>0;if(typeof e!=="function"){throw new TypeError(e+" is not a function")}if(arguments.length>1){i=t}n=new Array(o);r=0;while(r<o){var s,l;if(r in a){s=a[r];l=e.call(i,s,r,a);n[r]=l}r++}return n}}var t=typeof define==="function"&&define.amd;var i=function(t){var i=t==="Comic Sans MS"?"Courier New":"Comic Sans MS";var n=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var r=n.css("fontFamily",i).width();var a=n.css("fontFamily",t+","+i).width();n.remove();return r!==a};var n=navigator.userAgent;var r=/MSIE|Trident/i.test(n);var a;if(r){var o=/MSIE (\d+[.]\d+)/.exec(n);if(o){a=parseFloat(o[1])}o=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(n);if(o){a=parseFloat(o[1])}}var s={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:r,isFF:/firefox/i.test(n),isWebkit:/webkit/i.test(n),isSafari:/safari/i.test(n),browserVersion:a,jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:t,hasCodeMirror:t?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:i,isW3CRangeSupport:!!document.createRange};var l=function(){var t=function(e){return function(t){return e===t}};var i=function(e,t){return e===t};var n=function(e){return function(t,i){return t[e]===i[e]}};var r=function(){return true};var a=function(){return false};var o=function(e){return function(){return!e.apply(e,arguments)}};var s=function(e,t){return function(i){return e(i)&&t(i)}};var l=function(e){return e};var d=0;var c=function(e){var t=++d+"";return e?e+t:t};var u=function(t){var i=e(document);return{top:t.top+i.scrollTop(),left:t.left+i.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}};var h=function(e){var t={};for(var i in e){if(e.hasOwnProperty(i)){t[e[i]]=i}}return t};var f=function(e,t){t=t||"";return t+e.split(".").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join("")};return{eq:t,eq2:i,peq2:n,ok:r,fail:a,self:l,not:o,and:s,uniqueId:c,rect2bnd:u,invertObject:h,namespaceToCamel:f}}();var d=function(){var t=function(e){return e[0]};var i=function(e){return e[e.length-1]};var n=function(e){return e.slice(0,e.length-1)};var r=function(e){return e.slice(1)};var a=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t(r)){return r}}};var o=function(e,t){for(var i=0,n=e.length;i<n;i++){if(!t(e[i])){return false}}return true};var s=function(t,i){return e.inArray(i,t)};var d=function(e,t){return s(e,t)!==-1};var c=function(e,t){t=t||l.self;return e.reduce(function(e,i){return e+t(i)},0)};var u=function(e){var t=[],i=-1,n=e.length;while(++i<n){t[i]=e[i]}return t};var h=function(e,n){if(!e.length){return[]}var a=r(e);return a.reduce(function(e,t){var r=i(e);if(n(i(r),t)){r[r.length]=t}else{e[e.length]=[t]}return e},[[t(e)]])};var f=function(e){var t=[];for(var i=0,n=e.length;i<n;i++){if(e[i]){t.push(e[i])}}return t};var p=function(e){var t=[];for(var i=0,n=e.length;i<n;i++){if(!d(t,e[i])){t.push(e[i])}}return t};var v=function(e,t){var i=s(e,t);if(i===-1){return null}return e[i+1]};var m=function(e,t){var i=s(e,t);if(i===-1){return null}return e[i-1]};return{head:t,last:i,initial:n,tail:r,prev:m,next:v,find:a,contains:d,all:o,sum:c,from:u,clusterBy:h,compact:f,unique:p}}();var c=String.fromCharCode(160);var u="\ufeff";var h=function(){var t=function(t){return t&&e(t).hasClass("note-editable")};var i=function(t){return t&&e(t).hasClass("note-control-sizing")};var n=function(t){var i;if(t.hasClass("note-air-editor")){var n=d.last(t.attr("id").split("-"));i=function(t){return function(){return e(t+n)}};return{editor:function(){return t},holder:function(){return t.data("holder")},editable:function(){return t},popover:i("#note-popover-"),handle:i("#note-handle-"),dialog:i("#note-dialog-")}}else{i=function(e,i){i=i||t;return function(){return i.find(e)}};var r=t.data("options");var a=r&&r.dialogsInBody?e(document.body):null;return{editor:function(){return t},holder:function(){return t.data("holder")},dropzone:i(".note-dropzone"),toolbar:i(".note-toolbar"),editable:i(".note-editable"),codable:i(".note-codable"),statusbar:i(".note-statusbar"),popover:i(".note-popover"),handle:i(".note-handle"),dialog:i(".note-dialog",a)}}};var r=function(t){var i=e(t).closest(".note-editor, .note-air-editor, .note-air-layout");if(!i.length){return null}var r;if(i.is(".note-editor, .note-air-editor")){r=i}else{r=e("#note-editor-"+d.last(i.attr("id").split("-")))}return n(r)};var a=function(e){e=e.toUpperCase();return function(t){return t&&t.nodeName.toUpperCase()===e}};var o=function(e){return e&&e.nodeType===3};var f=function(e){return e&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(e.nodeName.toUpperCase())};var p=function(e){if(t(e)){return false}return e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())};var v=a("LI");var m=function(e){return p(e)&&!v(e)};var g=a("TABLE");var b=function(e){return!_(e)&&!y(e)&&!w(e)&&!p(e)&&!g(e)&&!S(e)};var y=function(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())};var w=a("HR");var C=function(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())};var S=a("BLOCKQUOTE");var _=function(e){return C(e)||S(e)||t(e)};var x=a("A");var T=function(e){return b(e)&&!!H(e,p)};var k=function(e){return b(e)&&!H(e,p)};var E=a("BODY");var D=function(e,t){return e.nextSibling===t||e.previousSibling===t};var I=function(e,t){t=t||l.ok;var i=[];if(e.previousSibling&&t(e.previousSibling)){i.push(e.previousSibling)}i.push(e);if(e.nextSibling&&t(e.nextSibling)){i.push(e.nextSibling)}return i};var M=s.isMSIE&&s.browserVersion<11?"&nbsp;":"<br>";var P=function(e){if(o(e)){return e.nodeValue.length}return e.childNodes.length};var R=function(e){var t=P(e);if(t===0){return true}else if(!o(e)&&t===1&&e.innerHTML===M){return true}else if(d.all(e.childNodes,o)&&e.innerHTML===""){return true}return false};var N=function(e){if(!f(e)&&!P(e)){e.innerHTML=M}};var H=function(e,i){while(e){if(i(e)){return e}if(t(e)){break}e=e.parentNode}return null};var L=function(e,i){e=e.parentNode;while(e){if(P(e)!==1){break}if(i(e)){return e}if(t(e)){break}e=e.parentNode}return null};var F=function(e,i){i=i||l.fail;var n=[];H(e,function(e){if(!t(e)){n.push(e)}return i(e)});return n};var $=function(e,t){var i=F(e);return d.last(i.filter(t))};var A=function(t,i){var n=F(t);for(var r=i;r;r=r.parentNode){if(e.inArray(r,n)>-1){return r}}return null};var O=function(e,t){t=t||l.fail;var i=[];while(e){if(t(e)){break}i.push(e);e=e.previousSibling}return i};var z=function(e,t){t=t||l.fail;var i=[];while(e){if(t(e)){break}i.push(e);e=e.nextSibling}return i};var B=function(e,t){var i=[];t=t||l.ok;(function n(r){if(e!==r&&t(r)){i.push(r)}for(var a=0,o=r.childNodes.length;a<o;a++){n(r.childNodes[a])}})(e);return i};var Y=function(t,i){var n=t.parentNode;var r=e("<"+i+">")[0];n.insertBefore(r,t);r.appendChild(t);return r};var U=function(e,t){var i=t.nextSibling,n=t.parentNode;if(i){n.insertBefore(e,i)}else{n.appendChild(e)}return e};var G=function(t,i){e.each(i,function(e,i){t.appendChild(i)});return t};var V=function(e){return e.offset===0};var j=function(e){return e.offset===P(e.node)};var W=function(e){return V(e)||j(e)};var q=function(e,t){while(e&&e!==t){if(Q(e)!==0){return false}e=e.parentNode}return true};var Z=function(e,t){while(e&&e!==t){if(Q(e)!==P(e.parentNode)-1){return false}e=e.parentNode}return true};var K=function(e,t){return V(e)&&q(e.node,t)};var X=function(e,t){return j(e)&&Z(e.node,t)};var Q=function(e){var t=0;while(e=e.previousSibling){t+=1}return t};var J=function(e){return!!(e&&e.childNodes&&e.childNodes.length)};var ee=function(e,i){var n,r;if(e.offset===0){if(t(e.node)){return null}n=e.node.parentNode;r=Q(e.node)}else if(J(e.node)){n=e.node.childNodes[e.offset-1];r=P(n)}else{n=e.node;r=i?0:e.offset-1}return{node:n,offset:r}};var te=function(e,i){var n,r;if(P(e.node)===e.offset){if(t(e.node)){return null}n=e.node.parentNode;r=Q(e.node)+1}else if(J(e.node)){n=e.node.childNodes[e.offset];r=0}else{n=e.node;r=i?P(e.node):e.offset+1}return{node:n,offset:r}};var ie=function(e,t){return e.node===t.node&&e.offset===t.offset};var ne=function(e){if(o(e.node)||!J(e.node)||R(e.node)){return true}var t=e.node.childNodes[e.offset-1];var i=e.node.childNodes[e.offset];if((!t||f(t))&&(!i||f(i))){return true}return false};var re=function(e,t){while(e){if(t(e)){return e}e=ee(e)}return null};var ae=function(e,t){while(e){if(t(e)){return e}e=te(e)}return null};var oe=function(e){if(!o(e.node)){return false}var t=e.node.nodeValue.charAt(e.offset-1);return t&&(t!==" "&&t!==c)};var se=function(e,t,i,n){var r=e;while(r){i(r);if(ie(r,t)){break}var a=n&&e.node!==r.node&&t.node!==r.node;r=te(r,a)}};var le=function(e,t){var i=F(t,l.eq(e));return i.map(Q).reverse()};var de=function(e,t){var i=e;for(var n=0,r=t.length;n<r;n++){if(i.childNodes.length<=t[n]){i=i.childNodes[i.childNodes.length-1]}else{i=i.childNodes[t[n]]}}return i};var ce=function(e,t){var i=t&&t.isSkipPaddingBlankHTML;var n=t&&t.isNotSplitEdgePoint;if(W(e)&&(o(e.node)||n)){if(V(e)){return e.node}else if(j(e)){return e.node.nextSibling}}if(o(e.node)){return e.node.splitText(e.offset)}else{var r=e.node.childNodes[e.offset];var a=U(e.node.cloneNode(false),e.node);G(a,z(r));if(!i){N(e.node);N(a)}return a}};var ue=function(e,t,i){var n=F(t.node,l.eq(e));if(!n.length){return null}else if(n.length===1){return ce(t,i)}return n.reduce(function(e,n){if(e===t.node){e=ce(t,i)}return ce({node:n,offset:e?h.position(e):P(n)},i)})};var he=function(e,t){var i=t?p:_;var n=F(e.node,i);var r=d.last(n)||e.node;var a,o;if(i(r)){a=n[n.length-2];o=r}else{a=r;o=a.parentNode}var s=a&&ue(a,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});if(!s&&o===e.node){s=e.node.childNodes[e.offset]}return{rightNode:s,container:o}};var fe=function(e){return document.createElement(e)};var pe=function(e){return document.createTextNode(e)};var ve=function(e,t){if(!e||!e.parentNode){return}if(e.removeNode){return e.removeNode(t)}var i=e.parentNode;if(!t){var n=[];var r,a;for(r=0,a=e.childNodes.length;r<a;r++){n.push(e.childNodes[r])}for(r=0,a=n.length;r<a;r++){i.insertBefore(n[r],e)}}i.removeChild(e)};var me=function(e,i){while(e){if(t(e)||!i(e)){break}var n=e.parentNode;ve(e);e=n}};var ge=function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase()){return e}var i=fe(t);if(e.style.cssText){i.style.cssText=e.style.cssText}G(i,d.from(e.childNodes));U(i,e);ve(e);return i};var be=a("TEXTAREA");var ye=function(e,t){var i=be(e[0])?e.val():e.html();if(t){return i.replace(/[\n\r]/g,"")}return i};var we=function(t,i){var n=ye(t);if(i){var r=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;n=n.replace(r,function(e,t,i){i=i.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!t;var r=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return e+(n||r?"\n":"")});n=e.trim(n)}return n};return{NBSP_CHAR:c,ZERO_WIDTH_NBSP_CHAR:u,blank:M,emptyPara:"<p>"+M+"</p>",makePredByNodeName:a,isEditable:t,isControlSizing:i,buildLayoutInfo:n,makeLayoutInfo:r,isText:o,isVoid:f,isPara:p,isPurePara:m,isInline:b,isBlock:l.not(b),isBodyInline:k,isBody:E,isParaInline:T,isList:y,isTable:g,isCell:C,isBlockquote:S,isBodyContainer:_,isAnchor:x,isDiv:a("DIV"),isLi:v,isBR:a("BR"),isSpan:a("SPAN"),isB:a("B"),isU:a("U"),isS:a("S"),isI:a("I"),isImg:a("IMG"),isTextarea:be,isEmpty:R,isEmptyAnchor:l.and(x,R),isClosestSibling:D,withClosestSiblings:I,nodeLength:P,isLeftEdgePoint:V,isRightEdgePoint:j,isEdgePoint:W,isLeftEdgeOf:q,isRightEdgeOf:Z,isLeftEdgePointOf:K,isRightEdgePointOf:X,prevPoint:ee,nextPoint:te,isSamePoint:ie,isVisiblePoint:ne,prevPointUntil:re,nextPointUntil:ae,isCharPoint:oe,walkPoint:se,ancestor:H,singleChildAncestor:L,listAncestor:F,lastAncestor:$,listNext:z,listPrev:O,listDescendant:B,commonAncestor:A,wrap:Y,insertAfter:U,appendChildNodes:G,position:Q,hasChildren:J,makeOffsetPath:le,fromOffsetPath:de,splitTree:ue,splitPoint:he,create:fe,createText:pe,remove:ve,removeWhile:me,replace:ge,html:we,value:ye}}();var f=function(){var t=function(e,t){var i=e.parentElement(),n;var r=document.body.createTextRange(),a;var o=d.from(i.childNodes);for(n=0;n<o.length;n++){if(h.isText(o[n])){continue}r.moveToElementText(o[n]);if(r.compareEndPoints("StartToStart",e)>=0){break}a=o[n]}if(n!==0&&h.isText(o[n-1])){var s=document.body.createTextRange(),l=null;s.moveToElementText(a||i);s.collapse(!a);l=a?a.nextSibling:i.firstChild;var c=e.duplicate();c.setEndPoint("StartToStart",s);var u=c.text.replace(/[\r\n]/g,"").length;while(u>l.nodeValue.length&&l.nextSibling){u-=l.nodeValue.length;l=l.nextSibling}var f=l.nodeValue;if(t&&l.nextSibling&&h.isText(l.nextSibling)&&u===l.nodeValue.length){u-=l.nodeValue.length;l=l.nextSibling}i=l;n=u}return{cont:i,offset:n}};var i=function(e){var t=function(e,i){var n,r;if(h.isText(e)){var a=h.listPrev(e,l.not(h.isText));var o=d.last(a).previousSibling;n=o||e.parentNode;i+=d.sum(d.tail(a),h.nodeLength);r=!o}else{n=e.childNodes[i]||e;if(h.isText(n)){return t(n,0)}i=0;r=false}return{node:n,collapseToStart:r,offset:i}};var i=document.body.createTextRange();var n=t(e.node,e.offset);i.moveToElementText(n.node);i.collapse(n.collapseToStart);i.moveStart("character",n.offset);return i};var n=function(t,r,a,o){this.sc=t;this.so=r;this.ec=a;this.eo=o;var c=function(){if(s.isW3CRangeSupport){var e=document.createRange();e.setStart(t,r);e.setEnd(a,o);return e}else{var n=i({node:t,offset:r});n.setEndPoint("EndToEnd",i({node:a,offset:o}));return n}};this.getPoints=function(){return{sc:t,so:r,ec:a,eo:o}};this.getStartPoint=function(){return{node:t,offset:r}};this.getEndPoint=function(){return{node:a,offset:o}};this.select=function(){var e=c();if(s.isW3CRangeSupport){var t=document.getSelection();if(t.rangeCount>0){t.removeAllRanges()}t.addRange(e)}else{e.select()}return this};this.normalize=function(){var e=function(e,t){if(h.isVisiblePoint(e)&&!h.isEdgePoint(e)||h.isVisiblePoint(e)&&h.isRightEdgePoint(e)&&!t||h.isVisiblePoint(e)&&h.isLeftEdgePoint(e)&&t||h.isVisiblePoint(e)&&h.isBlock(e.node)&&h.isEmpty(e.node)){return e}var i=h.ancestor(e.node,h.isBlock);if((h.isLeftEdgePointOf(e,i)||h.isVoid(h.prevPoint(e).node))&&!t||(h.isRightEdgePointOf(e,i)||h.isVoid(h.nextPoint(e).node))&&t){if(h.isVisiblePoint(e)){return e}t=!t}var n=t?h.nextPointUntil(h.nextPoint(e),h.isVisiblePoint):h.prevPointUntil(h.prevPoint(e),h.isVisiblePoint);return n||e};var t=e(this.getEndPoint(),false);var i=this.isCollapsed()?t:e(this.getStartPoint(),true);return new n(i.node,i.offset,t.node,t.offset)};this.nodes=function(e,t){e=e||l.ok;var i=t&&t.includeAncestor;var n=t&&t.fullyContains;var r=this.getStartPoint();var a=this.getEndPoint();var o=[];var s=[];h.walkPoint(r,a,function(t){if(h.isEditable(t.node)){return}var r;if(n){if(h.isLeftEdgePoint(t)){s.push(t.node)}if(h.isRightEdgePoint(t)&&d.contains(s,t.node)){r=t.node}}else if(i){r=h.ancestor(t.node,e)}else{r=t.node}if(r&&e(r)){o.push(r)}},true);return d.unique(o)};this.commonAncestor=function(){return h.commonAncestor(t,a)};this.expand=function(e){var i=h.ancestor(t,e);var s=h.ancestor(a,e);if(!i&&!s){return new n(t,r,a,o)}var l=this.getPoints();if(i){l.sc=i;l.so=0}if(s){l.ec=s;l.eo=h.nodeLength(s)}return new n(l.sc,l.so,l.ec,l.eo)};this.collapse=function(e){if(e){return new n(t,r,t,r)}else{return new n(a,o,a,o)}};this.splitText=function(){var e=t===a;var i=this.getPoints();if(h.isText(a)&&!h.isEdgePoint(this.getEndPoint())){a.splitText(o)}if(h.isText(t)&&!h.isEdgePoint(this.getStartPoint())){i.sc=t.splitText(r);i.so=0;if(e){i.ec=i.sc;i.eo=o-r}}return new n(i.sc,i.so,i.ec,i.eo)};this.deleteContents=function(){if(this.isCollapsed()){return this}var t=this.splitText();var i=t.nodes(null,{fullyContains:true});var r=h.prevPointUntil(t.getStartPoint(),function(e){return!d.contains(i,e.node)});var a=[];e.each(i,function(e,t){var i=t.parentNode;if(r.node!==i&&h.nodeLength(i)===1){a.push(i)}h.remove(t,false)});e.each(a,function(e,t){h.remove(t,false)});return new n(r.node,r.offset,r.node,r.offset).normalize()};var u=function(e){return function(){var i=h.ancestor(t,e);return!!i&&i===h.ancestor(a,e)}};this.isOnEditable=u(h.isEditable);this.isOnList=u(h.isList);this.isOnAnchor=u(h.isAnchor);this.isOnCell=u(h.isCell);this.isLeftEdgeOf=function(e){if(!h.isLeftEdgePoint(this.getStartPoint())){return false}var t=h.ancestor(this.sc,e);return t&&h.isLeftEdgeOf(this.sc,t)};this.isCollapsed=function(){return t===a&&r===o};this.wrapBodyInlineWithPara=function(){if(h.isBodyContainer(t)&&h.isEmpty(t)){t.innerHTML=h.emptyPara;return new n(t.firstChild,0,t.firstChild,0)}var e=this.normalize();if(h.isParaInline(t)||h.isPara(t)){return e}var i;if(h.isInline(e.sc)){var r=h.listAncestor(e.sc,l.not(h.isInline));i=d.last(r);if(!h.isInline(i)){i=r[r.length-2]||e.sc.childNodes[e.so]}}else{i=e.sc.childNodes[e.so>0?e.so-1:0]}var a=h.listPrev(i,h.isParaInline).reverse();a=a.concat(h.listNext(i.nextSibling,h.isParaInline));if(a.length){var o=h.wrap(d.head(a),"p");h.appendChildNodes(o,d.tail(a))}return this.normalize()};this.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents();var i=h.splitPoint(t.getStartPoint(),h.isInline(e));if(i.rightNode){i.rightNode.parentNode.insertBefore(e,i.rightNode)}else{i.container.appendChild(e)}return e};this.pasteHTML=function(t){var i=e("<div></div>").html(t)[0];var n=d.from(i.childNodes);var r=this.wrapBodyInlineWithPara().deleteContents();return n.reverse().map(function(e){return r.insertNode(e)}).reverse()};this.toString=function(){var e=c();return s.isW3CRangeSupport?e.toString():e.text};this.getWordRange=function(e){var t=this.getEndPoint();if(!h.isCharPoint(t)){return this}var i=h.prevPointUntil(t,function(e){return!h.isCharPoint(e)});if(e){t=h.nextPointUntil(t,function(e){return!h.isCharPoint(e)})}return new n(i.node,i.offset,t.node,t.offset)};this.bookmark=function(e){return{s:{path:h.makeOffsetPath(e,t),offset:r},e:{path:h.makeOffsetPath(e,a),offset:o}}};this.paraBookmark=function(e){return{s:{path:d.tail(h.makeOffsetPath(d.head(e),t)),offset:r},e:{path:d.tail(h.makeOffsetPath(d.last(e),a)),offset:o}}};this.getClientRects=function(){var e=c();return e.getClientRects()}};return{create:function(e,i,r,a){if(!arguments.length){if(s.isW3CRangeSupport){var o=document.getSelection();if(!o||o.rangeCount===0){return null}else if(h.isBody(o.anchorNode)){return null}var l=o.getRangeAt(0);e=l.startContainer;i=l.startOffset;r=l.endContainer;a=l.endOffset}else{var d=document.selection.createRange();var c=d.duplicate();c.collapse(false);var u=d;u.collapse(true);var f=t(u,true),p=t(c,false);if(h.isText(f.node)&&h.isLeftEdgePoint(f)&&h.isTextNode(p.node)&&h.isRightEdgePoint(p)&&p.node.nextSibling===f.node){f=p}e=f.cont;i=f.offset;r=p.cont;a=p.offset}}else if(arguments.length===2){r=e;a=i}return new n(e,i,r,a)},createFromNode:function(e){var t=e;var i=0;var n=e;var r=h.nodeLength(n);if(h.isVoid(t)){i=h.listPrev(t).length-1;t=t.parentNode}if(h.isBR(n)){r=h.listPrev(n).length-1;n=n.parentNode}else if(h.isVoid(n)){r=h.listPrev(n).length;n=n.parentNode}return this.create(t,i,n,r)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(true)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var i=h.fromOffsetPath(e,t.s.path);var r=t.s.offset;var a=h.fromOffsetPath(e,t.e.path);var o=t.e.offset;return new n(i,r,a,o)},createFromParaBookmark:function(e,t){var i=e.s.offset;var r=e.e.offset;var a=h.fromOffsetPath(d.head(t),e.s.path);var o=h.fromOffsetPath(d.last(t),e.e.path);return new n(a,i,o,r)}}}();var p={version:"0.6.16",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:false,tabsize:4,styleWithSpan:true,disableLinkTarget:false,disableDragAndDrop:false,disableResizeEditor:false,disableResizeImage:false,shortcuts:true,textareaAutoSync:true,placeholder:false,prettifyHtml:true,iconPrefix:"fa fa-",icons:{font:{bold:"bold",italic:"italic",underline:"underline",clear:"eraser",height:"text-height",strikethrough:"strikethrough",superscript:"superscript",subscript:"subscript"},image:{image:"picture-o",floatLeft:"align-left",floatRight:"align-right",floatNone:"align-justify",shapeRounded:"square",shapeCircle:"circle-o",shapeThumbnail:"picture-o",shapeNone:"times",remove:"trash-o"},link:{link:"link",unlink:"unlink",edit:"edit"},table:{table:"table"},hr:{insert:"minus"},style:{style:"magic"},lists:{unordered:"list-ul",ordered:"list-ol"},options:{help:"question",fullscreen:"arrows-alt",codeview:"code"},paragraph:{paragraph:"align-left",outdent:"outdent",indent:"indent",left:"align-left",center:"align-center",right:"align-right",justify:"align-justify"},color:{recent:"font"},history:{undo:"undo",redo:"repeat"},misc:{check:"check"}},dialogsInBody:false,codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],plugin:{},airMode:false,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(e){if(e.indexOf("@")!==-1&&e.indexOf(":")===-1){e="mailto:"+e}return e},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",
url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}};var v=function(){var t=function(t){return e.Deferred(function(i){e.extend(new FileReader,{onload:function(e){var t=e.target.result;i.resolve(t)},onerror:function(){i.reject(this)}}).readAsDataURL(t)}).promise()};var i=function(t,i){return e.Deferred(function(n){var r=e("<img>");r.one("load",function(){r.off("error abort");n.resolve(r)}).one("error abort",function(){r.off("load").detach();n.reject(r)}).css({display:"none"}).appendTo(document.body).attr({src:t,"data-filename":i})}).promise()};return{readFileAsDataURL:t,createImage:i}}();var m=function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(e){return d.contains([8,9,13,32],e)},isMove:function(e){return d.contains([37,38,39,40],e)},nameFromCode:l.invertObject(e),code:e}}();var g=function(e){var t=[],i=-1;var n=e[0];var r=function(){var t=f.create();var i={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:e.html(),bookmark:t?t.bookmark(n):i}};var a=function(t){if(t.contents!==null){e.html(t.contents)}if(t.bookmark!==null){f.createFromBookmark(n,t.bookmark).select()}};this.undo=function(){if(e.html()!==t[i].contents){this.recordUndo()}if(0<i){i--;a(t[i])}};this.redo=function(){if(t.length-1>i){i++;a(t[i])}};this.recordUndo=function(){i++;if(t.length>i){t=t.slice(0,i)}t.push(r())};this.recordUndo()};var b=function(){var t=function(t,i){if(s.jqueryVersion<1.9){var n={};e.each(i,function(e,i){n[i]=t.css(i)});return n}return t.css.call(t,i)};this.fromNode=function(e){var i=["font-family","font-size","text-align","list-style-type","line-height"];var n=t(e,i)||{};n["font-size"]=parseInt(n["font-size"],10);return n};this.stylePara=function(t,i){e.each(t.nodes(h.isPara,{includeAncestor:true}),function(t,n){e(n).css(i)})};this.styleNodes=function(t,i){t=t.splitText();var n=i&&i.nodeName||"SPAN";var r=!!(i&&i.expandClosestSibling);var a=!!(i&&i.onlyPartialContains);if(t.isCollapsed()){return[t.insertNode(h.create(n))]}var o=h.makePredByNodeName(n);var s=t.nodes(h.isText,{fullyContains:true}).map(function(e){return h.singleChildAncestor(e,o)||h.wrap(e,n)});if(r){if(a){var c=t.nodes();o=l.and(o,function(e){return d.contains(c,e)})}return s.map(function(t){var i=h.withClosestSiblings(t,o);var n=d.head(i);var r=d.tail(i);e.each(r,function(e,t){h.appendChildNodes(n,t.childNodes);h.remove(t)});return d.head(i)})}else{return s}};this.current=function(t){var i=e(h.isText(t.sc)?t.sc.parentNode:t.sc);var n=this.fromNode(i);n["font-bold"]=document.queryCommandState("bold")?"bold":"normal";n["font-italic"]=document.queryCommandState("italic")?"italic":"normal";n["font-underline"]=document.queryCommandState("underline")?"underline":"normal";n["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal";n["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal";n["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal";if(!t.isOnList()){n["list-style"]="none"}else{var r=["circle","disc","disc-leading-zero","square"];var a=e.inArray(n["list-style-type"],r)>-1;n["list-style"]=a?"unordered":"ordered"}var o=h.ancestor(t.sc,h.isPara);if(o&&o.style["line-height"]){n["line-height"]=o.style.lineHeight}else{var s=parseInt(n["line-height"],10)/parseInt(n["font-size"],10);n["line-height"]=s.toFixed(1)}n.anchor=t.isOnAnchor()&&h.ancestor(t.sc,h.isAnchor);n.ancestors=h.listAncestor(t.sc,h.isEditable);n.range=t;return n}};var y=function(){this.insertOrderedList=function(){this.toggleList("OL")};this.insertUnorderedList=function(){this.toggleList("UL")};this.indent=function(){var t=this;var i=f.create().wrapBodyInlineWithPara();var n=i.nodes(h.isPara,{includeAncestor:true});var r=d.clusterBy(n,l.peq2("parentNode"));e.each(r,function(i,n){var r=d.head(n);if(h.isLi(r)){t.wrapList(n,r.parentNode.nodeName)}else{e.each(n,function(t,i){e(i).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}});i.select()};this.outdent=function(){var t=this;var i=f.create().wrapBodyInlineWithPara();var n=i.nodes(h.isPara,{includeAncestor:true});var r=d.clusterBy(n,l.peq2("parentNode"));e.each(r,function(i,n){var r=d.head(n);if(h.isLi(r)){t.releaseList([n])}else{e.each(n,function(t,i){e(i).css("marginLeft",function(e,t){t=parseInt(t,10)||0;return t>25?t-25:""})})}});i.select()};this.toggleList=function(t){var i=this;var n=f.create().wrapBodyInlineWithPara();var r=n.nodes(h.isPara,{includeAncestor:true});var a=n.paraBookmark(r);var o=d.clusterBy(r,l.peq2("parentNode"));if(d.find(r,h.isPurePara)){var s=[];e.each(o,function(e,n){s=s.concat(i.wrapList(n,t))});r=s}else{var c=n.nodes(h.isList,{includeAncestor:true}).filter(function(i){return!e.nodeName(i,t)});if(c.length){e.each(c,function(e,i){h.replace(i,t)})}else{r=this.releaseList(o,true)}}f.createFromParaBookmark(a,r).select()};this.wrapList=function(e,t){var i=d.head(e);var n=d.last(e);var r=h.isList(i.previousSibling)&&i.previousSibling;var a=h.isList(n.nextSibling)&&n.nextSibling;var o=r||h.insertAfter(h.create(t||"UL"),n);e=e.map(function(e){return h.isPurePara(e)?h.replace(e,"LI"):e});h.appendChildNodes(o,e);if(a){h.appendChildNodes(o,d.from(a.childNodes));h.remove(a)}return e};this.releaseList=function(t,i){var n=[];e.each(t,function(t,r){var a=d.head(r);var o=d.last(r);var s=i?h.lastAncestor(a,h.isList):a.parentNode;var l=s.childNodes.length>1?h.splitTree(s,{node:o.parentNode,offset:h.position(o)+1},{isSkipPaddingBlankHTML:true}):null;var c=h.splitTree(s,{node:a.parentNode,offset:h.position(a)},{isSkipPaddingBlankHTML:true});r=i?h.listDescendant(c,h.isLi):d.from(c.childNodes).filter(h.isLi);if(i||!h.isList(s.parentNode)){r=r.map(function(e){return h.replace(e,"P")})}e.each(d.from(r).reverse(),function(e,t){h.insertAfter(t,s)});var u=d.compact([s,c,l]);e.each(u,function(t,i){var n=[i].concat(h.listDescendant(i,h.isList));e.each(n.reverse(),function(e,t){if(!h.nodeLength(t)){h.remove(t,true)}})});n=n.concat(r)});return n}};var w=function(){var t=new y;this.insertTab=function(e,t,i){var n=h.createText(new Array(i+1).join(h.NBSP_CHAR));t=t.deleteContents();t.insertNode(n,true);t=f.create(n,i);t.select()};this.insertParagraph=function(){var i=f.create();i=i.deleteContents();i=i.wrapBodyInlineWithPara();var n=h.ancestor(i.sc,h.isPara);var r;if(n){if(h.isEmpty(n)&&h.isLi(n)){t.toggleList(n.parentNode.nodeName);return}else{r=h.splitTree(n,i.getStartPoint());var a=h.listDescendant(n,h.isEmptyAnchor);a=a.concat(h.listDescendant(r,h.isEmptyAnchor));e.each(a,function(e,t){h.remove(t)})}}else{var o=i.sc.childNodes[i.so];r=e(h.emptyPara)[0];if(o){i.sc.insertBefore(r,o)}else{i.sc.appendChild(r)}}f.create(r,0).normalize().select()}};var C=function(){this.tab=function(e,t){var i=h.ancestor(e.commonAncestor(),h.isCell);var n=h.ancestor(i,h.isTable);var r=h.listDescendant(n,h.isCell);var a=d[t?"prev":"next"](r,i);if(a){f.create(a,0).select()}};this.createTable=function(t,i){var n=[],r;for(var a=0;a<t;a++){n.push("<td>"+h.blank+"</td>")}r=n.join("");var o=[],s;for(var l=0;l<i;l++){o.push("<tr>"+r+"</tr>")}s=o.join("");return e('<table class="table table-bordered">'+s+"</table>")[0]}};var S="bogus";var _=function(t){var i=this;var n=new b;var r=new C;var a=new w;var o=new y;this.createRange=function(e){this.focus(e);return f.create()};this.saveRange=function(e,t){this.focus(e);e.data("range",f.create());if(t){f.create().collapse().select()}};this.saveNode=function(e){var t=[];for(var i=0,n=e[0].childNodes.length;i<n;i++){t.push(e[0].childNodes[i])}e.data("childNodes",t)};this.restoreRange=function(e){var t=e.data("range");if(t){t.select();this.focus(e)}};this.restoreNode=function(e){e.html("");var t=e.data("childNodes");for(var i=0,n=t.length;i<n;i++){e[0].appendChild(t[i])}};this.currentStyle=function(e){var t=f.create();var i=t&&t.isOnEditable()?n.current(t.normalize()):{};if(h.isImg(e)){i.image=e}return i};this.styleFromNode=function(e){return n.fromNode(e)};var l=function(e){var i=h.makeLayoutInfo(e).holder();t.bindCustomEvent(i,e.data("callbacks"),"before.command")(e.html(),e)};var c=function(e){var i=h.makeLayoutInfo(e).holder();t.bindCustomEvent(i,e.data("callbacks"),"change")(e.html(),e)};this.undo=function(e){l(e);e.data("NoteHistory").undo();c(e)};this.redo=function(e){l(e);e.data("NoteHistory").redo();c(e)};var u=this.beforeCommand=function(e){l(e);i.focus(e)};var p=this.afterCommand=function(e,t){e.data("NoteHistory").recordUndo();if(!t){c(e)}};var m=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"];for(var g=0,_=m.length;g<_;g++){this[m[g]]=function(e){return function(t,i){u(t);document.execCommand(e,false,i);p(t,true)}}(m[g])}this.tab=function(e,t){var i=this.createRange(e);if(i.isCollapsed()&&i.isOnCell()){r.tab(i)}else{u(e);a.insertTab(e,i,t.tabsize);p(e)}};this.untab=function(e){var t=this.createRange(e);if(t.isCollapsed()&&t.isOnCell()){r.tab(t,true)}};this.insertParagraph=function(e){u(e);a.insertParagraph(e);p(e)};this.insertOrderedList=function(e){u(e);o.insertOrderedList(e);p(e)};this.insertUnorderedList=function(e){u(e);o.insertUnorderedList(e);p(e)};this.indent=function(e){u(e);o.indent(e);p(e)};this.outdent=function(e){u(e);o.outdent(e);p(e)};this.insertImage=function(e,i,n){v.createImage(i,n).then(function(t){u(e);t.css({display:"",width:Math.min(e.width(),t.width())});f.create().insertNode(t[0]);f.createFromNodeAfter(t[0]).select();p(e)}).fail(function(){var i=h.makeLayoutInfo(e).holder();t.bindCustomEvent(i,e.data("callbacks"),"image.upload.error")()})};this.insertNode=function(e,t){u(e);f.create().insertNode(t);f.createFromNodeAfter(t).select();p(e)};this.insertText=function(e,t){u(e);var i=f.create().insertNode(h.createText(t));f.create(i,h.nodeLength(i)).select();p(e)};this.pasteHTML=function(e,t){u(e);var i=f.create().pasteHTML(t);f.createFromNodeAfter(d.last(i)).select();p(e)};this.formatBlock=function(e,t){u(e);t=s.isMSIE?"<"+t+">":t;document.execCommand("FormatBlock",false,t);p(e)};this.formatPara=function(e){u(e);this.formatBlock(e,"P");p(e)};for(var g=1;g<=6;g++){this["formatH"+g]=function(e){return function(t){this.formatBlock(t,"H"+e)}}(g)}this.fontSize=function(t,i){var r=f.create();if(r.isCollapsed()){var a=n.styleNodes(r);var o=d.head(a);e(a).css({"font-size":i+"px"});if(o&&!h.nodeLength(o)){o.innerHTML=h.ZERO_WIDTH_NBSP_CHAR;f.createFromNodeAfter(o.firstChild).select();t.data(S,o)}}else{u(t);e(n.styleNodes(r)).css({"font-size":i+"px"});p(t)}};this.insertHorizontalRule=function(t){u(t);var i=f.create();var n=i.insertNode(e("<HR/>")[0]);if(n.nextSibling){f.create(n.nextSibling,0).normalize().select()}p(t)};this.removeBogus=function(e){var t=e.data(S);if(!t){return}var i=d.find(d.from(t.childNodes),h.isText);var n=i.nodeValue.indexOf(h.ZERO_WIDTH_NBSP_CHAR);if(n!==-1){i.deleteData(n,1)}if(h.isEmpty(t)){h.remove(t)}e.removeData(S)};this.lineHeight=function(e,t){u(e);n.stylePara(f.create(),{lineHeight:t});p(e)};this.unlink=function(e){var t=this.createRange(e);if(t.isOnAnchor()){var i=h.ancestor(t.sc,h.isAnchor);t=f.createFromNode(i);t.select();u(e);document.execCommand("unlink");p(e)}};this.createLink=function(t,i,r){var a=i.url;var o=i.text;var s=i.isNewWindow;var l=i.range||this.createRange(t);var c=l.toString()!==o;r=r||h.makeLayoutInfo(t).editor().data("options");u(t);if(r.onCreateLink){a=r.onCreateLink(a)}var v=[];if(c){var m=l.insertNode(e("<A>"+o+"</A>")[0]);v.push(m)}else{v=n.styleNodes(l,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}e.each(v,function(t,i){e(i).attr("href",a);if(s){e(i).attr("target","_blank")}else{e(i).removeAttr("target")}});var g=f.createFromNodeBefore(d.head(v));var b=g.getStartPoint();var y=f.createFromNodeAfter(d.last(v));var w=y.getEndPoint();f.create(b.node,b.offset,w.node,w.offset).select();p(t)};this.getLinkInfo=function(t){this.focus(t);var i=f.create().expand(h.isAnchor);var n=e(d.head(i.nodes(h.isAnchor)));return{range:i,text:i.toString(),isNewWindow:n.length?n.attr("target")==="_blank":false,url:n.length?n.attr("href"):""}};this.color=function(e,t){var i=JSON.parse(t);var n=i.foreColor,r=i.backColor;u(e);if(n){document.execCommand("foreColor",false,n)}if(r){document.execCommand("backColor",false,r)}p(e)};this.insertTable=function(e,t){var i=t.split("x");u(e);var n=f.create().deleteContents();n.insertNode(r.createTable(i[0],i[1]));p(e)};this.floatMe=function(e,t,i){u(e);i.removeClass("pull-left pull-right");if(t&&t!=="none"){i.addClass("pull-"+t)}i.css("float",t);p(e)};this.imageShape=function(e,t,i){u(e);i.removeClass("img-rounded img-circle img-thumbnail");if(t){i.addClass(t)}p(e)};this.resize=function(e,t,i){u(e);i.css({width:t*100+"%",height:""});p(e)};this.resizeTo=function(e,t,i){var n;if(i){var r=e.y/e.x;var a=t.data("ratio");n={width:a>r?e.x:e.y/a,height:a>r?e.x*a:e.y}}else{n={width:e.x,height:e.y}}t.css(n)};this.removeMedia=function(i,n,r){u(i);r.detach();t.bindCustomEvent(e(),i.data("callbacks"),"media.delete")(r,i);p(i)};this.focus=function(e){e.focus();if(s.isFF&&!f.create().isOnEditable()){f.createFromNode(e[0]).normalize().collapse().select()}};this.isEmpty=function(e){return h.isEmpty(e[0])||h.emptyPara===e.html()}};var x=function(){this.update=function(t,i){var n=function(t,i){t.find(".dropdown-menu li a").each(function(){var t=e(this).data("value")+""===i+"";this.className=t?"checked":""})};var r=function(e,i){var n=t.find(e);n.toggleClass("active",i())};if(i.image){var a=e(i.image);r('button[data-event="imageShape"][data-value="img-rounded"]',function(){return a.hasClass("img-rounded")});r('button[data-event="imageShape"][data-value="img-circle"]',function(){return a.hasClass("img-circle")});r('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return a.hasClass("img-thumbnail")});r('button[data-event="imageShape"]:not([data-value])',function(){return!a.is(".img-rounded, .img-circle, .img-thumbnail")});var o=a.css("float");r('button[data-event="floatMe"][data-value="left"]',function(){return o==="left"});r('button[data-event="floatMe"][data-value="right"]',function(){return o==="right"});r('button[data-event="floatMe"][data-value="none"]',function(){return o!=="left"&&o!=="right"});var l=a.attr("style");r('button[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(l)});r('button[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(l)});r('button[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(l)});return}var d=t.find(".note-fontname");if(d.length){var c=i["font-family"];if(!!c){var u=c.split(",");for(var h=0,f=u.length;h<f;h++){c=u[h].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"");if(s.isFontInstalled(c)){break}}d.find(".note-current-fontname").text(c);n(d,c)}}var p=t.find(".note-fontsize");p.find(".note-current-fontsize").text(i["font-size"]);n(p,parseFloat(i["font-size"]));var v=t.find(".note-height");n(v,parseFloat(i["line-height"]));r('button[data-event="bold"]',function(){return i["font-bold"]==="bold"});r('button[data-event="italic"]',function(){return i["font-italic"]==="italic"});r('button[data-event="underline"]',function(){return i["font-underline"]==="underline"});r('button[data-event="strikethrough"]',function(){return i["font-strikethrough"]==="strikethrough"});r('button[data-event="superscript"]',function(){return i["font-superscript"]==="superscript"});r('button[data-event="subscript"]',function(){return i["font-subscript"]==="subscript"});r('button[data-event="justifyLeft"]',function(){return i["text-align"]==="left"||i["text-align"]==="start"});r('button[data-event="justifyCenter"]',function(){return i["text-align"]==="center"});r('button[data-event="justifyRight"]',function(){return i["text-align"]==="right"});r('button[data-event="justifyFull"]',function(){return i["text-align"]==="justify"});r('button[data-event="insertUnorderedList"]',function(){return i["list-style"]==="unordered"});r('button[data-event="insertOrderedList"]',function(){return i["list-style"]==="ordered"})};this.updateRecentColor=function(t,i,n){var r=e(t).closest(".note-color");var a=r.find(".note-recent-color");var o=JSON.parse(a.attr("data-value"));o[i]=n;a.attr("data-value",JSON.stringify(o));var s=i==="backColor"?"background-color":"color";a.find("i").css(s,n)}};var T=function(){var e=new x;this.update=function(t,i){e.update(t,i)};this.updateRecentColor=function(t,i,n){e.updateRecentColor(t,i,n)};this.activate=function(e){e.find("button").not('button[data-event="codeview"]').removeClass("disabled")};this.deactivate=function(e){e.find("button").not('button[data-event="codeview"]').addClass("disabled")};this.updateFullscreen=function(e,t){var i=e.find('button[data-event="fullscreen"]');i.toggleClass("active",t)};this.updateCodeview=function(e,t){var i=e.find('button[data-event="codeview"]');i.toggleClass("active",t);if(t){this.deactivate(e)}else{this.activate(e)}};this.get=function(e,t){var i=h.makeLayoutInfo(e).toolbar();return i.find("[data-name="+t+"]")};this.setButtonState=function(e,t,i){i=i===false?false:true;var n=this.get(e,t);n.toggleClass("active",i)}};var k=24;var E=function(){var t=e(document);this.attach=function(e,t){if(!t.disableResizeEditor){e.statusbar().on("mousedown",i)}};var i=function(e){e.preventDefault();e.stopPropagation();var i=h.makeLayoutInfo(e.target).editable();var n=i.offset().top-t.scrollTop();var r=h.makeLayoutInfo(e.currentTarget||e.target);var a=r.editor().data("options");t.on("mousemove",function(e){var t=e.clientY-(n+k);t=a.minHeight>0?Math.max(t,a.minHeight):t;t=a.maxHeight>0?Math.min(t,a.maxHeight):t;i.height(t)}).one("mouseup",function(){t.off("mousemove")})}};var D=function(){var t=new x;var i=function(t,i){var n=i&&i.isAirMode;var r=i&&i.isLeftTop;var a=e(t);var o=n?a.offset():a.position();var s=r?0:a.outerHeight(true);return{left:o.left,top:o.top+s}};var n=function(e,t){e.css({display:"block",left:t.left,top:t.top})};var r=20;this.update=function(a,o,s){t.update(a,o);var c=a.find(".note-link-popover");if(o.anchor){var u=c.find("a");var h=e(o.anchor).attr("href");var f=e(o.anchor).attr("target");u.attr("href",h).html(h);if(!f){u.removeAttr("target")}else{u.attr("target","_blank")}n(c,i(o.anchor,{isAirMode:s}))}else{c.hide()}var p=a.find(".note-image-popover");if(o.image){n(p,i(o.image,{isAirMode:s,isLeftTop:true}))}else{p.hide()}var v=a.find(".note-air-popover");if(s&&o.range&&!o.range.isCollapsed()){var m=d.last(o.range.getClientRects());if(m){var g=l.rect2bnd(m);n(v,{left:Math.max(g.left+g.width/2-r,0),top:g.top+g.height})}}else{v.hide()}};this.updateRecentColor=function(e,t,i){e.updateRecentColor(e,t,i)};this.hide=function(e){e.children().hide()}};var I=function(t){var i=e(document);var n=function(n){if(h.isControlSizing(n.target)){n.preventDefault();n.stopPropagation();var r=h.makeLayoutInfo(n.target),a=r.handle(),o=r.popover(),s=r.editable(),l=r.editor();var d=a.find(".note-control-selection").data("target"),c=e(d),u=c.offset(),f=i.scrollTop();var p=l.data("options").airMode;i.on("mousemove",function(e){t.invoke("editor.resizeTo",{x:e.clientX-u.left,y:e.clientY-(u.top-f)},c,!e.shiftKey);t.invoke("handle.update",a,{image:d},p);t.invoke("popover.update",o,{image:d},p)}).one("mouseup",function(){i.off("mousemove");t.invoke("editor.afterCommand",s)});if(!c.data("ratio")){c.data("ratio",c.height()/c.width())}}};this.attach=function(e){e.handle().on("mousedown",n)};this.update=function(t,i,n){var r=t.find(".note-control-selection");if(i.image){var a=e(i.image);var o=n?a.offset():a.position();var s={w:a.outerWidth(true),h:a.outerHeight(true)};r.css({display:"block",left:o.left,top:o.top,width:s.w,height:s.h}).data("target",i.image);var l=s.w+"x"+s.h;r.find(".note-control-selection-info").text(l)}else{r.hide()}};this.hide=function(e){e.children().hide()}};var M=function(t){var i=e(window);var n=e("html, body");this.toggle=function(e){var r=e.editor(),a=e.toolbar(),o=e.editable(),s=e.codable();var l=function(e){o.css("height",e.h);s.css("height",e.h);if(s.data("cmeditor")){s.data("cmeditor").setsize(null,e.h)}};r.toggleClass("fullscreen");var d=r.hasClass("fullscreen");if(d){o.data("orgheight",o.css("height"));i.on("resize",function(){l({h:i.height()-a.outerHeight()})}).trigger("resize");n.css("overflow","hidden")}else{i.off("resize");l({h:o.data("orgheight")});n.css("overflow","visible")}t.invoke("toolbar.updateFullscreen",a,d)}};var P;if(s.hasCodeMirror){if(s.isSupportAmd){require(["CodeMirror"],function(e){P=e})}else{P=window.CodeMirror}}var R=function(e){this.sync=function(t){var i=e.invoke("codeview.isActivated",t);if(i&&s.hasCodeMirror){t.codable().data("cmEditor").save()}};this.isActivated=function(e){var t=e.editor();return t.hasClass("codeview")};this.toggle=function(e){if(this.isActivated(e)){this.deactivate(e)}else{this.activate(e)}};this.activate=function(t){var i=t.editor(),n=t.toolbar(),r=t.editable(),a=t.codable(),o=t.popover(),l=t.handle();var d=i.data("options");a.val(h.html(r,d.prettifyHtml));a.height(r.height());e.invoke("toolbar.updateCodeview",n,true);e.invoke("popover.hide",o);e.invoke("handle.hide",l);i.addClass("codeview");a.focus();if(s.hasCodeMirror){var c=P.fromTextArea(a[0],d.codemirror);if(d.codemirror.tern){var u=new P.TernServer(d.codemirror.tern);c.ternServer=u;c.on("cursorActivity",function(e){u.updateArgHints(e)})}c.setSize(null,r.outerHeight());a.data("cmEditor",c)}};this.deactivate=function(t){var i=t.holder(),n=t.editor(),r=t.toolbar(),a=t.editable(),o=t.codable();var l=n.data("options");if(s.hasCodeMirror){var d=o.data("cmEditor");o.val(d.getValue());d.toTextArea()}var c=h.value(o,l.prettifyHtml)||h.emptyPara;var u=a.html()!==c;a.html(c);a.height(l.height?o.height():"auto");n.removeClass("codeview");if(u){e.bindCustomEvent(i,a.data("callbacks"),"change")(a.html(),a)}a.focus();e.invoke("toolbar.updateCodeview",r,false)}};var N=function(t){var i=e(document);this.attach=function(e,t){if(t.airMode||t.disableDragAndDrop){i.on("drop",function(e){e.preventDefault()})}else{this.attachDragAndDropEvent(e,t)}};this.attachDragAndDropEvent=function(n,r){var a=e(),o=n.editor(),s=n.dropzone(),l=s.find(".note-dropzone-message");i.on("dragenter",function(e){var i=t.invoke("codeview.isActivated",n);var d=o.width()>0&&o.height()>0;if(!i&&!a.length&&d){o.addClass("dragover");s.width(o.width());s.height(o.height());l.text(r.langInfo.image.dragImageHere)}a=a.add(e.target)}).on("dragleave",function(e){a=a.not(e.target);if(!a.length){o.removeClass("dragover")}}).on("drop",function(){a=e();o.removeClass("dragover")});s.on("dragenter",function(){s.addClass("hover");l.text(r.langInfo.image.dropImage)}).on("dragleave",function(){s.removeClass("hover");l.text(r.langInfo.image.dragImageHere)});s.on("drop",function(i){var n=i.originalEvent.dataTransfer;var r=h.makeLayoutInfo(i.currentTarget||i.target);if(n&&n.files&&n.files.length){i.preventDefault();r.editable().focus();t.insertImages(r,n.files)}else{var a=function(){r.holder().summernote("insertNode",this)};for(var o=0,s=n.types.length;o<s;o++){var l=n.types[o];var d=n.getData(l);if(l.toLowerCase().indexOf("text")>-1){r.holder().summernote("pasteHTML",d)}else{e(d).each(a)}}}}).on("dragover",false)}};var H=function(t){var i;this.attach=function(a){if(s.isMSIE&&s.browserVersion>10||s.isFF){i=e("<div />").attr("contenteditable",true).css({position:"absolute",left:-1e5,opacity:0});a.editable().on("keydown",function(e){if(e.ctrlKey&&e.keyCode===m.code.V){t.invoke("saveRange",a.editable());i.focus();setTimeout(function(){n(a)},0)}});a.editable().before(i)}else{a.editable().on("paste",r)}};var n=function(n){var r=n.editable();var a=i[0].firstChild;if(h.isImg(a)){var o=a.src;var s=atob(o.split(",")[1]);var l=new Uint8Array(s.length);for(var d=0;d<s.length;d++){l[d]=s.charCodeAt(d)}var c=new Blob([l],{type:"image/png"});c.name="clipboard.png";t.invoke("restoreRange",r);t.invoke("focus",r);t.insertImages(n,[c])}else{var u=e("<div />").html(i.html()).html();t.invoke("restoreRange",r);t.invoke("focus",r);if(u){t.invoke("pasteHTML",r,u)}}i.empty()};var r=function(e){var i=e.originalEvent.clipboardData;var n=h.makeLayoutInfo(e.currentTarget||e.target);var r=n.editable();if(i&&i.items&&i.items.length){var a=d.head(i.items);if(a.kind==="file"&&a.type.indexOf("image/")!==-1){t.insertImages(n,[a.getAsFile()])}t.invoke("editor.afterCommand",r)}}};var L=function(t){var i=function(e,t){e.toggleClass("disabled",!t);e.attr("disabled",!t)};var n=function(e,t){e.on("keypress",function(e){if(e.keyCode===m.code.ENTER){t.trigger("click")}})};this.showLinkDialog=function(t,r,a){return e.Deferred(function(e){var t=r.find(".note-link-dialog");var o=t.find(".note-link-text"),s=t.find(".note-link-url"),l=t.find(".note-link-btn"),d=t.find("input[type=checkbox]");t.one("shown.bs.modal",function(){o.val(a.text);o.on("input",function(){i(l,o.val()&&s.val());a.text=o.val()});if(!a.url){a.url=a.text||"http://";i(l,a.text)}s.on("input",function(){i(l,o.val()&&s.val());if(!a.text){o.val(s.val())}}).val(a.url).trigger("focus").trigger("select");n(s,l);n(o,l);d.prop("checked",a.isNewWindow);l.one("click",function(i){i.preventDefault();e.resolve({range:a.range,url:s.val(),text:o.val(),isNewWindow:d.is(":checked")});t.modal("hide")})}).one("hidden.bs.modal",function(){o.off("input keypress");s.off("input keypress");l.off("click");if(e.state()==="pending"){e.reject()}}).modal("show")}).promise()};this.show=function(e){var i=e.editor(),n=e.dialog(),r=e.editable(),a=e.popover(),o=t.invoke("editor.getLinkInfo",r);var s=i.data("options");t.invoke("editor.saveRange",r);this.showLinkDialog(r,n,o).then(function(e){t.invoke("editor.restoreRange",r);t.invoke("editor.createLink",r,e,s);t.invoke("popover.hide",a)}).fail(function(){t.invoke("editor.restoreRange",r)})}};var F=function(t){var i=function(e,t){e.toggleClass("disabled",!t);e.attr("disabled",!t)};var n=function(e,t){e.on("keypress",function(e){if(e.keyCode===m.code.ENTER){t.trigger("click")}})};this.show=function(e){var i=e.dialog(),n=e.editable();t.invoke("editor.saveRange",n);this.showImageDialog(n,i).then(function(i){t.invoke("editor.restoreRange",n);if(typeof i==="string"){t.invoke("editor.insertImage",n,i)}else{t.insertImages(e,i)}}).fail(function(){t.invoke("editor.restoreRange",n)})};this.showImageDialog=function(t,r){return e.Deferred(function(e){var t=r.find(".note-image-dialog");var a=r.find(".note-image-input"),o=r.find(".note-image-url"),s=r.find(".note-image-btn");t.one("shown.bs.modal",function(){a.replaceWith(a.clone().on("change",function(){e.resolve(this.files||this.value);t.modal("hide")}).val(""));s.click(function(i){i.preventDefault();e.resolve(o.val());t.modal("hide")});o.on("keyup paste",function(e){var t;if(e.type==="paste"){t=e.originalEvent.clipboardData.getData("text")}else{t=o.val()}i(s,t)}).val("").trigger("focus");n(o,s)}).one("hidden.bs.modal",function(){a.off("change");o.off("keyup paste keypress");s.off("click");if(e.state()==="pending"){e.reject()}}).modal("show")})}};var $=function(t){this.showHelpDialog=function(t,i){return e.Deferred(function(e){var t=i.find(".note-help-dialog");t.one("hidden.bs.modal",function(){e.resolve()}).modal("show")}).promise()};this.show=function(e){var i=e.dialog(),n=e.editable();t.invoke("editor.saveRange",n,true);this.showHelpDialog(n,i).then(function(){t.invoke("editor.restoreRange",n)})}};var A=function(){var t=this;var i=this.modules={editor:new _(this),toolbar:new T(this),statusbar:new E(this),popover:new D(this),handle:new I(this),fullscreen:new M(this),codeview:new R(this),dragAndDrop:new N(this),clipboard:new H(this),linkDialog:new L(this),imageDialog:new F(this),helpDialog:new $(this)};this.invoke=function(){var e=d.head(d.from(arguments));var t=d.tail(d.from(arguments));var i=e.split(".");var n=i.length>1;var r=n&&d.head(i);var a=n?d.last(i):d.head(i);var o=this.getModule(r);var s=o[a];return s&&s.apply(o,t)};this.getModule=function(e){return this.modules[e]||this.modules.editor};var n=this.bindCustomEvent=function(e,t,i){return function(){var n=t[l.namespaceToCamel(i,"on")];if(n){n.apply(e[0],arguments)}return e.trigger("summernote."+i,arguments)}};this.insertImages=function(t,r){var a=t.editor(),o=t.editable(),s=t.holder();var l=o.data("callbacks");var d=a.data("options");if(l.onImageUpload){n(s,l,"image.upload")(r)}else{e.each(r,function(e,t){var r=t.name;if(d.maximumImageFileSize&&d.maximumImageFileSize<t.size){n(s,l,"image.upload.error")(d.langInfo.image.maximumFileSizeError)}else{v.readFileAsDataURL(t).then(function(e){i.editor.insertImage(o,e,r)}).fail(function(){n(s,l,"image.upload.error")(d.langInfo.image.maximumFileSizeError)})}})}};var r={showLinkDialog:function(e){i.linkDialog.show(e)},showImageDialog:function(e){i.imageDialog.show(e)},showHelpDialog:function(e){i.helpDialog.show(e)},fullscreen:function(e){i.fullscreen.toggle(e)},codeview:function(e){i.codeview.toggle(e)}};var a=function(e){if(h.isImg(e.target)){e.preventDefault()}};var o=function(e){var t=h.makeLayoutInfo(e.currentTarget||e.target);i.editor.removeBogus(t.editable());c(e)};this.updateStyleInfo=function(e,t){if(!e){return}var n=t.editor().data("options").airMode;if(!n){i.toolbar.update(t.toolbar(),e)}i.popover.update(t.popover(),e,n);i.handle.update(t.handle(),e,n)};var c=function(e){var n=e.target;setTimeout(function(){var e=h.makeLayoutInfo(n);var r=i.editor.currentStyle(n);t.updateStyleInfo(r,e)},0)};var u=function(e){var t=h.makeLayoutInfo(e.currentTarget||e.target);i.popover.hide(t.popover());i.handle.hide(t.handle())};var f=function(t){var i=e(t.target).closest("[data-event]");if(i.length){t.preventDefault()}};var p=function(t){var n=e(t.target).closest("[data-event]");if(!n.length){return}var a=n.attr("data-event"),o=n.attr("data-value"),s=n.attr("data-hide");var l=h.makeLayoutInfo(t.target);var u;if(e.inArray(a,["resize","floatMe","removeMedia","imageShape"])!==-1){var f=l.handle().find(".note-control-selection");u=e(f.data("target"))}if(s){n.parents(".popover").hide()}if(e.isFunction(e.summernote.pluginEvents[a])){e.summernote.pluginEvents[a](t,i.editor,l,o)}else if(i.editor[a]){var p=l.editable();p.focus();i.editor[a](p,o,u);t.preventDefault()}else if(r[a]){r[a].call(this,l);t.preventDefault()}if(e.inArray(a,["backColor","foreColor"])!==-1){var v=l.editor().data("options",v);var m=v.airMode?i.popover:i.toolbar;m.updateRecentColor(d.head(n),a,o)}c(t)};var b=18;var y=function(t,i){var n=e(t.target.parentNode);var r=n.next();var a=n.find(".note-dimension-picker-mousecatcher");var o=n.find(".note-dimension-picker-highlighted");var s=n.find(".note-dimension-picker-unhighlighted");var l;if(t.offsetX===undefined){var d=e(t.target).offset();l={x:t.pageX-d.left,y:t.pageY-d.top}}else{l={x:t.offsetX,y:t.offsetY}}var c={c:Math.ceil(l.x/b)||1,r:Math.ceil(l.y/b)||1};o.css({width:c.c+"em",height:c.r+"em"
});a.attr("data-value",c.c+"x"+c.r);if(3<c.c&&c.c<i.insertTableMaxSize.col){s.css({width:c.c+1+"em"})}if(3<c.r&&c.r<i.insertTableMaxSize.row){s.css({height:c.r+1+"em"})}r.html(c.c+" x "+c.r)};this.bindKeyMap=function(t,n){var a=t.editor();var o=t.editable();o.on("keydown",function(s){var l=[];if(s.metaKey){l.push("CMD")}if(s.ctrlKey&&!s.altKey){l.push("CTRL")}if(s.shiftKey){l.push("SHIFT")}var d=m.nameFromCode[s.keyCode];if(d){l.push(d)}var c;var u=l.join("+");var h=n[u];if(h){c=e.summernote.pluginEvents[u];if(e.isFunction(c)){if(c(s,i.editor,t)){return false}}c=e.summernote.pluginEvents[h];if(e.isFunction(c)){c(s,i.editor,t)}else if(i.editor[h]){i.editor[h](o,a.data("options"));s.preventDefault()}else if(r[h]){r[h].call(this,t);s.preventDefault()}}else if(m.isEdit(s.keyCode)){i.editor.afterCommand(o)}})};this.attach=function(e,t){if(t.shortcuts){this.bindKeyMap(e,t.keyMap[s.isMac?"mac":"pc"])}e.editable().on("mousedown",a);e.editable().on("keyup mouseup",o);e.editable().on("scroll",u);i.clipboard.attach(e,t);i.handle.attach(e,t);e.popover().on("click",p);e.popover().on("mousedown",f);i.dragAndDrop.attach(e,t);if(!t.airMode){e.toolbar().on("click",p);e.toolbar().on("mousedown",f);i.statusbar.attach(e,t)}var n=t.airMode?e.popover():e.toolbar();var r=n.find(".note-dimension-picker-mousecatcher");r.css({width:t.insertTableMaxSize.col+"em",height:t.insertTableMaxSize.row+"em"}).on("mousemove",function(e){y(e,t)});e.editor().data("options",t);if(!s.isMSIE){setTimeout(function(){document.execCommand("styleWithCSS",0,t.styleWithSpan)},0)}var l=new g(e.editable());e.editable().data("NoteHistory",l);e.editable().data("callbacks",{onInit:t.onInit,onFocus:t.onFocus,onBlur:t.onBlur,onKeydown:t.onKeydown,onKeyup:t.onKeyup,onMousedown:t.onMousedown,onEnter:t.onEnter,onPaste:t.onPaste,onBeforeCommand:t.onBeforeCommand,onChange:t.onChange,onImageUpload:t.onImageUpload,onImageUploadError:t.onImageUploadError,onMediaDelete:t.onMediaDelete,onToolbarClick:t.onToolbarClick});var d=i.editor.styleFromNode(e.editable());this.updateStyleInfo(d,e)};this.attachCustomEvent=function(t,i){var r=t.holder();var a=t.editable();var o=a.data("callbacks");a.focus(n(r,o,"focus"));a.blur(n(r,o,"blur"));a.keydown(function(e){if(e.keyCode===m.code.ENTER){n(r,o,"enter").call(this,e)}n(r,o,"keydown").call(this,e)});a.keyup(n(r,o,"keyup"));a.on("mousedown",n(r,o,"mousedown"));a.on("mouseup",n(r,o,"mouseup"));a.on("scroll",n(r,o,"scroll"));a.on("paste",n(r,o,"paste"));var l=s.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";a.on(l,function(){n(r,o,"change")(a.html(),a)});if(!i.airMode){t.toolbar().click(n(r,o,"toolbar.click"));t.popover().click(n(r,o,"popover.click"))}if(h.isTextarea(d.head(r))){r.closest("form").submit(function(e){t.holder().val(t.holder().code());n(r,o,"submit").call(this,e,r.code())})}if(h.isTextarea(d.head(r))&&i.textareaAutoSync){r.on("summernote.change",function(){t.holder().val(t.holder().code())})}n(r,o,"init")(t);for(var c=0,u=e.summernote.plugins.length;c<u;c++){if(e.isFunction(e.summernote.plugins[c].init)){e.summernote.plugins[c].init(t)}}};this.detach=function(e,t){e.holder().off();e.editable().off();e.popover().off();e.handle().off();e.dialog().off();if(!t.airMode){e.dropzone().off();e.toolbar().off();e.statusbar().off()}}};var O=function(){var t=function(e,t){var i=t.event;var n=t.value;var r=t.title;var a=t.className;var o=t.dropdown;var s=t.hide;return(o?'<div class="btn-group'+(a?" "+a:"")+'">':"")+'<button type="button"'+' class="btn btn-default btn-sm'+(!o&&a?" "+a:"")+(o?" dropdown-toggle":"")+'"'+(o?' data-toggle="dropdown"':"")+(r?' title="'+r+'"':"")+(i?' data-event="'+i+'"':"")+(n?" data-value='"+n+"'":"")+(s?" data-hide='"+s+"'":"")+' tabindex="-1">'+e+(o?' <span class="caret"></span>':"")+"</button>"+(o||"")+(o?"</div>":"")};var i=function(e,i){var n='<i class="'+e+'"></i>';return t(n,i)};var n=function(t,i){var n=e('<div class="'+t+' popover bottom in" style="display: none;">'+'<div class="arrow"></div>'+'<div class="popover-content">'+"</div>"+"</div>");n.find(".popover-content").append(i);return n};var r=function(e,t,i,n){return'<div class="'+e+' modal" aria-hidden="false">'+'<div class="modal-dialog">'+'<div class="modal-content">'+(t?'<div class="modal-header">'+'<button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button>'+'<h4 class="modal-title">'+t+"</h4>"+"</div>":"")+'<div class="modal-body">'+i+"</div>"+(n?'<div class="modal-footer">'+n+"</div>":"")+"</div>"+"</div>"+"</div>"};var a=function(e,t,i){var n="dropdown-menu"+(t?" "+t:"");i=i||"ul";if(e instanceof Array){e=e.join("")}return"<"+i+' class="'+n+'">'+e+"</"+i+">"};var o={picture:function(e,t){return i(t.iconPrefix+t.icons.image.image,{event:"showImageDialog",title:e.image.image,hide:true})},link:function(e,t){return i(t.iconPrefix+t.icons.link.link,{event:"showLinkDialog",title:e.link.link,hide:true})},table:function(e,t){var n=['<div class="note-dimension-picker">','<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>','<div class="note-dimension-picker-highlighted"></div>','<div class="note-dimension-picker-unhighlighted"></div>',"</div>",'<div class="note-dimension-display"> 1 x 1 </div>'];return i(t.iconPrefix+t.icons.table.table,{title:e.table.table,dropdown:a(n,"note-table")})},style:function(e,t){var n=t.styleTags.reduce(function(t,i){var n=e.style[i==="p"?"normal":i];return t+'<li><a data-event="formatBlock" href="#" data-value="'+i+'">'+(i==="p"||i==="pre"?n:"<"+i+">"+n+"</"+i+">")+"</a></li>"},"");return i(t.iconPrefix+t.icons.style.style,{title:e.style.style,dropdown:a(n)})},fontname:function(e,i){var n=[];var r=i.fontNames.reduce(function(e,t){if(!s.isFontInstalled(t)&&!d.contains(i.fontNamesIgnoreCheck,t)){return e}n.push(t);return e+'<li><a data-event="fontName" href="#" data-value="'+t+'" style="font-family:\''+t+"'\">"+'<i class="'+i.iconPrefix+i.icons.misc.check+'"></i> '+t+"</a></li>"},"");var o=s.isFontInstalled(i.defaultFontName);var l=o?i.defaultFontName:n[0];var c='<span class="note-current-fontname">'+l+"</span>";return t(c,{title:e.font.name,className:"note-fontname",dropdown:a(r,"note-check")})},fontsize:function(e,i){var n=i.fontSizes.reduce(function(e,t){return e+'<li><a data-event="fontSize" href="#" data-value="'+t+'">'+'<i class="'+i.iconPrefix+i.icons.misc.check+'"></i> '+t+"</a></li>"},"");var r='<span class="note-current-fontsize">11</span>';return t(r,{title:e.font.size,className:"note-fontsize",dropdown:a(n,"note-check")})},color:function(e,i){var n='<i class="'+i.iconPrefix+i.icons.color.recent+'" style="color:black;background-color:yellow;"></i>';var r=t(n,{className:"note-recent-color",title:e.color.recent,event:"color",value:'{"backColor":"yellow"}'});var o=['<li><div class="btn-group">','<div class="note-palette-title">'+e.color.background+"</div>",'<div class="note-color-reset" data-event="backColor"',' data-value="inherit" title="'+e.color.transparent+'">'+e.color.setTransparent+"</div>",'<div class="note-color-palette" data-target-event="backColor"></div>','</div><div class="btn-group">','<div class="note-palette-title">'+e.color.foreground+"</div>",'<div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+e.color.reset+'">',e.color.resetToDefault,"</div>",'<div class="note-color-palette" data-target-event="foreColor"></div>',"</div></li>"];var s=t("",{title:e.color.more,dropdown:a(o)});return r+s},bold:function(e,t){return i(t.iconPrefix+t.icons.font.bold,{event:"bold",title:e.font.bold})},italic:function(e,t){return i(t.iconPrefix+t.icons.font.italic,{event:"italic",title:e.font.italic})},underline:function(e,t){return i(t.iconPrefix+t.icons.font.underline,{event:"underline",title:e.font.underline})},strikethrough:function(e,t){return i(t.iconPrefix+t.icons.font.strikethrough,{event:"strikethrough",title:e.font.strikethrough})},superscript:function(e,t){return i(t.iconPrefix+t.icons.font.superscript,{event:"superscript",title:e.font.superscript})},subscript:function(e,t){return i(t.iconPrefix+t.icons.font.subscript,{event:"subscript",title:e.font.subscript})},clear:function(e,t){return i(t.iconPrefix+t.icons.font.clear,{event:"removeFormat",title:e.font.clear})},ul:function(e,t){return i(t.iconPrefix+t.icons.lists.unordered,{event:"insertUnorderedList",title:e.lists.unordered})},ol:function(e,t){return i(t.iconPrefix+t.icons.lists.ordered,{event:"insertOrderedList",title:e.lists.ordered})},paragraph:function(e,t){var n=i(t.iconPrefix+t.icons.paragraph.left,{title:e.paragraph.left,event:"justifyLeft"});var r=i(t.iconPrefix+t.icons.paragraph.center,{title:e.paragraph.center,event:"justifyCenter"});var o=i(t.iconPrefix+t.icons.paragraph.right,{title:e.paragraph.right,event:"justifyRight"});var s=i(t.iconPrefix+t.icons.paragraph.justify,{title:e.paragraph.justify,event:"justifyFull"});var l=i(t.iconPrefix+t.icons.paragraph.outdent,{title:e.paragraph.outdent,event:"outdent"});var d=i(t.iconPrefix+t.icons.paragraph.indent,{title:e.paragraph.indent,event:"indent"});var c=['<div class="note-align btn-group">',n+r+o+s,'</div><div class="note-list btn-group">',d+l,"</div>"];return i(t.iconPrefix+t.icons.paragraph.paragraph,{title:e.paragraph.paragraph,dropdown:a(c,"","div")})},height:function(e,t){var n=t.lineHeights.reduce(function(e,i){return e+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(i)+'">'+'<i class="'+t.iconPrefix+t.icons.misc.check+'"></i> '+i+"</a></li>"},"");return i(t.iconPrefix+t.icons.font.height,{title:e.font.height,dropdown:a(n,"note-check")})},help:function(e,t){return i(t.iconPrefix+t.icons.options.help,{event:"showHelpDialog",title:e.options.help,hide:true})},fullscreen:function(e,t){return i(t.iconPrefix+t.icons.options.fullscreen,{event:"fullscreen",title:e.options.fullscreen})},codeview:function(e,t){return i(t.iconPrefix+t.icons.options.codeview,{event:"codeview",title:e.options.codeview})},undo:function(e,t){return i(t.iconPrefix+t.icons.history.undo,{event:"undo",title:e.history.undo})},redo:function(e,t){return i(t.iconPrefix+t.icons.history.redo,{event:"redo",title:e.history.redo})},hr:function(e,t){return i(t.iconPrefix+t.icons.hr.insert,{event:"insertHorizontalRule",title:e.hr.insert})}};var c=function(r,a){var s=function(){var e=i(a.iconPrefix+a.icons.link.edit,{title:r.link.edit,event:"showLinkDialog",hide:true});var t=i(a.iconPrefix+a.icons.link.unlink,{title:r.link.unlink,event:"unlink"});var o='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;'+'<div class="note-insert btn-group">'+e+t+"</div>";return n("note-link-popover",o)};var l=function(){var e=t('<span class="note-fontsize-10">100%</span>',{title:r.image.resizeFull,event:"resize",value:"1"});var o=t('<span class="note-fontsize-10">50%</span>',{title:r.image.resizeHalf,event:"resize",value:"0.5"});var s=t('<span class="note-fontsize-10">25%</span>',{title:r.image.resizeQuarter,event:"resize",value:"0.25"});var l=i(a.iconPrefix+a.icons.image.floatLeft,{title:r.image.floatLeft,event:"floatMe",value:"left"});var d=i(a.iconPrefix+a.icons.image.floatRight,{title:r.image.floatRight,event:"floatMe",value:"right"});var c=i(a.iconPrefix+a.icons.image.floatNone,{title:r.image.floatNone,event:"floatMe",value:"none"});var u=i(a.iconPrefix+a.icons.image.shapeRounded,{title:r.image.shapeRounded,event:"imageShape",value:"img-rounded"});var h=i(a.iconPrefix+a.icons.image.shapeCircle,{title:r.image.shapeCircle,event:"imageShape",value:"img-circle"});var f=i(a.iconPrefix+a.icons.image.shapeThumbnail,{title:r.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"});var p=i(a.iconPrefix+a.icons.image.shapeNone,{title:r.image.shapeNone,event:"imageShape",value:""});var v=i(a.iconPrefix+a.icons.image.remove,{title:r.image.remove,event:"removeMedia",value:"none"});var m=(a.disableResizeImage?"":'<div class="btn-group">'+e+o+s+"</div>")+'<div class="btn-group">'+l+d+c+"</div><br>"+'<div class="btn-group">'+u+h+f+p+"</div>"+'<div class="btn-group">'+v+"</div>";return n("note-image-popover",m)};var d=function(){var t=e("<div />");for(var i=0,s=a.airPopover.length;i<s;i++){var l=a.airPopover[i];var d=e('<div class="note-'+l[0]+' btn-group">');for(var c=0,u=l[1].length;c<u;c++){var h=e(o[l[1][c]](r,a));h.attr("data-name",l[1][c]);d.append(h)}t.append(d)}return n("note-air-popover",t.children())};var c=e('<div class="note-popover" />');c.append(s());c.append(l());if(a.airMode){c.append(d())}return c};var u=function(e){return'<div class="note-handle">'+'<div class="note-control-selection">'+'<div class="note-control-selection-bg"></div>'+'<div class="note-control-holder note-control-nw"></div>'+'<div class="note-control-holder note-control-ne"></div>'+'<div class="note-control-holder note-control-sw"></div>'+'<div class="'+(e.disableResizeImage?"note-control-holder":"note-control-sizing")+' note-control-se"></div>'+(e.disableResizeImage?"":'<div class="note-control-selection-info"></div>')+"</div>"+"</div>"};var f=function(e,t){var i="note-shortcut-col col-xs-6 note-shortcut-";var n=[];for(var r in t){if(t.hasOwnProperty(r)){n.push('<div class="'+i+'key">'+t[r].kbd+"</div>"+'<div class="'+i+'name">'+t[r].text+"</div>")}}return'<div class="note-shortcut-row row"><div class="'+i+'title col-xs-offset-6">'+e+"</div></div>"+'<div class="note-shortcut-row row">'+n.join('</div><div class="note-shortcut-row row">')+"</div>"};var p=function(e){var t=[{kbd:"��? + B",text:e.font.bold},{kbd:"��? + I",text:e.font.italic},{kbd:"��? + U",text:e.font.underline},{kbd:"��? + \\",text:e.font.clear}];return f(e.shortcut.textFormatting,t)};var v=function(e){var t=[{kbd:"��? + Z",text:e.history.undo},{kbd:"��? + ��? + Z",text:e.history.redo},{kbd:"��? + ]",text:e.paragraph.indent},{kbd:"��? + [",text:e.paragraph.outdent},{kbd:"��? + ENTER",text:e.hr.insert}];return f(e.shortcut.action,t)};var m=function(e){var t=[{kbd:"��? + ��? + L",text:e.paragraph.left},{kbd:"��? + ��? + E",text:e.paragraph.center},{kbd:"��? + ��? + R",text:e.paragraph.right},{kbd:"��? + ��? + J",text:e.paragraph.justify},{kbd:"��? + ��? + NUM7",text:e.lists.ordered},{kbd:"��? + ��? + NUM8",text:e.lists.unordered}];return f(e.shortcut.paragraphFormatting,t)};var g=function(e){var t=[{kbd:"��? + NUM0",text:e.style.normal},{kbd:"��? + NUM1",text:e.style.h1},{kbd:"��? + NUM2",text:e.style.h2},{kbd:"��? + NUM3",text:e.style.h3},{kbd:"��? + NUM4",text:e.style.h4},{kbd:"��? + NUM5",text:e.style.h5},{kbd:"��? + NUM6",text:e.style.h6}];return f(e.shortcut.documentStyle,t)};var b=function(e,t){var i=t.extraKeys;var n=[];for(var r in i){if(i.hasOwnProperty(r)){n.push({kbd:r,text:i[r]})}}return f(e.shortcut.extraKeys,n)};var y=function(e,t){var i='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"';var n=["<div "+i+">"+v(e,t)+"</div>"+"<div "+i+">"+p(e,t)+"</div>","<div "+i+">"+g(e,t)+"</div>"+"<div "+i+">"+m(e,t)+"</div>"];if(t.extraKeys){n.push("<div "+i+">"+b(e,t)+"</div>")}return'<div class="note-shortcut-row row">'+n.join('</div><div class="note-shortcut-row row">')+"</div>"};var w=function(e){return e.replace(/��?/g,"Ctrl").replace(/��?/g,"Shift")};var C={image:function(e,t){var i="";if(t.maximumImageFileSize){var n=Math.floor(Math.log(t.maximumImageFileSize)/Math.log(1024));var a=(t.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)*1+" "+" KMGTP"[n]+"B";i="<small>"+e.image.maximumFileSize+" : "+a+"</small>"}var o='<div class="form-group row note-group-select-from-files">'+"<label>"+e.image.selectFromFiles+"</label>"+'<input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+i+"</div>"+'<div class="form-group row">'+"<label>"+e.image.url+"</label>"+'<input class="note-image-url form-control col-md-12" type="text" />'+"</div>";var s='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+e.image.insert+"</button>";return r("note-image-dialog",e.image.insert,o,s)},link:function(e,t){var i='<div class="form-group row">'+"<label>"+e.link.textToDisplay+"</label>"+'<input class="note-link-text form-control col-md-12" type="text" />'+"</div>"+'<div class="form-group row">'+"<label>"+e.link.url+"</label>"+'<input class="note-link-url form-control col-md-12" type="text" value="http://" />'+"</div>"+(!t.disableLinkTarget?'<div class="checkbox">'+"<label>"+'<input type="checkbox" checked> '+e.link.openInNewWindow+"</label>"+"</div>":"");var n='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+e.link.insert+"</button>";return r("note-link-dialog",e.link.insert,i,n)},help:function(e,t){var i='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+e.shortcut.close+"</a>"+'<div class="title">'+e.shortcut.shortcuts+"</div>"+(s.isMac?y(e,t):w(y(e,t)))+'<p class="text-center">'+'<a href="//summernote.org/" target="_blank">Summernote 0.6.16</a> · '+'<a href="//github.com/summernote/summernote" target="_blank">Project</a> · '+'<a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a>'+"</p>";return r("note-help-dialog","",i,"")}};var S=function(t,i){var n="";e.each(C,function(e,r){n+=r(t,i)});return'<div class="note-dialog">'+n+"</div>"};var _=function(){return'<div class="note-resizebar">'+'<div class="note-icon-bar"></div>'+'<div class="note-icon-bar"></div>'+'<div class="note-icon-bar"></div>'+"</div>"};var x=function(e){if(s.isMac){e=e.replace("CMD","��?").replace("SHIFT","��?")}return e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")};var T=function(t,i,n){var r=l.invertObject(i);var a=t.find("button");a.each(function(t,i){var n=e(i);var a=r[n.data("event")];if(a){n.attr("title",function(e,t){return t+" ("+x(a)+")"})}}).tooltip({container:"body",trigger:"hover",placement:n||"top"}).on("click",function(){e(this).tooltip("hide")})};var k=function(t,i){var n=i.colors;t.find(".note-color-palette").each(function(){var t=e(this),i=t.attr("data-target-event");var r=[];for(var a=0,o=n.length;a<o;a++){var s=n[a];var l=[];for(var d=0,c=s.length;d<c;d++){var u=s[d];l.push(['<button type="button" class="note-color-btn" style="background-color:',u,';" data-event="',i,'" data-value="',u,'" title="',u,'" data-toggle="button" tabindex="-1"></button>'].join(""))}r.push('<div class="note-color-row">'+l.join("")+"</div>")}t.html(r.join(""))})};this.createLayoutByAirMode=function(t,i){var n=i.langInfo;var r=i.keyMap[s.isMac?"mac":"pc"];var a=l.uniqueId();t.addClass("note-air-editor note-editable panel-body");t.attr({id:"note-editor-"+a,contentEditable:true});var o=document.body;var d=e(c(n,i));d.addClass("note-air-layout");d.attr("id","note-popover-"+a);d.appendTo(o);T(d,r);k(d,i);var h=e(u(i));h.addClass("note-air-layout");h.attr("id","note-handle-"+a);h.appendTo(o);var f=e(S(n,i));f.addClass("note-air-layout");f.attr("id","note-dialog-"+a);f.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").modal("hide")});f.appendTo(o)};this.createLayoutByFrame=function(t,i){var n=i.langInfo;var r=e('<div class="note-editor panel panel-default" />');if(i.width){r.width(i.width)}if(i.height>0){e('<div class="note-statusbar">'+(i.disableResizeEditor?"":_())+"</div>").prependTo(r)}var a=e('<div class="note-editing-area" />');var l=!t.is(":disabled");var d=e('<div class="note-editable panel-body" contentEditable="'+l+'"></div>').prependTo(a);if(i.height){d.height(i.height)}if(i.direction){d.attr("dir",i.direction)}var f=t.attr("placeholder")||i.placeholder;if(f){d.attr("data-placeholder",f)}d.html(h.html(t)||h.emptyPara);e('<textarea class="note-codable"></textarea>').prependTo(a);var p=e(c(n,i)).prependTo(a);k(p,i);T(p,I);e(u(i)).prependTo(a);a.prependTo(r);var v=e('<div class="note-toolbar panel-heading" />');for(var m=0,g=i.toolbar.length;m<g;m++){var b=i.toolbar[m][0];var y=i.toolbar[m][1];var w=e('<div class="note-'+b+' btn-group" />');for(var C=0,x=y.length;C<x;C++){var E=o[y[C]];if(!e.isFunction(E)){continue}var D=e(E(n,i));D.attr("data-name",y[C]);w.append(D)}v.append(w)}var I=i.keyMap[s.isMac?"mac":"pc"];k(v,i);T(v,I,"bottom");v.prependTo(r);e('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(r);var M=i.dialogsInBody?e(document.body):r;var P=e(S(n,i)).prependTo(M);P.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").modal("hide")});r.insertAfter(t);t.hide()};this.hasNoteEditor=function(e){return this.noteEditorFromHolder(e).length>0};this.noteEditorFromHolder=function(t){if(t.hasClass("note-air-editor")){return t}else if(t.next().hasClass("note-editor")){return t.next()}else{return e()}};this.createLayout=function(e,t){if(t.airMode){this.createLayoutByAirMode(e,t)}else{this.createLayoutByFrame(e,t)}};this.layoutInfoFromHolder=function(e){var t=this.noteEditorFromHolder(e);if(!t.length){return}t.data("holder",e);return h.buildLayoutInfo(t)};this.removeLayout=function(e,t,i){if(i.airMode){e.removeClass("note-air-editor note-editable").removeAttr("id contentEditable");t.popover().remove();t.handle().remove();t.dialog().remove()}else{e.html(t.editable().html());if(i.dialogsInBody){t.dialog().remove()}t.editor().remove();e.show()}};this.getTemplate=function(){return{button:t,iconButton:i,dialog:r}};this.addButtonInfo=function(e,t){o[e]=t};this.addDialogInfo=function(e,t){C[e]=t}};e.summernote=e.summernote||{};e.extend(e.summernote,p);var z=new O;var B=new A;e.extend(e.summernote,{renderer:z,eventHandler:B,core:{agent:s,list:d,dom:h,range:f},pluginEvents:{},plugins:[]});e.summernote.addPlugin=function(t){e.summernote.plugins.push(t);if(t.buttons){e.each(t.buttons,function(e,t){z.addButtonInfo(e,t)})}if(t.dialogs){e.each(t.dialogs,function(e,t){z.addDialogInfo(e,t)})}if(t.events){e.each(t.events,function(t,i){e.summernote.pluginEvents[t]=i})}if(t.langs){e.each(t.langs,function(t,i){if(e.summernote.lang[t]){e.extend(e.summernote.lang[t],i)}})}if(t.options){e.extend(e.summernote.options,t.options)}};e.fn.extend({summernote:function(){var t=e.type(d.head(arguments));var i=t==="string";var n=t==="object";var r=n?d.head(arguments):{};r=e.extend({},e.summernote.options,r);r.icons=e.extend({},e.summernote.options.icons,r.icons);r.langInfo=e.extend(true,{},e.summernote.lang["en-US"],e.summernote.lang[r.lang]);if(!i&&n){for(var a=0,o=e.summernote.plugins.length;a<o;a++){var s=e.summernote.plugins[a];if(r.plugin[s.name]){e.summernote.plugins[a]=e.extend(true,s,r.plugin[s.name])}}}this.each(function(t,i){var n=e(i);if(!z.hasNoteEditor(n)){z.createLayout(n,r);var a=z.layoutInfoFromHolder(n);n.data("layoutInfo",a);B.attach(a,r);B.attachCustomEvent(a,r)}});var l=this.first();if(l.length){var c=z.layoutInfoFromHolder(l);if(i){var u=d.head(d.from(arguments));var h=d.tail(d.from(arguments));var f=[u,c.editable()].concat(h);return B.invoke.apply(B,f)}else if(r.focus){c.editable().focus()}}return this},code:function(t){if(t===undefined){var i=this.first();if(!i.length){return}var n=z.layoutInfoFromHolder(i);var r=n&&n.editable();if(r&&r.length){var a=B.invoke("codeview.isActivated",n);B.invoke("codeview.sync",n);return a?n.codable().val():n.editable().html()}return h.value(i)}this.each(function(i,n){var r=z.layoutInfoFromHolder(e(n));var a=r&&r.editable();if(a){a.html(t)}});return this},destroy:function(){this.each(function(t,i){var n=e(i);if(!z.hasNoteEditor(n)){return}var r=z.layoutInfoFromHolder(n);var a=r.editor().data("options");B.detach(r,a);z.removeLayout(n,r,a)});return this}})});